<rss version="2.0" 
  xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>class on TrozWare</title>
    <link>https://troz.net/tags/class/</link>
    <description>Recent content in class on TrozWare</description>
    <generator>Hugo -- gohugo.io</generator>
    <copyright>© 2012 - 2022 Sarah Reichelt, TrozWare</copyright>
    <lastBuildDate>Wed, 30 Mar 2016 00:00:00 +0000</lastBuildDate>
    
        <atom:link href="https://troz.net/tags/class/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
<title>Site Search</title>
<link>https://troz.net/post/2021/site_search/</link>
<pubDate>Mon, 25 Oct 2021 09:57:12 +1000</pubDate>
      
      <guid>https://troz.net/post/2021/site_search/</guid>
<description>&lt;p&gt;Not much action on the site lately as I work on other projects. But I have finally got around to adding a search option to the site.&lt;/p&gt;
&lt;p&gt;I use &lt;a href=&#34;https://gohugo.io/&#34;&gt;Hugo&lt;/a&gt; as a static site generator, which is great but Hugo doesn&amp;rsquo;t come with any search facility.&lt;/p&gt;
&lt;p&gt;Today, I read an article by Jesse Squires on &lt;a href=&#34;https://www.jessesquires.com/blog/2018/02/25/replacing-google-with-duckduckgo/&#34;&gt;Replacing Google Search with DuckDuckGo&lt;/a&gt; and while I had already switched to using &lt;a href=&#34;https://duckduckgo.com&#34;&gt;DuckDuckGo&lt;/a&gt; for my own web searching, I had not considered it for my site search.&lt;/p&gt;
&lt;p&gt;It isn&amp;rsquo;t as good as an in-built search page, which I have considered setting up using &lt;a href=&#34;https://www.algolia.com&#34;&gt;Algolia&lt;/a&gt;, but that requires a lot of setup and I never got round to it. This search takes you out of my site and into a DuckDuckGo page, but it limits the search options to the troz.net domain.&lt;/p&gt;
&lt;p&gt;To access the search, go to either the &lt;a href=&#34;https://troz.net/post/&#34;&gt;Archives&lt;/a&gt; or the &lt;a href=&#34;https://troz.net/tags/&#34;&gt;Tags&lt;/a&gt; page, and use the search field at the top of the page.&lt;/p&gt;
&lt;p&gt;As a side note, if you are using DuckDuckGo as your regular search engine, read up about their &lt;a href=&#34;https://duckduckgo.com/bang&#34;&gt;!bangs&lt;/a&gt;. These are quick and easy ways to target your search. you can prefix your search with &lt;code&gt;!so&lt;/code&gt; to search Stack Overflow, or &lt;code&gt;!i&lt;/code&gt; to search for images. Search the &lt;a href=&#34;https://duckduckgo.com/bang&#34;&gt;!bangs&lt;/a&gt; page to find the ones that are useful to you.&lt;/p&gt;</description>
</item>
    
    <item>
<title>The Apple DTK Gamble</title>
<link>https://troz.net/post/2021/apple_dtk_gamble/</link>
<pubDate>Thu, 04 Feb 2021 18:57:21 +1000</pubDate>
      
      <guid>https://troz.net/post/2021/apple_dtk_gamble/</guid>
<description>&lt;p&gt;So I gambled…&lt;/p&gt;
&lt;p&gt;I hoped Apple would do the right thing by developers who paid for access to the Developer Transition Kit (DTK) to get the first Apple Silicon Macs, but I was wrong and I lost.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;UPDATE - 6 Feb 2020:&lt;/strong&gt; Apple has responded to feedback from me and other disgruntled developers and so I didn&amp;rsquo;t lose as much as I thought. Apple is now giving US $500 credit, which is what developers in the US paid for the DTK, and they are extending the time limit to the end of the year. I am quite certain they will release a desktop M1 Mac before then, so I will get credit for most of the cost of the DTK (after exchange rate losses) and I will be able to use the credit towards a Mac that I want.&lt;/p&gt;
&lt;p&gt;Thanks Apple for listening and reacting.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;I paid Apple AU $779 for a year’s lease on a DTK which was effectively a Mac mini with an iPad CPU.
I also had to buy a monitor to use with it.&lt;/p&gt;
&lt;p&gt;That was in June 2020.&lt;/p&gt;
&lt;p&gt;In November 2020, the M1 was released which made the A14Z based DTK totally irrelevant for testing or development, so the lease effectively only lasted for 5 months. At that I was luckier than many devs as a lot of these DTK machines started failing at around the 4 month mark.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;I kept Apple’s secrets.&lt;/li&gt;
&lt;li&gt;I tested their hardware and software.&lt;/li&gt;
&lt;li&gt;I filed bug reports, a couple of which even got acknowledged.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;And in return, I get asked to send back the DTK some months early for which I will get the princely reward of US $200 credit.&lt;/p&gt;
&lt;p&gt;When Apple switched over to Intel CPUs, they gave the DTK buyers a free computer when they returned the DTK, but of course Apple wasn&amp;rsquo;t a trillion dollar company back then so they could afford to be generous. (How does one indicate heavy sarcasm in text?)&lt;/p&gt;
&lt;p&gt;I don’t want a laptop, I want a desktop Mac, so there is nothing to spend my $200 credit on yet, but as a final sting in the tail, Apple has decreed that the credit expires at the end of May 2021. There is no guarantee that there will be desktop Mac to buy before then. Only Apple knows that and they have made me cynical enough to consider that they might decide not to release any new Macs until after these credits expire.&lt;/p&gt;
&lt;p&gt;I realize that Apple made no commitment to do anything after the DTK program was over, but history indicated they would.&lt;/p&gt;
&lt;p&gt;The smallness of the credit and the short time limit on it seem unnecessarily petty and punitive, especially when the people they are punishing are the ones that add so much value to the Apple platforms.&lt;/p&gt;
&lt;p&gt;Assuming I have to get a laptop, I will want a high-powered one as it will have to be able to run Xcode. Apple&amp;rsquo;s flagship developer tool is famously demanding.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;In the US, the one I want costs US $1,899&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Here in Australia, it is AU $2,899 - 1.53 times the US price.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The US$200 credit will use the exchange rate at 23 December 2020, which for USD - AUD was 1.3218 which is significantly lower than the ratio in Apple’s pricing between the two countries.&lt;/p&gt;
&lt;p&gt;This means that I will get AU $264.36 for my credit, which is 9% of the cost of the computer to replace it, even though that is not the computer I actually want.&lt;/p&gt;
&lt;p&gt;Financially, I would have been much better off waiting until the M1s were released. But Apple needed the early machines tested, so they suckered us in and then slapped us in the face.&lt;/p&gt;
&lt;p&gt;I wonder how Tim Cook and the others can stand up again and again and say that they value their developers. Does that not make them feel ashamed? Or maybe they struggle not to laugh while saying it?&lt;/p&gt;
&lt;p&gt;Thanks Apple.&lt;/p&gt;
&lt;p&gt;And good luck finding suckers to test your next round of new hardware.&lt;/p&gt;</description>
</item>
    
    <item>
<title>SwifUI Mac Menus</title>
<link>https://troz.net/post/2021/swiftui_mac_menus/</link>
<pubDate>Sun, 24 Jan 2021 15:24:17 +1000</pubDate>
      
      <guid>https://troz.net/post/2021/swiftui_mac_menus/</guid>
<description>&lt;p&gt;With the option to create apps using the &lt;strong&gt;SwiftUI App&lt;/strong&gt; life cycle, we get a new way to set up menus in Mac apps. This post will explore some of the ways to do this as well as look at the default menu groups that Apple gives us.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;When you create a new Mac app, the standard menu items are included for you. Using the &lt;code&gt;commands&lt;/code&gt; modifier on the &lt;code&gt;WindowGroup&lt;/code&gt; allows you to add new menus, add new menu items and to replace or remove existing menu items.&lt;/p&gt;
&lt;h2 id=&#34;adding-a-new-menu&#34;&gt;Adding a New Menu&lt;/h2&gt;
&lt;p&gt;To add a completely new menu, you can use &lt;code&gt;CommandMenu&lt;/code&gt;, supplying it with a title and the contents to display.&lt;/p&gt;
&lt;p&gt;After starting this process, the App.swift file looks like this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;@main
&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;MenuSamplesApp&lt;/span&gt;: App {
	&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; body: some Scene {
		WindowGroup {
			ContentView()
		}
		.commands {
			CommandMenu(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Custom Menu&amp;#34;&lt;/span&gt;) {
				&lt;span style=&#34;color:#75715e&#34;&gt;// no contents yet&lt;/span&gt;
			}
		}
	}
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;So what can be put inside the menu? We are used to only being allowed to use &lt;code&gt;NSMenuItems&lt;/code&gt; but with SwiftUI there are no such things. It turns out that you can put quite a few SwiftUI views into a menu.&lt;/p&gt;
&lt;p&gt;The most obvious is a &lt;code&gt;Button&lt;/code&gt; with an action which appears like any standard menu item.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;CommandMenu(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Custom Menu&amp;#34;&lt;/span&gt;) {
	Button(action: {
		print(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Menu Button selected&amp;#34;&lt;/span&gt;)
	}, label: {
		Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Menu Button&amp;#34;&lt;/span&gt;)
	})
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;I have found that the easiest way to pass this selection on to other views is via a notification. Buttons can be disabled and enabled just as usual.&lt;/p&gt;
&lt;p&gt;The contents of the button will usually be a &lt;code&gt;Text&lt;/code&gt; view, but it can include an &lt;code&gt;Image&lt;/code&gt; view if you want to use an SFSymbol or any other image in the menu.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;Button(action: {}, label: {
	Image(systemName: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;clock&amp;#34;&lt;/span&gt;)
	Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Date &amp;amp; Time&amp;#34;&lt;/span&gt;)
})
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Apart from Buttons, there are several other SwiftUI Views that work in a menu. A very common use case in a menu is to have a switchable boolean setting that is displayed with a leading check mark if it is on.&lt;/p&gt;
&lt;p&gt;This can be done using a &lt;code&gt;Toggle&lt;/code&gt; view.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;Toggle(isOn: &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;toggleSetting, label: {
	Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Toggle&amp;#34;&lt;/span&gt;)
})
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;I created a variable to hold the setting using &lt;code&gt;@State&lt;/code&gt; but &lt;code&gt;@AppStorage&lt;/code&gt; would be better if this setting needed to persist between launches. To respond to changes, you can use an &lt;code&gt;onChange&lt;/code&gt; modifier.&lt;/p&gt;
&lt;p&gt;This demonstrates one of the huge strengths of SwiftUI&amp;rsquo;s declarative approach. You tell the compile you want a &lt;code&gt;Toggle&lt;/code&gt; and it is automatically structured to fit the place and platform where it is being used.&lt;/p&gt;
&lt;p&gt;A &lt;code&gt;Picker&lt;/code&gt; is a good choice for allowing a single selection from multiple options. This makes a sub menu with check marks.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;Picker(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Appearance&amp;#34;&lt;/span&gt;, selection: &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;pickerChoice) {
	Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Dark&amp;#34;&lt;/span&gt;).tag(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;dark&amp;#34;&lt;/span&gt;)
	Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Light&amp;#34;&lt;/span&gt;).tag(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;light&amp;#34;&lt;/span&gt;)
	Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;System&amp;#34;&lt;/span&gt;).tag(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;system&amp;#34;&lt;/span&gt;)
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;To make a sub-menu with standard menu items like buttons, use &lt;code&gt;Menu&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;Menu(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Sub Menu&amp;#34;&lt;/span&gt;) {
	Button(action: {}, label: {
		Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Sub Item 1&amp;#34;&lt;/span&gt;)
	})
	Button(action: {}, label: {
		Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Sub Item 2&amp;#34;&lt;/span&gt;)
	})
	Button(action: {}, label: {
		Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Sub Item 3&amp;#34;&lt;/span&gt;)
	})
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Menu items are often best split up with a separator and this is done in SwiftUI by adding a &lt;code&gt;Divider()&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;If you try a UI element in a menu and it doesn&amp;rsquo;t work, it tends to show as disabled text and doesn&amp;rsquo;t break the menu, so experiment. I was surprised to find that &lt;code&gt;Link&lt;/code&gt; does not work in a menu.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;editing-existing-menus&#34;&gt;Editing Existing Menus&lt;/h2&gt;
&lt;p&gt;I have covered creating a new menu, but what about adding new items to an existing menu?&lt;/p&gt;
&lt;p&gt;In this case, use &lt;code&gt;CommandGroup&lt;/code&gt; instead of &lt;code&gt;CommandMenu&lt;/code&gt;. The difference is that instead of setting a title for the menu, you give it a placement option with a reference to an existing standard menu item.&lt;/p&gt;
&lt;p&gt;Still inside the &lt;code&gt;commands&lt;/code&gt; contents, start typing &lt;code&gt;CommandGroup&lt;/code&gt; to see three options:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;CommandGroup(after:, addition:)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;CommandGroup(before:, addition:)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;CommandGroup(replacing:, addition:)&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In each case, the first parameter is a &lt;code&gt;CommandGroupPlacement&lt;/code&gt; that specifies one of a limited range of standard menu items.&lt;/p&gt;
&lt;style&gt;
  img {
    margin: 10px auto;
    border: 0.5rem #dfe7f0 solid;
    border-radius: 0.5rem;
     
  }

  .dark-theme img {
    margin: 10px auto;
    border: 0.5rem #4a4d50 solid;
    border-radius: 0.5rem;
     
  }

  .social_footer img {
    border: none;
    box-shadow: none;
  }
&lt;/style&gt;

&lt;p&gt;&lt;img src=&#34;https://troz.net/images/CommandGroupPlacement.png&#34; alt=&#34;CommandGroupPlacement&#34;&gt;&lt;/p&gt;
&lt;p&gt;The options for the menu items inside a &lt;code&gt;CommandGroup&lt;/code&gt; are just the same as when creating your own menu.&lt;/p&gt;
&lt;h3 id=&#34;removing-a-standard-menu-item&#34;&gt;Removing a Standard Menu Item&lt;/h3&gt;
&lt;p&gt;If you really want to get rid of one of the default menu items (or groups of items), you can use &lt;code&gt;CommandGroupPlacement&lt;/code&gt; and replace the existing one with an &lt;code&gt;EmptyView()&lt;/code&gt;. This is probably not a great idea as regards the Human Interface Guidelines but it is an option if you need it.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;CommandGroup(replacing: CommandGroupPlacement.appVisibility) {
	EmptyView()
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;You can also replace an existing menu item with your own version if you want to be able to respond to it in a more custom way. I can imagine doing this for the Help menu item as I do not like using Apple&amp;rsquo;s Help system and prefer to direct users elsewhere.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;preset-menu-groups&#34;&gt;Preset Menu Groups&lt;/h2&gt;
&lt;p&gt;If you watched my &lt;a href=&#34;https://backtomac.org&#34;&gt;Back to the Mac&lt;/a&gt; talk called &lt;a href=&#34;https://www.youtube.com/watch?v=hus2LksB3O4&#34;&gt;Build a Mac app inside 30 minutes using nothing but SwiftUI&lt;/a&gt;, you will have seen who I used a rather clunky function to dive into AppKit in order to stop the sidebar disappearing completely and permanently.&lt;/p&gt;
&lt;p&gt;If you haven&amp;rsquo;t watched it yet, go and take a look - I&amp;rsquo;ll wait… If you made it this far, I assume you are a Mac app fan like me and I think you will enjoy the talk as it demonstrated a lot of SwiftUI Mac app techniques.&lt;/p&gt;
&lt;p&gt;Since I recorded that video, I found out that Apple provides preset menu groups for dealing with certain things and one of them is for sidebars. My clunky solution is still useful if you want to have a toolbar button, but I think I would include the menu group as well.&lt;/p&gt;
&lt;p&gt;There are five present Commands groups provided by Apple, four of which are useful and the fifth has a purpose that escapes me.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;SidebarCommands()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ToolbarCommands()&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Inserting both these into your &lt;code&gt;commands&lt;/code&gt; will expand the default View menu, so that it goes from this:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/BasicViewMenu.png&#34; alt=&#34;BasicViewMenu&#34;&gt;&lt;/p&gt;
&lt;p&gt;To this:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/SidebarToolbarMenu.png&#34; alt=&#34;SidebarToolbarMenu&#34;&gt;&lt;/p&gt;
&lt;p&gt;You do not need to include both, but it was easier to show in one screen shot instead of two.&lt;/p&gt;
&lt;p&gt;If your app allows any serious text editing, you are going to want to use:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;TextEditingCommands()&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Which changes the default Edit menu from this:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/BasicEditMenu.png&#34; alt=&#34;BasicEditMenu&#34;&gt;&lt;/p&gt;
&lt;p&gt;To this:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/TextEditingMenu.png&#34; alt=&#34;TextEditingMenu&#34;&gt;&lt;/p&gt;
&lt;p&gt;And if you need your users to be able to format text, including:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;TextFormattingCommands()&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;adds in a Format menu.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/TextFormattingMenu.png&#34; alt=&#34;TextFormattingMenu&#34;&gt;&lt;/p&gt;
&lt;p&gt;And finally, there is &lt;code&gt;EmptyCommands()&lt;/code&gt; which does nothing and has no obvious use.&lt;/p&gt;
&lt;p&gt;These are used like this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;.commands {
	SidebarCommands()
	ToolbarCommands()
	TextEditingCommands()
	TextFormattingCommands()
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;using-a-separate-file&#34;&gt;Using a Separate File&lt;/h2&gt;
&lt;p&gt;If you are adding a lot of menus, you are probably starting to feel that your App.swift file is getting a bit crowded. You can separate out these menu commands into one or more separate files, so long as they are contained in a struct that conforms to the &lt;code&gt;Commands&lt;/code&gt; protocol and which has a &lt;code&gt;body&lt;/code&gt; that also conforms to &lt;code&gt;Commands&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;MenuCommands&lt;/span&gt;: Commands {
	@Binding &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; toggleSetting: Bool

	&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; body: some Commands {
		CommandMenu(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Custom Menu&amp;#34;&lt;/span&gt;) {
			Button(action: {
				print(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Menu Button selected&amp;#34;&lt;/span&gt;)
			}, label: {
				Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Menu Button&amp;#34;&lt;/span&gt;)
			})

			Divider()

			Toggle(isOn: &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;toggleSetting, label: {
				Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Toggle&amp;#34;&lt;/span&gt;)
			})
		}
	}
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This struct cannot have its own data or you will get lots of warnings, but it can have bindings to data from its parent. Insert a call to this struct, and any others you have created, in the &lt;code&gt;commands&lt;/code&gt; modifier, just like for the Apple presets.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;@State &lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; toggleSetting = &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;// ...&lt;/span&gt;

.commands {
	MenuCommands(toggleSetting: &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;toggleSetting)
	SidebarCommands()
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;bonus-credits&#34;&gt;Bonus: Credits&lt;/h2&gt;
&lt;p&gt;Every Mac app has an &amp;ldquo;About …&amp;rdquo; menu item which brings up a simple dialog box with basic app information: icon, app name and version number. These will always appear but there is an easy way to add more information underneath this info and it can include formatted text and links.&lt;/p&gt;
&lt;p&gt;Create a new file called &lt;code&gt;Credits.rtf&lt;/code&gt; - the New File dialog has a Rich Text File option. Anything in a file with this exact name will be shown below the standard information in the About box.&lt;/p&gt;
&lt;p&gt;Xcode&amp;rsquo;s RTF editor is not great, but it is good enough for this. There are some basic formatting tools above the text editor, but you can also right-click on text to get more options, including Font and Color panels.&lt;/p&gt;
&lt;p&gt;To insert a web link, go to the Editor menu and select Add Link…&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Well that&amp;rsquo;s it. A quick round-up of the ways to use menus in your SwiftIU Mac apps. I hope you found it useful. If you have any suggestions, comments, corrections or improvements, please contact me using one of the links below or through the &lt;a href=&#34;https://troz.net/contact/&#34;&gt;Contact&lt;/a&gt; page.&lt;/p&gt;</description>
</item>
    
    <item>
<title>SwiftUI Data Flow</title>
<link>https://troz.net/post/2019/swiftui-data-flow/</link>
<pubDate>Sun, 24 Jan 2021 15:17:14 +1000</pubDate>
      
      <guid>https://troz.net/post/2019/swiftui-data-flow/</guid>
<description>&lt;p&gt;&lt;a href=&#34;https://developer.apple.com/xcode/swiftui/&#34;&gt;SwiftUI&lt;/a&gt; gives us a completely new way to lay out out user interfaces, in a declarative and responsive way. Your data dictates what is displayed. But this leads to a new problem - how should the data models be constructed and how can they be passed around between the various views that make up your app?&lt;/p&gt;
&lt;p&gt;In this post, I intend to discuss the possibilities with examples.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Update - January 2021:&lt;/strong&gt; I think the information in this post is still all valid except for one change. When you are initializing an ObservableObject, you should use &lt;code&gt;@StateObject&lt;/code&gt; instead of &lt;code&gt;@ObservedObject&lt;/code&gt;. Your views can receive objects that are owned by other views as &lt;code&gt;@ObservedObject&lt;/code&gt; or &lt;code&gt;@EnvironmentObject&lt;/code&gt; but the owner of the data should always create the data object with &lt;code&gt;@StateObject&lt;/code&gt;.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;For a great diagram showing what data object type to use where, check out this image from &lt;a href=&#34;https://twitter.com/chriseidhof/status/1280433133813456896&#34;&gt;Chris Edihof&lt;/a&gt; - thanks Chris!&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/dataflow.png&#34; alt=&#34;Data flow&#34;&gt;&lt;/p&gt;
&lt;p&gt;If you read this article before November 18th 2019, please check out &lt;a href=&#34;https://troz.net/post/2019/swiftui-data-flow/#observable2&#34;&gt;ObservableObject &amp;amp; @ObservedObject - Part 2&lt;/a&gt; again as it has gone through several iterations, which are all shown for comparison.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;At WWDC 2019, some Apple engineers gave a great presentation on &lt;a href=&#34;https://developer.apple.com/videos/play/wwdc2019/226/&#34;&gt;Data Flow Through SwiftUI&lt;/a&gt; and I strongly recommend watching the video. But you need to watch it twice. First watch it so that you can get started, and then, when you feel that this is all way too complicated, watch it again and it will start to click into place. The only real difference between then and now is that BindableObject has become ObservableObject.&lt;/p&gt;
&lt;p&gt;I guess I could stop there, but I will be illustrating my ideas with code examples, which I hope will make things clearer. Some of the examples are rather contrived in order to make a point, but the sample code is also sprinkled with other SwiftUI examples which I hope will prove useful.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/trozware/swiftui-data-flow/tree/master&#34;&gt;Download the sample project from GitHub&lt;/a&gt; and open it in Xcode. Go to ContentView.swift and make sure the Canvas is open. Click Resume to make the view appear. Then click the Live Preview button and wait for the view to become active. I recommend clicking the Pin button at the bottom left of the Canvas so that you can investigate the code samples, while still working in the main navigation.&lt;/p&gt;
&lt;h2 id=&#34;data-flow-options&#34;&gt;Data Flow Options&lt;/h2&gt;
&lt;p&gt;There are 5 ways to specify data in SwiftUI:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Property&lt;/li&gt;
&lt;li&gt;@State&lt;/li&gt;
&lt;li&gt;@Binding&lt;/li&gt;
&lt;li&gt;ObservableObject &amp;amp; @ObservedObject&lt;/li&gt;
&lt;li&gt;@EnvironmentObject&lt;/li&gt;
&lt;/ul&gt;
&lt;style&gt;
  img {
    margin: 10px auto;
  }
&lt;/style&gt;

&lt;p&gt;&lt;img src=&#34;https://troz.net/images/ContentView.png&#34; alt=&#34;Content View&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;property&#34;&gt;Property&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Property&lt;/span&gt;: View {
    &lt;span style=&#34;color:#75715e&#34;&gt;// Property&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; greeting = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Hello from SwiftUI!&amp;#34;&lt;/span&gt;

    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; body: some View {
        &lt;span style=&#34;color:#75715e&#34;&gt;// Using property directly&lt;/span&gt;
         Text(greeting)
             .font(.title)
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;In this example, the &lt;code&gt;greeting&lt;/code&gt; property is used in the view. &lt;code&gt;greeting&lt;/code&gt; is static, so the view does not need to monitor it for changes. This may seem like a simplistic and obvious example, but separating it out allows for localization or re-usability.&lt;/p&gt;
&lt;p&gt;The property could also have been supplied by a parent view and this is a really useful feature of properties. A parent view can have some dynamic data that it can use to set properties in a subview where the subview only needs to display the data statically. This data will change as the parent view changes but the subview will not be able to change the data in the parent view.&lt;/p&gt;
&lt;p&gt;And it is important to remember that not everything needs to be set up with one of these new property wrappers.&lt;/p&gt;
&lt;h2 id=&#34;state&#34;&gt;@State&lt;/h2&gt;
&lt;p&gt;This is where things start to get very interesting in the SwiftUI world. SwiftUI views are contained in structs, so are non-mutable. Also, the views are re-created every time the data changes, so any properties are re-created then too. By marking a property with the &lt;code&gt;@State&lt;/code&gt; property wrapper, you are telling SwiftUI that you want it to keep this data in a separate portion of memory, allow it to be mutated, and preserve the current value during the view refresh.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;UsingState&lt;/span&gt;: View {
    @State &lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; toggleValue = &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;

    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; body: some View {
        &lt;span style=&#34;color:#75715e&#34;&gt;// Using state with 2-way binding&lt;/span&gt;
         Toggle(isOn: &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;toggleValue) {
             Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Toggle is &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;\(&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.toggleValue ? &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ON&amp;#34;&lt;/span&gt; : &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;OFF&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;)
         }
         .padding(&lt;span style=&#34;color:#ae81ff&#34;&gt;50&lt;/span&gt;)
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;In this example, &lt;code&gt;toggleValue&lt;/code&gt; is declared as a &lt;code&gt;Bool&lt;/code&gt; with a property wrapper of &lt;code&gt;@State&lt;/code&gt;. Inside the &lt;code&gt;Toggle&lt;/code&gt;, the &lt;code&gt;isOn&lt;/code&gt; value is bound to &lt;code&gt;toggleValue&lt;/code&gt; by the leading &lt;code&gt;$&lt;/code&gt;. This allows the variable to set the toggle and the toggle to set the variable - 2-way binding.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/Toggle.png&#34; alt=&#34;Toggle&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;@State&lt;/code&gt; variables are always value types and are usually local to their view, so Apple recommends marking them as &lt;code&gt;private&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;And unlike properties, &lt;code&gt;@State&lt;/code&gt; variables allow you to have data that is dynamic but it can still be passed to subviews as properties for display.&lt;/p&gt;
&lt;h2 id=&#34;binding&#34;&gt;@Binding&lt;/h2&gt;
&lt;p&gt;One problem with building SwiftUI views is that it is very easy to end up with a gigantic Pyramid of Doom as you embed views within views within views. The solution is to extract subviews, but then you need a way to pass the data to the subview.&lt;/p&gt;
&lt;p&gt;This is where &lt;code&gt;@Binding&lt;/code&gt; comes in as it allows you to tell a view that the data for a property is actually coming from a parent but that the subview is allowed to change that property and that change will flow back to the parent&amp;rsquo;s data.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Numbers&lt;/span&gt;: View {
    @State &lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; stepperValue = &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;

    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; body: some View {
        NumberChooser(stepperValue: &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;stepperValue)
    }
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NumberChooser&lt;/span&gt;: View {
    &lt;span style=&#34;color:#75715e&#34;&gt;// Using state from parent with 2-way binding&lt;/span&gt;
    @Binding &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; stepperValue: Int

    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; body: some View {
        ZStack {
            VStack {
                Stepper(value: &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;stepperValue, &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;0.&lt;/span&gt;..&lt;span style=&#34;color:#ae81ff&#34;&gt;20&lt;/span&gt;) {
                    Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Value = &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;\(&lt;/span&gt;stepperValue&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;)
                }

                NumberBlock(stepperValue: stepperValue)
            }
        }
    }
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NumberBlock&lt;/span&gt;: View {
    &lt;span style=&#34;color:#75715e&#34;&gt;// As this view never changes the value, there is no need to bind it&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; stepperValue: Int

    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; body: some View {
        Image(systemName: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;\(&lt;/span&gt;stepperValue&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;.square&amp;#34;&lt;/span&gt;)
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;In this example, I have declared a &lt;code&gt;stepperValue&lt;/code&gt; property and marked it with &lt;code&gt;@State&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The interface has been extracted into a subview called &lt;code&gt;NumberChooser&lt;/code&gt; and a &lt;code&gt;Binding&lt;/code&gt; to the &lt;code&gt;stepperValue&lt;/code&gt; property has been passed to &lt;code&gt;NumberChooser&lt;/code&gt; using the &lt;code&gt;$&lt;/code&gt; prefix, which will ensure that changes to the value can come back. Inside &lt;code&gt;NumberChooser&lt;/code&gt; this property is wrapped in the &lt;code&gt;@Binding&lt;/code&gt; property wrapper to indicate that it is coming from another source and that changes will be returned.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;NumberChooser&lt;/code&gt; itself has a subview called &lt;code&gt;NumberBlock&lt;/code&gt; but it is a display view only and never mutates the value itself, so &lt;code&gt;stepperValue&lt;/code&gt; is passed to this subview as a property only, without the &lt;code&gt;$&lt;/code&gt; prefix. It will still be updated every time the data changes as it is contained by the view with the &lt;code&gt;@State&lt;/code&gt; property.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/NumberChooser.png&#34; alt=&#34;Number Chooser&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;state--binding---part-2&#34;&gt;@State &amp;amp; @Binding - Part 2&lt;/h2&gt;
&lt;p&gt;So far, the examples have used primitive data types for the @State properties, but given that &lt;code&gt;@State&lt;/code&gt; properties are value types, any struct can be used. In the next example, I use a struct to hold the properties of a pizza order and use a SwiftUI Form to allow selections.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PizzaView&lt;/span&gt;: View {
    &lt;span style=&#34;color:#75715e&#34;&gt;// Using @State for a struct&lt;/span&gt;
    @State &lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; pizza = Pizza()

    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; body: some View {
            VStack {
                Form {
                    &lt;span style=&#34;color:#75715e&#34;&gt;// Using 2-way binding but each component&lt;/span&gt;
                    &lt;span style=&#34;color:#75715e&#34;&gt;// only needs 1 property from the struct&lt;/span&gt;
                    PizzaNamePicker(selectedPizzaName: &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;pizza.name)
                    PizzaSizePicker(selectedPizzaSize: &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;pizza.size)
                    PizzaCrustPicker(selectedPizzaCrust: &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;pizza.crust)
                }

                &lt;span style=&#34;color:#75715e&#34;&gt;// Text representation to prove that the&lt;/span&gt;
                &lt;span style=&#34;color:#75715e&#34;&gt;// subviews are modifying the parent struct&lt;/span&gt;
                Text(pizza.pizzaSelection)
             }
            .navigationBarTitle(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Choose Your Pizza&amp;#34;&lt;/span&gt;)
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Each subview gets the property it needs using &lt;code&gt;@Binding&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PizzaNamePicker&lt;/span&gt;: View {
    @Binding &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; selectedPizzaName: PizzaName

    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; body: some View {
      &lt;span style=&#34;color:#75715e&#34;&gt;// see the GitHub project for more details&lt;/span&gt;
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The form consists of 3 subviews - one each for selecting the pizza, size and crust. The Pizza struct holds all three properties, but each subview only needs a &lt;code&gt;Binding&lt;/code&gt; to the single property that it controls. The Text view after the Form is to prove that all the selections come back to the parent.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/PizzaView.png&#34; alt=&#34;Pizza View&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;observableobject--observedobject---part-1&#34;&gt;ObservableObject &amp;amp; @ObservedObject - Part 1&lt;/h2&gt;
&lt;p&gt;These are used if your data model is a class and you want to use reference-based data instead of the struct&amp;rsquo;s value-based system.&lt;/p&gt;
&lt;p&gt;To set up a data model to be Observable, it must conform to the &lt;code&gt;ObservableObject&lt;/code&gt; protocol and any property that needs to be observed should have the &lt;code&gt;@Published&lt;/code&gt; property wrapper. This makes sure that any time this property changes, all the Views that are observing the instance of this data model will be notified to perform the UI updates.&lt;/p&gt;
&lt;p&gt;For this example, I have a ColorSet class with six color components that are used to assemble two RGB colors.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ColorSet&lt;/span&gt;: ObservableObject {
    &lt;span style=&#34;color:#75715e&#34;&gt;// ObservableObject&lt;/span&gt;
    &lt;span style=&#34;color:#75715e&#34;&gt;// The 6 color components are marked as @Published so any changes&lt;/span&gt;
    &lt;span style=&#34;color:#75715e&#34;&gt;// get published to the views that are observing&lt;/span&gt;

    @Published &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; foregroundRed = &lt;span style=&#34;color:#ae81ff&#34;&gt;0.0&lt;/span&gt;
    @Published &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; foregroundGreen = &lt;span style=&#34;color:#ae81ff&#34;&gt;0.0&lt;/span&gt;
    @Published &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; foregroundBlue = &lt;span style=&#34;color:#ae81ff&#34;&gt;0.0&lt;/span&gt;

    @Published &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; backgroundRed = &lt;span style=&#34;color:#ae81ff&#34;&gt;1.0&lt;/span&gt;
    @Published &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; backgroundGreen = &lt;span style=&#34;color:#ae81ff&#34;&gt;1.0&lt;/span&gt;
    @Published &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; backgroundBlue = &lt;span style=&#34;color:#ae81ff&#34;&gt;1.0&lt;/span&gt;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;In the primary view, I set up an instance of this class as an &lt;code&gt;@ObservedObject&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ColorSetView&lt;/span&gt;: View {
    @ObservedObject &lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; colorSet = ColorSet()
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The background of the view and the foreground of a system image are set using these colors. A button presents a sheet with sliders to allow editing these colors. The &lt;code&gt;colorSet&lt;/code&gt; is passed to the sheet like this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;  .sheet(isPresented: &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;showChooser) {
      &lt;span style=&#34;color:#75715e&#34;&gt;// notice that this does not use $ as the ColorChooser&lt;/span&gt;
      &lt;span style=&#34;color:#75715e&#34;&gt;// will get a reference to the ColorSet object&lt;/span&gt;
      ColorChooser(colorSet: &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.colorSet)
  }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ColorChooser&lt;/span&gt;: View {
    @ObservedObject &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; colorSet: ColorSet

    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; body: some View {
        &lt;span style=&#34;color:#75715e&#34;&gt;// ...&lt;/span&gt;
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;A sheet is not the ideal way of presenting a view that uses sliders for editing, but I wanted to demonstrate that changing the sliders instantly changes the value of the &lt;code&gt;@ObservedObject&lt;/code&gt; for the parent view as well as for the subview. Editing the background color components shows the new background color in the back at the top of the sheet.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;ColorChooser&lt;/code&gt; itself uses 2 subviews and they get a reference to the &lt;code&gt;ColorSet&lt;/code&gt; in the same manner.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/ColorChooser.png&#34; alt=&#34;Color Chooser&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;a-nameobservable2observableobject--observedobject---part-2a&#34;&gt;&lt;!-- raw HTML omitted --&gt;ObservableObject &amp;amp; @ObservedObject - Part 2&lt;!-- raw HTML omitted --&gt;&lt;/h2&gt;
&lt;p&gt;This section was that one that caused me the most trouble when writing the example app. I wanted to display a list of data and have each entry link to an editable detail view with the edits flowing back to the parent list.&lt;/p&gt;
&lt;p&gt;The initial display of data in a List was straight-forward and I was then able to have the list rows navigate to a detailed view for each entry. The problem was getting the edited data back to the parent List.&lt;/p&gt;
&lt;p&gt;The basic data model was an &lt;code&gt;ObservableObject&lt;/code&gt; that publishes an array of &lt;code&gt;PersonViewModel&lt;/code&gt; objects.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PersonListModel&lt;/span&gt;: ObservableObject {
    @Published &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; persons: [PersonViewModel] = []

    &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;fetchData&lt;/span&gt;() {
        &lt;span style=&#34;color:#75715e&#34;&gt;// get data from web ...&lt;/span&gt;

        DispatchQueue.main.async {
            &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.persons = newData
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Since this data is going to trigger a UI update after a background network call, it is important that changes to the &lt;code&gt;@Published&lt;/code&gt; property get switched to the main thread.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;PersonViewModel&lt;/code&gt; also needs to be &lt;code&gt;Observable&lt;/code&gt; with the editable properties marked as &lt;code&gt;@Published&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PersonViewModel&lt;/span&gt;: Identifiable, ObservableObject {
    &lt;span style=&#34;color:#75715e&#34;&gt;// Even though this is not observed directly,&lt;/span&gt;
    &lt;span style=&#34;color:#75715e&#34;&gt;// it must be an ObservableObject for the data flow to work&lt;/span&gt;

    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; id = UUID()
    @Published &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; first: String = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;
    @Published &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; last: String = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;
    @Published &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; phone: String = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The odd thing was the way that I had to pass the data to the detail view. This is what I tried initially:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;  List {
      ForEach(personList.persons) { person &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt;
          NavigationLink(destination:
              PersonDetailView(person: person)
          ) {
              Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;\(&lt;/span&gt;person.first&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;\(&lt;/span&gt;person.last&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;)
          }
      }
  }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;And in &lt;code&gt;PersonDetailView&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;    @ObservedObject &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; person: PersonViewModel
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This almost worked. The correct data was passed to the detail view, and the data edits changed the data, but the parent list was never re-drawn. If I changed a record&amp;rsquo;s first name then went back to the list, the change was not displayed. But if I then returned to the detail view for the same record, my edits were there, so I could tell that the data was changing correctly. The problem was how to change it in such a way that the parent view was notified of the change.&lt;/p&gt;
&lt;p&gt;Trying to bind &lt;code&gt;person&lt;/code&gt; with &lt;code&gt;PersonDetailView(person: $person)&lt;/code&gt; gave the error &lt;code&gt;Use of unresolved identifier &#39;$person&#39;&lt;/code&gt;, so the &lt;code&gt;ForEach&lt;/code&gt; enumeration did not provide a direct connection to the &lt;code&gt;personList&lt;/code&gt; object.&lt;/p&gt;
&lt;p&gt;The solution I came up with was to switch to enumerating by index in the &lt;code&gt;ForEach&lt;/code&gt; and passing a direct member of the parent list&amp;rsquo;s data to the detail view. And switching the &lt;code&gt;PersonDetailView&lt;/code&gt; to use &lt;code&gt;@Binding var person: PersonViewModel&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;ForEach(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; ..&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt; personList.persons.count, id: &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;\&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;) { index &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt;
    NavigationLink(destination:
        PersonDetailView(person: &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;personList.persons[index])
    ) {
        Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;\(&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.personList.persons[index].first&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;
          Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34; &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;\(&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.personList.persons[index].last&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;)
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This works but as well as being hard to read, it has one major flaw. The rows in the table are identified by their row number, rather than by anything in the data like the &lt;code&gt;person.id&lt;/code&gt;. This can really mess with how SwiftUI handles the List and how it knows which rows have changed and need to be re-rendered. It is important to identify rows by something unique to the data in each row so that SwiftUI knows that you have deleted the row with the ID &amp;ldquo;abcd-1234&amp;rdquo; and not row #7. Because if you delete row ID &amp;ldquo;abcd-1234&amp;rdquo; there is no longer a row ID &amp;ldquo;abcd-1234&amp;rdquo; but if you delete row #7, there is now a different row #7 and anything could happen.&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;strong&gt;Update 1:&lt;/strong&gt; &lt;a href=&#34;https://twitter.com/StewartLynch&#34;&gt;@StewartLynch&lt;/a&gt; contacted me to suggest a much neater way to pass the person data to the PersonDetailView by using a function to get a &lt;code&gt;Binding&amp;lt;PersonViewModel&amp;gt;&lt;/code&gt; for each &lt;code&gt;person&lt;/code&gt; being displayed. This worked perfectly and made for a much cleaner looking bit of code. Thanks Stewart.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;ForEach(personList.persons) { person &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt;
    NavigationLink(destination:
        PersonDetailView(person: &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.selectedPerson(id: person.id))
    ) {
        Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;\(&lt;/span&gt;person.first&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;\(&lt;/span&gt;person.last&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;)
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;And outside the &lt;code&gt;body&lt;/code&gt; declaration:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;selectedPerson&lt;/span&gt;(id: UUID) -&amp;gt; Binding&amp;lt;PersonViewModel&amp;gt; {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;guard&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; index = &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.personList.persons.firstIndex(&lt;span style=&#34;color:#66d9ef&#34;&gt;where&lt;/span&gt;: { $0.id == id }) &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {
        fatalError(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;This person does not exist.&amp;#34;&lt;/span&gt;)
    }
    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;personList.persons[index]
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;If you want to have a look at Stewart&amp;rsquo;s solution, check out &lt;a href=&#34;https://github.com/trozware/swiftui-data-flow/tree/57f48ea28d1e987566398800e74f12e339eac231&#34;&gt;this commit on GitHub&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Update 2:&lt;/strong&gt; &lt;a href=&#34;https://twitter.com/vadimshpakovski&#34;&gt;@vadimshpakovski&lt;/a&gt; says that creating a binding for every &lt;code&gt;person&lt;/code&gt; object is inefficient and that the function to create this binding will slow things down. He suggests using &lt;code&gt;onReceive&lt;/code&gt; to react to changes to &lt;code&gt;person&lt;/code&gt; and trigger an update of &lt;code&gt;personList&lt;/code&gt;. In this case, &lt;code&gt;PersonDetailView&lt;/code&gt; uses &lt;code&gt;@ObservedObject var person: PersonViewModel&lt;/code&gt;. This also works perfectly.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;  ForEach(personList.persons) { person &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt;
      NavigationLink(destination:
          PersonDetailView(person: person)
              .onReceive(person.objectWillChange) { &lt;span style=&#34;color:#66d9ef&#34;&gt;_&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt;
                  &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.personList.objectWillChange.send()
              }
      ) {
          Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;\(&lt;/span&gt;person.first&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;\(&lt;/span&gt;person.last&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;)
      }
  }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;If you want to have a look at Vadim&amp;rsquo;s&amp;rsquo;s solution, check out &lt;a href=&#34;https://github.com/trozware/swiftui-data-flow/tree/093810bab93a984292c4a7b8bf29316a830e9f50&#34;&gt;this commit on GitHub&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Update 3:&lt;/strong&gt; More suggestions have come in from the community (thanks to everyone who contributed) and it has been pointed out to me that while Vadim&amp;rsquo;s solution does solve a lot of the issues, it means that the entire &lt;code&gt;ForEach&lt;/code&gt; has to be recalculated to check for changes every time a single &lt;code&gt;Person&lt;/code&gt; is edited. And it also inserts model management code into the view code, which is not great.&lt;/p&gt;
&lt;p&gt;So my next attempt goes back to using &lt;code&gt;@Binding var person: PersonViewModel&lt;/code&gt; in &lt;code&gt;PersonDetailView&lt;/code&gt; but instead of &lt;code&gt;PersonListModel&lt;/code&gt; having an array of &lt;code&gt;PersonViewModels&lt;/code&gt;, it has an array of &lt;code&gt;UUIDs&lt;/code&gt; and a dictionary of &lt;code&gt;UUID: PersonListModel&lt;/code&gt;. The benefit of this is that the UUIDs can be used in the &lt;code&gt;ForEach&lt;/code&gt; as they are unique to each row, and the dictionary can be used to provide a Binding to the &lt;code&gt;person&lt;/code&gt; for each &lt;code&gt;UUID&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;This removes the problem of my original solution by identifying each row uniquely, it goes back to Stewart&amp;rsquo;s solution but eliminates the potential slow function to create a binding for the matching person, and eliminates the issue of complete redraws and model management inside views from Vadim&amp;rsquo;s suggestion.&lt;/p&gt;
&lt;p&gt;But it was not entirely straight-forward as getting a value from a dictionary by key returns an optional. At first I thought I could use the new &lt;code&gt;default&lt;/code&gt; syntax for dictionaries to get a non-optional value for binding but for some reason that couldn&amp;rsquo;t be used to create a &lt;code&gt;Binding&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The answer was to write an extension on Dictionary with a &lt;code&gt;subscript&lt;/code&gt; function that returns a non-optional value or gives a fatal error. Since I am in control of the data and set up every UUID with a matching PersonViewModel, this is not dangerous.&lt;/p&gt;
&lt;p&gt;So here is what we have now:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PersonListModel&lt;/span&gt;: ObservableObject {
    &lt;span style=&#34;color:#75715e&#34;&gt;// Main list view model&lt;/span&gt;
    &lt;span style=&#34;color:#75715e&#34;&gt;// ObservableObject so that updates are detected&lt;/span&gt;

    @Published &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; ids: [UUID] = []
    @Published &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; persons: [UUID : PersonViewModel] = [:]

    &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;fetchData&lt;/span&gt;() {
        &lt;span style=&#34;color:#75715e&#34;&gt;// get data from web ...&lt;/span&gt;

        DispatchQueue.main.async {
          &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; personViewModels = dataArray.map { PersonViewModel(with: $0) }.sorted() {
              $0.last &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; $0.first &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt; $1.last &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; $1.first
          }
          &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.ids = personViewModels.map { $0.id }
          &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.persons = Dictionary(
              uniqueKeysWithValues: personViewModels.map { ($0.id, $0) }
          )
        }
 }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The incoming data is mapped to a sorted array of &lt;code&gt;PersonViewModels&lt;/code&gt; before extracting the UUIDs and creating the dictionary. This means that the UUIDs array is in the correct sort order for use in the &lt;code&gt;ForEach&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Here is the Dictionary extension:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;extension&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Dictionary&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;where&lt;/span&gt; Key == UUID, Value == PersonViewModel {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;subscript&lt;/span&gt;(unchecked key: Key) -&amp;gt; Value {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;get&lt;/span&gt; {
            &lt;span style=&#34;color:#66d9ef&#34;&gt;guard&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; result = &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;[key] &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {
                fatalError(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;This person does not exist.&amp;#34;&lt;/span&gt;)
            }
            &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; result
        }
        &lt;span style=&#34;color:#66d9ef&#34;&gt;set&lt;/span&gt; {
            &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;[key] = newValue
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;And these go together to allow this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;ForEach(personList.ids, id: &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;\&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;) { id &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt;
    NavigationLink(
        destination: PersonDetailView(person: &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;personList.persons[unchecked: id])
    ) {
        Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;\(&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.personList.persons[unchecked: id].first&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;
            Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34; &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;\(&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.personList.persons[unchecked: id].last&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;)
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://troz.net/images/PersonListView.png&#34; alt=&#34;Person List View&#34;&gt;&lt;/p&gt;
&lt;p&gt;This ended up a bit more complicated than my original idea, but I think it is now &lt;em&gt;good&lt;/em&gt; SwiftUI, avoiding several problems from the earlier solutions.&lt;/p&gt;
&lt;p&gt;Thanks to &lt;a href=&#34;https://next.json-generator.com&#34;&gt;JSON Generator&lt;/a&gt; for the sample data. And if anyone has any other solutions to this problem, I would love to hear it. You can contact me using any of the buttons at the end of this article.&lt;/p&gt;
&lt;h2 id=&#34;environmentobject&#34;&gt;@EnvironmentObject&lt;/h2&gt;
&lt;p&gt;Think of the EnvironmentObject a piece of state that can be used by any view or any descendent of the view once it has been introduced. People who have used React or any of the similar web development technologies will be familiar with the concept of global state and this is similar to that, although not truely global.&lt;/p&gt;
&lt;p&gt;You set up a class as an EnvironmentObject model exactly as you would set up an ObservableObject with the same protocol conformance and using the &lt;code&gt;@Published&lt;/code&gt; property wrapper to mark properties whose changes will trigger UI updates. Here is a very simple example with just one property.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;UserSettings&lt;/span&gt;: ObservableObject {
    @Published &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; isLoggedIn: Bool = &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://troz.net/images/NestedViews.png&#34; alt=&#34;Nested Views&#34;&gt;&lt;/p&gt;
&lt;p&gt;In this example, the yellow view is the parent view - the different views have different brightly colored backgrounds to make them easy to distinguish. The yellow view has access to the &lt;code&gt;UserSettings&lt;/code&gt; like this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NestingViews&lt;/span&gt;: View {
    @EnvironmentObject &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; userSettings: UserSettings

    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; body: some View {
        ZStack {
            Color.yellow.edgesIgnoringSafeArea(.all)

            VStack {
                &lt;span style=&#34;color:#75715e&#34;&gt;// UI omitted for space reasons&lt;/span&gt;

                &lt;span style=&#34;color:#75715e&#34;&gt;// display first nested view&lt;/span&gt;
                ChildView()
            }
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The &lt;code&gt;ChildView&lt;/code&gt; contained in this parent - the green view - has no need to access this data and so gets no &lt;code&gt;@EnvironmentObject&lt;/code&gt; property. But &lt;code&gt;ChildView&lt;/code&gt; contains another subview - the blue one. And this &lt;code&gt;GrandChildView&lt;/code&gt; does need access to the &lt;code&gt;UserSettings&lt;/code&gt; so it has the exact same &lt;code&gt;@EnvironmentObject var userSettings: UserSettings&lt;/code&gt; property as the parent view.&lt;/p&gt;
&lt;p&gt;If this was using &lt;code&gt;@ObservedObject&lt;/code&gt; the data would have to be passed through every view in an un-broken chain, even though &lt;code&gt;ChildView&lt;/code&gt; did not need this data. By using &lt;code&gt;@EnvironmentObject&lt;/code&gt; the chain can be broken, but any view that needs to, can access and mutate this data. In the example, both the yellow and the blue views display and edit the same data with updates happening in both when either button is pressed.&lt;/p&gt;
&lt;p&gt;One key thing to remember about previewing &lt;code&gt;@EnvironmentObject&lt;/code&gt; in the Canvas is that every view that uses it, or that contains a view that uses it, needs to be supplied with the &lt;code&gt;ObservableObject&lt;/code&gt; in the preview using &lt;code&gt;.environmentObject()&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NestingViews_Previews&lt;/span&gt;: PreviewProvider {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; previews: some View {
        NestingViews()
            .environmentObject(UserSettings())
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;In the app itself, only the first view to access the &lt;code&gt;@EnvironmentObject&lt;/code&gt; needs it set. In this example, it is done in the &lt;code&gt;NavigationLink&lt;/code&gt; that goes to the &lt;code&gt;NestingViews&lt;/code&gt; example. The &lt;code&gt;.environmentObject&lt;/code&gt; can be provided to the root view in the &lt;code&gt;SceneDelegate&lt;/code&gt; if the root view needs it.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;    NavigationLink(destination: NestingViews().environmentObject(UserSettings())) {
        ListContents(title: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;@EnvironmentObject&amp;#34;&lt;/span&gt;, imageNumber: &lt;span style=&#34;color:#ae81ff&#34;&gt;6&lt;/span&gt;)
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;summary&#34;&gt;Summary&lt;/h2&gt;
&lt;p&gt;Or What Should I Use When?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;For value-based data models or data primitives, use &lt;code&gt;@State&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;For reference-based data use &lt;code&gt;ObservableObject&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;For data needed by a lot of views in your app, use &lt;code&gt;@EnvironmentObject&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Use &lt;code&gt;@Binding&lt;/code&gt; or &lt;code&gt;@ObservedObject&lt;/code&gt; to pass data to a view that can mutate it.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;And one final tip: while creating a view from scratch, use &lt;code&gt;@State&lt;/code&gt; with sample, hard-coded data. Once you have the interface you want, then change it to use real data.&lt;/p&gt;
&lt;p&gt;I am sure people will develop their own theories and their own ways of using SwiftUI, but those are the guidelines that I intend to follow for now. If you have different views and would like to discuss them, please contact me.&lt;/p&gt;</description>
</item>
    
    <item>
<title>Crossfix</title>
<link>https://troz.net/post/2020/crossfix/</link>
<pubDate>Mon, 23 Nov 2020 08:59:45 +1000</pubDate>
      
      <guid>https://troz.net/post/2020/crossfix/</guid>
<description>&lt;p&gt;I have just released &lt;a href=&#34;https://itunes.apple.com/app/crossfix/id1526235954&#34;&gt;Crossfix&lt;/a&gt; and &lt;a href=&#34;https://itunes.apple.com/app/crossfix-lite/id1526236100&#34;&gt;Crossfix Lite&lt;/a&gt; for iPhone. They are both the same anagram assistant solver for crosswords, particularly cryptic crosswords. The Lite version is free but limits you to three solves per day. The full version is unlimited with no ads, no recurring subscriptions and works with family sharing.&lt;/p&gt;
&lt;style&gt;
  img {
    margin: 10px auto;
    border: 0.5rem #dfe7f0 solid;
    border-radius: 0.5rem;
     
    max-width: 400px;
  }

  .dark-theme img {
    margin: 10px auto;
    border: 0.5rem #4a4d50 solid;
    border-radius: 0.5rem;
     
  }

  .social_footer img {
    border: none;
    box-shadow: none;
  }
&lt;/style&gt;

&lt;p&gt;&lt;img src=&#34;https://troz.net/images/Crossfix-anagram.png&#34; alt=&#34;Anagram solving&#34;&gt;&lt;/p&gt;
&lt;p&gt;For more details, check out the app page at &lt;a href=&#34;https://troz.net/crossfix/&#34;&gt;https://troz/net/crossfix/&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;And if you are interested in the back story and the development process, have a look at &lt;a href=&#34;https://troz.net/post/2020/name_this_app/&#34;&gt;Name This App&lt;/a&gt;. Thanks to everyone who suggested a name, and special thanks to Jerry who came up with the winning entry.&lt;/p&gt;
&lt;p&gt;This is the first app that I have published that is 100% SwiftUI, although as I started it several months ago, it still uses the old App Delegate life cycle.&lt;/p&gt;</description>
</item>
    
    <item>
<title>Crossfix</title>
<link>https://troz.net/crossfix/</link>
<pubDate>Sun, 22 Nov 2020 16:23:09 +1000</pubDate>
      
      <guid>https://troz.net/crossfix/</guid>
<description>&lt;h4 id=&#34;now-available-on-the-app-store-for-iphones-also-works-on-apple-silicon-macs&#34;&gt;Now available on the App Store for iPhones. Also works on Apple Silicon Macs.&lt;/h4&gt;
&lt;h2 id=&#34;crossfix&#34;&gt;Crossfix&lt;/h2&gt;


&lt;a href=&#34;https://apps.apple.com/us/app/crossfix/id1526235954?itsct=apps_box&amp;amp;itscg=30200&#34; style=&#34;display: inline-block; overflow: hidden; border-top-left-radius: 13px; border-top-right-radius: 13px; border-bottom-right-radius: 13px; border-bottom-left-radius: 13px; width: 250px; height: 83px;&#34;&gt;&lt;img src=&#34;https://tools.applemediaservices.com/api/badges/download-on-the-app-store/white/en-US?size=250x83&amp;amp;releaseDate=1522281600&amp;h=316183e4d473a49a7fc392abccb65adb&#34; alt=&#34;Download on the App Store&#34; style=&#34;border-top-left-radius: 13px; border-top-right-radius: 13px; border-bottom-right-radius: 13px; border-bottom-left-radius: 13px; width: 250px; height: 83px; margin: unset; border: unset;&#34;&gt;&lt;/a&gt;


&lt;h2 id=&#34;crossfix-lite&#34;&gt;Crossfix Lite&lt;/h2&gt;


&lt;a href=&#34;https://apps.apple.com/us/app/crossfix-lite/id1526236100?itsct=apps_box&amp;amp;itscg=30200&#34; style=&#34;display: inline-block; overflow: hidden; border-top-left-radius: 13px; border-top-right-radius: 13px; border-bottom-right-radius: 13px; border-bottom-left-radius: 13px; width: 250px; height: 83px;&#34;&gt;&lt;img src=&#34;https://tools.applemediaservices.com/api/badges/download-on-the-app-store/black/en-US?size=250x83&amp;amp;releaseDate=1522281600&amp;h=316183e4d473a49a7fc392abccb65adb&#34; alt=&#34;Download on the App Store&#34; style=&#34;border-top-left-radius: 13px; border-top-right-radius: 13px; border-bottom-right-radius: 13px; border-bottom-left-radius: 13px; width: 250px; height: 83px; margin: unset; border: unset;&#34;&gt;&lt;/a&gt;


&lt;hr&gt;
&lt;p&gt;Programmers are basically puzzlers, and programming is the world&amp;rsquo;s best type of puzzle, but I like to start my day with a cryptic crossword. Like programming, cryptic crossword clues have their own syntax and what seems like gibberish on a first glance, can be parsed into logical parts to take you to the answer. But there are aspects of solving crosswords that were easier with pencil and paper, so I decided to write an app to help fill one of those gaps.&lt;/p&gt;
&lt;p&gt;There are sites and apps that offer anagram solvers, but they are just looking through a dictionary and showing you all the possibilities. To me, this feels like cheating, but I don’t have a problem with using an app to emulate the techniques I used to use with pencil and paper.&lt;/p&gt;
&lt;h3 id=&#34;anagrams&#34;&gt;Anagrams&lt;/h3&gt;
&lt;p&gt;Anagrams are a very popular clue type but they can be tricky to solve because our brains are too good at discerning patterns. We can recognize words using only the first and last letters if they have the correct number of letters inside. This means that asking our brains to scramble these letters into a completely different word is very difficult. In the olden days, when I used to do crosswords in the newspaper, the best method was to find a space in the margin and write the letters out in a circle which forced my brain to reconsider the options. But I do crosswords on my iPad now and while I could use a notes app and my Apple Pencil to draw the letters out, I don’t always have the Pencil with me and I want to keep looking at the crossword. So I decided that a companion iPhone app was the way that would work best for me.&lt;/p&gt;
&lt;p&gt;Look at how I use Crossfix to help me solve this clue.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;Users rip off revelation (8)&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The word &amp;ldquo;off&amp;rdquo; is a hint that this is an anagram, &amp;ldquo;Users rip&amp;rdquo; has the right number of letters, so the overall clue must be &amp;ldquo;revelation&amp;rdquo;. This is not a very long anagram and I think having two words makes it easier, but even so.&lt;/p&gt;
&lt;style&gt;
  img {
    margin: 10px auto;
    border: 0.5rem #dfe7f0 solid;
    border-radius: 0.5rem;
     
    max-width: 400px;
  }

  .dark-theme img {
    margin: 10px auto;
    border: 0.5rem #4a4d50 solid;
    border-radius: 0.5rem;
     
  }

  .social_footer img {
    border: none;
    box-shadow: none;
  }
&lt;/style&gt;

&lt;p&gt;&lt;img src=&#34;https://troz.net/images/Crossfix-anagram.png&#34; alt=&#34;Anagram solving&#34;&gt;&lt;/p&gt;
&lt;p&gt;I knew that the third last letter was &amp;ldquo;I&amp;rdquo; so I locked that in place, then I was able to shuffle the other letters around to find the answer: SURPRISE.&lt;/p&gt;
&lt;h3 id=&#34;a-different-type-of-anagram&#34;&gt;A Different Type of Anagram&lt;/h3&gt;
&lt;p&gt;Now we come to a variation of the anagram clue that is very popular with some crossword creators. I don&amp;rsquo;t know if there is an official name, but I call them &amp;ldquo;subtraction anagrams&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;Here is an example:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;Creationist has no taste for what&amp;rsquo;s sarcastic (6)&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The idea here is to remove the letters in &amp;ldquo;taste&amp;rdquo; from the letters in &amp;ldquo;Creationist&amp;rdquo; and then unscramble the remaining letters to find a word that means &amp;ldquo;sarcastic&amp;rdquo;. This turned out to be &amp;ldquo;ironic&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/Crossfix-sub-anagram.png&#34; alt=&#34;Subraction anagram solving&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;using-the-app&#34;&gt;Using the app&lt;/h3&gt;
&lt;p&gt;Type the letters in your anagram word or words in the entry field at the top. Spell checking is turned off so you can add spaces or not, use abbreviations or anything you like. When you have all the letters in, press Return and the letters will be arranged in a circle.&lt;/p&gt;
&lt;p&gt;Tap the arrows in the middle of the circle to shuffle the letters randomly. This can be very useful as sometimes a pattern appears.&lt;/p&gt;
&lt;p&gt;Tap a letter square to select it and tap again to move it, either into an answer square or into the discard tray below. Tap a letter in an answer square or in the discard tray to put it back into the circle.&lt;/p&gt;
&lt;p&gt;If you already know some of the cross letters, put them into the answer squares and tap the lock button to freeze them in place.&lt;/p&gt;
&lt;p&gt;The up arrow button will move all the unlocked letters out of the answer squares and back into the circle. Reset starts the word again completely and Clear removes everything so you can start again with a new set of letters.&lt;/p&gt;
&lt;p&gt;Tap the gear wheel to see some help and to configure the sound and animation settings. Swipe down to dismiss this display.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/Crossfix-settings.png&#34; alt=&#34;Settings&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;which-version-to-get&#34;&gt;Which Version to Get&lt;/h3&gt;
&lt;p&gt;I have published two version of this app on the App Store: &lt;a href=&#34;https://itunes.apple.com/app/crossfix/id1526235954&#34;&gt;Crossfix&lt;/a&gt; and &lt;a href=&#34;https://itunes.apple.com/app/crossfix-lite/id1526236100&#34;&gt;Crossfix Lite&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Crossfix Lite is free, but you are limited to solving three anagrams per day.
Crossfix is a paid app that allows unlimited solves.&lt;/p&gt;
&lt;p&gt;Try out Crossfix Lite and then pay for Crossfix if you need more solves or if you would like to support the development of this app.&lt;/p&gt;
&lt;p&gt;You may be wondering why I chose to release two apps instead of using in-app purchases to unlock the full version and there is one big reason: family sharing. I share a family account and it has always really annoyed me that direct app purchases are shared, but in-app purchases are not. So if I used IAPs and more than one member of your family wanted to use the app, you would have to pay twice, which seems unfair. I have deliberately chosen to have two distinct apps so as to allow family members to share all the features of the full app with a single purchase.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Stats for WoW</title>
<link>https://troz.net/wow-stats/</link>
<pubDate>Wed, 14 Oct 2020 11:43:03 +1000</pubDate>
      
      <guid>https://troz.net/wow-stats/</guid>
<description>&lt;h3 id=&#34;do-you-play-world-of-warcraft4&#34;&gt;Do you play &lt;a href=&#34;https://worldofwarcraft.com/&#34;&gt;World of Warcraft&lt;/a&gt;?&lt;/h3&gt;
&lt;p&gt;Have you ever agonised over a new piece of gear - are those stats better or worse for my class and specialization?&lt;/p&gt;
&lt;p&gt;Is your computer festooned with sticky notes reminding you that your prot pally needs haste over mastery but the enhancement shaman needs agility?&lt;/p&gt;
&lt;p&gt;Get rid of the notes and use the &lt;a href=&#34;https://itunes.apple.com/app/wow-stats/id1364247768&#34;&gt;Stats for WoW&lt;/a&gt; app instead.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://itunes.apple.com/app/wow-stats/id1364247768&#34;&gt;&lt;img src=&#34;https://troz.net/icons/wow-stats128.png&#34; alt=&#34;Stats for WoW in the App Store&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Data comes from &lt;a href=&#34;http://www.noxxic.com/wow/&#34;&gt;Noxxic&lt;/a&gt; and &lt;a href=&#34;https://www.icy-veins.com/wow/&#34;&gt;Icy Veins&lt;/a&gt; and is updated automatically with each new patch.&lt;/p&gt;
&lt;p&gt;And you can follow the direct links to the pages for your class and spec on &lt;a href=&#34;http://www.noxxic.com/wow/&#34;&gt;Noxxic&lt;/a&gt; or &lt;a href=&#34;https://www.icy-veins.com/wow/&#34;&gt;Icy Veins&lt;/a&gt; for more info from within the app.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://troz.net/images/wow-stats.png&#34;&gt;&lt;img src=&#34;https://troz.net/images/wow-stats-small.png&#34; alt=&#34;Stats for WoW&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Click for a larger image&amp;hellip;&lt;/p&gt;
&lt;p&gt;Yes, my main is a Beast Master Hunter - Axelady on Khaz&amp;rsquo;goroth if anyone wants to say hello. And if you have to ask why a hunter is called Axelady, you haven&amp;rsquo;t been a hunter for as long as I have!&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/Axe.png&#34; alt=&#34;Axelady&#34;&gt;&lt;/p&gt;
</description>
</item>
    
    <item>
<title>SwiftUI for Mac on Big Sur</title>
<link>https://troz.net/post/2020/swiftui_mac_big_sur/</link>
<pubDate>Wed, 08 Jul 2020 19:40:16 +1000</pubDate>
      
      <guid>https://troz.net/post/2020/swiftui_mac_big_sur/</guid>
<description>&lt;p&gt;In December 2019, I wrote a &lt;a href=&#34;https://troz.net/post/2019/swiftui-for-mac-1/&#34;&gt;series of articles about using SwiftUI to build a Mac app&lt;/a&gt;. At WWDC 2020, Apple announced macOS 11 Big Sur along with Xcode 12 and a heap of new features for SwiftUI, so I decided to try creating my test app again and seeing how much had changed.&lt;/p&gt;
&lt;p&gt;You can read the earlier articles and if you are interested, &lt;a href=&#34;https://github.com/trozware/swiftui-mac&#34;&gt;download the previous project from GitHub&lt;/a&gt;. Usually, when revisiting an old app, I would update the existing project, but this time I want to use the new SwiftUI App so I am going to start from scratch with a new app project, copying in code as required. And I plan to follow the same basic thread as I did in the previous articles. Who knows haw many parts this one will have!&lt;/p&gt;
&lt;p&gt;For reference, I am running the beta of macOS 11 Big Sur (20A4299v) and the beta of Xcode 12 (12A6159) on a rather aged MacBook with a dodgy battery. I do not have Xcode 12 installed on my Catalina Mac, so I have no way of telling whether some of the oddities are due to Xcode or Big Sur but I will try to keep this article updated as the new betas improve things.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;Update:&lt;/strong&gt; I have downloaded macOS Big Sur beta 2 (20A4300b) and Xcode 12 beta 2, oddly labelled in the About box as 11.5 (11E608c). I have only found one thing that needs to be changed. I had set the deployment target to 11.0 but the new Xcode does not allow this as an option and the app fails to build. Change the deployment target to 10.16 to make it work.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/Xcode_b2_error.png&#34; alt=&#34;Xcode 12 beta 6 error&#34;&gt;&lt;/p&gt;
&lt;p&gt;It looks like Apple is having some problems with consistency in the new version numbers in both macOS and Xcode.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;the-new-project&#34;&gt;The New Project&lt;/h2&gt;
&lt;p&gt;As before, the first step was to create a new project in Xcode. I chose the macOS App template although the Multiplatform option was intriguing. When setting the options for the new app, I chose SwiftUI for the Interface, SwiftUI App for the Life Cycle and Swift (of course) for the language.&lt;/p&gt;
&lt;p&gt;Once I had selected a save location and the project was open, I checked out the file structure. The main difference here was that there is no AppDelegate.swift file. Instead there is a file called &amp;ldquo;SwiftUI_Mac_11App.swift&amp;rdquo; where &amp;ldquo;SwiftUI_Mac_11&amp;rdquo; is the name of my app. This file is vastly simpler than the old AppDelegate but it sets up the app, the scene and the window group, with the expected ContentView as the main content.&lt;/p&gt;
&lt;p&gt;ContentView.swift had a change too. Instead of setting the &lt;code&gt;maxWidth&lt;/code&gt; and &lt;code&gt;maxHeight&lt;/code&gt; of the view to &lt;code&gt;.infinity&lt;/code&gt;, this Content View only adds some padding to the standard &lt;code&gt;Text&lt;/code&gt; view. Time to see what happens when I run&amp;hellip;&lt;/p&gt;
&lt;p&gt;The first run took longer than I expected (I told you it was an old MacBook) but then a very small window appeared, just big enough to show the &amp;ldquo;Hello world!&amp;rdquo; text with its padding. The app has all the expected menus although I have no idea where they are set up.&lt;/p&gt;
&lt;p&gt;Closing the app and using the Canvas preview worked much as before, although the canvas now has additional controls including a button to add another preview and a menu to configure each preview. Oddly, running the preview and clicking &amp;ldquo;Bring Forward&amp;rdquo; displayed two app windows. I presume this is an Xcode 12 beta &amp;ldquo;feature&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;I used the attributes Inspector to edit the &lt;code&gt;Text&lt;/code&gt; view, setting text, font style and weight and color. I had read that Xcode 12 had much better auto-formatting, but when adding modifiers this way, they all ended up on a single line which was not pretty. Manually adding line feeds before each dot did give a very neat structure, so typing in modifiers will be my preferred method.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;editing-the-layout&#34;&gt;Editing the Layout&lt;/h2&gt;
&lt;p&gt;Now on to my own layout. As I did last time, I used a static list to make a &lt;code&gt;NavigationView&lt;/code&gt; for preliminary testing.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ContentView&lt;/span&gt;: View {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; body: some View {
        NavigationView {
             List {
                 ForEach(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; ... &lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;, id: &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;\&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;) { index &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt;
                     NavigationLink(destination: Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;\(&lt;/span&gt;index&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;)) {
                         Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Link &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;\(&lt;/span&gt;index&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;)
                     }
                 }
             }
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;When I ran the app or looked at it in the Canvas it looked great, but when I clicked a link in the sidebar, the window shrunk to an unusably small size. So I added a &lt;code&gt;frame&lt;/code&gt; modifier to the destination view. And I also set the &lt;code&gt;ListStyle&lt;/code&gt; to &lt;code&gt;SidebarListStyle()&lt;/code&gt; which gave the new macOS 11 full height sidebar look.&lt;/p&gt;
&lt;p&gt;But here is where I encountered the first major difference. When I selected an item in the sidebar, the app correctly showed the detail view. But if I put the app into the background, this detail view disappeared. It literally disappeared because I was able to track that it was calling its &lt;code&gt;onDisappear&lt;/code&gt; modifier.&lt;/p&gt;
&lt;p&gt;After a lot of testing, several days of frustration and help from &lt;a href=&#34;https://twitter.com/jsngr&#34;&gt;Jordan Singer&lt;/a&gt; with his &lt;a href=&#34;https://github.com/jordansinger/mail-swiftui-sample&#34;&gt;mail-swiftui-sample&lt;/a&gt; project, I was finally able to work this out. The difference is that the initial view has to specify what comes next as well as what it is displaying. So in the initial &lt;code&gt;NavigationView&lt;/code&gt;, I had a &lt;code&gt;List&lt;/code&gt;, but I also needed some view to show that I was going to show another view in another column. This second column view has to reserve the space for the detail view to come.&lt;/p&gt;
&lt;p&gt;I have no idea how Jordan worked this out, but I am very grateful. What I ended up with was this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ContentView&lt;/span&gt;: View {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; body: some View {
        NavigationView {
            List {
                ForEach(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; ... &lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;, id: &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;\&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;) { index &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt;
                    NavigationLink(destination:
                                    Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;\(&lt;/span&gt;index&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;)
                                    .frame(maxWidth: .infinity, maxHeight: .infinity)
                    ) {
                        Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Link &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;\(&lt;/span&gt;index&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;)
                    }
                }
            }
            .listStyle(SidebarListStyle())

            Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Select a link...&amp;#34;&lt;/span&gt;)
                .frame(maxWidth: .infinity, maxHeight: .infinity)
        }
        .frame(maxWidth: .infinity, maxHeight: .infinity)
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The &amp;ldquo;Select a link&amp;hellip;&amp;rdquo; text is shown when there is no destination view to display. And when I click one of the entries in the sidebar, its content replaces that &lt;code&gt;Text&lt;/code&gt; view but keeps its frame.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;displaying-data&#34;&gt;Displaying Data&lt;/h2&gt;
&lt;p&gt;As with the previous app, I am displaying data from &lt;a href=&#34;https://http.cat/&#34;&gt;HTTP Cats&lt;/a&gt;. This part remains the same, so check back to the original article if you want to see how I did this. I did get warnings about the &lt;code&gt;Decodable&lt;/code&gt; data structs I was using. My normal pattern when I want data to be &lt;code&gt;Identifiable&lt;/code&gt; is to use something like this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;HttpSection&lt;/span&gt;: Identifiable, Decodable {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; id = UUID()
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; headerCode: String
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; headerText: String
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; statuses: [HttpStatus]
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;But with Xcode 12, this gives an error. The error messages seem much more useful than before and they offered two suggestions. I tried what appeared to be the easier one of making the &lt;code&gt;id&lt;/code&gt; mutable, but that stopped the decoding from working, so I added a &lt;code&gt;CodingKeys&lt;/code&gt; enum to each struct to restrict the keys that would be included.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;enum&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CodingKeys&lt;/span&gt;: String, CodingKey {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; headerCode
    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; headerText
    &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; statuses
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;When the app ran, I had a sidebar with collapsible sections. I wasn&amp;rsquo;t that happy with the default look of the section headers and the disclosure marker for the first header was positioned beside the text instead of at the right, but I do like the selected item lozenge look. I set a frame height for the section header view and that made the spacing better but the disclosure mark for the first header was still incorrectly positioned.&lt;/p&gt;
&lt;style&gt;
  img {
    margin: 10px auto;
  }
&lt;/style&gt;

&lt;p&gt;&lt;img src=&#34;https://troz.net/images/swiftui-mac-11-BadCollapse.png&#34; alt=&#34;Initial collapsible sections&#34;&gt;&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;Detail&lt;/code&gt; view to be displayed when a status is selected had no major changes, so I dropped in the file from the previous app, without the extra bits to do with notifications and preferences. However since SwiftUI now includes a &lt;code&gt;ProgressView&lt;/code&gt;, I swapped out my &amp;ldquo;Loading&amp;hellip;&amp;rdquo; text for a indeterminate progress twirly.&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;three-column-layout&#34;&gt;Three Column Layout&lt;/h3&gt;
&lt;p&gt;Since the collapsible sidebar wasn&amp;rsquo;t looking good, I decide to try for a three column layout with the categories in the first column, the codes for the selected category in the second column and the detail view in the third column.&lt;/p&gt;
&lt;p&gt;The way I implemented this was to have the first list only show the section headers with &lt;code&gt;NavigationLinks&lt;/code&gt; to a sub menu. To reserve the column layout, I had an empty submenu after the main list.&lt;/p&gt;
&lt;p&gt;In the second column, I showed the sub-headers with &lt;code&gt;NavigationLinks&lt;/code&gt; to the &lt;code&gt;DetailView&lt;/code&gt;. This view reserved the space for the third column with a &lt;code&gt;Text&lt;/code&gt; view that changed its text depending on whether that submenu was displaying anything or not.&lt;/p&gt;
&lt;p&gt;I expanded the menu items to be big and chunky, which I feel fits the new style. The only remaining problem was that with the primary list set to use &lt;code&gt;SidebarListStyle()&lt;/code&gt;, it only ever showed the first item. I had to change this to &lt;code&gt;InsetListStyle()&lt;/code&gt; to see all the items! This lost the full height sidebar effect, but I assume this is a temporary bug.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/swiftui-mac-11-ThreeColumns.png&#34; alt=&#34;Three column layout&#34;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;menus&#34;&gt;Menus&lt;/h3&gt;
&lt;p&gt;Now I had the layout equivalent to what I ended up with after part 1 of my original series, so it was time to explore menus, which are very different. In the old style SwiftUI apps which were wrapped in AppKit, the menus were in a storyboard that you could edit. Now you add &lt;code&gt;commands&lt;/code&gt; to the app&amp;rsquo;s &lt;code&gt;WindowGroup&lt;/code&gt; to alter the menus.&lt;/p&gt;
&lt;p&gt;The easiest way is to add a completely new menu, but it is also possible to insert new menu items after or before certain standard menu items.&lt;/p&gt;
&lt;p&gt;Here is how to add a new Utilities menu with three items:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;@main
&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SwiftUI_Mac_11App&lt;/span&gt;: App {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; body: some Scene {
        WindowGroup {
            ContentView()
        }
        .commands {
            CommandMenu(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Utilities&amp;#34;&lt;/span&gt;) {
                Button(action: {}) {
                    Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Dark mode&amp;#34;&lt;/span&gt;)
                }

                Button(action: {}) {
                    Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Light mode&amp;#34;&lt;/span&gt;)
                }

                Button(action: {}) {
                    Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;System mode&amp;#34;&lt;/span&gt;)
                }
            }
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;A &lt;code&gt;CommandMenu&lt;/code&gt; adds a new menu and it is always positioned between the standard View and Window menus. To add items to an existing menu, you need to use a &lt;code&gt;CommandGroup&lt;/code&gt; and tell it where to appear. It can be &lt;code&gt;after&lt;/code&gt; or &lt;code&gt;before&lt;/code&gt; various standard menu items. Look up the docs for &lt;a href=&#34;https://developer.apple.com/documentation/swiftui/commandgroupplacement&#34;&gt;CommandGroupPlacement&lt;/a&gt; to see which items you can use as positional markers. I used &lt;code&gt;after .windowArrangement&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Weirdly, the font, color and spacing of these menu items was different to the standard menu items. I can only assume this is a bug which will be fixed. I faked the proper look with modifiers, but it didn&amp;rsquo;t feel right. This screen shot shows the default look with the three mode items being my additions to the standard Window menu.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/swiftui-mac-11-menus-bad-format.png&#34; alt=&#34;Menus with incorrect formatting&#34;&gt;&lt;/p&gt;
&lt;p&gt;I tried using &lt;code&gt;Labels&lt;/code&gt; to add an icon to the menu item. As I was switching between view modes, I wanted to have a checkmark before the selected menu item. This worked when first drawn, but the menus did not refresh when the data changed, so that was no use.&lt;/p&gt;
&lt;p&gt;I also tested using &lt;code&gt;Divider()&lt;/code&gt; to get a menu separator. It worked, but the look didn&amp;rsquo;t match the standard dividers. So menus need a lot of work still&amp;hellip;&lt;/p&gt;
&lt;p&gt;I kept the technique of having menu items publish notifications that other views could pick up. This seems to work well. I would have liked to have certain menus or menu items only appear conditionally or perhaps enable/disable conditionally, but I could not see how to do that. Since menus do not appear to update when data changes, this may not be possible right now.&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;preferences&#34;&gt;Preferences&lt;/h3&gt;
&lt;p&gt;There was one place where the new app architecture was amazingly good and that was to do with preferences. In my previous attempt at this app, I had a Preferences window and it was a major exercise to stop it opening more than once. This time, it was super easy. In the App.swift file, beside the &lt;code&gt;WindowGroup&lt;/code&gt;, I added &lt;code&gt;Settings&lt;/code&gt; which contained a view which had the UI for my app&amp;rsquo;s preferences.&lt;/p&gt;
&lt;p&gt;This caused a few errors at first, but I added a &lt;code&gt;@SceneBuilder&lt;/code&gt; property wrapper to the App&amp;rsquo;s body and that fixed the errors.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;@main
&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SwiftUI_Mac_11App&lt;/span&gt;: App {
    @SceneBuilder &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; body: some Scene {
        WindowGroup {
            ContentView()
        }

        Settings {
            SettingsView()
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;These three lines of code added a Preferences menu item and hooked it up to my &lt;code&gt;SettingsView&lt;/code&gt;. This view opens in a new window when the Preferences menu item or keyboard shortcut is used and only one copy of this window ever appears.&lt;/p&gt;
&lt;p&gt;Then on to the second brilliant thing about preferences: &lt;code&gt;@AppStorage&lt;/code&gt;. In the previous version, I used a custom property wrapper to wrap settings that I wanted saved into UserDefaults. This is now built into SwiftUI and this was all I had to do:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;    @AppStorage(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;showCopyright&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; showCopyright: Bool = &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Now any time that variable was accessed, it was read from UserDefaults and every time it was changed, it was written back into UserDefaults. Instant preferences in a single line!&lt;/p&gt;
&lt;p&gt;To pass this setting to a different view, all I had to do was give that view this same declaration. And it just worked!&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;opening-another-window&#34;&gt;Opening Another Window&lt;/h3&gt;
&lt;p&gt;Last time, I tried lots of different ways using hosting controllers, storyboards etc. to open secondary windows. This time I decided to stick to using &lt;code&gt;sheet&lt;/code&gt; since it seems to be what works best for SwiftUI apps. So I added my User Interface Elements sample window as a sheet.&lt;/p&gt;
&lt;p&gt;The view itself was reasonably similar except that last time, I used an &lt;code&gt;NSViewRepresentable&lt;/code&gt; to embed an AppKit color well into the view. This time I was able to use the new SwiftUI ColorPicker which made it much easier to get the color back into the main view. I also added the new date and time pickers.&lt;/p&gt;
&lt;p&gt;The color picker worked really well except that there is an option to specify whether the picker should support opacity or not. I found that no matter what I chose here, I never got the option to chose a color with opacity.&lt;/p&gt;
&lt;p&gt;The date picker was good. It showed the date numerically using my local format - DD/MM/YYY. Clicking on any of the elements popped up a calendar view. The time picker was not so easy to use. Again, it showed the time in my format e.g. 7:53 pm. But there was no graphical entry, you click on an element (hour, minute or am/pm) and type. This would be OK except that every time you type, the focus jumps back to the hour. I found this confusing.&lt;/p&gt;
&lt;p&gt;One big improvement is the ability to apply a keyboard shortcut to a button. When I set the keyboard shortcut for the Close button to &lt;code&gt;.defaultAction&lt;/code&gt;, the button got the default appearance and was triggered by pressing the Return key.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;    Button(action: {}) {
        Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Close&amp;#34;&lt;/span&gt;)
    }
    .keyboardShortcut(.defaultAction)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;I was still unable to work out how to set the focus to a TextField. There are two new property wrappers to do with focus, but I understand they are not yet operational.&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;dialogs&#34;&gt;Dialogs&lt;/h3&gt;
&lt;p&gt;I have already used a sheet to display the UI elements and ActionSheets are not available on macOS, so that just leaves Alerts and file dialogs. File dialogs work identically in the app although they look quite different on Big Sur. Alerts look quite different but I think they are nice. Since the app icon is a prominent part of the dialog, I added one to make it look good. I understand that different numbers of buttons will get arranged in different ways.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/swiftui-mac-11-alert.png&#34; alt=&#34;Alert dialog&#34;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;other-improvements&#34;&gt;Other Improvements&lt;/h3&gt;
&lt;h4 id=&#34;self&#34;&gt;Self&lt;/h4&gt;
&lt;p&gt;Do a search for &amp;ldquo;self.&amp;rdquo; and get rid of them all. Your code will be much cleaner and easier to read and SwiftUI now understands what you mean. If you want to read more details about this change, check out &lt;a href=&#34;https://github.com/apple/swift-evolution/blob/master/proposals/0269-implicit-self-explicit-capture.md&#34;&gt;swift-evolution proposal SE-0269&lt;/a&gt;.&lt;/p&gt;
&lt;h4 id=&#34;navigation-titles&#34;&gt;Navigation Titles&lt;/h4&gt;
&lt;p&gt;iOS had the concept of setting a navigation title but it didn&amp;rsquo;t really work in macOS. Now you can set the &lt;code&gt;navigationTitle&lt;/code&gt; of a view and this will be the window title.&lt;/p&gt;
&lt;h4 id=&#34;toolbars&#34;&gt;Toolbars&lt;/h4&gt;
&lt;p&gt;This was an aspect of macOS apps that I referred to but didn&amp;rsquo;t explore last time mainly because I assumed it would be done through the storyboard, just as with an AppKit app. Now we can add a &lt;code&gt;.toolbar&lt;/code&gt; modifier to a view and have it include &lt;code&gt;ToolbarItems&lt;/code&gt;. For the first time, we can now use &lt;a href=&#34;https://developer.apple.com/sf-symbols/&#34;&gt;SF Symbols&lt;/a&gt; in a macOS app, so that made it easy to add good looking toolbar items.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/swiftui-mac-11-toolbar.png&#34; alt=&#34;Toolbar and navigation title&#34;&gt;&lt;/p&gt;
&lt;p&gt;I would like to vary the toolbar according to what is being displayed, and the toolbar is also used to show the navigation title, but perhaps that is a topic for another day. There is certainly a lot to explore there.&lt;/p&gt;
&lt;h4 id=&#34;pyramid-of-doom&#34;&gt;Pyramid of Doom&lt;/h4&gt;
&lt;p&gt;With menus and toolbars, there is a heap of extra code added to certain views. I would love to be able to extract that into its own function or view modifier. I was able to extract the toolbar, but I am not sure how to do this with menus yet. I imagine it will need some specific sort of ViewBuilder but I think this is very necessary. Perhaps the topic for yet another article&amp;hellip;&lt;/p&gt;
&lt;p&gt;The project is available on &lt;a href=&#34;https://github.com/trozware/swiftui-mac-11&#34;&gt;GitHub&lt;/a&gt;. As always, if you have any comments, suggestions or ideas, I would love to hear from you. Please contact me using one of the links below or through my &lt;a href=&#34;https://troz.net/contact/&#34;&gt;Contact&lt;/a&gt; page. Thanks for reading.&lt;/p&gt;
&lt;p&gt;Thanks to &lt;a href=&#34;https://twitter.com/kb091412&#34;&gt;Sungbin Jo (조성빈)&lt;/a&gt; for proof-reading and suggestions.&lt;/p&gt;</description>
</item>
    
    <item>
<title>SwiftUI Snapshot Testing</title>
<link>https://troz.net/post/2020/swiftui_snapshots/</link>
<pubDate>Sun, 17 May 2020 18:50:09 +1000</pubDate>
      
      <guid>https://troz.net/post/2020/swiftui_snapshots/</guid>
<description>&lt;p&gt;Snapshot testing is a technique that has been very popular in the web development world and it seems like a great way to test SwiftUI user interfaces. I read about snapshot tests in a recent blog post and was intrigued, but I had some difficulty getting it to work, so when I finally succeeded, I decided to share my experiences in the hope that others will find them useful.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;what-is-snapshot-testing&#34;&gt;What is Snapshot Testing&lt;/h2&gt;
&lt;p&gt;Unit testing checks that when you call various functions or methods with certain inputs, you get the output you expect. I use unit tests for testing my models and the methods that change them. But this only tests the logic behind the app, it does nothing to test whether the app is displaying what it should, or whether it is responding correctly to the user&amp;rsquo;s actions.&lt;/p&gt;
&lt;p&gt;UI testing emulates user actions by faking taps, clicks, text entry and so on and checks that labels, buttons etc are showing the correct information after these fake interactions.&lt;/p&gt;
&lt;p&gt;Snapshot testing is in between these two as it effectively takes a picture of the interface. The first time you run the test it will store an image and all subsequent test runs will check that the current interface matches this stored image. If there are any differences, the test will fail so you can decide whether to keep the new version or revert to what you had before.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;how-did-i-get-started&#34;&gt;How did I get started?&lt;/h2&gt;
&lt;p&gt;I first read about the idea of using snapshot testing for SwiftUI in a blog post by &lt;a href=&#34;https://www.vadimbulavin.com/snapshot-testing-swiftui-views/&#34;&gt;Vadim Bulavin&lt;/a&gt;. He made a very good argument for this, but I found his instructions assumed more knowledge of the topic than I had at the time and so I discarded the idea after an initial attempt.&lt;/p&gt;
&lt;p&gt;But he was suggesting using a &lt;a href=&#34;https://github.com/pointfreeco/swift-snapshot-testing&#34;&gt;snapshotting library&lt;/a&gt; published by &lt;a href=&#34;https://www.pointfree.co&#34;&gt;Point-Free&lt;/a&gt; and I later discovered a link to one of their videos where they discuss this exact thing: &lt;a href=&#34;https://www.pointfree.co/episodes/ep86-swiftui-snapshot-testing&#34;&gt;SwiftUI Snapshot Testing&lt;/a&gt;. This was enough to get me going with attempt #2.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;setting-up-an-app-for-snapshot-testing&#34;&gt;Setting up an app for snapshot testing&lt;/h2&gt;
&lt;p&gt;Since the blog post and video were talking about iOS apps, I decided to start there, but you know me, I will get to macOS apps later&amp;hellip;&lt;/p&gt;
&lt;p&gt;First off, I created a single view iOS app using SwiftUI making sure to check &amp;ldquo;Include Unit Tests&amp;rdquo;, but not &amp;ldquo;Include UI Tests&amp;rdquo;. I created a simple view so I had something to test.&lt;/p&gt;
&lt;p&gt;If you want to use this on an app that does not already have a unit tests target, go to the project settings, click the + button to add a new target and choose a Unit Testing Bundle.&lt;/p&gt;
&lt;p&gt;Next step was to import the snapshot testing library using Swift Package Manager. Go to File &amp;gt; Swift Packages &amp;gt; Add Package Dependency. Paste in the URL below and click Next.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;https://github.com/pointfreeco/swift-snapshot-testing
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;I accepted the default versioning suggestions on the next pane.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/Snapshot-AddPackage.png&#34; alt=&#34;Adding the snapshot package&#34;&gt;&lt;/p&gt;
&lt;p&gt;On the final pane, it is important to select the correct target for this package. Select the app&amp;rsquo;s test target, not the app itself and not the UI test target if you have one. I made this mistake on my first try as I assumed that snapshot testing would be part of UI testing but it is actually part of unit testing.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/Snapshot-SetTarget.png&#34; alt=&#34;Setting the package target&#34;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;writing-a-snapshot-test&#34;&gt;Writing a Snapshot Test&lt;/h2&gt;
&lt;p&gt;Now I added a new Unit Test Case Class file to the tests target in my app. I had to import SwiftUI and SnapshotTesting into this test file as well as declaring the app as a testable import. The easiest way to do this is to copy the &lt;code&gt;@testable import&lt;/code&gt; heading from the sample test file to make sure it is exactly right. The import needs to match the name of your app module.&lt;/p&gt;
&lt;p&gt;Finally it&amp;rsquo;s time to write the first snapshot test:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;XCTest&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SnapshotTesting&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SwiftUI&lt;/span&gt;
@testable &lt;span style=&#34;color:#66d9ef&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Snapshots&lt;/span&gt;

&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SnapshotsTests&lt;/span&gt;: XCTestCase {

    &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;testDefaultAppearance&lt;/span&gt;() {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; contentView = ContentView()
        assertSnapshot(matching: contentView, &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt;: .image)
    }

}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This uses the snapshot library&amp;rsquo;s &lt;code&gt;assertSnapshot&lt;/code&gt; method to save the content view as an image. But unfortunately, this doesn&amp;rsquo;t work. The problem is that the second parameter is a Snapshotting strategy that can convert various UI elements into some form of data or image. But the library doesn&amp;rsquo;t know what a SwiftUI View is, so it needs a way to convert the view into something that can be recognized by the snapshotter.&lt;/p&gt;
&lt;p&gt;I added this extension to SwiftUI&amp;rsquo;s View that wraps the SwiftUI View in a UIHostingController. It returns this as a UIViewController which is a valid input for a snapshotter and can be converted to an image.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;extension&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SwiftUI&lt;/span&gt;.View {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;toVC&lt;/span&gt;() -&amp;gt; UIViewController {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; vc = UIHostingController(rootView: &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;)
        vc.view.frame = UIScreen.main.bounds
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; vc
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Now my first test became:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;testDefaultAppearance&lt;/span&gt;() {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; contentView = ContentView()
        assertSnapshot(matching: contentView.toVC(), &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt;: .image)
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;And it worked. Or rather it failed as expected because there was no image to compare it with.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://troz.net/images/Snapshot-Test1Result.png&#34;&gt;&lt;img src=&#34;https://troz.net/images/Snapshot-Test1Result.png&#34; alt=&#34;Test result&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Checking the error message, I was able to see where it had created the snapshot image file which I could look at. And the second time I ran the test, it passed.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/Snapshot-TestImage1.png&#34; alt=&#34;Test image in Finder&#34;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;If you ever get an error message saying &amp;ldquo;No such module &amp;lsquo;SnapshotTesting&amp;rsquo;&amp;rdquo; use Shift-Command-U to re-build for testing. This usually only happens after you have cleaned your build folder.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h2 id=&#34;testing-a-change&#34;&gt;Testing a Change&lt;/h2&gt;
&lt;p&gt;Now that I had a passing test, the next thing was to check what happens if the UI changes. This may be due to a deliberate change or because the cat just walked across your keyboard (a not infrequent occurrence around here).&lt;/p&gt;
&lt;p&gt;Where I originally had a button with the label &amp;ldquo;Save&amp;rdquo;, I decided to change this to &amp;ldquo;OK&amp;rdquo; (rejecting the cat&amp;rsquo;s suggestion of &amp;ldquo;q2eegrnh&amp;rdquo;).&lt;/p&gt;
&lt;p&gt;Running the test again produced this result:&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://troz.net/images/Snapshot-FailedTest.png&#34;&gt;&lt;img src=&#34;https://troz.net/images/Snapshot-FailedTest.png&#34; alt=&#34;Failed snapshot test&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;And I was then able to compare the 2 images, using the path to the failing image from the error message.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/Snapshot-TestResults.png&#34; alt=&#34;Test results: success and failure&#34;&gt;&lt;/p&gt;
&lt;p&gt;Once I had confirmed that the new image was what I wanted and not a result of error, either feline or human, I set the test to &lt;code&gt;record&lt;/code&gt; a new result so that the new version became the official test version.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;testDefaultAppearance&lt;/span&gt;() {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; contentView = ContentView()

        record = &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;
        assertSnapshot(matching: contentView.toVC(), &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt;: .image)
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This caused a failing test again as the new version was written to the Snapshots folder, but after removing the &lt;code&gt;record = true&lt;/code&gt; line and re-running the test, it passed again, with my new button label now an accepted part of the test.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;using-snapshots-with-state&#34;&gt;Using Snapshots with State&lt;/h2&gt;
&lt;p&gt;In SwiftUI, the UI displayed is a function of state, so changing state properties changes the UI. This is what makes snapshot testing really good for SwiftUI apps as you can change the state programmatically and confirm that this is reflected in the UI.&lt;/p&gt;
&lt;p&gt;So having proved that the snapshot tests worked, I decided to move on and test it with my new &lt;a href=&#34;https://troz.net/post/2020/name_this_app/&#34;&gt;anagram assistant app&lt;/a&gt;. This is quite a simple app that has a single &lt;code&gt;AppState&lt;/code&gt; class that holds all the program data.&lt;/p&gt;
&lt;p&gt;So I was able to write a suite of tests that changed the state in various ways and then snap-shotted the UI with that state. Here are a couple of examples:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;testEmptyContentView&lt;/span&gt;() {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; contentView = ContentView()
        assertSnapshot(matching: contentView.toVC(), &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt;: .image)
    }

    &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;testAfterLocking&lt;/span&gt;() {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; contentView = ContentView()

        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; appState = AppState.sampleState()
        appState.availableLetters.sort()
        appState.selectedLetterIndex = &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
        appState.placeSelectedLetter(at: &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;)
        appState.toggleLockedState()
        appState.availableLetters.sort()

        contentView.appState = appState
        assertSnapshot(matching: contentView.toVC(), &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt;: .image)
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This worked really well with only one slight problem. As the state arranges the &lt;code&gt;availableLetters&lt;/code&gt; array randomly for display, I had to add a &lt;code&gt;sort&lt;/code&gt; to make sure they always displayed in the same order and made the tests repeatable.&lt;/p&gt;
&lt;p&gt;And as a bonus, I was able to test a screen in dark mode with this test which sets the &lt;code&gt;colorScheme&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;testDarkMode&lt;/span&gt;() {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; contentView = ContentView()
        contentView.appState = sampleAppState()

        assertSnapshot(
            matching: contentView.colorScheme(.dark).toVC(),
            &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt;: .image)
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;accessibility-tests&#34;&gt;Accessibility Tests&lt;/h2&gt;
&lt;p&gt;iOS supports dynamic type and if your app uses standard font styles, it will adopt these dynamic sizes automatically. I can&amp;rsquo;t find the link right now, but I remember reading an article that said nearly half of all iPhone users change the default text size, setting it either smaller or larger.&lt;/p&gt;
&lt;p&gt;With snapshot testing, it is quick and easy to get a view of how you app looks with different font sizes. Here is my test function for taking a snapshot of every possible font size variation.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;testDynamicFonts&lt;/span&gt;() {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; contentView = ContentView()
        contentView.appState = sampleAppState()

        &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; contentSize &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt; ContentSizeCategory.allCases {
            assertSnapshot(matching: contentView.environment(&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;\&lt;/span&gt;.sizeCategory, contentSize).toVC(),
                           &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt;: .image,
                           named: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;\(&lt;/span&gt;contentSize&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;)
        }
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;For the settings screen, I decided that smaller fonts were not a problem, but I wanted to check the two largest options, so I used this test function:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;testSettingsScreen&lt;/span&gt;() {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; settingsView = SettingsView()
        assertSnapshot(matching: settingsView.toVC(), &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt;: .image)

        assertSnapshot(
            matching: settingsView.environment(
                &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;\&lt;/span&gt;.sizeCategory, ContentSizeCategory.accessibilityExtraExtraExtraLarge
            ).toVC(),
            &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt;: .image,
            named: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;AccessibilityXXXL&amp;#34;&lt;/span&gt;)

        assertSnapshot(
            matching: settingsView.environment(
                &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;\&lt;/span&gt;.sizeCategory, ContentSizeCategory.extraExtraExtraLarge
            ).toVC(),
            &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt;: .image,
            named: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;XXXL&amp;#34;&lt;/span&gt;)
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://troz.net/images/Snapshot-DynamicFonts.png&#34; alt=&#34;Dynamic font tests&#34;&gt;&lt;/p&gt;
&lt;p&gt;This let me quickly see where the problems were and what I needed to adjust.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;snapshot-test-for-mac-apps&#34;&gt;Snapshot Test for Mac Apps&lt;/h2&gt;
&lt;p&gt;You knew you weren&amp;rsquo;t going to get through this without me going on about Mac apps&amp;hellip;&lt;/p&gt;
&lt;p&gt;Snapshot tests for a Mac app work well, with one caveat.&lt;/p&gt;
&lt;p&gt;First I had to change the Swift.View extension so that it returned an NSViewController instead of a UIViewController.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;extension&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SwiftUI&lt;/span&gt;.View {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;toVC&lt;/span&gt;() -&amp;gt; NSViewController {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; vc = NSHostingController(rootView: &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;)
        vc.view.frame = CGRect(x: &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, y: &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, width: &lt;span style=&#34;color:#ae81ff&#34;&gt;1024&lt;/span&gt;, height: &lt;span style=&#34;color:#ae81ff&#34;&gt;768&lt;/span&gt;)
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; vc
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;I chose an arbitrary size for the snapshot, you just need to make sure your UI will fit into whatever size you select.&lt;/p&gt;
&lt;p&gt;The real problem was with sand-boxing. The snapshot library was blocked from writing the image files to the project directory if the app was sand-boxed. This seems really peculiar, since Xcode is running the tests and Xcode writes to the project directory all the time!&lt;/p&gt;
&lt;p&gt;I found two ways around this:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Turn off sand-box mode temporarily while testing.&lt;/li&gt;
&lt;li&gt;Make a non-sand-boxed target and use it for testing against.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Neither of these are particularly great. Option 1 is tedious, although I think it can work if the snapshots remain the same, it only fails if there is a change that it needs to write to disk.&lt;/p&gt;
&lt;p&gt;Option 2 is tedious to set up (&lt;a href=&#34;https://troz.net/contact/&#34;&gt;contact me&lt;/a&gt; if you would like more details) but is more seamless after that.&lt;/p&gt;
&lt;p&gt;The best solution would be for Xcode to allow you to turn off sand-boxing for a test target. Maybe Xcode 12&amp;hellip;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;limitations-of-snapshot-testing&#34;&gt;Limitations of Snapshot Testing&lt;/h2&gt;
&lt;p&gt;Ignoring the Mac and concentrating only on iOS apps for the moment, there were a few issues:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;You have to run your tests against the same simulator every time, or at least against a simulator with the same screen dimensions. I decided to to use the iPhone SE (2nd generation) as it has a small screen and I find smaller screens to be more of a problem than large ones. You also need to make sure it is always using the same appearance: light or dark, unless you want to specify this for every test.&lt;/p&gt;
&lt;p&gt;I ended up with this setup function that ran before my snapshot test suite:&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;override&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;setUp&lt;/span&gt;() {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; device = UIDevice.current.name
        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; device &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;iPhone SE (2nd generation)&amp;#34;&lt;/span&gt; {
            fatalError(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Switch to using iPhone SE (2nd generation) for these tests.&amp;#34;&lt;/span&gt;)
        }

        UIView.setAnimationsEnabled(&lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;)
        UIApplication.shared.windows.first?.layer.speed = &lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt;

        record = &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This uses a couple of tricks that are supposed to speed up tests and has a &lt;code&gt;record&lt;/code&gt; setting that I could set for the entire suite if I wished, and it throws a &lt;code&gt;fatalError&lt;/code&gt; if I select the wrong device or simulator.&lt;/p&gt;
&lt;p&gt;It would be neater if Xcode allowed you to select a simulator in the test target build settings, but I think you can only do this if you run tests from the command line.&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;
&lt;p&gt;Snapshot tests confirm that the UI matches the state, but they do not check to see if the state changes in response to user input. That is the missing link that UI testing provides, but even without that, I believe that snapshot testing is a very useful tool and much better than having no form of UI testing at all.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;You need to look at your snapshots. This may sound obvious but the snapshot library creates a set of images. These images are then set as the goal for future tests. If you don&amp;rsquo;t check that they are correct, then every test could be confirming that the UI is wrong but unchanged. If the tests report a difference, look at both copies and see which one is right. For the same reason, the snapshot images need to be included in your version control repository.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2 id=&#34;summary&#34;&gt;Summary&lt;/h2&gt;
&lt;p&gt;Will I use snapshot tests for my SwiftUI apps? Yes, definitely. I use unit tests for my model classes but mostly avoid UI tests as they are too clumsy to write and time-consuming to run. Snapshot tests are better for SwiftUI, and very fast.&lt;/p&gt;
&lt;p&gt;Huge thanks to &lt;a href=&#34;https://twitter.com/V8tr&#34;&gt;Vadim Bualvin&lt;/a&gt; for the original inspiration for this article. Go and read his &lt;a href=&#34;https://www.vadimbulavin.com/snapshot-testing-swiftui-views/&#34;&gt;blog post&lt;/a&gt; for a more detailed look. And thanks to &lt;a href=&#34;https://www.twitter.com/mbrandonw&#34;&gt;Brandon Williams&lt;/a&gt; &amp;amp; &lt;a href=&#34;https://www.twitter.com/stephencelis&#34;&gt;Stephen Celis&lt;/a&gt; at &lt;a href=&#34;https://www.pointfree.co&#34;&gt;Point-Free&lt;/a&gt; for getting me going after my initial discarding of the idea. Any mistakes or errors are mine and not theirs.&lt;/p&gt;
&lt;p&gt;If you want to learn about UI testing for SwiftUI apps, I recommend watching &lt;a href=&#34;https://twitter.com/azamsharp&#34;&gt;azamsharp&amp;rsquo;s&lt;/a&gt; YouTube video: &lt;a href=&#34;https://www.youtube.com/watch?v=dFQtFJsvt04&#34;&gt;User Interface Testing for SwiftUI Applications&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;As always, if you have any comments, suggestions or ideas, I would love to hear from you. Please contact me using one of the links below or through my &lt;a href=&#34;https://troz.net/contact/&#34;&gt;Contact&lt;/a&gt; page.&lt;/p&gt;</description>
</item>
    
    <item>
<title>Name This App</title>
<link>https://troz.net/post/2020/name_this_app/</link>
<pubDate>Sat, 09 May 2020 11:26:21 +1000</pubDate>
      
      <guid>https://troz.net/post/2020/name_this_app/</guid>
<description>&lt;p&gt;My current work in progress is an iPhone app designed to make it easier to solve crossword anagrams by emulating and improving upon an ability that was there when we used to do crosswords on paper, but is missing for digital crosswords.&lt;/p&gt;
&lt;p&gt;But I cannot think of a clever name for the app, so please read the story and contact me with your name suggestions or if you would like to test the pre-release version of this app.&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;cryptic-crosswords&#34;&gt;Cryptic Crosswords&lt;/h3&gt;
&lt;p&gt;Programmers are basically puzzlers, and programming is the world&amp;rsquo;s best type of puzzle, but I like to start my day with a cryptic crossword. Like programming, cryptic crossword clues have their own syntax and what seems like gibberish on a first glance, can be parsed into logical parts to take you to the answer. But there are aspects of solving crosswords that were easier with pencil and paper, so I decided to write an app to help fill one of those gaps.&lt;/p&gt;
&lt;p&gt;My crossword of choice is the &lt;a href=&#34;https://www.irishtimes.com/games/crosswords/&#34;&gt;Crosaire&lt;/a&gt; crossword from &lt;a href=&#34;https://www.irishtimes.com&#34;&gt;The Irish Times&lt;/a&gt;. A lot of newspapers have a cryptic crossword and most of them need a subscription, but the Irish Times has a crossword only subscription that I really like. Crosswords also tend to require some local knowledge, but for the Crosaire, if you remember that the Abbey and the Gate are both theatres and that Down is a county, you will have most of what you need. And as an added bonus, the crossword creator later blogs the solutions with explanations so you can learn how the clues were constructed if you are totally mystified.&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;anagrams&#34;&gt;Anagrams&lt;/h3&gt;
&lt;p&gt;Anagrams are a very popular clue type but they can be tricky to solve because our brains are too good at discerning patterns. We can recognize words using only the first and last letters if they have the correct number of letters inside. This means that asking our brains to scramble these letters into a completely different word is very difficult. In the olden days, when I used to do crosswords in the newspaper, the best method was to find a space in the margin and write the letters out in a circle which forced my brain to reconsider the options.&lt;/p&gt;
&lt;p&gt;Here is an example from a recent Crosaire:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;Users rip off revelation (8)&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The word &amp;ldquo;off&amp;rdquo; is a hint that this is an anagram, &amp;ldquo;Users rip&amp;rdquo; has the right number of letters, so the overall clue must be &amp;ldquo;revelation&amp;rdquo;. This is not a very long anagram and I think having two words makes it easier, but lets take a look at how I would solve this the old-fashioned way. (And I knew the &amp;ldquo;I&amp;rdquo; was the third last letter.)&lt;/p&gt;
&lt;p&gt;&lt;script&gt;
  window.onload = function (e) {
    const imgs = document.getElementsByTagName(&#39;img&#39;)
    for (i = 0; i &lt; imgs.length; i++) {
      let src = imgs[i].src
      if (src.endsWith(&#39;.gif&#39;)) {
        imgs[i].src = &#39;&#39;
        imgs[i].src = src
      }
    }
  }
&lt;/script&gt;

&lt;style&gt;
  img {
    margin: 10px auto;
    border: 0.5rem #dfe7f0 solid;
    border-radius: 0.5rem;
     
    max-width: 400px;
  }

  .dark-theme img {
    margin: 10px auto;
    border: 0.5rem #4a4d50 solid;
    border-radius: 0.5rem;
     
  }

  .social_footer img {
    border: none;
    box-shadow: none;
  }
&lt;/style&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/Anagram1.gif&#34; alt=&#34;Anagram solving manually&#34;&gt;&lt;/p&gt;
&lt;p&gt;If you watch this gif and then look at it when it stops repeating, hopefully you will be able to see that the answer is &amp;ldquo;SURPRISE&amp;rdquo;. Refresh the page if you want to start the gif looping again.&lt;/p&gt;
&lt;p&gt;But I do crosswords on my iPad now and while I could use a notes app and my Apple Pencil to draw the letters out like I did in the GIF above, I don&amp;rsquo;t always have the Pencil with me and I want to keep looking at the crossword. So I decided that a companion iPhone app was the way that would work best for me.&lt;/p&gt;
&lt;p&gt;There are sites and apps that offer anagram solvers, but they are just looking through a dictionary and showing you all the possibilities. To me, this feels like cheating, but I don&amp;rsquo;t have a problem with using an app to emulate the techniques I used to use with pencil and paper.&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;app-design&#34;&gt;App Design&lt;/h3&gt;
&lt;p&gt;So I planned out the basic features of the app:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;enter a word&lt;/li&gt;
&lt;li&gt;display the letters in a circle&lt;/li&gt;
&lt;li&gt;shuffle these letters if needed&lt;/li&gt;
&lt;li&gt;place letters in a possible solution&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Arranging the letters in a circle was made relatively easy by using SwiftUI. I placed the letters in a ZStack so they were all piled on the one spot. Then I calculated the X &amp;amp; Y offsets needed to move each letter to the edge of a circle. This involving digging out some long-forgotten trigonometry to convert from polar coordinates to rectangular coordinates. I could calculate the radius of the letter circle based on the screen size and the angle between each letter was 360 degrees divided by the number of letters. So some quick calculations converted these two numbers into X &amp;amp; Y coordinates for each letter, and then I had my circle.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; radiansBetweenLetters: Double {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; degrees = &lt;span style=&#34;color:#ae81ff&#34;&gt;360.0&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; Double(anagramLetters.count)
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; radians = degrees &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; .pi &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;180&lt;/span&gt;
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; radians
    }

    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; radiusForCircle: Double {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; screenWidth = UIScreen.main.bounds.width
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; Double(screenWidth &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0.35&lt;/span&gt;)
    }

    &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;XoffsetForLetterAt&lt;/span&gt;(index: Int) -&amp;gt; CGFloat {
        &lt;span style=&#34;color:#75715e&#34;&gt;// x = R cos t&lt;/span&gt;
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; totalRadians = radiansBetweenLetters &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; Double(index)
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; x = radiusForCircle &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; sin(totalRadians)
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; CGFloat(x)
    }

    &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;YoffsetForLetterAt&lt;/span&gt;(index: Int) -&amp;gt; CGFloat {
        &lt;span style=&#34;color:#75715e&#34;&gt;// y = R sin t&lt;/span&gt;
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; totalRadians = radiansBetweenLetters &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; Double(index)
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; y = radiusForCircle &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; cos(totalRadians)
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; CGFloat(y)
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The original word was converted into an array for display, so re-arranging the letters was a matter of calling &lt;code&gt;shuffle()&lt;/code&gt; on the array which automatically triggered a SwiftUI redraw.&lt;/p&gt;
&lt;p&gt;And here is version 1 of the interface running in the SwiftUI Canvas:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/AnagramAssistv1.gif&#34; alt=&#34;Anagram app version 1&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Refresh the page to see the gif play, if it has stopped.&lt;/em&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;a-different-type-of-anagram&#34;&gt;A Different Type of Anagram&lt;/h3&gt;
&lt;p&gt;Now we come to a variation of the anagram clue that is very popular with the author of the Crosaire crossword. I don&amp;rsquo;t know if there is an official name, but I call them &amp;ldquo;subtraction anagrams&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;Here is an example:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;Creationist has no taste for what&amp;rsquo;s sarcastic (6)&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The idea here is to remove the letters in &amp;ldquo;taste&amp;rdquo; from the letters in &amp;ldquo;Creationist&amp;rdquo; and then unscramble the remaining letters to find a word that means &amp;ldquo;sarcastic&amp;rdquo;. My first attempt at this used a Trash can button that removed the letter and shortened the space for the solution, but then I decided to have a discard tray at the bottom of the screen to show what had been removed and allow replacing any letters discarded by mistake.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/AnagramDiscard.png&#34; alt=&#34;Anagram discard tray&#34;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;After this, I added a bit of style to make it look nicer and then moved on to the next feature. If I knew some of the cross letters already, I wanted to be able to place them in the solution squares and then lock them in place. This would allow me to shuffle in letters to test and remove all the unlocked ones with a button click. So here is what the app looked like after those changes:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/AnagramLocks.gif&#34; alt=&#34;Anagram with locked letters&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Refresh the page to see the gif play, if it has stopped.&lt;/em&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;drag--drop&#34;&gt;Drag &amp;amp; Drop&lt;/h3&gt;
&lt;p&gt;My next experiment was with drag &amp;amp; drop to place or discard letters. I waited until iOS 13.4 brought drag &amp;amp; drop to SwiftUI but I was not happy with the result. Firstly, there is a big lag on dragging. You have to hold your finger down on a letter for quite a while before it becomes draggable. This was so counter-intuitive that I thought it wasn&amp;rsquo;t working, but occasionally it did work and so I eventually deduced that it was a timing issue.&lt;/p&gt;
&lt;p&gt;The second problem was solved thanks to a suggestion by &lt;a href=&#34;https://twitter.com/luisramos1337&#34;&gt;Luis Ramos&lt;/a&gt; on &lt;a href=&#34;https://twitter.com/trozware/status/1254568520295124992&#34;&gt;Twitter&lt;/a&gt;. When I dragged a letter, the drag preview image was the shuffle button from the middle of the ZStack instead of the selected letter. This was solved by moving the &lt;code&gt;onDrag&lt;/code&gt; modifier to BEFORE the &lt;code&gt;offset&lt;/code&gt; modifier (not AFTER like I said in my original response to Luis). But I was still not happy with it, so I decided to discard this idea and stick to tapping.&lt;/p&gt;
&lt;p&gt;There was one side-effect: I wasn&amp;rsquo;t able to get the drag preview to be round - it was a square with opaque corners. As a work-around, I changed the letters to be inside squares and then decided this was a better look anyway, since it was more like what you see in a crossword.&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;further-ui-enhancements&#34;&gt;Further UI Enhancements&lt;/h3&gt;
&lt;p&gt;I installed a custom font so that it looked more like hand-writing. I wrote about &lt;a href=&#34;https://troz.net/post/2020/custom-fonts/&#34;&gt;installing custom fonts&lt;/a&gt; in a separate article, so if you are interested check that out for details on the multiple steps that you need to take to get them to work. I went through a few different fonts until I found one that I thought worked well and clearly for all the upper case letters but I settled on &lt;a href=&#34;https://www.fontspace.com/search?q=oregano&#34;&gt;Oregano&lt;/a&gt;. And then I made the app work in dark mode too:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/AnagramDarkMode.png&#34; alt=&#34;Custom font and dark mode&#34;&gt;&lt;/p&gt;
&lt;p&gt;The clue for this one is &lt;em&gt;&amp;ldquo;Consumables minus bacon and shellfish (6)&amp;quot;&lt;/em&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;animations&#34;&gt;Animations&lt;/h3&gt;
&lt;p&gt;SwiftUI has animation built in, so I was able to add an &lt;code&gt;animation&lt;/code&gt; modifier to the various views to make the transitions look smooth. I particularly liked the way the letters re-arranged themselves around the circle when I removed or replaced a letter.&lt;/p&gt;
&lt;p&gt;But to add something extra, I thought it would be fun if the letters all started in the middle and moved outwards to their places on the circle. The way I did this was by using a Boolean to store whether the letters had had their first draw. If not, the radius of the circle was zero, so they all piled in the middle. After a delay, this Boolean was toggled so the radius was changed to the full size and the animation modifier already applied, made the letters smoothly expand outwards.&lt;/p&gt;
&lt;p&gt;For the letter shuffle, I did the reverse, moving the letters in, shuffling, then moving them out again.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/AnagramAnimation.gif&#34; alt=&#34;Animations&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Refresh the page to see the gif play, if it has stopped.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;I also added sound effects and a slide-up sheet view with settings and help. I enjoyed using &lt;a href=&#34;https://developer.apple.com/design/human-interface-guidelines/sf-symbols/overview/&#34;&gt;Apple&amp;rsquo;s SF Symbols&lt;/a&gt; to show icons for each paragraph of the help, although I may change the colour of these icons as they look at bit too much like buttons right now.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/AnagramHelp.png&#34; alt=&#34;Help &amp; Settings&#34;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;next-steps&#34;&gt;Next Steps&lt;/h3&gt;
&lt;p&gt;Well, I am hoping that someone will come up with a good name. I thought of &amp;ldquo;Anagram Assistant&amp;rdquo; but that doesn&amp;rsquo;t fit underneath the home screen icon and it was shortened to &amp;ldquo;Anagram&amp;rdquo;. I don&amp;rsquo;t want people to see it and think it is just one of those dictionary lookup anagram finders, so I would like something more descriptive while still being short, or at least having a short variant.&lt;/p&gt;
&lt;p&gt;In honour of P.G.Wodehouse&amp;rsquo;s favourite crossword clue, I thought of calling it &amp;ldquo;E blank U&amp;rdquo; but that isn&amp;rsquo;t an anagram, so it doesn&amp;rsquo;t really work. For people not familiar with that reference, Wodehouse&amp;rsquo;s less quick-witted characters always get stuck on &amp;ldquo;Large flightless Australian bird, 3 letters. E blank U&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;A clever name would be good - perhaps an anagram itself? If you think of anything, please let me know on &lt;a href=&#34;https://twitter.com/trozware&#34;&gt;Twitter&lt;/a&gt;, by using the email link below or through the &lt;a href=&#34;https://troz.net/contact/&#34;&gt;Contact page&lt;/a&gt;. The namer will get full credit in the app. And use one of those methods to contact me if you would like to test the app before it is released.&lt;/p&gt;
&lt;p&gt;Once I have a name, I can get to work on the usual secondary tasks which take so much time: App Store set up, screen shots, a support page and so on.&lt;/p&gt;
&lt;p&gt;I haven&amp;rsquo;t tried an iPad version yet. I got stung once by testing an iPad version of an app, deciding it didn&amp;rsquo;t work well and then running into Apple&amp;rsquo;s ban on dropping a platform from a published app. This has discouraged me from iPad apps ever since, which I doubt was their intention.&lt;/p&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;And if you are curious about the solutions to the clues I used in the examples:&lt;/p&gt;
&lt;p&gt;Users rip off revelation (8) = SURPRISE&lt;br&gt;
Creationist has no taste for what&amp;rsquo;s sarcastic (6) = IRONIC&lt;br&gt;
Consumables minus bacon and shellfish (6) = MUSSEL&lt;/p&gt;
&lt;/blockquote&gt;</description>
</item>
    
    <item>
<title>SwiftUI Color</title>
<link>https://troz.net/post/2020/swiftui-color/</link>
<pubDate>Sat, 09 May 2020 11:26:08 +1000</pubDate>
      
      <guid>https://troz.net/post/2020/swiftui-color/</guid>
<description>&lt;p&gt;As developers, we are used to thinking of color as a numeric way to specify a particular tint. But in SwiftUI, &lt;code&gt;Color&lt;/code&gt; - like almost everything else - is actually a &lt;code&gt;View&lt;/code&gt; in its own right. This leads us to two very interesting questions: how do we use a view to specify a color and how can we use the fact that &lt;code&gt;Color&lt;/code&gt; is &lt;code&gt;View&lt;/code&gt;?&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;specifying-a-color&#34;&gt;Specifying a Color&lt;/h2&gt;
&lt;p&gt;To start my investigations of &lt;code&gt;Color&lt;/code&gt;, I created a new iOS single view app in Xcode. Regular followers will know that I am a passionate advocate of macOS programming, but when experimenting with SwiftUI, I prefer to use an iPhone app as the preview canvas fits very neatly into the main Xcode window.&lt;/p&gt;
&lt;p&gt;The default &lt;code&gt;ContentView&lt;/code&gt; contains a single &lt;code&gt;Text&lt;/code&gt; view. To change the color of the text in this view, I added a modifier:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;  Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Hello, World!&amp;#34;&lt;/span&gt;)
      .foregroundColor(.red)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The &lt;code&gt;foregroundColor&lt;/code&gt; modifier expects a &lt;code&gt;Color&lt;/code&gt; so there was no need to tell it that the parameter is a &lt;code&gt;Color&lt;/code&gt; and I was able to use the short way of describing one of the standard colors.&lt;/p&gt;
&lt;p&gt;Adding a background color is a bit different because a background can be any view, not just a color. So the modifier needs to specify that this is a &lt;code&gt;Color&lt;/code&gt; view, as well as setting the actual color.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;    Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Hello, World!&amp;#34;&lt;/span&gt;)
        .padding()
        .foregroundColor(.red)
        .background(Color.yellow)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;em&gt;I added the padding to make the overall size bigger so that the background color was more obvious.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Command-click on &lt;code&gt;.red&lt;/code&gt; or &lt;code&gt;.yellow&lt;/code&gt; in the code and select &amp;ldquo;Jump to Definition&amp;rdquo;. This lists the available pre-defined colors. As well a set of basic colors and a clear option, there are two extra entries: primary &amp;amp; secondary. And if you scroll back up the page a bit, you will see another one: accentColor.&lt;/p&gt;
&lt;p&gt;Choosing one of the preset options is the easiest way to select a color. But try this:&lt;/p&gt;
&lt;p&gt;In your code, type &lt;code&gt;let uiColor = UIColor.&lt;/code&gt; and have a look at the auto-complete suggestions that appear after you type the period. Scrolling past the various &lt;code&gt;init&lt;/code&gt; methods, you will see that &lt;code&gt;UIColor&lt;/code&gt; has a lot more options than &lt;code&gt;Color&lt;/code&gt;. There are a bunch of colors, a section of system colors and a lot of semantic colors like placeholderText, secondarySystemBackground.&lt;/p&gt;
&lt;p&gt;Why does UIColor get these other useful looking options and Color does not?&lt;/p&gt;
&lt;p&gt;Well, I don&amp;rsquo;t have an answer to that except that I hope they will appear over time. But in the meantime, it is easy enough to create a SwiftUI &lt;code&gt;Color&lt;/code&gt; from a &lt;code&gt;UIColor&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; backgroundColor = Color(UIColor.secondarySystemBackground)

    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; body: some View {
      VStack {
        Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Hello, World!&amp;#34;&lt;/span&gt;)
      }
      .background(backgroundColor)
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;If you know the RGB values of the color you want to use, it is possible to create a &lt;code&gt;Color&lt;/code&gt; directly by various methods like this one for setting the color using the RGB values.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; rgbColor = Color(red: &lt;span style=&#34;color:#ae81ff&#34;&gt;1.0&lt;/span&gt;, green: &lt;span style=&#34;color:#ae81ff&#34;&gt;0.5&lt;/span&gt;, blue: &lt;span style=&#34;color:#ae81ff&#34;&gt;0.5&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;But when you get to this stage, I strongly suggest that you start using color assets instead.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;using-color-assets&#34;&gt;Using Color Assets&lt;/h2&gt;
&lt;p&gt;Go to Assets.xcassets and click the plus button at the bottom of the list of assets. Select &amp;ldquo;New Color Set&amp;rdquo; and you will get a new asset called &amp;ldquo;Color&amp;rdquo;. You can double-click the name to edit it to something that makes sense to you.&lt;/p&gt;
&lt;style&gt;
  img {
    margin: 10px auto;
    border: 0.5rem #dfe7f0 solid;
    border-radius: 0.5rem;
     
  }

  .dark-theme img {
    margin: 10px auto;
    border: 0.5rem #4a4d50 solid;
    border-radius: 0.5rem;
     
  }

  .social_footer img {
    border: none;
    box-shadow: none;
  }
&lt;/style&gt;

&lt;p&gt;&lt;img src=&#34;https://troz.net/images/swiftui-colors-add-set.png&#34; alt=&#34;Add Color Set&#34;&gt;&lt;/p&gt;
&lt;p&gt;While naming it after the color may seem logical, I prefer to think about the use cases for this color and set the name to something like &amp;ldquo;cardBackground&amp;rdquo; or &amp;ldquo;alertText&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;By default, your new color set will contains a single color block. Click in the color block itself and then you will be able to edit the color in the Attributes Inspector. If you click the &amp;ldquo;Content&amp;rdquo; popup, you will get access to all the system colors, and you can also select any color space and create a custom color using that color space. Click &amp;ldquo;Color Panel&amp;rdquo; to access a standard color picker if you need it. And change the input method to whatever suits the color information you have.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/swiftui-colors-set.png&#34; alt=&#34;Edit Color Set&#34;&gt;&lt;/p&gt;
&lt;p&gt;Modern apps need to be able to handle light and dark modes, and this is where using a color set really shines. Set the color to what you want to use for light mode and then choose &amp;ldquo;Any, Dark&amp;rdquo; from the Appearances popup menu in the Attributes Inspector.&lt;/p&gt;
&lt;p&gt;Now your color set has two blocks and you can change the Dark one to whatever color this should be in dark mode. This feature of Color Sets is a very strong argument for using them instead of defining colors using their RGB values.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/swiftui-colors-multi-set.png&#34; alt=&#34;Light &amp; Dark Color Set&#34;&gt;&lt;/p&gt;
&lt;p&gt;And now for the really neat part. To use any of these color sets in your code, add a modifier like &lt;code&gt;foregroundColor&lt;/code&gt; just the same as usual, but when the placeholder for the color is selected, press Shift-Command-L to bring up the Library palette and choose the Color icon at the right. You will see all your color sets there and you can insert them easily and accurately.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/swiftui-colors-use-color-set.png&#34; alt=&#34;Using a Color Set&#34;&gt;&lt;/p&gt;
&lt;p&gt;Here is the code for my &lt;code&gt;AlertView&lt;/code&gt; using two color sets.&lt;/p&gt;
&lt;p&gt;Some people may object to using &amp;ldquo;magic strings&amp;rdquo; to specify the color sets but I feel that so long as the Library is used to insert the color names automatically, there is very little chance of error. But you could always make an enum or struct of color name constants and use these instead.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;AlertView&lt;/span&gt;: View {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; alertText = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Something went wrong!&amp;#34;&lt;/span&gt;

    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; body: some View {
        Text(alertText)
            .padding()
            .background(Color(UIColor.secondarySystemBackground))
            .cornerRadius(&lt;span style=&#34;color:#ae81ff&#34;&gt;15&lt;/span&gt;)
            .shadow(color: Color(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;alertShadow&amp;#34;&lt;/span&gt;), radius: &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;, x: &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;, y: &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
            .foregroundColor(Color(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;alertText&amp;#34;&lt;/span&gt;))
    }
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;AlertView_Previews&lt;/span&gt;: PreviewProvider {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; previews: some View {
        Group {
            AlertView().preferredColorScheme(.light)
            AlertView().preferredColorScheme(.dark)
        }
        .previewLayout(.sizeThatFits)
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;And here is a composite image showing the two versions of the alert with the colors specified by two color sets:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/swiftui-colors-alerts.png&#34; alt=&#34;Alerts Using Color Set&#34;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;light--dark-mode-system-colors&#34;&gt;Light &amp;amp; Dark Mode System Colors&lt;/h2&gt;
&lt;p&gt;Color&amp;rsquo;s preset colors adapt automatically to the environment so that they work with dark mode or light mode just like your own Color Sets can.&lt;/p&gt;
&lt;p&gt;I wrote a test view to loop through all the preset colors (except clear) and display their descriptions in their own color.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ContentView&lt;/span&gt;: View {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; standardColors: [Color] = [
        .black, .white, .gray, .red, .green, .blue, .orange,
        .yellow, .pink, .purple, .primary, .secondary, .accentColor
    ]

    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; body: some View {
        VStack(alignment: .leading) {
            ForEach(standardColors, id: &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;\&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;) { color &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt;
                Text(color.description)
                    .bold()
                    .foregroundColor(color)
            }
            .font(.title)
        }
        .padding()
    }
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ContentView_Previews&lt;/span&gt;: PreviewProvider {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; previews: some View {
        Group {
            ContentView().preferredColorScheme(.light)
            ContentView().preferredColorScheme(.dark)
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The canvas shows two previews: one for light mode and one for dark mode.&lt;/p&gt;
&lt;p&gt;If you have a color picker app (I use &lt;a href=&#34;https://github.com/Toinane/colorpicker/releases/tag/2.0.3&#34;&gt;Colorpicker&lt;/a&gt;), you can detect the RGB values in the two previews. I made the font bold to make this easier. Red is &lt;code&gt;rgb(232, 77, 61)&lt;/code&gt; in light mode but &lt;code&gt;rgb(233, 85, 69)&lt;/code&gt; in dark mode. And the others have similar modifications to make them look their best in each environment.&lt;/p&gt;
&lt;p&gt;Take particular note of the three at the bottom of the list: primary, secondary and accentColor. These are incredibly useful when making a layout that works in both light and dark modes.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/swiftui-colors-light-dark.png&#34; alt=&#34;Color previews&#34;&gt;&lt;/p&gt;
&lt;p&gt;When choosing a UIColor or NSColor, it is best to use the system versions, so &lt;code&gt;.systemBlue&lt;/code&gt; instead of &lt;code&gt;.blue&lt;/code&gt; as this gives the dark/light variants that we just saw. And the other semantic colors like &lt;code&gt;UIColor.secondarySystemBackground&lt;/code&gt; also have dark/light variants automatically.&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;color-as-a-view&#34;&gt;Color as a View&lt;/h3&gt;
&lt;p&gt;Now let&amp;rsquo;s consider the effect of &lt;code&gt;Color&lt;/code&gt; being a view and not just a description of a tint. Imagine you wanted to draw a colored box on the screen. Using UIKit, you would probably think of using a &lt;code&gt;UIView&lt;/code&gt;. With AppKit, maybe an &lt;code&gt;NSBox&lt;/code&gt;. Or perhaps you would have jumped straight to a Bezier path.&lt;/p&gt;
&lt;p&gt;Create a new SwiftUI view and replace the default &lt;code&gt;Text&lt;/code&gt; with a &lt;code&gt;Color&lt;/code&gt;, like this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;BoxView&lt;/span&gt;: View {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; body: some View {
        Color.blue
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Resume the canvas preview and you will see the color fill the preview iPhone screen, except for the safe areas top and bottom.&lt;/p&gt;
&lt;p&gt;To make this into a box, add a &lt;code&gt;frame&lt;/code&gt; modifier with the required height and width. And now you have a box, far more easily than you could in either UIKit or AppKit.&lt;/p&gt;
&lt;p&gt;To be honest, in SwiftUI, you would probably use a &lt;code&gt;Rectangle&lt;/code&gt; instead of a plain &lt;code&gt;Color&lt;/code&gt; if you wanted a box of a set size but it is interesting to consider how &lt;code&gt;Color&lt;/code&gt; could be made to work.&lt;/p&gt;
&lt;p&gt;A more valuable use of &lt;code&gt;Color&lt;/code&gt; is to set the background.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;BackgroundView&lt;/span&gt;: View {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; body: some View {
        ZStack {
            Color.green

            Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Hello, green background&amp;#34;&lt;/span&gt;)
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This makes the entire background green and shows the text centered on it.&lt;/p&gt;
&lt;p&gt;And to make the color extend into the safe areas:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;  Color.green.edgesIgnoringSafeArea(.all)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;I prefer to put the &lt;code&gt;edgesIgnoringSafeArea&lt;/code&gt; modifier on the &lt;code&gt;Color&lt;/code&gt; only and not on the entire &lt;code&gt;ZStack&lt;/code&gt;. That way the other contents of the &lt;code&gt;ZStack&lt;/code&gt; will all stay inside the safe area.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;So in summary, use preset colors or color assets to set your colors. And use the &lt;code&gt;Color&lt;/code&gt; view to set a background color for a view.&lt;/p&gt;
&lt;p&gt;I hope you found this article useful, and if you have any suggestions, corrections or improvements, please contact me using one of the links below or through the &lt;a href=&#34;https://troz.net/contact/&#34;&gt;Contact&lt;/a&gt; page.&lt;/p&gt;</description>
</item>
    
    <item>
<title>Custom Fonts in iOS &amp; macOS apps</title>
<link>https://troz.net/post/2020/custom-fonts/</link>
<pubDate>Wed, 01 Apr 2020 10:27:59 +1000</pubDate>
      
      <guid>https://troz.net/post/2020/custom-fonts/</guid>
<description>&lt;p&gt;As a rule, I prefer to use fonts that come pre-installed with the system. That means that your interface is already familiar to users, you get dynamic font sizing and if Apple updates the fonts, you get the updates without doing anything.&lt;/p&gt;
&lt;p&gt;But sometimes, you really need to use a different font in your apps, and as the process of getting a custom font to display in your app can be confusing and tedious, I thought I would go through the steps for both iOS and macOS apps.&lt;/p&gt;
&lt;p&gt;I probably should have published this on a different day, but it is not a joke&amp;hellip;. really.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;getting-a-font-file&#34;&gt;Getting a Font File&lt;/h2&gt;
&lt;p&gt;The first thing is to find a suitable font and make sure that the license for that font matches your use. I wanted a font that looked like it was hand-written, so I went to fontspace and searched the &lt;a href=&#34;https://www.fontspace.com/category/handwriting&#34;&gt;hand-writing category&lt;/a&gt; there.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/SelectFont1.png&#34; alt=&#34;Fonts&#34;&gt;&lt;/p&gt;
&lt;p&gt;Since I wanted to use this in a paid app, I checked the &amp;ldquo;Commercial-use&amp;rdquo; button to limit the search. The one I chose was called &amp;ldquo;&lt;a href=&#34;https://www.fontspace.com/get/family/4yyjn&#34;&gt;Painting With Chocolate&lt;/a&gt;&amp;rdquo; by &amp;ldquo;Make mooze&amp;rdquo;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/SelectFont2.png&#34; alt=&#34;Download font&#34;&gt;&lt;/p&gt;
&lt;p&gt;I downloaded the font and un-zipped the file which gave me a single file called &amp;ldquo;Paintingwithchocolate-K5mo.ttf&amp;rdquo;. You can use either &amp;ldquo;.ttf&amp;rdquo; or &amp;ldquo;.otf&amp;rdquo; font files.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;using-the-font-in-an-ios-app&#34;&gt;Using the Font in an iOS App&lt;/h2&gt;
&lt;p&gt;Now to use the font, first in an iOS app. Boot up Xcode and create a new SwiftUI project for iOS.&lt;/p&gt;
&lt;p&gt;Once the project is open, drag the font file into the Project Navigator. At this stage there are 2 crucial settings:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Check &amp;ldquo;Copy files if needed&amp;rdquo;.&lt;/li&gt;
&lt;li&gt;Check your app in the &amp;ldquo;Add to targets&amp;rdquo; section.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/AddFontToProject.png&#34; alt=&#34;Add font to project&#34;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;In one of my tests, the file stayed in the Downloads folder even after checking &amp;ldquo;Copy files&amp;rdquo;, so I deleted the reference, manually moved the font file to my project folder and added it again.&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Now the font file is in the project but there is still more work to do.&lt;/p&gt;
&lt;p&gt;Select the font file in the Project Navigator. Press Return as if you are going to edit the name. Select the complete file name, &lt;strong&gt;including the file extension&lt;/strong&gt; and copy it.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/CopyFontName.png&#34; alt=&#34;Copy font file name&#34;&gt;&lt;/p&gt;
&lt;p&gt;Now go to the Info.plist file. Right-click in the blank space below the existing entries and select &amp;ldquo;Add Row&amp;rdquo; from the popup menu. In the box that appears, start typing &amp;ldquo;Font&amp;rdquo; using an upper-case &amp;ldquo;F&amp;rdquo;. When you see &amp;ldquo;Fonts provided by application&amp;rdquo;, select that.&lt;/p&gt;
&lt;p&gt;This entry is an array. Click the disclosure triangle to the left and you should see &amp;ldquo;Item 0&amp;rdquo; appear. Paste the name of your font file, including the file extension, into the value for &amp;ldquo;Item 0&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/FontsProvided.png&#34; alt=&#34;Setting Info.plist entry&#34;&gt;&lt;/p&gt;
&lt;p&gt;Your app now has a font file and knows to make it available. But you aren&amp;rsquo;t finished yet.&lt;/p&gt;
&lt;p&gt;To use a custom font, you need to know its exact name. In SwiftUI, the code will be something like this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;  Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Hello, World!&amp;#34;&lt;/span&gt;)
      .font(.custom(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Font-Name-Goes-Here&amp;#34;&lt;/span&gt;, size: &lt;span style=&#34;color:#ae81ff&#34;&gt;14&lt;/span&gt;))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;But the exact name is not always obvious and is rarely the file name. So the best thing to do is to ask the app what fonts it now has available. This will also act as confirmation that the font file is being included correctly in your project.&lt;/p&gt;
&lt;p&gt;To get the app to list all its fonts, I used this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ContentView&lt;/span&gt;: View {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; body: some View {
        Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Hello, World!&amp;#34;&lt;/span&gt;)
            .onAppear { &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.listInstalledFonts() }
    }

    &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;listInstalledFonts&lt;/span&gt;() {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; fontFamilies = UIFont.familyNames.sorted()
        &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; family &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt; fontFamilies {
            print(family)
            &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; font &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt; UIFont.fontNames(forFamilyName: family).sorted() {
                print(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;\t&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;\(&lt;/span&gt;font&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;)
            }
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;You can run the app in the Simulator or use &amp;ldquo;Debug Preview&amp;rdquo; to make this show up in the console, but once you have the list, scroll through in until you find the font you just added. The headers are the names of font families and the indented entries are the font names themselves.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/FontsList-iOS.png&#34; alt=&#34;List of Fonts&#34;&gt;&lt;/p&gt;
&lt;p&gt;This time I found that the name of the font was quite obvious: &amp;ldquo;PaintingWithChocolate&amp;rdquo; but this is not always the case. And if the font has any variants, you will need to use the complete name e.g. &amp;ldquo;Optima-ExtraBlack&amp;rdquo;&lt;/p&gt;
&lt;p&gt;With the name of the font, you are finally able to use it in the app, like this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ContentView&lt;/span&gt;: View {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; body: some View {
        Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Hello, World!&amp;#34;&lt;/span&gt;)
            .font(.custom(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;PaintingWithChocolate&amp;#34;&lt;/span&gt;, size: &lt;span style=&#34;color:#ae81ff&#34;&gt;40&lt;/span&gt;))
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://troz.net/images/FontUsed-iOS.png&#34; alt=&#34;Font in use - iOS&#34;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;using-the-font-in-a-mac-app&#34;&gt;Using the Font in a Mac App&lt;/h2&gt;
&lt;p&gt;The process for a Mac app is mostly the same.&lt;/p&gt;
&lt;p&gt;Install the font file in your project as before, making sure to copy the file into the project and to add it to the app target.&lt;/p&gt;
&lt;p&gt;For a Mac app, you do not need to specify the font file name in your Info.plist file. Instead, you have to tell the Info.plist where to look for custom fonts in your project directory.&lt;/p&gt;
&lt;p&gt;Open your Info.plist, right-click in the blank space below the existing entries and select &amp;ldquo;Add Row&amp;rdquo; from the popup menu. Start typing &amp;ldquo;Application&amp;rdquo; using an upper-case &amp;ldquo;A&amp;rdquo;. When you see &amp;ldquo;Application fonts resource path&amp;rdquo;, select that and enter a period as the value. A period or full-stop tells Xcode that you mean the current directory but even if you have your fonts in a sub-directory, this seems to work.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/AppFontPath.png&#34; alt=&#34;Application Font Path&#34;&gt;&lt;/p&gt;
&lt;p&gt;You do not need to set &amp;ldquo;Fonts provided by application&amp;rdquo; for a Mac app, although if I had a problem, I would set it as I feel that this is something that Apple may add at some stage.&lt;/p&gt;
&lt;p&gt;While I was using the same font for both apps and so already had the exact name, you may still need to check the list of installed fonts in a Mac app. The function for doing that is quite different:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;listInstalledFonts&lt;/span&gt;() {
      &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; fontFamilies = NSFontManager.shared.availableFontFamilies.sorted()
      &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; family &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt; fontFamilies {
          print(family)
          &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; familyFonts = NSFontManager.shared.availableMembers(ofFontFamily: family)
          &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; fonts = familyFonts {
              &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; font &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt; fonts {
                print(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;\t&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;\(&lt;/span&gt;font&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;)
              }
          }
      }
  }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The format of the print-out is different too, but you can see where I have selected the exact name to use.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/FontList-Mac.png&#34; alt=&#34;List of Fonts - Mac&#34;&gt;&lt;/p&gt;
&lt;p&gt;Then the SwiftUI code for using the font was just the same:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ContentView&lt;/span&gt;: View {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; body: some View {
        Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Hello, World!&amp;#34;&lt;/span&gt;)
            .font(.custom(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;PaintingWithChocolate&amp;#34;&lt;/span&gt;, size: &lt;span style=&#34;color:#ae81ff&#34;&gt;60&lt;/span&gt;))
            .frame(maxWidth: .infinity, maxHeight: .infinity)
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://troz.net/images/FontUsed-Mac.png&#34; alt=&#34;Font in use in Mac app&#34;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;storyboard-apps&#34;&gt;Storyboard apps&lt;/h2&gt;
&lt;p&gt;The examples above were both SwiftUI projects, but these techniques work much the same in a storyboard project.&lt;/p&gt;
&lt;p&gt;Follow the same steps to install the font and configure the Info.plist file and use the same functions to list the installed files.&lt;/p&gt;
&lt;p&gt;To use the fonts, if you are using a storyboard in an iOS project, select &amp;ldquo;Custom&amp;rdquo; in the font picker and then you will be able to see your custom font listed if it is installed correctly. I could not work out how to get the custom font appearing in this menu for a macOS app.&lt;/p&gt;
&lt;p&gt;To apply the font programmatically, you can use something like this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// iOS&lt;/span&gt;
    fontLabel.font = UIFont(name: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;PaintingWithChocolate&amp;#34;&lt;/span&gt;, size: &lt;span style=&#34;color:#ae81ff&#34;&gt;36&lt;/span&gt;)

    &lt;span style=&#34;color:#75715e&#34;&gt;// macOS&lt;/span&gt;
    fontLabel.font = NSFont(name: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;PaintingWithChocolate&amp;#34;&lt;/span&gt;, size: &lt;span style=&#34;color:#ae81ff&#34;&gt;24&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;trouble-shooting&#34;&gt;Trouble-shooting&lt;/h2&gt;
&lt;p&gt;If you have gone through these steps and the font still isn&amp;rsquo;t working, here are a few things to check:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Is the font file&amp;rsquo;s target membership set to the app?
&lt;img src=&#34;https://troz.net/images/FontFileTargetSet.png&#34; alt=&#34;File target Set&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Is the font file being included in the &amp;ldquo;Copy Bundle Resources&amp;rdquo; build phase? If not, drag it in manually from the Project Navigator.
&lt;img src=&#34;https://troz.net/images/FontInCopyBundleResources.png&#34; alt=&#34;Copy Bundle Resources&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;iOS Info.plist - is there a typo in the &amp;ldquo;Fonts provided by application&amp;rdquo; setting? Copy the file name and paste it in directly rather than trying to re-type it.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;macOS Info.plist- have you put a single period &amp;ldquo;.&amp;rdquo; in the &amp;ldquo;Application fonts resource path&amp;rdquo; setting?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Run the font name listing utility - does the font show up there?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Have you used the font name EXACTLY as shown in the font listing? Copy &amp;amp; paste it from the font list.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;p&gt;Having struggled with various of these steps myself recently, I thought it was worth documenting it. I am sure that future me will be grateful, but hopefully others will find it useful also.&lt;/p&gt;
&lt;p&gt;If you have any suggestions, corrections or improvements, please contact me using one of the links below or though the &lt;a href=&#34;https://troz.net/contact/&#34;&gt;Contact&lt;/a&gt; page.&lt;/p&gt;</description>
</item>
    
    <item>
<title>SwiftUI for Mac Extras</title>
<link>https://troz.net/post/2020/swiftui_for-mac-extras/</link>
<pubDate>Mon, 27 Jan 2020 11:32:57 +1000</pubDate>
      
      <guid>https://troz.net/post/2020/swiftui_for-mac-extras/</guid>
<description>&lt;p&gt;Last year, I wrote a 3 part series of articles on &lt;a href=&#34;https://troz.net/post/2019/swiftui-for-mac-1/&#34;&gt;using SwiftUI to build a Mac&lt;/a&gt; app. I would like to thank everyone who contacted me about this series. It was received very well and revealed that there is still a large amount of interest in programming for the Mac.&lt;/p&gt;
&lt;p&gt;Some of the responses I got were pointing out different or better ways to do things, so I am going to list them here, adding to this post as I get new information. The relevant sections in the original posts will have links to the fixes suggested here, but I decided it was easier to list the changes in a separate post, rather than asking people to re-read the whole series looking for modifications.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;dismissing-sheets&#34;&gt;Dismissing sheets&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;I just read your series on writing Mac apps with SwiftUI. Great stuff!
Just wanted to add that in part 2 when dismissing sheets there are two ways to do that, one of them is the one that you figured out and the other is to have the view dismiss itself by grabbing its PresentationMode from the environment. This way you don’t need to pass presentation bindings to your sheet views.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Paul Hudson of Hacking with Swift explains how to use both methods very clearly in his article on &lt;a href=&#34;https://www.hackingwithswift.com/quick-start/swiftui/how-to-make-a-view-dismiss-itself&#34;&gt;How to make a view dismiss itself&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;My &lt;a href=&#34;https://troz.net/post/2019/swiftui-for-mac-3#sheets&#34;&gt;original technique&lt;/a&gt; passed the Boolean that triggered the sheet to appear, as a Binding to the sheet view. The sheet view could then toggle this to make the parent view dismiss it.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;  .sheet(isPresented: &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;sheetIsShowing) {
      SheetView(isVisible: &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;sheetIsShowing)
  }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SheetView&lt;/span&gt;: View {
    @Binding &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; isVisible: Bool

    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; body: some View {
        VStack {
            Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;This is a sheet.&amp;#34;&lt;/span&gt;)
            Button(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;OK&amp;#34;&lt;/span&gt;) {
                &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.isVisible = &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;
            }
        }
        .frame(width: &lt;span style=&#34;color:#ae81ff&#34;&gt;300&lt;/span&gt;, height: &lt;span style=&#34;color:#ae81ff&#34;&gt;150&lt;/span&gt;)
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The presentation mode method leaves it up to the sheet to dismiss itself. The parent view shows the sheet but does not pass any binding.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;  .sheet(isPresented: &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;sheetIsShowing) {
      SheetView()
  }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The sheet view gets an environment property that it can use to change its presentation mode, dismissing itself that way.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SheetView&lt;/span&gt;: View {
    @Environment(&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;\&lt;/span&gt;.presentationMode) &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; presentationMode

    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; body: some View {
        VStack {
            Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;This is a sheet.&amp;#34;&lt;/span&gt;)
            Button(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;OK&amp;#34;&lt;/span&gt;) {
                &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.presentationMode.wrappedValue.dismiss()
            }
        }
        .frame(width: &lt;span style=&#34;color:#ae81ff&#34;&gt;300&lt;/span&gt;, height: &lt;span style=&#34;color:#ae81ff&#34;&gt;150&lt;/span&gt;)
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;I guess the presentation mode method is slightly easier to understand and it leaves the caller of the sheet view less cluttered which is a good thing. But the two methods are functionally identical, so use whichever you prefer. The sample project now contains both methods, with one commented out, so you can swap the comments to test.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;subscribing-on-the-main-thread&#34;&gt;Subscribing on the Main Thread&lt;/h2&gt;
&lt;p&gt;In &lt;a href=&#34;https://troz.net/post/2019/swiftui-for-mac-2#passing-menu-data-to-a-view&#34;&gt;part 2 of this series&lt;/a&gt;, I created a menu item caused the downloaded image to be flipped. Selecting the menu item posted a notification:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;@IBAction&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;flipImage&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;_&lt;/span&gt; sender: Any) {
        NotificationCenter.&lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt;.post(name: .flipImage, object: &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;)
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;which the view showing the image was listening for.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; flipImageMenuItemSelected = NotificationCenter.&lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt;
        .publisher(&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt;: .flipImage)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The outermost component of the view&amp;rsquo;s body used an &lt;code&gt;onReceive&lt;/code&gt; modifier to get this notification and react accordingly.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; body: some View {
      VStack {
        &lt;span style=&#34;color:#75715e&#34;&gt;// layout omitted for brevity&lt;/span&gt;
      }
      .onReceive(flipImageMenuItemSelected) { &lt;span style=&#34;color:#66d9ef&#34;&gt;_&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt;
          DispatchQueue.main.async {
              &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.imageIsFlipped.toggle()
          }
      }
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Since the notification was triggering a change to the UI, I made sure that this happened on the main thread.&lt;/p&gt;
&lt;p&gt;But it was pointed out to me that it would be easier to make sure that the publisher was set up to use the main thread all the time, instead of having to specify the main queue when processing the notification.&lt;/p&gt;
&lt;p&gt;So now the publisher is defined like this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; flipImageMenuItemSelected = NotificationCenter.&lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt;
      .publisher(&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt;: .flipImage)
      .receive(on: RunLoop.main)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;And the &lt;code&gt;onReceive&lt;/code&gt; modifier can toggle the &lt;code&gt;imageIsFlipped&lt;/code&gt; flag directly, without having to worry about the thread.&lt;/p&gt;
&lt;p&gt;This seems to me a much better solution as it sets the correct thread once when the publisher is created and makes using it much cleaner and easier.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;passing-data-back-from-appkit&#34;&gt;Passing data back from AppKit&lt;/h2&gt;
&lt;p&gt;The previous two changes have been more a matter of style, but this one is a real error that would stop an app working as it should.&lt;/p&gt;
&lt;p&gt;In &lt;a href=&#34;https://troz.net/post/2019/swiftui-for-mac-2#user-interface-elements&#34;&gt;the User Interface Elements section of the series&lt;/a&gt;, I used &lt;code&gt;NSViewRepresentable&lt;/code&gt; to embed a standard &lt;code&gt;NSColorWell&lt;/code&gt; in a SwiftUI view. I thought this was working properly, but then I got this email:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I noticed that the selectedColor in the EmbeddedColorWell is not being mutated and is not being used in a two-way manner. The selectedColor is initialized to NSColor.blue and used to set the color in the NSColorWell view. When the NSColorWell color is changed, it does change the color of the EmbeddedColorWell view. However, the actual @State var selectedColor value is never mutated in this process beyond the initialized value of NSColor.blue.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This is in the Form tab of the UI Samples window. As suggested to me, I added a &lt;code&gt;background&lt;/code&gt; modifier to set the background of a portion of the view to the selected color. And although the NSColorWell showed newly selected colors, the background remained stubbornly blue.&lt;/p&gt;
&lt;p&gt;The solution was to add a &lt;code&gt;Coordinator&lt;/code&gt; to the &lt;code&gt;NSViewRepresentable&lt;/code&gt; and have it subscribe to any changes in the color and update the embedded view&amp;rsquo;s selected color as needed. I would not have come up with this by myself, so many thanks to the person who sent it to me.&lt;/p&gt;
&lt;p&gt;Here is the full code for the &lt;code&gt;EmbeddedColorWell&lt;/code&gt; struct:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;EmbeddedColorWell&lt;/span&gt;: NSViewRepresentable {
    @Binding &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; selectedColor: NSColor
    
    &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Coordinator&lt;/span&gt;: NSObject {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; embedded: EmbeddedColorWell
        &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; subscription: AnyCancellable?

        &lt;span style=&#34;color:#66d9ef&#34;&gt;init&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;_&lt;/span&gt; embedded: EmbeddedColorWell) {
            &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.embedded = embedded
        }
        
        &lt;span style=&#34;color:#75715e&#34;&gt;// Observe KVO compliant color property on NSColorWell object.&lt;/span&gt;
        &lt;span style=&#34;color:#75715e&#34;&gt;// Update the selectedColor property on EmbeddedColorWell as needed.&lt;/span&gt;
        &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;changeColor&lt;/span&gt;(colorWell: NSColorWell) {
            subscription = colorWell
                .publisher(&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt;: &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;\&lt;/span&gt;.color, options: .new)
                .sink { color &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt;
                    DispatchQueue.main.async {
                        &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.embedded.selectedColor = color
                    }
            }
        }
    }
    
    &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;makeCoordinator&lt;/span&gt;() -&amp;gt; EmbeddedColorWell.Coordinator {
        Coordinator(&lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;)
    }
    
    &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;makeNSView&lt;/span&gt;(context: Context) -&amp;gt; NSColorWell {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; colorWell = NSColorWell(frame: .zero)
        context.coordinator.changeColor(colorWell: colorWell)
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; colorWell
    }
    
    &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;updateNSView&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;_&lt;/span&gt; nsView: NSColorWell, context: Context) {
        nsView.color = selectedColor
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;In the previous section, I changed the publisher to use the main RunLoop so as to avoid having the use &lt;code&gt;DispatchQueue.main.async&lt;/code&gt;. In this instance, that did not work so well. It only updated the selected color after the mouse had been released. But using &lt;code&gt;DispatchQueue.main.async&lt;/code&gt; made the update live.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;As I explained at the start of these articles, I was documenting my explorations in using SwiftUI for a Mac app and while I hoped there would be some useful examples, this was not intended to be a definitive guide. So I am very grateful to everyone who has contributed to these updates.&lt;/p&gt;
&lt;p&gt;If you have anything more that you would like to be included, please contact me using one of the contact buttons below or through the &lt;a href=&#34;https://troz.net/contact/&#34;&gt;Contact page&lt;/a&gt; on this site.&lt;/p&gt;
&lt;p&gt;The edited project is available on &lt;a href=&#34;https://github.com/trozware/swiftui-mac&#34;&gt;GitHub&lt;/a&gt;.&lt;/p&gt;</description>
</item>
    
    <item>
<title>SwiftUI for Mac - Part 3</title>
<link>https://troz.net/post/2019/swiftui-for-mac-3/</link>
<pubDate>Sun, 15 Dec 2019 17:28:20 +1000</pubDate>
      
      <guid>https://troz.net/post/2019/swiftui-for-mac-3/</guid>
<description>&lt;p&gt;In &lt;a href=&#34;https://troz.net/post/2019/swiftui-for-mac-1/&#34;&gt;part 1 of this series&lt;/a&gt;, I created a Mac app using SwiftUI. The app uses a Master-Detail design to list entries in an outline on the left and show details about the selected entry in the detail view on the right. In &lt;a href=&#34;https://troz.net/post/2019/swiftui-for-mac-2/&#34;&gt;part 2&lt;/a&gt; I explored using menus, adding all the expected user interface elements and opening secondary windows.&lt;/p&gt;
&lt;p&gt;In this third and final part, I want to look at the various ways to present dialogs to the user.&lt;/p&gt;
&lt;p&gt;There are four different types of dialog that I want to explore:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Alert&lt;/li&gt;
&lt;li&gt;Action&lt;/li&gt;
&lt;li&gt;Sheet&lt;/li&gt;
&lt;li&gt;File dialogs (open &amp;amp; save)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;So the first thing to do is add a footer to the DetailView to trigger each of these. I am going to separate this out into a new subview for neatness.&lt;/p&gt;
&lt;h2 id=&#34;alert&#34;&gt;Alert&lt;/h2&gt;
&lt;p&gt;To make an Alert, I need an @State Bool which sets whether the alert is visible or not. All the button has to do is toggle that Bool. Stripping out the extra code and views, this is what I have.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;DialogsView&lt;/span&gt;: View {
    @State &lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; alertIsShowing = &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;
    @State &lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; dialogResult = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Click the buttons above to test the dialogs.&amp;#34;&lt;/span&gt;

    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; body: some View {
        Button(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Alert&amp;#34;&lt;/span&gt;) { &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.alertIsShowing.toggle() }
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;To configure the alert itself, I added an alert modifier to the outmost view in this view. The &lt;code&gt;dialogResult&lt;/code&gt; string is a diagnostic that I can use to confirm that the results of the various dialogs get passed back to the parent view.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;  Alert(title: Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Alert&amp;#34;&lt;/span&gt;),
        message: Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;This is an alert!&amp;#34;&lt;/span&gt;),
        dismissButton: .&lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt;(Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;OK&amp;#34;&lt;/span&gt;)) {
          &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.dialogResult = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;OK clicked in Alert&amp;#34;&lt;/span&gt;
      })
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;There were a few things that tripped me up in this relatively short chunk of code. Firstly, both title and message must be Text views, not strings. If you get an error message that says &amp;ldquo;Cannot convert value of type &amp;lsquo;String&amp;rsquo; to expected argument type &amp;lsquo;Text&amp;rsquo;&amp;rdquo;, then you have forgotten to use a Text view.&lt;/p&gt;
&lt;p&gt;Then there is the button which auto-suggest tells me is of type Alert.Button. I couldn&amp;rsquo;t find any documentation for this, but delving into the definition for Alert, I see that there are three pre-defined button types: default, cancel or destructive. Cancel actually has two variants and will use a label appropriate to the user&amp;rsquo;s locale if no label is supplied.&lt;/p&gt;
&lt;p&gt;Again, these buttons need a Text view as the label (if supplied) and can take an action closure, which I used to update my &lt;code&gt;dialogResult&lt;/code&gt; string.&lt;/p&gt;
&lt;p&gt;This version showed a single &lt;code&gt;dismissButton&lt;/code&gt; but I saw that there was a variation of Alert with &lt;code&gt;primary&lt;/code&gt; and &lt;code&gt;secondary&lt;/code&gt; buttons. It was not obvious that these would also dismiss the alert dialog, but I tried anyway.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;  Alert(title: Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Alert&amp;#34;&lt;/span&gt;),
        message: Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;This is an alert!&amp;#34;&lt;/span&gt;),
        primaryButton: .&lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt;(Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;OK&amp;#34;&lt;/span&gt;), action: {
          &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.dialogResult = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;OK clicked in Alert&amp;#34;&lt;/span&gt;
        }), secondaryButton: .cancel({
          &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.dialogResult = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Cancel clicked in Alert&amp;#34;&lt;/span&gt;
        }))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This worked very nicely and the Esc and Return keys triggered the two buttons as you would expect with both of them closing the dialog.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/SwiftUI-Mac-alert.png&#34; alt=&#34;Alert&#34;&gt;&lt;/p&gt;
&lt;p&gt;I tried using the &lt;code&gt;destructive&lt;/code&gt; button type, but there was no difference to either the appearance or behavior of the button.&lt;/p&gt;
&lt;p&gt;So Alert is a great choice for a text-based dialog, either for informational use or to allow two choices of action.&lt;/p&gt;
&lt;h2 id=&#34;action&#34;&gt;Action&lt;/h2&gt;
&lt;p&gt;Very short section here - &amp;lsquo;ActionSheet&amp;rsquo; is unavailable in macOS! I probably should have researched that before I started this section. So use Alerts, I guess or a custom sheet.&lt;/p&gt;
&lt;h2 id=&#34;sheets&#34;&gt;Sheets&lt;/h2&gt;
&lt;p&gt;While Alerts have a very fixed structure, sheets allow us to put any SwiftUI view into a sheet dialog.&lt;/p&gt;
&lt;p&gt;So I added another Bool for the Sheet button to toggle, and added this sheet modifier. SheetView right now is simply a TextView.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;  .sheet(isPresented: &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;sheetIsShowing) {
      SheetView()
  }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This didn&amp;rsquo;t work so well. It showed the sheet, but the sheet was tiny - only the size of the Text view it contained. And I had no way of dismissing it&amp;hellip;&lt;/p&gt;
&lt;p&gt;The size problem was solved by setting a frame on the Text view in SheetView.&lt;/p&gt;
&lt;p&gt;The trick to dismissing the sheet is to pass it a Binding to the Bool that triggered it to open in the first place. If a button in the sheet sets this Bool back to false, the parent view will hide the sheet. That sounds confusing, but it works.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;  .sheet(isPresented: &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;sheetIsShowing) {
      SheetView(isVisible: &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;sheetIsShowing)
  }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SheetView&lt;/span&gt;: View {
    @Binding &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; isVisible: Bool

    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; body: some View {
        VStack {
            Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;This is a sheet.&amp;#34;&lt;/span&gt;)
            Button(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;OK&amp;#34;&lt;/span&gt;) {
                &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.isVisible = &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;
            }
        }
        .frame(width: &lt;span style=&#34;color:#ae81ff&#34;&gt;300&lt;/span&gt;, height: &lt;span style=&#34;color:#ae81ff&#34;&gt;150&lt;/span&gt;)
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Here is a very bad diagram that tries to explain what is happening:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/SwiftUI-Mac-sheet.png&#34; alt=&#34;Sheet&#34;&gt;&lt;/p&gt;
&lt;p&gt;The parent view has an @State Boolean variable called &lt;code&gt;sheetIsShowing&lt;/code&gt;. This is bound to the alert&amp;rsquo;s &lt;code&gt;isPresented&lt;/code&gt; so it dictates whenever the sheet is visible. When the Sheet button is clicked, this variable is set to &lt;code&gt;true&lt;/code&gt; and the sheet opens. But at the same time, a Binding to this variable is passed to the sheet. I deliberately gave this a different name, so as to make it clear which View was changing what variable.&lt;/p&gt;
&lt;p&gt;When the sheet wants to close, it does not close itself. Instead it sets this variable to false. Because it is a Binding, this sets the original &lt;code&gt;sheetIsShowing&lt;/code&gt; variable on the parent view to false and the parent view then closes the sheet.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;UPDATE:&lt;/strong&gt; Look at &lt;strong&gt;&lt;a href=&#34;https://troz.net/post/2020/swiftui_for-mac-extras#dismissing-sheets&#34;&gt;Dismissing sheets&lt;/a&gt;&lt;/strong&gt; in my post of extras &amp;amp; changes to this series for an alternative way to dismiss a sheet.&lt;/p&gt;
&lt;h3 id=&#34;sheets--data&#34;&gt;Sheets &amp;amp; Data&lt;/h3&gt;
&lt;p&gt;With this in place, I had the sheet opening and closing perfectly, but I was not yet passing data back &amp;amp; forth between the sheet and its parent view. I decide to put a TextField in the SheetView and bind its contents to the &lt;code&gt;dialogResult&lt;/code&gt; property in the DetailView so that any edits appeared immediately in the DetailView. And while I am there, I might as well add some more decorations to the SheetView since it is a full View and not a restricted Alert.&lt;/p&gt;
&lt;p&gt;Calling the SheetView changed to this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;  .sheet(isPresented: &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;sheetIsShowing) {
      SheetView(isVisible: &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;sheetIsShowing, enteredText: &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;dialogResult)
  }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;And the SheetView itself (not all the interface is listed here for brevity):&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SheetView&lt;/span&gt;: View {
    @Binding &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; isVisible: Bool
    @Binding &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; enteredText: String

    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; body: some View {
        VStack {
            Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Enter some text below…&amp;#34;&lt;/span&gt;)
                .font(.headline)
                .multilineTextAlignment(.center)

            TextField(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Enter the result of the dialog here…&amp;#34;&lt;/span&gt;, text: &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;enteredText)
                 .padding()

            HStack {
                Button(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Cancel&amp;#34;&lt;/span&gt;) {
                    &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.isVisible = &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;
                    &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.enteredText = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Cancel clicked in Sheet&amp;#34;&lt;/span&gt;
                }
                Spacer()
                Button(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;OK&amp;#34;&lt;/span&gt;) {
                    &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.isVisible = &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;
                    &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.enteredText = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;OK: &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;\(&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.enteredText&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;
                }
            }
        }
        .frame(width: &lt;span style=&#34;color:#ae81ff&#34;&gt;300&lt;/span&gt;, height: &lt;span style=&#34;color:#ae81ff&#34;&gt;200&lt;/span&gt;)
        .padding()
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://troz.net/images/SwiftUI-Mac-sheet-data.png&#34; alt=&#34;Sheet with data&#34;&gt;&lt;/p&gt;
&lt;p&gt;I only had two issues with this now. I was not able to get the focus into the TextField automatically when the sheet opened and I was not able to assign keyboard shortcuts to the Cancel and OK buttons so that they could be operated without a mouse. And as I mentioned in the previous part, I was not able to make the OK button take on the default styling.&lt;/p&gt;
&lt;p&gt;One useful technique that I developed: the SheetView is in the DialogsView.swift file instead of in its own SwiftUI file. It would probably be a good idea to separate it out but I didn&amp;rsquo;t which meant that it had no Canvas preview to look at while I was laying it out.&lt;/p&gt;
&lt;p&gt;So I edited the PreviewProvider like this, so that I could change the comments to switch it between showing the DialogsView and showing the SheetView.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;DialogsView_Previews&lt;/span&gt;: PreviewProvider {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; previews: some View {
        &lt;span style=&#34;color:#75715e&#34;&gt;// DialogsView()&lt;/span&gt;
        SheetView(isVisible: .constant(&lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;), enteredText: .constant(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;))
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;files&#34;&gt;Files&lt;/h2&gt;
&lt;p&gt;AppKit provides NSOpenPanel for selecting a file and NSSavePanel for saving. I will try to implement NSSavePanel to allow saving the current cat image.&lt;/p&gt;
&lt;p&gt;Since this is an AppKit control rather than a SwiftUI control, I assumed that I would need to use NSViewRepresentable like I did for the NSColorWell in part 2. But while NSColorWell is a descendent of NSView, NSSavePanel is not. So I need a new idea.&lt;/p&gt;
&lt;p&gt;Rather naively, I thought maybe I could just create an NSSavePanel in a function inside DialogsView and see what happened.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;saveImage&lt;/span&gt;() {
      &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; panel = NSSavePanel()
      panel.nameFieldLabel = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Save cat image as:&amp;#34;&lt;/span&gt;
      panel.nameFieldStringValue = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;cat.jpg&amp;#34;&lt;/span&gt;
      panel.canCreateDirectories = &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;
      panel.begin { response &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt;
          &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; response == NSApplication.ModalResponse.OK, &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; fileUrl = panel.url {
              print(fileUrl)
          }
      }
  }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Crash &amp;amp; burn&amp;hellip; so what if I made the NSSavePanel an @State property of the View? No, that crashed even faster. Maybe SwiftUI Views don&amp;rsquo;t like this sort of thing, but how about if I get the Application Delegate to handle it? What if I moved the &lt;code&gt;saveImage&lt;/code&gt; method to the App Delegate and changed the calling function to access it there?&lt;/p&gt;
&lt;p&gt;Still crashed. At this stage I am beginning to wonder if I know how to use an NSSavePanel. Time to create a simple test app without SwiftUI and see what happens. Well it appears that I no longer know how to use an NSSavePanel. Code from an older project that works fine, will not work in my new sample project!&lt;/p&gt;
&lt;p&gt;Guess what - it was another macOS Catalina security issue which I would have realised faster I had opened the Console. Back to the Signing &amp;amp; Capabilities section of the target settings and this time I set File Access for User Selected File to Read/Write.&lt;/p&gt;
&lt;p&gt;Now the NSSavePanel opens when called from DialogsView and prints the selected file URL if one is chosen.&lt;/p&gt;
&lt;p&gt;But this is all happening in DialogsView, which is a subview of DetailView. And DetailView is the view that holds the image, not DialogsView. So how can I save the image? Do I pass the URL to DetailView or pass the image to DialogsView? Or do something clever with Notifications and Subscriptions?&lt;/p&gt;
&lt;p&gt;I really don&amp;rsquo;t know what is best, but I have decided to post a Notification with the URL as its object. DetailView can receive this Notification and save the image whenever it is received.&lt;/p&gt;
&lt;p&gt;So I replaced the &lt;code&gt;print&lt;/code&gt; line in the &lt;code&gt;saveImage()&lt;/code&gt; method with:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;  NotificationCenter.&lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt;.post(name: .saveImage, object: fileUrl)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;And in DetailView, I set up the publisher:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; saveImageUrlSelected = NotificationCenter.&lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt;
         .publisher(&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt;: .saveImage)

    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; body: some View {
        VStack {
          &lt;span style=&#34;color:#75715e&#34;&gt;// view code removed for brevity&lt;/span&gt;
        }
        .onReceive(saveImageUrlSelected) { publisher &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt;
            &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; saveUrl = publisher.object &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt;? URL,
                &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; imageData = &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.catImage?.tiffRepresentation {
                &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; imageRep = NSBitmapImageRep(data: imageData) {
                    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; saveData = imageRep.representation(using: .jpeg,
                                                              properties: [:]) {
                        &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt;? saveData.write(to: saveUrl)
                    }
                }
            }
        }
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;And there we have it. Three types of dialogs demonstrated in a SwiftUI for Mac app:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Alerts: good for simply text-only dialogs&lt;/li&gt;
&lt;li&gt;Sheets: good for more complex dialogs&lt;/li&gt;
&lt;li&gt;Panels: AppKit dialogs that can be called from a SwiftUI View.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;I think this time I really am finished. This article has already expanded out into a 3-part monster, so I think it is way past time that I stopped typing. I hope you have enjoyed this series. Please use any of the buttons below to contact me or use the &lt;a href=&#34;https://troz.net/contact/&#34;&gt;Contact page&lt;/a&gt; on this site. I would love to hear from anyone who found this series useful or who had any suggestions or corrections to make.&lt;/p&gt;
&lt;p&gt;The final project is available on &lt;a href=&#34;https://github.com/trozware/swiftui-mac&#34;&gt;GitHub&lt;/a&gt; if you would like to download it and take a look.&lt;/p&gt;</description>
</item>
    
    <item>
<title>SwiftUI for Mac - Part 2</title>
<link>https://troz.net/post/2019/swiftui-for-mac-2/</link>
<pubDate>Sun, 15 Dec 2019 17:28:10 +1000</pubDate>
      
      <guid>https://troz.net/post/2019/swiftui-for-mac-2/</guid>
<description>&lt;p&gt;In &lt;a href=&#34;https://troz.net/post/2019/swiftui-for-mac-1/&#34;&gt;part 1 of this series&lt;/a&gt;, I created a Mac app using SwiftUI. The app uses a Master-Detail design to list entries in an outline on the left and show details about the selected entry in the detail view on the right.&lt;/p&gt;
&lt;p&gt;Now it is time to explore some more of the features of a Mac app with SwiftUI.&lt;/p&gt;
&lt;h2 id=&#34;menus&#34;&gt;Menus&lt;/h2&gt;
&lt;p&gt;I had already discovered that the menu bar is configured in the Main.storyboard file. As an experiment, I will add new menu items that allows the user to select between dark mode, light mode or the system mode.&lt;/p&gt;
&lt;style&gt;
  img {
    margin: 10px auto;
  }
&lt;/style&gt;

&lt;p&gt;&lt;img src=&#34;https://troz.net/images/SwiftUi-Mac-menus.png&#34; alt=&#34;Menus&#34;&gt;&lt;/p&gt;
&lt;p&gt;Looking at the possibilities along the top that I could send the menu command to, the App Delegate looks like the best option, especially since these menus will change the entire app.&lt;/p&gt;
&lt;p&gt;I opened AppDelegate.swift in the Assistant Editor and Control-dragged from each of the new menu items to create the 3 IBActions and added the code to set the mode.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;@IBAction&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;darkModeSelected&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;_&lt;/span&gt; sender: Any) {
        NSApp.appearance = NSAppearance(named: .darkAqua)
    }

    &lt;span style=&#34;color:#66d9ef&#34;&gt;@IBAction&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;lightModeSelected&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;_&lt;/span&gt; sender: Any) {
        NSApp.appearance = NSAppearance(named: .aqua)
    }

    &lt;span style=&#34;color:#66d9ef&#34;&gt;@IBAction&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;systemModeSelected&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;_&lt;/span&gt; sender: Any) {
        NSApp.appearance = &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;And since I realized that I would want to check or un-check these based on the current settings, I added IBOutlets for each of these menu items too. As a side note, I love how Xcode is now clever enough to decide whether to add an IBOutlet or an IBAction depending on where in the file you Control-drag to.&lt;/p&gt;
&lt;h2 id=&#34;using-a-property-wrapper&#34;&gt;Using a Property Wrapper&lt;/h2&gt;
&lt;p&gt;Changing mode worked perfectly in the Xcode Preview and in the built app, but the app was not storing this or displaying the current selection with a check mark in the menu.&lt;/p&gt;
&lt;p&gt;For storing the selection, I decided to try another new thing and use a UserDefaults property wrapper, based on &lt;a href=&#34;https://www.avanderlee.com/swift/property-wrappers/&#34;&gt;this post by Antoine van der Lee&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I configured a UserDefault wrapped variable for the mode, set it whenever the menu items changed it and added a function to read it in and apply it on startup.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;    @UserDefault(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;system_mode&amp;#34;&lt;/span&gt;, defaultValue: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;system&amp;#34;&lt;/span&gt;)
    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; systemMode: String
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;It would be neater to use an enum here instead of strings, but that would have required fiddling with rawValues to save the data, so for this first test, I stuck to strings.&lt;/p&gt;
&lt;p&gt;The code to toggle the checkmarks in the menu items is standard stuff and nothing particularly SwiftUI related, so I won&amp;rsquo;t detail it here, but it is in the GitHub project if you are interested.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/SwiftUI-Mac-dark.png&#34; alt=&#34;Dark mode&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;passing-menu-data-to-a-view&#34;&gt;Passing menu data to a View&lt;/h2&gt;
&lt;p&gt;This worked fine and the app worked equally as well in dark or light modes, but I wanted to test how to communicate data back from the menus to the SwiftUI views.&lt;/p&gt;
&lt;p&gt;As a totally pointless but possibly amusing feature, I decided to add a menu item to flip the cat image and then work out how I could send that to the ContentView.&lt;/p&gt;
&lt;p&gt;I added the new menu item to the Format menu and as a first attempt, I tried to Control-drag from there into the ContentView. It didn&amp;rsquo;t take, so I guess I need to send the message to the AppDelegate as before and then pass it on to the ContentView. I feel like this might be a good place to use a Publisher although so far I have only used the built-in ObservableObject type publishers.&lt;/p&gt;
&lt;p&gt;In this case, it would make more sense to have the DetailView respond to the menu, since it contains the image. But trying to add an @IBAction to a SwiftUI View struct gives this error: &lt;code&gt;Only instance methods can be declared @IBAction&lt;/code&gt; so I am using the App Delegate instead. I feel like this is a problem I need to solve, or the AppDelegate is going to end up filled with @IBActions, but for now, let&amp;rsquo;s keep going.&lt;/p&gt;
&lt;p&gt;In AppDelegate.swift, I added the IBAction for the Flip Image menu item and had it issue a Notification, after setting up an extension on Notification.Name to de-stringify the name of the notification.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;@IBAction&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;flipImage&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;_&lt;/span&gt; sender: Any) {
        NotificationCenter.&lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt;.post(name: .flipImage, object: &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;)
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;In DetailView.swift, I set up a Boolean @State property to store whether the image was flipped or not and added an onReceive handler to toggle it. Since this is updating the UI, I made sure that it happened on the main thread, but I am not sure whether this is necessary, or whether onReceive uses the main thread automatically.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;UPDATE:&lt;/strong&gt; Check out &lt;strong&gt;&lt;a href=&#34;https://troz.net/post/2020/swiftui_for-mac-extras#subscribing-on-the-main-thread&#34;&gt;Subscribing on the Main Thread&lt;/a&gt;&lt;/strong&gt; in my post of extras &amp;amp; changes to this series for an alternative way to make sure the updates happen on the correct thread.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;    @State &lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; imageIsFlipped = &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;

    &lt;span style=&#34;color:#75715e&#34;&gt;// ...&lt;/span&gt;

  .onReceive(flipImageMenuItemSelected) { &lt;span style=&#34;color:#66d9ef&#34;&gt;_&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt;
    DispatchQueue.main.async {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.imageIsFlipped.toggle()
    }
  }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Once I had that Boolean property, I added two more modifiers to the image. Don&amp;rsquo;t hate me for the force un-wrapping. I tried using if-let but it wouldn&amp;rsquo;t compile so I check for &lt;code&gt;catImage != nil&lt;/code&gt; before using this force-unwrap.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;  Image(nsImage: catImage!)
      .resizable()
      .aspectRatio(contentMode: .fit)
      .rotation3DEffect(Angle(degrees: imageIsFlipped ? &lt;span style=&#34;color:#ae81ff&#34;&gt;180&lt;/span&gt; : &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;),
                        axis: (x: &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, y: &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;, z: &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;))
      .animation(.&lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Now the image can be flipped from the menu item or even by using the keyboard shortcut. And with a smooth animation (smoother in the app than in this gif).&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/SwiftUI-Mac-Flip.gif&#34; alt=&#34;Flipping the image&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;opening-another-window&#34;&gt;Opening another window&lt;/h2&gt;
&lt;p&gt;For my next challenge, I want to open a second window that I can use to show samples of various UI elements. As I want to open it from a menu command, my first thought was to add a Window Controller to the Main storyboard and open it that way. I replaced the default View Controller with a Hosting Controller so that I could insert my SwiftUI View into it.&lt;/p&gt;
&lt;p&gt;I had great trouble finding any documentation or examples of how to implement this, but after a lot of trial and error, here is what I got to work:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Drag a Hosting View Controller into the storyboard and connect it to the menu item with a segue.&lt;/li&gt;
&lt;li&gt;Set the Presentation property for the window controller to Single so that multiple copies of the window are not created.&lt;/li&gt;
&lt;li&gt;Create a new Swift file and subclass NSHostingController. Don&amp;rsquo;t bother using a Cocoa class file - the template doesn&amp;rsquo;t work. Use the code below, replacing SamplesView with the name of the SwiftUI view you want to display.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SwiftUI&lt;/span&gt;

&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SamplesHostingController&lt;/span&gt;: NSHostingController&amp;lt;PrefsView&amp;gt; {
      &lt;span style=&#34;color:#66d9ef&#34;&gt;@objc&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;required&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;dynamic&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;init&lt;/span&gt;?(coder: NSCoder) {
          &lt;span style=&#34;color:#66d9ef&#34;&gt;super&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;init&lt;/span&gt;(coder: coder, rootView: SamplesView())
      }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;Back in the storyboard, set the class of the HostingController to this sub-class: SamplesHostingController in my case.&lt;/li&gt;
&lt;li&gt;Set a minimum size for the new Window Controller, otherwise it shrinks to a very small stripe on the screen.&lt;/li&gt;
&lt;li&gt;Add the &lt;code&gt;.frame(maxWidth: .infinity, maxHeight: .infinity)&lt;/code&gt; modifier to the root view in the view you are displaying - my SamplesView.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;With all these in place, I was able to open and close a Samples window that was displaying my SwiftUI content.&lt;/p&gt;
&lt;h2 id=&#34;user-interface-elements&#34;&gt;User Interface Elements&lt;/h2&gt;
&lt;p&gt;Not all the expected user interface elements are available in SwiftUI and some of the ones that are implemented are using different names. Again this is a point at which iOS development has got all the attention, so there are conversion tables out there listing UIKit elements and their SwiftUI equivalents, but I was not able to find a similar listing for AppKit. If you find one, please let me know.&lt;/p&gt;
&lt;p&gt;Anyway, I experimented and got most of what I wanted as you can see below. The &lt;a href=&#34;https://github.com/trozware/swiftui-mac&#34;&gt;sample app on GitHub&lt;/a&gt; shows the SwiftUI code for these samples, but the main advice I would give is firstly to use the Object Browser to look for what is available and then to check out the styles that can be applied to the element you have chosen.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/SwiftUI-Mac-UI.png&#34; alt=&#34;UI elements&#34;&gt;&lt;/p&gt;
&lt;p&gt;Mostly, I managed to achieve what I wanted but there were a few exceptions.&lt;/p&gt;
&lt;p&gt;Buttons were a bit odd as there are multiple button styles listed, but I found that they either all looked the same or they disappeared completely. I was not able to style a button with an image and text which is now easy to do in iOS. And I was not able to set a button as the default button and I could not work out how to set a keyboard equivalent for a button. (Setting the keyboard equivalent to Return or Enter might set it to the default style automatically.)&lt;/p&gt;
&lt;p&gt;Of the other UI elements that I wanted to use, a color picker was the main one missing. So I decided to embed an NSColorWell from AppKit into my SwiftUI view.&lt;/p&gt;
&lt;p&gt;The process for embedding a UIKit view is quite well documented elsewhere and the AppKit equivalent was not significantly different. Replace every &amp;ldquo;UI&amp;rdquo; with &amp;ldquo;NS&amp;rdquo; and you are nearly there.&lt;/p&gt;
&lt;p&gt;First I made a struct that conformed to &lt;code&gt;NSViewRepresentable&lt;/code&gt; and had the required two functions: &lt;code&gt;makeNSView(context:)&lt;/code&gt; and &lt;code&gt;updateNSView(_:context:)&lt;/code&gt;. I supplied an @Binding variable to hold the selected color as an NSColor since that is what the NSColorWell uses.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;EmbeddedColorWell&lt;/span&gt;: NSViewRepresentable {
    @Binding &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; selectedColor: NSColor

    &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;makeNSView&lt;/span&gt;(context: Context) -&amp;gt; NSColorWell {
        NSColorWell(frame: .zero)
    }

    &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;updateNSView&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;_&lt;/span&gt; nsView: NSColorWell, context: Context) {
        nsView.color = selectedColor
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Back in my SwiftUI view, I was then able to use &lt;code&gt;EmbeddedColorWell&lt;/code&gt; just like any other SwiftUI view, passing it a binding to an @State variable to set and get the selected color.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;  EmbeddedColorWell(selectedColor: &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt;selectedColor)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;UPDATE:&lt;/strong&gt; Be sure to read &lt;strong&gt;&lt;a href=&#34;https://troz.net/post/2020/swiftui_for-mac-extras#passing-data-back-from-appkit&#34;&gt;Passing data back from AppKit&lt;/a&gt;&lt;/strong&gt; in my post of extras &amp;amp; changes to this series. This is an important fix that is needed to make this embedded control pass data back properly.&lt;/p&gt;
&lt;p&gt;The other stumbling block that I encountered was that I had no way to close the window programmatically, in response to a button click or some other interaction. Maybe this was not the best way to open a fully SwifUI window, but it was still an interesting experiment.&lt;/p&gt;
&lt;p&gt;One thing I learned while working on this project was that SwiftUI can be a bit too clever about working out what needs to be redrawn in the previews. If you edit something in an separate file to the View, you may need to force a re-build to get the updates to show.&lt;/p&gt;
&lt;h2 id=&#34;communicating-between-windows&#34;&gt;Communicating Between Windows&lt;/h2&gt;
&lt;p&gt;The last feature that I need to explore is transferring data between two windows. I tested using a &lt;code&gt;.sheet&lt;/code&gt; modifier to open a dialog and that worked exactly as it would in an iOS app - I was able to pass an @Binding variable to the sheet window and any changes made to that in the sheet window flowed back to the calling view.&lt;/p&gt;
&lt;p&gt;But I want to set up a Preferences window which will be opened from the menu bar and not directly from the ContentView or any of its sub-views.&lt;/p&gt;
&lt;p&gt;I started out by using the same technique as before with a Hosting View Controller. And here is where I came mightily unstuck as I could not make a data connection. I had hoped an EnvironmentObject would work, but I could not get an EnvironmentObject through to the HostingController as it was not in the same view hierarchy.&lt;/p&gt;
&lt;p&gt;So instead of trying to use the storyboard, I decide to see if I could use something similar to the initial window creation and call that new window from my ContentView so that it was part of the view and therefore the data hierarchy.&lt;/p&gt;
&lt;p&gt;As usual, there was a lot of trial and error involved here, but I came up with a workable solution.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PrefsView&lt;/span&gt;: View {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; body: some View {
        Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Hello, Prefs!&amp;#34;&lt;/span&gt;)
            .frame(maxWidth: .infinity, maxHeight: .infinity)
    }

    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; window: NSWindow!
    &lt;span style=&#34;color:#66d9ef&#34;&gt;init&lt;/span&gt;() {
        window = NSWindow.createStandardWindow(withTitle: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Preferences&amp;#34;&lt;/span&gt;,
                                               width: &lt;span style=&#34;color:#ae81ff&#34;&gt;300&lt;/span&gt;,
                                               height: &lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt;)
        window.contentView = NSHostingView(rootView: &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;)
        window.makeKeyAndOrderFront(&lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;)
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;For convenience and reusability, I made an extension on NSWindow that created a window with the basic properties configured, much like they are in AppDelegate. I temporarily added a Button to ContentView like this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;  Button(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Prefs&amp;#34;&lt;/span&gt;) {
      &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; _ = PrefsView()
  }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This opened the window perfectly, but it had a problem: repeatedly clicking the button kept opening a new window instead of bringing the existing one to the front.&lt;/p&gt;
&lt;p&gt;After a lot more trial and error, this is what I ended up with for my &lt;code&gt;PrefsView&lt;/code&gt; struct:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PrefsView&lt;/span&gt;: View {
    @State &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; prefsWindowDelegate = PrefsWindowDelegate()

    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; body: some View {
        Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Hello, Prefs!&amp;#34;&lt;/span&gt;)
          .frame(maxWidth: .infinity, maxHeight: .infinity)
    }

    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; window: NSWindow!
    &lt;span style=&#34;color:#66d9ef&#34;&gt;init&lt;/span&gt;() {
        window = NSWindow.createStandardWindow(withTitle: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Preferences&amp;#34;&lt;/span&gt;,
                                               width: &lt;span style=&#34;color:#ae81ff&#34;&gt;300&lt;/span&gt;,
                                               height: &lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt;)
        window.contentView = NSHostingView(rootView: &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;)
        window.delegate = prefsWindowDelegate
        prefsWindowDelegate.windowIsOpen = &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;
        window.makeKeyAndOrderFront(&lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;)
    }

    &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PrefsWindowDelegate&lt;/span&gt;: NSObject, NSWindowDelegate {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; windowIsOpen = &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;

        &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;windowWillClose&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;_&lt;/span&gt; notification: Notification) {
            windowIsOpen = &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;So my PrefsView opens its own window and sets a window delegate that records when the window is closed.&lt;/p&gt;
&lt;p&gt;I removed my temporary button and back in AppDelegate.swift, I added an IBAction called by the Preferences menu item:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; prefsView: PrefsView?

    &lt;span style=&#34;color:#66d9ef&#34;&gt;@IBAction&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;openPrefsWindow&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;_&lt;/span&gt; sender: Any) {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; prefsView = prefsView, prefsView.prefsWindowDelegate.windowIsOpen {
            prefsView.window.makeKeyAndOrderFront(&lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;)
        } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {
            prefsView = PrefsView()
        }
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;And this gave me what I was after - a view that opened from a menu item but that knew itself whether it still had a window so could decide whether to open a new one or bring the existing one to the front. This looks a bit convoluted, but it doesn&amp;rsquo;t appear to cause any memory leaks and the responsibility for the window rests on the view that uses it, which feels right to me.&lt;/p&gt;
&lt;p&gt;After I had this working, getting the data passing around was quite simple. I created a Prefs class to store the preference data. I wanted this data stored in UserDefaults, but since I also wanted to use an ObservableObject with the @Published property wrapper, I was not able to use the @UserDefaults property wrapper that I had used for the app mode.&lt;/p&gt;
&lt;p&gt;So instead I used @Published with a &lt;code&gt;didSet&lt;/code&gt; that saved the changed data to UserDefaults. Thanks to &lt;a href=&#34;https://twitter.com/azamsharp&#34;&gt;@azamsharp&lt;/a&gt; for this technique.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Prefs&lt;/span&gt;: ObservableObject {
    @Published
    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; showCopyright: Bool = UserDefaults.standard.bool(forKey: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;showCopyright&amp;#34;&lt;/span&gt;) {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;didSet&lt;/span&gt; {
            UserDefaults.standard.&lt;span style=&#34;color:#66d9ef&#34;&gt;set&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.showCopyright, forKey: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;showCopyright&amp;#34;&lt;/span&gt;)
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This preference will dictate whether a copyright notice is shown on every cat image, so it needs to be available to DetailView and to PrefsView. Since I did not want to pass it through every view on the way to DetailView, I decided to use an EnvironmentObject. But I was not able to work out how to set the environmentObject for the PrefsView as I created it, so I ended up sending an @ObservedObject to PrefsView but using an @EnvironmentObject for DetailView. (Actually for CatImageView as I had extracted the image from DetailView as a subview.)&lt;/p&gt;
&lt;p&gt;In AppDelegate.swift:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; prefs = Prefs()

    &lt;span style=&#34;color:#75715e&#34;&gt;// and in the openPrefsWindow IBAction:&lt;/span&gt;
    prefsView = PrefsView(prefs: prefs)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;In PrefsView.swift:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;    @ObservedObject &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; prefs: Prefs
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;In CatImageView (a subview of DetailView):&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CatImageView&lt;/span&gt;: View {
    @EnvironmentObject &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; prefs: Prefs

    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; catImage: NSImage
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; imageIsFlipped: Bool

    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; body: some View {
        Image(nsImage: catImage)
          &lt;span style=&#34;color:#75715e&#34;&gt;// modifiers as before&lt;/span&gt;

         .overlay(
             Text(prefs.showCopyright ? &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Copyright © https://http.cat&amp;#34;&lt;/span&gt; : &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;)
                 .padding(&lt;span style=&#34;color:#ae81ff&#34;&gt;6&lt;/span&gt;)
                 .font(.caption)
                 .foregroundColor(.white)
                 .shadow(radius: &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;)
             ,alignment: .bottomTrailing)
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;And that is that! I have shown how it is possible to create an entire Mac app using SwiftUI.&lt;/p&gt;
&lt;p&gt;I am sure that there are numerous ways that this could be improved, so if you have any ideas or suggestions, please use one of the buttons below to contact me.&lt;/p&gt;
&lt;p&gt;If you want to check out the project at this stage, here is a link to the &lt;a href=&#34;https://github.com/trozware/swiftui-mac/tree/0ea77f80832e0f32e477ce89ac57d8a95f45f035&#34;&gt;relevant GitHub commit&lt;/a&gt;. Or if you would prefer, here is a link to the &lt;a href=&#34;https://github.com/trozware/swiftui-mac&#34;&gt;final version&lt;/a&gt; of the project.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Moving on to an unplanned &lt;a href=&#34;https://troz.net/post/2019/swiftui-for-mac-3/&#34;&gt;part 3 of this series&lt;/a&gt;, I am going to experiment with various forms of dialog.&lt;/p&gt;</description>
</item>
    
    <item>
<title>SwiftUI for Mac - Part 1</title>
<link>https://troz.net/post/2019/swiftui-for-mac-1/</link>
<pubDate>Sun, 15 Dec 2019 17:28:00 +1000</pubDate>
      
      <guid>https://troz.net/post/2019/swiftui-for-mac-1/</guid>
<description>&lt;p&gt;So far, nearly all the articles I have seen about SwiftUI show it being used for iOS, more particularly for iPhone.
But SwiftUI works on all Apple&amp;rsquo;s platforms, and as I am primarily a Mac developer, I decided to try out a Mac app and see what happened.&lt;/p&gt;
&lt;style&gt;
  img {
    margin: 10px auto;
  }
&lt;/style&gt;

&lt;h2 id=&#34;setup&#34;&gt;Setup&lt;/h2&gt;
&lt;p&gt;I opened up Xcode and created a new project selecting the macOS App template. The project opened at the usual ContentView.swift but there were a few differences in the project structure as well as one in the ContentView struct.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/SwiftUI-Mac-project.png&#34; alt=&#34;New Mac project&#34;&gt;&lt;/p&gt;
&lt;p&gt;The first thing to notice is that the default &amp;ldquo;Hello, World!&amp;rdquo; Text view has a frame set:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;  .frame(maxWidth: .infinity, maxHeight: .infinity)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;If I removed this frame modifier, the preview display in the Canvas changed so that the view was only the size of the text instead of being a standard window size. I guess an iOS device always knows what size it is, but a Mac window can be any size, so you have to be more explicit to stop SwiftUI shrinking the container view to the minimum size possible.&lt;/p&gt;
&lt;p&gt;The next thing is to look at the files that are included in the project. There is no SceneDelegate.swift as you would see in an iOS project. And to my surprise, there was still a Main.storyboard file! And going to the General settings for the app target, I could see that this storyboard was selected as the Main Interface.&lt;/p&gt;
&lt;p&gt;Opening it up reveals that this is where the application menu is configured. I had wondered where the menus were configured in Mac SwiftUI apps.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/SwiftUI-Mac-Storyboard.png&#34; alt=&#34;Main storyboard&#34;&gt;&lt;/p&gt;
&lt;p&gt;The AppDelegate was the next thing I looked at and here I found some of the code that I would have expected to find in a SceneDelegate. The &lt;code&gt;applicationDidFinishLaunching(_:)&lt;/code&gt; method creates an instance of ContentView, creates an NSWindow and uses an NSHostingView to display the ContentView inside the window. At this stage, running the app gives me what I would expect: a fully-fledged Mac app with a window and a menu, both with all the functions you would expect in any standard Mac app.&lt;/p&gt;
&lt;h2 id=&#34;the-canvas&#34;&gt;The Canvas&lt;/h2&gt;
&lt;p&gt;I was not expecting the Canvas to be much use when it came to previewing a Mac app. It works so well with an iPhone app because the iPhone is tall and thin and fits neatly into one side of the code window. But a Mac view is likely to be much bigger, so it would have to be scaled down a lot to avoid talking up too much precious space in my Xcode window.&lt;/p&gt;
&lt;p&gt;But it works as expected, and even scaled down, you get a good idea of the layout while still getting the live reloading that is part of what makes developing in SwiftUI so much fun.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/SwiftUI-Mac-Canvas.png&#34; alt=&#34;Canvas&#34;&gt;&lt;/p&gt;
&lt;p&gt;But here is where I got my first real surprise, with a feature that I had not seen yet in any SwiftUI tutorial or article. Click the Live Preview button and see what happens&amp;hellip;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/SwiftUI-Mac-LivePreview.png&#34; alt=&#34;Live Preview&#34;&gt;&lt;/p&gt;
&lt;p&gt;Of course I clicked &amp;ldquo;Bring Forward&amp;rdquo; and there was my app running in a window called &amp;ldquo;Xcode Preview&amp;rdquo;. There was an app in my Dock and when I chose &amp;ldquo;Show in Finder&amp;rdquo;, I found that the app is buried deep in DerivedData. Positioning my windows so I could type in Xcode while watching this preview window, I saw that it instantly updated my view as I typed, just like an iPhone in the Canvas.&lt;/p&gt;
&lt;p&gt;If I changed the structure of the view, the app closed and re-opened immediately with the new content. This is amazing and shows that the Xcode &amp;amp; SwiftUI teams really thought about how to use these new features in Mac apps as well as iOS.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;In Xcode 11.3, I found that I was having trouble with the previews. They would not display and above the Canvas, I got the super helpful message &amp;ldquo;Cannot preview in this file &amp;mdash; SwiftUI-Mac.app may have crashed.&amp;rdquo;. It turned out that this was a signing issue. If you go to the app target and look in the Signing and Capabilities section, check that Signing Certificate is not set to &amp;ldquo;Sign to Run Locally&amp;rdquo;. If it is, switch to &amp;ldquo;Development&amp;rdquo; and the previews will start working again.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/SwiftUI-Mac-signing.png&#34; alt=&#34;Code signing&#34;&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;laying-out-the-view&#34;&gt;Laying out the View&lt;/h2&gt;
&lt;p&gt;Now that I have the project and I know how to preview it, it&amp;rsquo;s time to work out what to display in the app. The next real app I want to work on will use a master-detail layout, so that is what I decided to try here.&lt;/p&gt;
&lt;p&gt;Before worrying about the data, I decided to try populating the master view with a static list and using that to navigate to a detail view that was simply a Text view.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ContentView&lt;/span&gt;: View {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; body: some View {
        NavigationView {
             List {
                 ForEach(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; ... &lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;, id: &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;\&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;) { index &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt;
                     NavigationLink(destination: Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;\(&lt;/span&gt;index&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;)) {
                         Text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Link &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;\(&lt;/span&gt;index&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;)
                     }
                 }
             }
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This worked, except that the left column was only about 20 pixels wide. But I was able to use the mouse to drag it wider and there were my List entries. Clicking on one did indeed show the detail I wanted, but it shrunk the window to one line high!&lt;/p&gt;
&lt;p&gt;The first thing I did was to apply a &lt;code&gt;listStyle&lt;/code&gt; modifier to make it show the semi-transparent Mac sidebar. This fixed the width of the sidebar. But the whole window still shrunk when I selected an item.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;  .listStyle(SidebarListStyle())
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;I tried applying the frame modifier to the NavigationView and that made the window stay the same size, but the content still shrunk into a tiny section in the middle. It looks like I need to apply that frame modifier to the detail view as well.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;  .frame(maxWidth: .infinity, maxHeight: .infinity)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;And as you can see from this gif, I then had a full functional master-detail view with a collapsible and expandable semi-transparent sidebar.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/SwiftUI-Mac-master-detail.gif&#34; alt=&#34;Master detail view&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;adding-data&#34;&gt;Adding Data&lt;/h2&gt;
&lt;p&gt;After some scouting around for a free API that I could hook into, I came across &lt;a href=&#34;https://http.cat&#34;&gt;HTTP Cats&lt;/a&gt; which is a site that serves up a cat image to match almost every HTTP status code.&lt;/p&gt;
&lt;p&gt;This sounded ideal: I can list the codes in the master view on the left and display the image in the detail view on the right.&lt;/p&gt;
&lt;p&gt;First I created a JSON file to list all the HTTP status codes so that I could put them into a List view. This was a very simple array with each entry having a code and a title:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;[
  {
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;code&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;100&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;title&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Continue&amp;#34;&lt;/span&gt;
  },
  {
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;code&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;101&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;title&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Switching Protocols&amp;#34;&lt;/span&gt;
  },
  &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;...&lt;/span&gt;
]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;I created an HttpStatus struct with these 2 properties and I borrowed &lt;a href=&#34;https://www.hackingwithswift.com/example-code/system/how-to-decode-json-from-your-app-bundle-the-easy-way&#34;&gt;Paul Hudson&amp;rsquo;s excellent Helper Bundle extension&lt;/a&gt; to decode the JSON file. For a first attempt, I used the numeric codes to build the list and showed the title of the selected one in the detail view. But one of the best things about SwiftUI is that it makes it so easy to configure table rows, so it is time to create a new View to do this.&lt;/p&gt;
&lt;p&gt;After some experimentation, I had a TableRowView that I liked the look of, but the default sidebar width was too narrow and truncated the status code titles, so I added a frame modifier to the List to set a minimum and maximum width for the sidebar.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/SwiftUI-Mac-Master.png&#34; alt=&#34;Master view&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;outline-list&#34;&gt;Outline List&lt;/h2&gt;
&lt;p&gt;At this point I decided that it would be more useful to have a outline list with the status codes grouped by their category.&lt;/p&gt;
&lt;p&gt;So I re-did the JSON file to show this, added an HttpSection struct and a SectionHeaderView and modified the data loading method and @State variable.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;[
  {
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;headerCode&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;1xx&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;headerText&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Informational&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;statuses&amp;#34;&lt;/span&gt;: [
      {
        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;code&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;100&amp;#34;&lt;/span&gt;,
        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;title&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Continue&amp;#34;&lt;/span&gt;
      },
      {
        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;code&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;101&amp;#34;&lt;/span&gt;,
        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;title&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Switching Protocols&amp;#34;&lt;/span&gt;
      }
    ]
  },
  {
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;headerCode&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2xx&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;headerText&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Success&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;statuses&amp;#34;&lt;/span&gt;: [
      {
        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;code&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;200&amp;#34;&lt;/span&gt;,
        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;title&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;OK&amp;#34;&lt;/span&gt;
      },
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This worked really well and I was thrilled to find that the sections automatically had Show/Hide toggles!&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/SwiftUI-Mac-outline.png&#34; alt=&#34;Outline view&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;detail-view&#34;&gt;Detail View&lt;/h2&gt;
&lt;p&gt;Up until now, I had been using a standard Text view as the destination for my navigation. This is a really useful technique as you can build the interface gradually but have it work from the beginning. But now it was time to create a new view for the details.&lt;/p&gt;
&lt;p&gt;I set up the view and added a method that would download the correct cat image when the view appeared but there was no image. After some digging, I realised that sand-boxed Mac apps do not allow network access by default. I went to the Signing &amp;amp; Capabilities section of the target settings and turned on &amp;ldquo;Outgoing Connections (Client)&amp;rdquo;. And then I had my cat pictures.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/SwiftUI-Mac-detail.png&#34; alt=&#34;Detail view&#34;&gt;&lt;/p&gt;
&lt;p&gt;It really should have a loading image to display while the cat image is being downloaded, but to my disappointment, I found that the SF Symbols are not available to a Mac app! But I added a Text view to say &amp;ldquo;Loading&amp;hellip;&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;Now that I have a functioning Mac app with a Master-Detail view, the next thing is to explore some more of the challenges that will need to be solved before I can write a Mac app completely using SwiftUI.&lt;/p&gt;
&lt;p&gt;If you want to check out the project at this stage, here is a link to the &lt;a href=&#34;https://github.com/trozware/swiftui-mac/tree/8ebeb615db81f9d7b6489a1920ebb08d07131ebb&#34;&gt;relevant GitHub commit&lt;/a&gt;. Or if you would prefer, here is a link to the &lt;a href=&#34;https://github.com/trozware/swiftui-mac&#34;&gt;final version&lt;/a&gt; of the project.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;In &lt;a href=&#34;https://troz.net/post/2019/swiftui-for-mac-2/&#34;&gt;part 2 of this series&lt;/a&gt;, I will look into:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;how to interact with the menus&lt;/li&gt;
&lt;li&gt;how to open a secondary window&lt;/li&gt;
&lt;li&gt;more user interface controls&lt;/li&gt;
&lt;li&gt;how to pass data around between windows&lt;/li&gt;
&lt;/ul&gt;</description>
</item>
    
    <item>
<title>SwiftUI First Thoughts</title>
<link>https://troz.net/post/2019/swiftui_first-thoughts/</link>
<pubDate>Sun, 18 Aug 2019 15:00:05 +1000</pubDate>
      
      <guid>https://troz.net/post/2019/swiftui_first-thoughts/</guid>
<description>&lt;style&gt;
  img {
    margin: 10px auto;
  }
&lt;/style&gt;

&lt;p&gt;At WWDC 2019, Apple surprised us all by announcing a completely new declarative UI framework called &lt;a href=&#34;https://developer.apple.com/xcode/swiftui/&#34;&gt;SwiftUI&lt;/a&gt;. Quoting snippets from the Apple announcements, &amp;ldquo;SwiftUI is an innovative, exceptionally simple way to build user interfaces across all Apple platforms with the power of Swift&amp;rdquo; and &amp;ldquo;SwiftUI uses a declarative syntax so you can simply state what your user interface should do.&amp;rdquo; But what does this mean and should we all adopt it now?&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://developer.apple.com/assets/elements/icons/swift/swift-96x96_2x.png&#34; alt=&#34;Swift&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;swift&#34;&gt;Swift&lt;/h2&gt;
&lt;p&gt;Before discussing whether to adopt SwiftUI, we need to consider Swift itself, since you cannot use SwiftUI without Swift.&lt;/p&gt;
&lt;p&gt;The announcement of Swift at WWDC 2014 was a complete bombshell. Here in Australia, I watch the keynote every year while half asleep since it starts at 3 am. That announcement had me wide awake and bouncing out of my seat with excitement. I was an early adopter and have never regretted that decision.&lt;/p&gt;
&lt;p&gt;Many well-respected developers have decided to ignore Swift and they have their various reasons, so let&amp;rsquo;s go through the ones I have heard:&lt;/p&gt;
&lt;h4 id=&#34;1-im-very-comfortable-and-productive-in-objective-c&#34;&gt;1. I&amp;rsquo;m very comfortable and productive in Objective-C&lt;/h4&gt;
&lt;p&gt;This is not a bad reason and for many people, their employer may insist on the language anyway, but this argument doesn&amp;rsquo;t work for me. Firstly, I think that there is never going to be the One Perfect Language (with apologies to &lt;a href=&#34;https://oleb.net/blog/2017/06/chris-lattner-wwdc-swift-panel/#in-which-fields-would-you-like-to-see-swift-in-the-future&#34;&gt;Chris Lattner&lt;/a&gt;) so I am always open to new ideas. And personally, I love learning new languages even if I am never going to use them in production. I feel that this makes me a better programmer overall. And there are vast benefits to Swift - it is a much safer language to write it, it is easier to read and more concise to write, it is just a much more modern language.&lt;/p&gt;
&lt;h4 id=&#34;2-swift-is-too-new-and-changes-too-much-between-versions&#34;&gt;2. Swift is too new and changes too much between versions&lt;/h4&gt;
&lt;p&gt;Swift was new. It is now 5 years old and we are into version 5.2. Undeniably, there have been a lot of changes since 1.0 and many of them have been breaking changes. Swift 3 was especially bad in this respect. But this came with advantages too. As early adopters, we were able to influence the direction of the language. And Xcode was always pretty good about providing a converter to the next version. But either way, since Swift 4, there are supposed to be no more breaking changes, so this is an argument whose time has passed.&lt;/p&gt;
&lt;h4 id=&#34;3-no-abi-stability&#34;&gt;3. No ABI stability&lt;/h4&gt;
&lt;p&gt;ABI stability was a crutch that many people clung to as an excuse to avoid Swift. But unless you were building frameworks for distribution, I don&amp;rsquo;t see that it was ever a complete deal-breaker. The &lt;a href=&#34;https://github.com/apple/swift/blob/master/docs/ABIStabilityManifesto.md#what-does-abi-stability-enable&#34;&gt;Swift ABI Stability Manifesto&lt;/a&gt; has a good review of what ABI stability is and what it will allow. As app developers, the main advantage is that the Swift libraries will no longer need to be bundled with each app. This will decrease app sizes dramatically. But either way, we now have ABI stability, so again, this argument is finished.&lt;/p&gt;
&lt;h4 id=&#34;4-apple-may-not-be-serious-about-swift-and-it-may-not-last&#34;&gt;4. Apple may not be serious about Swift and it may not last&lt;/h4&gt;
&lt;p&gt;I think there was a certain amount of wishful thinking here. The main data behind this theory seemed to be that very few of the Apple apps included any Swift. And in the beginning this was true. I expect Apple&amp;rsquo;s apps have a rather longer development time-frame than apps produced by independents. However over the last few years, more and more of Apple&amp;rsquo;s own apps have started to use Swift, either completely or partially. And any doubt about Apple&amp;rsquo;s commitment to Swift should have been permanently laid to rest by the announcement of SwiftUI.&lt;/p&gt;
&lt;h4 id=&#34;5-its-too-complicated&#34;&gt;5. It&amp;rsquo;s too complicated&lt;/h4&gt;
&lt;p&gt;OK, this one has some validity, but then again, if Swift is to rule the world, it needs to be able to do a lot of things. I love Swift, I love writing in it and I am very productive when using it. But then I see a chunk of code sprinkled with generics and unsafe pointers and I can&amp;rsquo;t make head nor tail of it. However, I think that if you are writing any standard, non-arcade-game app, you can write very good Swift using just the basics.&lt;/p&gt;
&lt;h2 id=&#34;why-did-apple-make-swiftui&#34;&gt;Why did Apple make SwiftUI?&lt;/h2&gt;
&lt;p&gt;Having demolished the arguments against using Swift, it&amp;rsquo;s time to move on to SwiftUI. Let&amp;rsquo;s start with the reasons why something like this had to happen.&lt;/p&gt;
&lt;p&gt;Apple now has 5 or possibly 6 user platforms: macOS, iOS, iPadOS, tvOS, watchOS and maybe CarPlay. (I&amp;rsquo;ve never considered any CarPlay development so I have no idea how it works.) The screen sizes range from 38mm for the smallest watch to over 75&amp;quot; to large screen TVs (apologies for mixing my units there, but it seems that TVs have not gone metric yet). As far as user interface frameworks go, we have had AppKit, UIKit and WatchKit. AppKit is the venerable old member of this team, descended from NextStep (which is why every element name has the NS prefix) and is used to make macOS apps. UIKit was built from scratch for the iPhone and so is a lot newer and neater than AppKit, but at the same time it is more limited. It has never had to deal with the vast variability and complexity of a Mac app&amp;rsquo;s interface. WatchKit is an even more slimmed down framework with a relatively small number of interface elements.&lt;/p&gt;
&lt;p&gt;Now imagine that you are trying to write a multi-platform app. You have to learn at least 3 different ways of doing everything. And there are differences that always catch me out. For example, in AppKit, to set the text in a text field, you set the field&amp;rsquo;s &lt;code&gt;stringValue&lt;/code&gt; but in iOS, you can set the field&amp;rsquo;s &lt;code&gt;text&lt;/code&gt; property. And in WatchKit, you call the &lt;code&gt;setText()&lt;/code&gt; method.&lt;/p&gt;
&lt;p&gt;Want to change the background color of a view? UIView - no problem, set &lt;code&gt;backgroundColor&lt;/code&gt;. NSView - nope - do something weird with layers. I forget what, I have to look it up every time.&lt;/p&gt;
&lt;p&gt;These inconsistencies are annoying, time-consuming and a huge barrier to cross-platform development. It really annoys me when I read articles or tweets that assume Swift programming = iOS programming when it is so much more. But before SwiftUI, it was not easy to jump between the platforms.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://developer.apple.com/ipad-apps-for-mac/&#34;&gt;Catalyst&lt;/a&gt;, previously code-named Marzipan, was supposed to be the answer. And it is a partial answer. It allows iPad apps to be ported to the Mac and that&amp;rsquo;s great for iPad developers who want to expand their reach. But it isn&amp;rsquo;t the answer for everybody.&lt;/p&gt;
&lt;h3 id=&#34;interface-builder&#34;&gt;Interface Builder&lt;/h3&gt;
&lt;p&gt;Before I go further into what I think is so great about SwiftUI, I would like to take a moment to discuss Interface Builder. Xcode is a brilliant tool that gets better with every release, but its weak point has always been Interface Builder. I am old enough to remember when Interface Builder was a separate app (not that we called them &amp;ldquo;apps&amp;rdquo; in those days) and although it has been folded into Xcode for many years now, the connection between interface and code has always been clunky and un-intuitive. Control-dragging from interface to code and then remembering to switch between Action and Outlet so that you don&amp;rsquo;t end up naming your button &amp;ldquo;doneButtonWasTapped&amp;rdquo;. And if you get the modifier key wrong, who knows what weird stuff will happen.&lt;/p&gt;
&lt;p&gt;And then came Auto Layout&amp;hellip; It was vastly more flexible than the old school springs &amp;amp; struts and with the ever increasing number of iPhone &amp;amp; iPad models something had to be done, but if you have never ended up swearing at Auto Layout and reverting to a previous commit or mashing Undo repeatedly, then you can&amp;rsquo;t have used Auto Layout very much!&lt;/p&gt;
&lt;p&gt;WatchKit had an entirely different approach to layout and it was easy, intuitive and very refreshing. You drag in objects, they go one under another. You can group them horizontally or vertically, you can make them into table cells. WatchKit has a much more limited set of interface elements and a much more limited set of device sizes to deal with, but I think we can clearly see the origins of SwiftUI in the way it worked. Even if you still had to use Interface Builder to do it.&lt;/p&gt;
&lt;p&gt;Interface Builder&amp;rsquo;s quirks lead to a category of programmers who felt the need to write all their interface in code. To my way of thinking, this is a huge waste of time and you still had to wrestle with Auto Layout, but without the visual clues! But if it makes them happy&amp;hellip;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://developer.apple.com/xcode/swiftui/&#34;&gt;&lt;img src=&#34;https://developer.apple.com/assets/elements/icons/swiftui/swiftui-96x96_2x.png&#34; alt=&#34;SwiftUI&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;what-is-swiftui&#34;&gt;What Is SwiftUI?&lt;/h2&gt;
&lt;p&gt;A &amp;ldquo;declarative UI framework&amp;rdquo; - what does that mean? Basically, declarative programming is a way of specifying what a program should do, rather than specifying how to do it. A common example is making a sandwich. If you want a sandwich, you say to the sandwich maker, &amp;ldquo;Please can I have a ham, cheese and tomato sandwich&amp;rdquo;. You don&amp;rsquo;t say &amp;ldquo;Get two pieces of bread, butter both of them, cut 3 slices of ham and 2 slices of cheese&amp;hellip;&amp;rdquo;. They know how to make a sandwich so you only have to ask for what you want.&lt;/p&gt;
&lt;p&gt;Back in the Apple UI world, what if you want a button? Is it for an iPhone app? Then you need an UIButton with a certain type. Set its title, size, location, layout constraints. What are the default sizes for an iPhone button? What is the default font? What color should the text be? Now make a button for a tvOS app? That has to be huge! And what other settings does it have? But the thing is, iOS, macOS, tvOS etc. already &lt;strong&gt;KNOW&lt;/strong&gt; what their buttons should look like. So why not just tell the system &amp;ldquo;I want a button&amp;rdquo;? Let the system work out the details and you can get on with the cool app ideas.&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;m not going to turn this post into a SwiftUI tutorial, but I would like to thank and recommend the people that have really helped me get to grips with it, especially &lt;a href=&#34;https://www.hackingwithswift.com/articles/196/learn-swiftui-with-free-tutorials&#34;&gt;Paul Hudson of Hacking with Swift with his Learn SwiftUI tutorials&lt;/a&gt;, &lt;a href=&#34;https://www.youtube.com/user/azamsharp/videos&#34;&gt;Mohammad Azam&amp;rsquo;s great YouTube series&lt;/a&gt;, and &lt;a href=&#34;https://designcode.io/swiftui-course&#34;&gt;Meng To&amp;rsquo;s SwiftUI course at Design+Code&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The other great benefit of SwiftUI is that when used with the Combine framework, it gives you a reactive interface. There have been various third-party libraries for doing this: RxSwift, ReactiveSwift, ReactiveCocoa, Bond etc, but with Combine, Apple is baking this into the ecosystem, which makes it a lot easier to set up and means that it will stay up-to-date with the operating systems. A reactive interface is one where you can bind a UI element to a piece of data and then when the data changes, the user interface updates automatically. You can even bind both ways so that the user interface updates the data without you having to do a thing. Imagine how much boiler-plate code that can eliminate?&lt;/p&gt;
&lt;h2 id=&#34;the-good-the-bad-and-the-ugly&#34;&gt;The Good, The Bad and The Ugly&lt;/h2&gt;
&lt;h3 id=&#34;1-the-good&#34;&gt;1. The Good&lt;/h3&gt;
&lt;p&gt;You get a lot of interface for very little code. Making tables is a joy without the masses of boilerplate code needed to set up data sources and delegates. The instant preview in the canvas makes iteration much easier. Being able to create something like a Picker and having SwiftUI render it in one of multiple different styles depending on the platform is magical.&lt;/p&gt;
&lt;h3 id=&#34;2-the-bad&#34;&gt;2. The Bad&lt;/h3&gt;
&lt;p&gt;It&amp;rsquo;s early days yet and SwiftUI has some quirks and bugs. Sometimes the canvas just stops responding, switching into live mode in the canvas can take a while and of course it is still in beta, so there will be breaking changes to come.&lt;/p&gt;
&lt;h3 id=&#34;3-the-ugly&#34;&gt;3. The Ugly&lt;/h3&gt;
&lt;p&gt;It is very easy to build up the Pyramid of Doom where you have multiple levels of nesting leading to the end of your code being a seemingly endless stream of closing curly braces. In SwiftUI, one tends to build from the inside out: make a Text view, embed it in a VStack so you can add another one, embed that stack in an HStack so you can add an Image and so on&amp;hellip; But there is an answer: Command-click on one of your outer layers and select &amp;ldquo;Extract Subview&amp;rdquo;.&lt;/p&gt;
&lt;h2 id=&#34;coding-the-layout&#34;&gt;Coding the Layout&lt;/h2&gt;
&lt;p&gt;Earlier in the article, I spoke about programmers ignoring Interface Builder and laying out the interface in code. I don&amp;rsquo;t think this is a good approach, so how is SwiftUI different? Firstly, you get immediate feedback of the UI you are coding, so you are not losing that visual benefit of using Interface Builder. Secondly, SwiftUI does much of the layout for you, so you are not hand-coding auto layouts or every last detail of every UI element. So as far as SwiftUI is concerned, I am a convert to programmatic layouts. But if not using SwiftUI, I would still stick to Interface Builder.&lt;/p&gt;
&lt;p&gt;Another point to consider here is that developers have long argued that if Apple wants the iPad to be seen as a &amp;ldquo;Pro&amp;rdquo; device, there should be a version of Xcode for iPad. One of the problems with this was Interface Builder - it is difficult to see how it could be made to work with a touch interface. But with SwiftUI and iPadOS, is it possible that Apple can make an iPad version of Xcode?&lt;/p&gt;
&lt;h2 id=&#34;should-you-use-swiftui&#34;&gt;Should you use SwiftUI?&lt;/h2&gt;
&lt;p&gt;I hope that from my previous paragraphs, you have come away with a good feeling for why Apple made SwiftUI and why it is good for us as developers. Personally, I find it a joy to use even in these early beta stages, but some of the arguments against using Swift, can now be applied again to SwiftUI.&lt;/p&gt;
&lt;p&gt;That SwiftUI is very new cannot be debated. It is extremely new and even in the handful of betas released since WWDC, we have seen some breaking changes. It feels quite buggy still but as I am running it in a beta operating system with a beta version of Xcode, it would be unfair to blame all the instability on SwiftUI.&lt;/p&gt;
&lt;p&gt;SwiftUI is not yet a complete replacement for UIKit/AppKit/WatchKit etc. There are SwiftUI equivalents for many of the interface elements and I recommend the &lt;a href=&#34;https://goshdarnswiftui.com&#34;&gt;Gosh Darn SwiftUI site&lt;/a&gt; which maintains a list of UIKit equivalents as well as really useful snippets of SwiftUI code. But even when SwiftUI does not have the UI element you want, there are two easy options: use UIKit/AppKit or build your own. Apple has made sure that there is no problem about mixing and matching UIKIt/AppKit code with SwiftUI. And maybe the SwiftUI tools would allow you to build your own version of the missing element. I needed a progress bar and I built one myself with not much code and ended up with what I think is a better look than the standard one.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/trozware/swiftui_progressbar&#34;&gt;&lt;img src=&#34;https://troz.net/images/SwiftUi_progressbar.png&#34; alt=&#34;Progress Bar&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Click the image for a link to the GitHub repository.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;For years, Apple has been telling us to use standard interface elements in our apps and if we did this, when system updates changed the look and feel, we mostly got that change for free. Now they are giving us even more for free by saying effectively, tell us what UI element you want and we will do all the work of configuring it for the platform and for the user&amp;rsquo;s settings.&lt;/p&gt;
&lt;p&gt;But with this, Apple has given us a lot of modifiers we can apply to elements as well as a great animation suite, so I expect to see a lot of more interesting design choices being made in apps, while they are still adhering to all the standard human interface guidelines for the various platforms.&lt;/p&gt;
&lt;p&gt;Apple does not promote SwiftUI as &amp;ldquo;write once, run everywhere&amp;rdquo; but as &amp;ldquo;learn once, apply everywhere&amp;rdquo; and that is an important distinction. It seems at first glance that we can write once but only on a basic level. You are still going to need to design the appropriate UI for a platform, but it will be able to re-use components from the other versions of the same app.&lt;/p&gt;
&lt;p&gt;Do I intend to use SwiftUI in my next app - YES. If I was writing code for NASA, I wouldn&amp;rsquo;t, but my apps are rarely mission-critical, so I can indulge myself and learn as I go. It will be frustrating when there are breaking changes, but at the same time, my bug reports are going to make it better.&lt;/p&gt;
&lt;p&gt;One caveat is that SwiftUI apps will require the latest operating systems, iOS 13 and macOS 10.15 so if your app has to support older versions of the systems, you will have to wait until next year. But there is nothing to stop you building some test components and starting the learning process.&lt;/p&gt;</description>
</item>
    
    <item>
<title>Marktime</title>
<link>https://troz.net/marktime/</link>
<pubDate>Mon, 04 Feb 2019 14:48:53 +1000</pubDate>
      
      <guid>https://troz.net/marktime/</guid>
<description>&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;Mark Time is now available now from the &lt;a href=&#34;https://itunes.apple.com/us/app/mark-time/id1305580742?mt=8&#34;&gt;iTunes App Store&lt;/a&gt; for iPhone and
iPad as an assistant for celestial navigators.&lt;/p&gt;
&lt;p&gt;Mark Time is an application for Celestial Navigation that solves the problem of
how to take an accurate time reading to go with each sextant sighting.&lt;/p&gt;
&lt;p&gt;By simply tapping the screen you can record the exact time UTC as you take your
sight, so you have no chance of making an error with the conversion, and this
time is stored in one of five registers.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/MarkTime1.png&#34; alt=&#34;Mark Time&#34;&gt;&lt;/p&gt;
&lt;p&gt;Very useful when you have an assistant, and ideal for taking readings when you
are on your own.&lt;/p&gt;
&lt;p&gt;As you record a time you hear a confirmation sound and feel a vibration, so
there is no need even to look at the screen. In addition the actual latitude and
longitude at each time can be accessed later to verify your calculations. These
options are all configurable in Settings to suit your own preferences.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/MarkTime2.png&#34; alt=&#34;Mark Time&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Location permissions:&lt;/strong&gt; On startup, the app will request permission to access
your location. This is how the latitude and longitude data is gathered to
provide this data if you wish.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Support:&lt;/strong&gt; If you have any questions about this app, please use the Contact
link above to get in touch.&lt;/p&gt;</description>
</item>
    
    <item>
<title>Learning Swift  - Tuples</title>
<link>https://troz.net/post/2019/learning-swift-tuples/</link>
<pubDate>Sun, 03 Feb 2019 19:48:51 +1000</pubDate>
      
      <guid>https://troz.net/post/2019/learning-swift-tuples/</guid>
<description>&lt;style&gt;
  img {
    margin: 10px auto;
    border: 0.5rem #dfe7f0 solid;
    border-radius: 0.5rem;
     
  }

  .dark-theme img {
    margin: 10px auto;
    border: 0.5rem #4a4d50 solid;
    border-radius: 0.5rem;
     
  }

  .social_footer img {
    border: none;
    box-shadow: none;
  }
&lt;/style&gt;

&lt;p&gt;I sometimes like to focus on aspects of the Swift language that get less publicity, but that I think are really useful without adding a lot of complexity. This time I am looking at tuples.&lt;/p&gt;
&lt;p&gt;There are many different ways of collecting data together in Swift, but for small amounts of transitory data, I find tuples to be an extremely convenient data structure.&lt;/p&gt;
&lt;h2 id=&#34;what-is-a-tuple&#34;&gt;What is a Tuple?&lt;/h2&gt;
&lt;p&gt;A tuple is basically an array with a pre-determined length and unlike normal Swift arrays, it can hold a mix of data types.&lt;/p&gt;
&lt;p&gt;Here are some examples:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; pair = (&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Jessie&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Woody&amp;#34;&lt;/span&gt;)
&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; coords = (&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;, &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;6&lt;/span&gt;)
&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; pet = (type: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;cat&amp;#34;&lt;/span&gt;, trained: &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;, age: &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;To define a tuple, you enclose the data elements in parentheses - normal brackets, not curly or square. Optionally, the elements can have a label attached as shown in the &lt;code&gt;pet&lt;/code&gt; example.&lt;/p&gt;
&lt;p&gt;Tuples can have any number of components, but if they get too long, a struct might be a better option. &lt;a href=&#34;https://github.com/realm/SwiftLint&#34;&gt;SwiftLint&lt;/a&gt; will complain if you use tuples with more than 3 elements and usually I go along with that.&lt;/p&gt;
&lt;p&gt;There are various ways to access the parts of a tuple. The first way is using index numbers which works but isn&amp;rsquo;t very intuitive and could be hard to decipher when you come back to a project after some time.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;print(pair.&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;)
print(pair.&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The next way is if the tuple has used labels for the elements as in the &lt;code&gt;pet&lt;/code&gt; example above:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;print(pet.type)
print(pet.trained)
print(pet.age)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;But the way I prefer to use them is by deconstructing the parts into separate variables in a single statement:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; (x, y, z) = coords
print(x, y, z)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The elements of a tuple can be of different types but once a tuple has been defined, that type of each element is fixed, so you still get all the benefits of Swift&amp;rsquo;s type safety.&lt;/p&gt;
&lt;p&gt;Option-clicking on the variable name shows the inferred type of the tuple:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/Tuple_type.png&#34; alt=&#34;The type of a tuple.&#34;&gt;&lt;/p&gt;
&lt;p&gt;Trying to re-assign the tuple or any elements of the tuple will only work if the new assignments match the initial types for each element:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/Tuple_errors.png&#34; alt=&#34;Errors when mutating a tuple.&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;where-could-you-use-a-tuple-and-why&#34;&gt;Where could you use a tuple and why?&lt;/h2&gt;
&lt;p&gt;Let&amp;rsquo;s imagine you have a function that checks a database or web service and comes back with the title of a movie and its rating.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;getMovieInfo&lt;/span&gt;() {
  &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; movieTitle: String
  &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; rating: Int

  &lt;span style=&#34;color:#75715e&#34;&gt;// get the data from somewhere&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;// now return both movieTitle and rating&lt;/span&gt;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Having got the data, this function needs to return two pieces of data: &lt;code&gt;movieTitle&lt;/code&gt; and &lt;code&gt;rating&lt;/code&gt; - one &lt;code&gt;String&lt;/code&gt; and one &lt;code&gt;Int&lt;/code&gt;. How could this be done?&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Array&lt;/strong&gt;: since there are 2 different data types, the array would have to be of type &lt;code&gt;[Any]&lt;/code&gt; or the &lt;code&gt;Int&lt;/code&gt; could be converted to a &lt;code&gt;String&lt;/code&gt; before returning. Neither of these are good options. Using &lt;code&gt;Any&lt;/code&gt; removes the protection of Swift&amp;rsquo;s type safety and converting the &lt;code&gt;Int&lt;/code&gt; to and from a &lt;code&gt;String&lt;/code&gt; may fail, so then you have to deal with optionals.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Dictionary&lt;/strong&gt;: the same arguments hold true. The dictionary would have to be of type &lt;code&gt;[String: Any]&lt;/code&gt; or the rating would have to be converted to a &lt;code&gt;String&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Struct or Class&lt;/strong&gt;: either of these would be fine but unless this is a data structure that is going to be re-used, it seems like overkill.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Tuple&lt;/strong&gt;: this would get my vote, so let&amp;rsquo;s see how that would work.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;getMovieInfo&lt;/span&gt;() -&amp;gt; (String, Int) {
  &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; movieTitle: String
  &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; rating: Int

  &lt;span style=&#34;color:#75715e&#34;&gt;// get the data from somewhere&lt;/span&gt;

  &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; (movieTitle, rating)
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Two main things to notice here:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;The return type of the function lists the data types of both the elements being returned, enclosed in parentheses.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;The returning tuple is created by wrapping the elements inside parentheses, just like in the examples above.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;And then in the calling function, you can access the parts of the returned data like this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; (returnedMovieTitle, returnedRating) = getMovieInfo()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The tuple is being returned and immediately deconstructed to give 2 new variables so accessing the parts of the tuple is easy and type-safe.&lt;/p&gt;
&lt;p&gt;A function returning a tuple can also be configured to use named elements by specifying the names in the return type declaration.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;getMovieInfo&lt;/span&gt;() -&amp;gt; (name: String, score: Int) {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; movieTitle: String
    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; rating: Int

    &lt;span style=&#34;color:#75715e&#34;&gt;// get the data from somewhere&lt;/span&gt;

    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; (movieTitle, rating)
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; result = getMovieInfo()
&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; returnedMovieTitle = result.name
&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; returnedRating = result.score
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;My feeling is that once a tuple is complex enough to need names, you should really consider using a class or a struct, but for returning 2 or 3 chunks of data from a function, this is a very useful technique, espeicialy if the data types are different.&lt;/p&gt;
&lt;h2 id=&#34;looping-through-tuples&#34;&gt;Looping through tuples&lt;/h2&gt;
&lt;p&gt;If you have an array of tuples, looping through the tuples is made very convenient if you use the deconstruction method of accessing the parts.&lt;/p&gt;
&lt;p&gt;As an example, suppose you are dealing with some 3D coordinate system and you want to perform an operation on each location.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; coords_array = [
    (&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;),
    (&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;, &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;),
    (&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;),
    (&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;),
    (&lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;)
]

&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; (x, y, z) &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt; coords_array {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; distanceFromOrigin = abs(x) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; abs(y) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; abs(z)
    print(distanceForOrigin)
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;You can deconstruct the tuple each time through the loop, assigning temporary variables so you can act on them.&lt;/p&gt;
&lt;h2 id=&#34;wrapping-up&#34;&gt;Wrapping Up&lt;/h2&gt;
&lt;p&gt;So those are the basics of tuples: how to create them, how to use them and where they might be useful. My main use is as a light-weight alternative to a struct for returning multi-part data from a function. But hopefully after reading this article, they have become another tool in your Swift tool belt that you can consider using in certain circumstances.&lt;/p&gt;
&lt;h3 id=&#34;that-leaves-only-one-important-question-how-do-you-pronounce-tuple&#34;&gt;That leaves only one important question: how do you pronounce &amp;lsquo;tuple&amp;rsquo;?&lt;/h3&gt;
&lt;p&gt;I have heard two variations: &amp;lsquo;toople&amp;rsquo; using a long U as in universe or &amp;lsquo;tupple&amp;rsquo; using a short U as in cup. There does not appear to be any strict geographical differentiation, so take your pick. I prefer &amp;lsquo;toople&amp;rsquo; myself, but if somebody says &amp;lsquo;tupple&amp;rsquo;, I know what they mean.&lt;/p&gt;</description>
</item>
    
    <item>
<title>Thanks</title>
<link>https://troz.net/thanks/</link>
<pubDate>Wed, 16 Jan 2019 10:59:13 +1000</pubDate>
      
      <guid>https://troz.net/thanks/</guid>
<description></description>
</item>
    
    <item>
<title>The End of Pic-a-POD</title>
<link>https://troz.net/post/2018/the-end-of-picapod/</link>
<pubDate>Sat, 06 Oct 2018 09:38:20 +1000</pubDate>
      
      <guid>https://troz.net/post/2018/the-end-of-picapod/</guid>
<description>&lt;p&gt;I think I wrote the first version of &lt;a href=&#34;https://picapod.com&#34;&gt;Pic-a-POD&lt;/a&gt; in 2003 and have been updating and maintaining it ever since, but the time has come to shut it down.&lt;/p&gt;
&lt;p&gt;I haven&amp;rsquo;t been able to find a picture of the original version, but here is one from 2005:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/POD2005.png&#34; alt=&#34;Pic-a-POD 2005&#34;&gt;&lt;/p&gt;
&lt;p&gt;And here it is today:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/POD2018.png&#34; alt=&#34;Pic-a-POD 2018&#34;&gt;&lt;/p&gt;
&lt;p&gt;It was written originally as a convenient way to download the daily picture-of-the-day from &lt;a href=&#34;https://www.nationalgeographic.com/photography/photo-of-the-day/&#34;&gt;National Geographic&lt;/a&gt; and use it to set the Mac&amp;rsquo;s Desktop Picture automatically. From there is just grew with more sites added (9 at the moment although I think there have been up to 12 at certain times).&lt;/p&gt;
&lt;p&gt;The main issue was keeping up with the site changes of the various sources. Early versions had each copy of the app interrogate the sites directly which meant that any change to the site broke the app until an update could be released. And without the App Store making updates easy to distribute, this was a problem. Later I switched to having PHP scripts on my server do the data retrieval and store the results in a database. The app then just had to request the data from my server. That way if there was a change, I could react quickly and a fix to the server-side scripts allowed all users to get the new data.&lt;/p&gt;
&lt;p&gt;As my first Objective-C app and my first app on the Mac App Store, Pic-a-POD has always held a place in my affections, and until last week, it was the one app that was always running on my Mac. So what changed? macOS Mojave&amp;rsquo;s dynamic desktops! I turned off Pic-a-POD, and set the Desktop picture to change dynamically through the day and I loved it.&lt;/p&gt;
&lt;p&gt;On the server, I have kept Pic-a-POD updated regularly, adding and removing sites, fixing the scripts to accommodate changes and so on. But the desktop app has languished and has needed an update for many years now. It&amp;rsquo;s networking is primitive and I know so much more about programming for the Mac now that looking at the code is positiviely embarrassing! But it has never been a big seller so a re-write is definitely not economically viable, it would only be for my satisfaction. And if even I am not using it any more, what is the point?&lt;/p&gt;
&lt;p&gt;So I have made the sad decision to shut it down. But what does this mean for users of Pic-a-POD right now?&lt;/p&gt;
&lt;p&gt;Firstly, it is not going away immediately. I will remove it from the App Store, but existing copies are still going to work. If any of the source sites change their data structure, I will not be monitoring this and I will not update the server-side scripts - just turn off that source and carry on with whatever still works. And finally, when the picapod.com domain name expires in 2021, I will not renew it and the app will cease to operate.&lt;/p&gt;
&lt;p&gt;What can you use instead? The default dynamic desktops in Mojave are great although there are only two of them, but I have bought myself an app called &lt;a href=&#34;https://itunes.apple.com/au/app/24-hour-wallpaper/id1226087575?mt=12&#34;&gt;24 Hour Wallpaper&lt;/a&gt; which includes a great range of dynamic desktop pictures.&lt;/p&gt;
&lt;p&gt;So thank you to everyone who has used Pic-a-POD over the years and especially those of you who took the time and trouble to contact me. It has been a fun journey, but there are other apps in my future now.&lt;/p&gt;</description>
</item>
    
    <item>
<title>Moving to the Dark Side - Part 2</title>
<link>https://troz.net/post/2018/moving-to-the-dark-side-2/</link>
<pubDate>Sat, 06 Oct 2018 08:29:35 +1000</pubDate>
      
      <guid>https://troz.net/post/2018/moving-to-the-dark-side-2/</guid>
<description>&lt;style&gt;
  img {
    margin: 10px auto;
    border: 0.5rem #dfe7f0 solid;
    border-radius: 0.5rem;
     
  }

  .dark-theme img {
    margin: 10px auto;
    border: 0.5rem #4a4d50 solid;
    border-radius: 0.5rem;
     
  }

  .social_footer img {
    border: none;
    box-shadow: none;
  }
&lt;/style&gt;

&lt;p&gt;Now that most of my Mac apps have been updated to support macOS Mojave&amp;rsquo;s dark mode, it was time to turn my attention to this web site.&lt;/p&gt;
&lt;p&gt;I build this site using &lt;a href=&#34;https://gohugo.io/&#34;&gt;Hugo&lt;/a&gt; and up until recently I used a theme called &lt;a href=&#34;https://github.com/olOwOlo/hugo-theme-even&#34;&gt;Even&lt;/a&gt; which I had been able to modify to suit my requirements. The story of how I switched to Hugo, what I wanted in a theme and how I went about, is in a &lt;a href=&#34;https://troz.net/post/2017/moving-to-hugo/&#34;&gt;post from last year&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;But Evan is a theme with a white background and dark text, which looked great in light mode, but rather glaring in dark mode. So it was time to head for the &lt;a href=&#34;https://themes.gohugo.io&#34;&gt;Hugo Themes page&lt;/a&gt; to look for an alternative.&lt;/p&gt;
&lt;p&gt;But which way to go? In my opinion, dark themes look better in Mojave&amp;rsquo;s light mode than light themes look in dark mode, so I decided to go with a dark theme. But to my delight, I found a theme that allowed users to switch between light and dark modes: &lt;a href=&#34;https://themes.gohugo.io/hugo-theme-hello-friend/&#34;&gt;Hello Friend&lt;/a&gt; by &lt;a href=&#34;https://twitter.com/panr&#34;&gt;panr&lt;/a&gt;. Click the light bulb icon in the top right and the web site instantly toggles between modes.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/Dark_Light_web.png&#34; alt=&#34;Dark and light versions of homepage&#34;&gt;&lt;/p&gt;
&lt;p&gt;With the spread of dark mode, I would expect more web sites and themes to implement this sort of switching in the future. Thanks to &lt;a href=&#34;https://twitter.com/panr&#34;&gt;panr&lt;/a&gt; for being an early adopter.&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;As I said in my &lt;a href=&#34;https://troz.net/post/2018/moving-to-the-dark-side/&#34;&gt;previous post&lt;/a&gt;, I have already updated several of my macOS apps to support dark mode. But after reading some comments on Twitter, I have updated &lt;a href=&#34;https://itunes.apple.com/app/apple-store/id552293482&#34;&gt;Icon Builder&lt;/a&gt; and &lt;a href=&#34;https://itunes.apple.com/app/apple-store/id997688302&#34;&gt;Dice Pass&lt;/a&gt; to allow the user to decide which mode to use. Make your choice in the Window menu as to whether these apps use whatever mode is set for the system, or select your preferred mode.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/SelectMode.png&#34; alt=&#34;Select mode in Window menu&#34;&gt;&lt;/p&gt;</description>
</item>
    
    <item>
<title>Moving to the Dark Side</title>
<link>https://troz.net/post/2018/moving-to-the-dark-side/</link>
<pubDate>Wed, 26 Sep 2018 16:49:43 +1000</pubDate>
      
      <guid>https://troz.net/post/2018/moving-to-the-dark-side/</guid>
<description>&lt;style&gt;
  img {
    margin: 10px auto;
    border: 0.5rem #dfe7f0 solid;
    border-radius: 0.5rem;
     
  }

  .dark-theme img {
    margin: 10px auto;
    border: 0.5rem #4a4d50 solid;
    border-radius: 0.5rem;
     
  }

  .social_footer img {
    border: none;
    box-shadow: none;
  }
&lt;/style&gt;

&lt;p&gt;With the release of macOS Mojave on 24th September 2018, I have started updating my Mac apps, mainly to enable support for dark mode if appropriate.&lt;/p&gt;
&lt;p&gt;And now I have updated this site too. Click the light bulb icon at the top right of the page to toggle between light and dark modes for this site.&lt;/p&gt;
&lt;p&gt;And with my apps, so far (1 st October 2018), I have updated &lt;a href=&#34;https://itunes.apple.com/app/apple-store/id552293482&#34;&gt;Icon Builder&lt;/a&gt;, &lt;a href=&#34;https://itunes.apple.com/app/apple-store/id509085586&#34;&gt;World Time in Words&lt;/a&gt;, &lt;a href=&#34;https://itunes.apple.com/app/apple-store/id997688302&#34;&gt;Dice Pass&lt;/a&gt; and &lt;a href=&#34;https://itunes.apple.com/app/apple-store/id533321133&#34;&gt;A Knight&amp;rsquo;s Move&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://troz.net/icon-builder/&#34;&gt;&lt;img src=&#34;https://troz.net/images/IconBuilder5.1.png&#34; alt=&#34;Icon Builder 5.1&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://troz.net/time-in-words-for-mac/&#34;&gt;&lt;img src=&#34;https://troz.net/images/WTiW_dark.png&#34; alt=&#34;World Time in Words 3.2&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://troz.net/dicepass/&#34;&gt;&lt;img src=&#34;https://troz.net/images/DicePass1.5.png&#34; alt=&#34;Dice Pass 3.2&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://troz.net/knightsmove/&#34;&gt;&lt;img src=&#34;https://troz.net/images/KnightsMoveMac1.png&#34; alt=&#34;Knights Move 1.6&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;For A Knight&amp;rsquo;s Move, I wanted to make sure the wood-look background didn&amp;rsquo;t change, so I actually disabled dark mode.
For any developers looking for the way to do that, I added the following chunk to the &lt;code&gt;applicationDidFinishLaunching(_:)&lt;/code&gt; method:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;#available&lt;/span&gt;(&lt;span style=&#34;color:#75715e&#34;&gt;OSX&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;10.14&lt;/span&gt;, &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;) {
        NSApp.appearance = NSAppearance(named: .aqua)
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Similar code could presumably be used to change the appearance of a running app. I may add the ability to switch to my apps later.&lt;/p&gt;</description>
</item>
    
    <item>
<title>Swift Strings Helper</title>
<link>https://troz.net/post/2018/swift-strings-helper/</link>
<pubDate>Thu, 21 Jun 2018 14:45:59 +1000</pubDate>
      
      <guid>https://troz.net/post/2018/swift-strings-helper/</guid>
<description>&lt;p&gt;Hands up everyone who can remember how to work with Swift strings, especially when it comes to substrings and ranges? &amp;hellip;.&lt;/p&gt;
&lt;p&gt;Nobody?&lt;/p&gt;
&lt;p&gt;Me neither. So I decided that I would work it out once and create myself a library to make it easy for myself in the future. And then I thought that other people might like it too. So I have created my first open sourced project.&lt;/p&gt;
&lt;h2 id=&#34;strings-in-swift&#34;&gt;Strings in Swift&lt;/h2&gt;
&lt;p&gt;Swift&amp;rsquo;s string handling is amazing. It is truly Unicode-compliant, so a Swift &lt;code&gt;String&lt;/code&gt; doesn&amp;rsquo;t care whether your string is made up of basic alphanumerics, accented characters, or emojis that might be composed of several different emojis joined together.&lt;/p&gt;
&lt;p&gt;But this power comes at a price, and every version of Swift has changed the way we interact with strings, seemingly making it more and more confusing for the poor programmers trying to stay current. I have got to the stage where each year I read up on the new String features and then promptly forget them. For every use, I have to go back and search how to do what should be simple.&lt;/p&gt;
&lt;h2 id=&#34;the-problems&#34;&gt;The Problems&lt;/h2&gt;
&lt;p&gt;To my mind, there are two main problems: indexes and substrings.&lt;/p&gt;
&lt;p&gt;In most languages, you can get the n-th character of a string, but not in Swift. In Swift, you have to ask the string for its startIndex (or endIndex), then use an offset to adjust that index by a certain number to give you a &lt;code&gt;String.Index&lt;/code&gt;. Do much the same to get a second index and then you can grab the string between those two indices.&lt;/p&gt;
&lt;p&gt;To get a sub-string from the 7th up to the 11th character of a string, this is what you have to do:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; str = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Hello, playground&amp;#34;&lt;/span&gt;

&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; subStart = str.index(str.startIndex, offsetBy: &lt;span style=&#34;color:#ae81ff&#34;&gt;7&lt;/span&gt;)
&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; subEnd = str.index(str.startIndex, offsetBy: &lt;span style=&#34;color:#ae81ff&#34;&gt;11&lt;/span&gt;)

&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; subStr = str[subStart ..&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt; subEnd]       &lt;span style=&#34;color:#75715e&#34;&gt;// &amp;#34;play&amp;#34;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Splitting the lines up like that at least helps to show what is happening, but then you see abominations like this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; sub = str[str.index(str.startIndex, offsetBy: &lt;span style=&#34;color:#ae81ff&#34;&gt;7&lt;/span&gt;)..&amp;lt;str.index(str.startIndex, offsetBy: &lt;span style=&#34;color:#ae81ff&#34;&gt;11&lt;/span&gt;)]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;And how anyone is supposed to read that, I really do not know.&lt;/p&gt;
&lt;p&gt;And now here is the kicker: the results (&lt;code&gt;subStr&lt;/code&gt; and &lt;code&gt;sub&lt;/code&gt; in the examples above) are not of type &lt;code&gt;String&lt;/code&gt;! They are of type &lt;code&gt;Substring&lt;/code&gt; so when you go to use them, they don&amp;rsquo;t work as expected.&lt;/p&gt;
&lt;p&gt;I guess there are cases for using &lt;code&gt;Substring&lt;/code&gt; but I always just end up casting to &lt;code&gt;String&lt;/code&gt; to solve this, but only after the compiler has choked on what I thought was a &lt;code&gt;String&lt;/code&gt; all along.&lt;/p&gt;
&lt;h2 id=&#34;the-solution&#34;&gt;The Solution&lt;/h2&gt;
&lt;p&gt;To make my life easier, I worked out all the ways that I wanted to be able to split up strings. Basically just two ways: by character number or by substring. Swift already has a &lt;code&gt;substring&lt;/code&gt; method but it uses &lt;code&gt;String.Index&lt;/code&gt; as shown above. To avoid confusion, I named my functions all &lt;code&gt;sub&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;But now I can do the following to split strings by character number:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; subStr = startingString.sub(from: &lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt;)
&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; subStr = startingString.sub(from: &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;)

&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; subStr = startingString.sub(upTo: &lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;)
&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; subStr = startingString.sub(upTo: &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;)

&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; subStr = startingString.sub(from: &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;, upTo: &lt;span style=&#34;color:#ae81ff&#34;&gt;7&lt;/span&gt;)
&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; subStr = startingString.sub(from: &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;, upTo: &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Negative numbers count back from the end of the string. And they all return &lt;code&gt;String&lt;/code&gt; objects!&lt;/p&gt;
&lt;p&gt;Or to split strings by their own sub-strings, I can do this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; subStr = startingString.sub(from: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;abc&amp;#34;&lt;/span&gt;)

&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; subStr = startingString.sub(upTo: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;xyz&amp;#34;&lt;/span&gt;)

&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; subStr = startingString.sub(from: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;abc&amp;#34;&lt;/span&gt;, upTo: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;xyz&amp;#34;&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;extras&#34;&gt;Extras&lt;/h2&gt;
&lt;p&gt;Once I had created a string helper library, I started thinking about all the other string utilities that would be useful. So I started adding all sorts of facilities:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Computed properties:
&lt;ul&gt;
&lt;li&gt;length (why should the length of a string be called count - that makes no sense)&lt;/li&gt;
&lt;li&gt;words&lt;/li&gt;
&lt;li&gt;lines&lt;/li&gt;
&lt;li&gt;word count&lt;/li&gt;
&lt;li&gt;line count&lt;/li&gt;
&lt;li&gt;title case&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Encoding:
&lt;ul&gt;
&lt;li&gt;URL encoding &amp;amp; decoding for queries or forms&lt;/li&gt;
&lt;li&gt;base64 encoding &amp;amp; decoding&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Trim:
&lt;ul&gt;
&lt;li&gt;trim&lt;/li&gt;
&lt;li&gt;trim left&lt;/li&gt;
&lt;li&gt;trim right&lt;/li&gt;
&lt;li&gt;trim using extra characters&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Pad:
&lt;ul&gt;
&lt;li&gt;pad left&lt;/li&gt;
&lt;li&gt;pad right&lt;/li&gt;
&lt;li&gt;with default space or specified other character&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;That&amp;rsquo;s as far as I have got so far, but I am hoping for some community involvement that will expand or edit this library to make it more broadly applicable.&lt;/p&gt;
&lt;h2 id=&#34;open-source&#34;&gt;Open Source&lt;/h2&gt;
&lt;p&gt;I have never created an open source project before and I have rarely contributed to open source. But I have now published this library on GitHub under an MIT license. Please check it out at &lt;a href=&#34;https://github.com/trozware/swift-strings-helper&#34;&gt;https://github.com/trozware/swift-strings-helper&lt;/a&gt;. The GitHub repo contains an Xcode project with all the source files, plus the targets to build frameworks for macOS or iOS, and a playground as documentation and to test it all out.&lt;/p&gt;
&lt;p&gt;I would love to get as many stars as possible and it would be fantastic if anyone wanted to log an issue or contribute directly. As someone who finds the whole open source world rather intimidating, I would like to assure everyone that there will be no flaming and no shooting down of ANY ideas. I look forward to hearing from you.&lt;/p&gt;
&lt;p&gt;I am sure there are other Swift libraries out there dedicated to solving the same problems, but I hope that mine can prove useful to some. And if you just want to use it without contributing, feel free. The usage instructions are all in the ReadMe on the GitHub page.&lt;/p&gt;</description>
</item>
    
    <item>
<title>Functional Programming in Swift</title>
<link>https://troz.net/post/2018/functional-programming/</link>
<pubDate>Thu, 14 Jun 2018 14:18:53 +1000</pubDate>
      
      <guid>https://troz.net/post/2018/functional-programming/</guid>
<description>&lt;p&gt;What is Functional Programming and how can we use it in Swift?&lt;/p&gt;
&lt;p&gt;Search online for any definition of functional programming and you will find many different definitions, few of which are practically helpful. I have no claim to be an expert, but as a Swift enthusiast, this is what I have distilled out of the morass.&lt;/p&gt;
&lt;h2 id=&#34;what-is-functional-programming&#34;&gt;What is Functional Programming?&lt;/h2&gt;
&lt;p&gt;Without providing a concrete definition, here are what I see as the 3 main goals of functional programming:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;use pure functions where possible&lt;/li&gt;
&lt;li&gt;avoid mutability where possible&lt;/li&gt;
&lt;li&gt;use functions as the basic building blocks&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;So let&amp;rsquo;s go through those one by one and see how they fit into the Swift language.&lt;/p&gt;
&lt;h2 id=&#34;functional-programming-in-swift&#34;&gt;Functional Programming in Swift&lt;/h2&gt;
&lt;p&gt;You can &lt;a href=&#34;https://github.com/trozware/functional-programming&#34;&gt;download a playground containing all these examples from GitHub&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id=&#34;pure-functions&#34;&gt;Pure functions&lt;/h3&gt;
&lt;p&gt;A function is considered pure if it will always produce the same result for the same input, regardless of where it is and what calls it.&lt;/p&gt;
&lt;p&gt;Imagine you are writing a role-playing game and for a given fight, you need to be able to calculate the damage per second caused by a character.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;DamageDealer&lt;/span&gt; {

    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; damageDone: Int = &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; timeTaken: TimeInterval = &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;

    &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;damagePerSecond&lt;/span&gt;() -&amp;gt; Double {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; timeTaken == &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; {
            &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
        }
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; dps = Double(damageDone) &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; timeTaken
        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; dps &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; {
            &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
        }
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; dps
    }

}

&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; mage = DamageDealer()
mage.damageDone = &lt;span style=&#34;color:#ae81ff&#34;&gt;32&lt;/span&gt;
mage.timeTaken = &lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;

mage.damagePerSecond()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The &lt;code&gt;damagePerSecond&lt;/code&gt; function takes no parameters but uses the properties of its containing object. This works in this class, but there are 3 big problems:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;The function is not transportable - you cannot copy it into another class as it is totally dependent on the structure of the properties in the containing class.&lt;/li&gt;
&lt;li&gt;When calling the function, it is not clear what data it is going to use.&lt;/li&gt;
&lt;li&gt;This function is difficult to test as calling the function with the same parameters (none) will produce different results depending on the setup.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;So for a version that uses a pure function, we could replace &lt;code&gt;damagePerSecond()&lt;/code&gt; with this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;damagePerSecondPure&lt;/span&gt;(damage: Int, time: TimeInterval) -&amp;gt; Double {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; time == &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
    }
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; dps = Double(damage) &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; time
    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; dps &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
    }
    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; dps
}

mage.damagePerSecondPure(damage: mage.damageDone, time: mage.timeTaken)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Calling the function is now more verbose, but reading the call gives you much more information about what is going to happen. Testing is easy, and the function is completely self-contained so can be copied into any class or struct.&lt;/p&gt;
&lt;h3 id=&#34;avoid-mutability&#34;&gt;Avoid mutability&lt;/h3&gt;
&lt;p&gt;This one has become the poster child of Swift Functional Programming as Swift provides some very convenient ways to avoid mutability.&lt;/p&gt;
&lt;p&gt;The first is &lt;code&gt;let&lt;/code&gt; versus &lt;code&gt;var&lt;/code&gt;. My rule is always to start defining any variable/constant with &lt;code&gt;let&lt;/code&gt; and only changing to &lt;code&gt;var&lt;/code&gt; if the compiler raises an error. In the current versions of Xcode, it will give a warning if you use &lt;code&gt;var&lt;/code&gt; unnecessarily which is great, but I still stick to using &lt;code&gt;let&lt;/code&gt; first.&lt;/p&gt;
&lt;p&gt;The most powerful way Swift lets us avoid mutability with Functional Programming is with &lt;code&gt;map&lt;/code&gt;, &lt;code&gt;filter&lt;/code&gt; and &lt;code&gt;reduce&lt;/code&gt;.&lt;/p&gt;
&lt;h4 id=&#34;filter&#34;&gt;Filter&lt;/h4&gt;
&lt;p&gt;Consider this function that checks possible player names:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;checkPlayerNames&lt;/span&gt;(names: [String]) -&amp;gt; [String] {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; validNames: [String] = []

    &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; name &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt; names {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; name.count &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt;name.contains(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34; &amp;#34;&lt;/span&gt;) {
            validNames.append(name)
        }
    }

    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; validNames
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; allNames = [ &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Woody&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Rex&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Slinky&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Buzz Lightyear&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Hamm&amp;#34;&lt;/span&gt; ]
&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; checkedNames = checkPlayerNames(names: allNames)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Only names with more than 3 characters and no spaces are considered valid. So this function creates an empty array and then loops through each member of the supplied array and appends any valid names to the new array before returning it.&lt;/p&gt;
&lt;p&gt;This function is a pure function and it works as expected. But the &lt;code&gt;validNames&lt;/code&gt; array is mutable and there is no need for it to be.&lt;/p&gt;
&lt;p&gt;Converting this to avoid mutability, we get:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;checkPlayerNamesUsingFilter&lt;/span&gt;(names: [String]) -&amp;gt; [String] {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; validNames = names.filter { name &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt;
        name.count &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt;name.contains(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34; &amp;#34;&lt;/span&gt;)
    }
    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; validNames
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Inside the &lt;code&gt;filter&lt;/code&gt; closure delimited by the curly braces after the word &lt;code&gt;filter&lt;/code&gt;, (more about closures below), the element in the array being evaluated is stored in the &lt;code&gt;name&lt;/code&gt; constant. The checks are done and this implicitly returns a &lt;code&gt;Bool&lt;/code&gt; - true if the checks pass, false if they do not. If the closure returns true, the name is valid and will be part of the validNames array.&lt;/p&gt;
&lt;p&gt;And if you really want to be concise:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;checkPlayerNamesUsingFilterShort&lt;/span&gt;(names: [String]) -&amp;gt; [String] {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; names.filter { $0.count &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt;$0.contains(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34; &amp;#34;&lt;/span&gt;) }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;I recommend the first method even if it is a bit more verbose. Storing the result in a constant before returning it makes debugging much easier. Using $0 instead of using a named parameter is convenient, but I prefer not to do this unless the closure is very simple.&lt;/p&gt;
&lt;h4 id=&#34;map&#34;&gt;Map&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;filter&lt;/code&gt; takes an array of objects and returns a sub-array containing every element which returned true for the checks inside the filter body.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;map&lt;/code&gt; changes the elements in an array and can return an array of the same type or an array of different types.&lt;/p&gt;
&lt;p&gt;Here is a function to square every integer in an array in the old style, using a mutable array to accumulate the result:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;squareNumbers&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;_&lt;/span&gt; numbers: [Int]) -&amp;gt; [Int] {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; squares: [Int] = []

    &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; number &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt; numbers {
        squares.append(number &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; number)
    }

    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; squares
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; numbers = [ &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;6&lt;/span&gt; ]
squareNumbers(numbers)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;And doing the same thing using &lt;code&gt;map&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;squareNumbersUsingMap&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;_&lt;/span&gt; numbers: [Int]) -&amp;gt; [Int] {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; squares = numbers.map { $0 &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; $0 }
    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; squares
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;In this case, the type of the data did not change: integers went in, integers came out.
But &lt;code&gt;map&lt;/code&gt; can change the type as well.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;squareRoots&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;_&lt;/span&gt; numbers: [Int]) -&amp;gt; [Double] {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; roots = numbers.map { number &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt;
        sqrt(Double(number))
    }
    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; roots
}

squareRoots(numbers)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;And there is a final twist to &lt;code&gt;map&lt;/code&gt; that used to be called &lt;code&gt;flatMap&lt;/code&gt; but is now called &lt;code&gt;compactMap&lt;/code&gt; and that allows us to get rid of optionals as we map through an array.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;convertStringsToInts&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;_&lt;/span&gt; strings: [String]) -&amp;gt; [Int] {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; ints = strings.compactMap { &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; Int($0) }
    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; ints
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; strings = [ &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;1&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;two&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;0.34&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;65&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;-93&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;4e8&amp;#34;&lt;/span&gt; ]
convertStringsToInts(strings)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The conversion of &lt;code&gt;String&lt;/code&gt; to &lt;code&gt;Int&lt;/code&gt; may fail and so returns an optional. If this function had used &lt;code&gt;map&lt;/code&gt; instead of &lt;code&gt;compactMap&lt;/code&gt;, the result would have been an array of optional Ints: &lt;code&gt;[Int?]&lt;/code&gt;. By using &lt;code&gt;compactMap&lt;/code&gt;, every &lt;code&gt;nil&lt;/code&gt; value was dropped and only valid integers are included.&lt;/p&gt;
&lt;h4 id=&#34;reduce&#34;&gt;Reduce&lt;/h4&gt;
&lt;p&gt;The final tool in the immutability toolbox is &lt;code&gt;reduce&lt;/code&gt; and this is one that took me a while to wrap my head around.&lt;/p&gt;
&lt;p&gt;Imagine that you wanted to add up all the integers in an array. Here is a way to do it using a mutable variable and a loop:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sumNumbers&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;_&lt;/span&gt; numbers: [Int]) -&amp;gt; Int {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; total = &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;

    &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; num &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt; numbers {
        total &lt;span style=&#34;color:#f92672&#34;&gt;+=&lt;/span&gt; num
    }

    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; total
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; numbers = [ &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;6&lt;/span&gt; ]
sumNumbers(numbers)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;I can&amp;rsquo;t use &lt;code&gt;filter&lt;/code&gt; or &lt;code&gt;map&lt;/code&gt; here because I want to end up with a single value after applying some logic to every item in the array. So here is where I use &lt;code&gt;reduce&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sumNumbersUsingReduce&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;_&lt;/span&gt; numbers: [Int]) -&amp;gt; Int {

    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; total = numbers.reduce(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;) { (cumulativeTotal, nextValue) &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt;
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; cumulativeTotal &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; nextValue
    }
    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; total
}

sumNumbersUsingReduce(numbers)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The &lt;code&gt;reduce&lt;/code&gt; function takes 2 parameters. The first is the starting value - in this case it is zero. The second paramter is a function (I am using a closure) this in turn takes 2 parameters and here is where it gets complicated. Inside the closure function, the 2 parameters are the current result and the next value from the loop. And what you return from this closure is going to be the new cumulative value which will either be fed back into the loop, or returned as the final result. The first time through the loop, the first parameter will be the initial value as set in the reduce function call.&lt;/p&gt;
&lt;p&gt;To see how this happens, here is a version sprinkled with &lt;code&gt;print&lt;/code&gt; statements showing what happens each time through the loop:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sumNumbersReduceDebug&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;_&lt;/span&gt; numbers: [Int]) -&amp;gt; Int {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; total = numbers.reduce(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;) { (cumulativeTotal, nextValue) &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt;
        print(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;cumulativeTotal = &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;\(&lt;/span&gt;cumulativeTotal&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;)
        print(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;nextValue = &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;\(&lt;/span&gt;nextValue&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;)
        print(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;about to return &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;\(&lt;/span&gt;cumulativeTotal&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt; + &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;\(&lt;/span&gt;nextValue&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt; = &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;\(&lt;/span&gt;cumulativeTotal &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; nextValue&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt; which will become the next culmulative or the final value&amp;#34;&lt;/span&gt;)

        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; cumulativeTotal &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; nextValue
    }
    print(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;final result = &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;\(&lt;/span&gt;total&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;)
    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; total
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; shortNumbers = [ &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;8&lt;/span&gt; ]

sumNumbersReduceDebug(shortNumbers)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This produces a log showing:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;cumulativeTotal = 0
nextValue = 5
about to return 0 + 5 = 5 which will become the next culmulative or the final value
cumulativeTotal = 5
nextValue = 3
about to return 5 + 3 = 8 which will become the next culmulative or the final value
cumulativeTotal = 8
nextValue = 8
about to return 8 + 8 = 16 which will become the next culmulative or the final value
final result = 16
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;using-functions-as-building-blocks&#34;&gt;Using functions as building blocks&lt;/h3&gt;
&lt;p&gt;This one is more a matter of style than of any particular programming technique. Basically, keep each function small and break your code into small chunks with obvious naming. This makes your code easier to read, test and debug and it beomes vastly more reusable.&lt;/p&gt;
&lt;p&gt;Consider this totally made-up function:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;configureDisplay&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; userId: String?) {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;guard&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; userId = userId &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {
        showLoginScreen()
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;
    }

    displayUserData(&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt;: userId)
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; userType = getPermissions(&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt;: userId)

    populateMenus(&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt;: userType)
    loadInitialData(&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt;: userId)

    playSound(.welcome)
}

configureDisplay(&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;abc123&amp;#34;&lt;/span&gt;)
configureDisplay(&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt;: &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Is it easy to read?
Can you work out what it does? Now imagine all that functionality in a single huge function - would that be as good to use?&lt;/p&gt;
&lt;p&gt;As a way of encouraging shorter functions, which leads inevitably to this sort of structured code, I strongly recommend using SwiftLint to check your code. I wrote a &lt;a href=&#34;https://troz.net/post/2018/swiftlint/&#34;&gt;post about this&lt;/a&gt; a while ago which you might find useful.&lt;/p&gt;
&lt;h4 id=&#34;naming&#34;&gt;Naming&lt;/h4&gt;
&lt;p&gt;The other key thing to mention and it is a point that Apple makes very strongly, is to name your functions and their parameters so as to make them as readable as possible from the calling site. You write a function once, but you most likely call it multiple times, so it is the calling site that needs to be really easy to read.&lt;/p&gt;
&lt;p&gt;Returning to the game example, here is a dummy function to show damage caused to a target:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;displayDamage&lt;/span&gt;(damage: Int, target: String) {}

displayDamage(damage: &lt;span style=&#34;color:#ae81ff&#34;&gt;31&lt;/span&gt;, target: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Ogre&amp;#34;&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;There is nothing really wrong with the function, but calling it is a bit clunky and doesn&amp;rsquo;t read well with the repeated use of the word &amp;lsquo;damage&amp;rsquo;.&lt;/p&gt;
&lt;p&gt;What about this version?&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;display&lt;/span&gt;(damage: Int, doneTo target: String) {}

display(damage: &lt;span style=&#34;color:#ae81ff&#34;&gt;42&lt;/span&gt;, doneTo: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Wolf&amp;#34;&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;There are no repeated words in the caller and by using two labels for the second parameter, the calling site can read almost like a sentence, but inside the function, &lt;code&gt;target&lt;/code&gt; is still a more logical name.&lt;/p&gt;
&lt;p&gt;A third alternative is to use an un-named parameter if the naming logic is implicit in the function name itself:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;displayDamage&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;_&lt;/span&gt; damage: Int, doneTo target: String) {}

displayDamage(&lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt;, doneTo: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Orc&amp;#34;&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;closures&#34;&gt;Closures&lt;/h2&gt;
&lt;p&gt;As promised above, a very quick explanation of closures, which really deserve their own post&amp;hellip;&lt;/p&gt;
&lt;p&gt;In Swift, as in many languages, functions can be passed as parameters to other functions. As an example, I have set up 2 functions to perform a simple calculation on a given integer:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;cube&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;_&lt;/span&gt; number: Int) -&amp;gt; Int {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; number &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; number &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; number
}
cube(&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;)

&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;square&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;_&lt;/span&gt; number: Int) -&amp;gt; Int {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; number &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; number
}
square(&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Now imagine that you wanted to create a more general function that could call either one of these functions with any number:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;doCalculation&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;_&lt;/span&gt; number: Int, calculation: (Int) -&amp;gt; Int) -&amp;gt; Int {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; calculation(number)
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;doCalculation&lt;/code&gt; takes 2 parameters. The first one is easy - it is just an integer. The second one is weird! For every parameter of a function, you have to supply the type of that parameter. Usually this is quite straight-forward: Int, String, MyCustomClass etc. But what is the &lt;code&gt;type&lt;/code&gt; of a function? Option-clicking on the word &lt;code&gt;cube&lt;/code&gt; in my function definition, I see this:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/FunctionType.png&#34; alt=&#34;Function type&#34;&gt;&lt;/p&gt;
&lt;p&gt;And ignoring the parameter labels, this basically provides the function type: Int inside parentheses for the input, then the arrow, then Int again for the return type. So the type definition for the &lt;code&gt;cube&lt;/code&gt; function is &lt;code&gt;(Int) -&amp;gt; Int&lt;/code&gt;. And when I define the type for the calculation parameter in the &lt;code&gt;doCalculation&lt;/code&gt; function, this is exactly what I put. The last part of the function definition is specifiying the overall return type as an Int.&lt;/p&gt;
&lt;p&gt;Using the &lt;code&gt;cube&lt;/code&gt; and &lt;code&gt;square&lt;/code&gt; functions inside &lt;code&gt;doCalculation&lt;/code&gt; works like this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;doCalculation(&lt;span style=&#34;color:#ae81ff&#34;&gt;7&lt;/span&gt;, calculation: square)
doCalculation(&lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;, calculation: cube)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;But what if I didn&amp;rsquo;t want to define all the functions I might call in advance? Then I can send the function body to the &lt;code&gt;doCalculation&lt;/code&gt; function instead of using a pre-built function. This way of using a function inside another function is referred to as a closure.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;doCalculation(&lt;span style=&#34;color:#ae81ff&#34;&gt;6&lt;/span&gt;, calculation: { number &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; number &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt;
})
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The &lt;code&gt;doCalculation&lt;/code&gt; function in unchanged, but instead of passing it a reference to a function, I am directly passing it the instructions it should use to get the result. As with any function, the instructions are contained within a set of curly braces. The input to this function is listed after the opening curly brace followed by the keyword &lt;code&gt;in&lt;/code&gt;. Then the function body does whatever it needs to and returns the result.&lt;/p&gt;
&lt;p&gt;You may have heard the term &lt;code&gt;trailing closure&lt;/code&gt;. This refers to a function where the last parameter is a function. If that function is called using a closure, there is a short-hand way of writing this, omitting the closure&amp;rsquo;s parameter name and moving the closing parenthesis to before the opening curly brace.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;doCalculation(&lt;span style=&#34;color:#ae81ff&#34;&gt;16&lt;/span&gt;) { number &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; number &lt;span style=&#34;color:#f92672&#34;&gt;%&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;With the &lt;code&gt;filter&lt;/code&gt;, &lt;code&gt;map&lt;/code&gt; and &lt;code&gt;reduce&lt;/code&gt; functions I showed above, this is the way their logic was supplied but here is how the filter example would look without using a closure:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;checkName&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;_&lt;/span&gt; name: String) -&amp;gt; Bool {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; name.count &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt;name.contains(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34; &amp;#34;&lt;/span&gt;)
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;checkPlayerNamesUsingFunction&lt;/span&gt;(names: [String]) -&amp;gt; [String] {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; validNames = names.filter(checkName)
    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; validNames
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; allNames = [ &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Woody&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Rex&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Slinky&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Buzz Lightyear&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Hamm&amp;#34;&lt;/span&gt; ]
&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; checkedNames = checkPlayerNamesUsingFunction(names: allNames)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Which methods you use are up to you - they all work. If you have a function that will be called in many different places, maybe it makes more sense to define it once and pass around a reference to that function. If not, a closure has the advantage that it keeps everything together. There is more to closures, particularly to do with variable scope, but I think this post has gone on long enough already&amp;hellip;. maybe next time.&lt;/p&gt;</description>
</item>
    
    <item>
<title>World Time in Words iOS Update</title>
<link>https://troz.net/post/2018/world-time-in-words-ios-update/</link>
<pubDate>Thu, 14 Jun 2018 10:41:46 +1000</pubDate>
      
      <guid>https://troz.net/post/2018/world-time-in-words-ios-update/</guid>
<description>&lt;p&gt;Its been a long time since the last update to Time In Words for iOS but after prompting by Apple (&lt;em&gt;update or we will remove it from the App Store&lt;/em&gt;), I finally did it. I was never really happy with the last design of Time in Words for iOS, particularly for the iPad, so this was a good opportunity to do a complete re-design, bringing the app more into alignment with its Mac counterpart. And it got a new name to match its new direction and is now called World Time in Words.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://itunes.apple.com/app/time-in-words/id498403851&#34;&gt;World Time in Words v 5.0&lt;/a&gt; is available from the App Store.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;In 2015, I released &lt;a href=&#34;https://troz.net/post/2015/time-in-words-4.0/&#34;&gt;Time In Words v 4.0&lt;/a&gt; for iOS. This was a big change as I had dropped the original QlockTwo concept and switched the emphasis to world time conversions that would be easy to read and understand. This bit worked out well, but the paging interface was not a great success - it made it too tedious to find the zone you were interested in.&lt;/p&gt;
&lt;p&gt;The &lt;a href=&#34;https://troz.net/time-in-words-for-mac/&#34;&gt;Mac version&lt;/a&gt; is a menu bar app that shows the selected time zones as separate menu items. iOS apps don&amp;rsquo;t have menus, but the closest thing to this is a table, so that is what I went with.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/WTiW-iOS.jpg&#34; alt=&#34;Basic display&#34;&gt;&lt;/p&gt;
&lt;p&gt;As before, you can add, remove or re-order the time zones and the top three zones can be shown in your Today widgets.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/WTiW-iOS-1.jpg&#34; alt=&#34;Edit zones&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/WTiW-iOS-4.jpg&#34; alt=&#34;Today widget&#34;&gt;&lt;/p&gt;
&lt;p&gt;But the feature that I use most in the Mac app is &amp;ldquo;What time will it be when&amp;hellip;&amp;rdquo;. In the iOS app, for reasons of space, the button is labelled &amp;ldquo;What time will it be?&amp;rdquo; but the functionality is the same: drag the slider to adjust the hour in your local time zone and see what that hour will be in your selected world zones. This is incredibly useful when you have family, friends and colleagues all over the world and really don&amp;rsquo;t want to call them at the wrong time of day.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/WTiW-iOS-2.jpg&#34; alt=&#34;What time will it be&#34;&gt;&lt;/p&gt;
&lt;p&gt;The iPad version of the app is identical at this stage, but I am thinking of adjusting the interface so as to take advantage of the increased real estate. If other work doesn&amp;rsquo;t get in the way, this may happen&amp;hellip;&lt;/p&gt;</description>
</item>
    
    <item>
<title>Privacy Policy</title>
<link>https://troz.net/post/2018/privacy-policy/</link>
<pubDate>Sat, 26 May 2018 09:51:56 +1000</pubDate>
      
      <guid>https://troz.net/post/2018/privacy-policy/</guid>
<description>&lt;p&gt;TL;DR: I don&amp;rsquo;t track you either on my web site or through my apps. If you want to contact me, please do so but I will not initiate any contacts.&lt;/p&gt;
&lt;p&gt;As anyone who gets email would realise by now, the EU has introduced a &lt;a href=&#34;https://www.eugdpr.org&#34;&gt;General Data Protection Regulation&lt;/a&gt; designed to enhance online privacy. You will have been getting lots of emails announcing new privacy policies or asking you to opt-in to existing arrangements.&lt;/p&gt;
&lt;p&gt;So here is my version of those emails (which you will not get by email because I do not store any user data):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;None of my apps store data off your device.&lt;/li&gt;
&lt;li&gt;I do not have any user data except for data specifically sent to me via web forms, direct email or in-app email.&lt;/li&gt;
&lt;li&gt;If you have signed up to beta test one of my apps, you did give me your email address. No tests are currently on-going, but please contact me if you would rather I removed you from any future beta tests.&lt;/li&gt;
&lt;li&gt;My web sites are now totally free of trackers and analytics software.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Most of my apps have a &amp;ldquo;Contact the Developer&amp;rdquo; button that creates an email that I will answer. If you do not want me to have your name and email address, do not use these buttons.&lt;/p&gt;
&lt;p&gt;My web site has a &lt;a href=&#34;http://localhost:1313/contact/&#34;&gt;contact page&lt;/a&gt; - if you use it, I will see your name and email address and I will respond. Again, if you do not want me to have this data, do not use this page.&lt;/p&gt;
&lt;p&gt;Since I no longer have any analytics, I would really appreciate hearing if you find any of my posts useful or interesting.&lt;/p&gt;</description>
</item>
    
    <item>
<title>App Updates</title>
<link>https://troz.net/post/2018/app-updates/</link>
<pubDate>Sat, 26 May 2018 09:22:57 +1000</pubDate>
      
      <guid>https://troz.net/post/2018/app-updates/</guid>
<description>&lt;p&gt;Just a quick post to let you know about some recent app updates&amp;hellip;&lt;/p&gt;
&lt;h2 id=&#34;man-reader&#34;&gt;Man Reader&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;http://itunes.apple.com/app/man-reader/id522583774?mt=12&#34;&gt;Man Reader v 1.10&lt;/a&gt; was released on 11 May 2018.&lt;/p&gt;
&lt;p&gt;I had to update &lt;a href=&#34;https://troz.net/manreader/&#34;&gt;Man Reader&lt;/a&gt; in November 2017 because of a really strange &amp;ldquo;feature&amp;rdquo; that arrived with macOS High Sierra. Man Reader displays the man pages as HTML which allows the tabs and internal links to work using anchor tags. These had worked for years, but under High Sierra, they just stopped working.&lt;/p&gt;
&lt;p&gt;I eventually discovered that it was because I was loading the text directly into the WebView using:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-objectivec&#34; data-lang=&#34;objectivec&#34;&gt;[self.web.mainFrame loadHTMLString:manText baseURL:nil];
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;With no baseURL, the anchor links were all defaulting to &lt;code&gt;about:blank&lt;/code&gt; and going nowhere. The solution was to save the text to a temporary file and then load using:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-objectivec&#34; data-lang=&#34;objectivec&#34;&gt;NSURLRequest &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;request &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [NSURLRequest requestWithURL: tempFile];
[self.web.mainFrame loadRequest: request];
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Needless to say, this took me ages to work out, including a lengthy excursion into using &lt;code&gt;WKWebView&lt;/code&gt; to see if the more modern web view would solve the problem.&lt;/p&gt;
&lt;p&gt;The second update (May 2018) was in response to a crash report from a user. I had great difficulty tracking this one down and even now, I cannot see how it can have happened, but it was in relation to the utility apps that are displayed in the toolbar.&lt;/p&gt;
&lt;p&gt;For each app, Man Reader checks to see if the app bundle exists, then it checks for a bundle identifier. It appears that this can come back as nil which I had not realised. And trying to insert an item with a identifier of &lt;code&gt;nil&lt;/code&gt; into the toolbar caused a crash.&lt;/p&gt;
&lt;p&gt;As you can see from the code, ManReader is written in Objective-C. Going back to Objective-C from Swift is painful! And I know that this crash could not have happened if the app had been written in Swift as the identifier would have been an optional and I would have been forced to check that it was not nil before using.&lt;/p&gt;
&lt;p&gt;On the plus side, Objective-C apps are tiny in comparison to Swift apps. And the Mac App Store review process set a new record for me. I submitted the app at 10:58 am and it was on sale at 12:03 pm the same day - 66 minutes from start to finish.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;sequenza-vii&#34;&gt;Sequenza VII&lt;/h2&gt;
&lt;p&gt;The other app that I updated recently is &lt;a href=&#34;https://itunes.apple.com/us/app/sequenza-vii/id730234638?mt=8&amp;amp;uo=4&#34;&gt;Sequenza VII&lt;/a&gt;. Version 1.2 was released on 23 April 2018.&lt;/p&gt;
&lt;p&gt;This is an app with a very limited audience - specifically oboe players who want to learn to play Berio&amp;rsquo;s weird music. However Apple sent me a notice saying that as it hadn&amp;rsquo;t been updated for ages, it would be removed from the store within 30 days unless I did something.&lt;/p&gt;
&lt;p&gt;Updating it to use the iPhone X display was surprisingly difficult. I set the minimum system version to 11.0 and changed the storyboards to use the latest Xcode but the horns on either side of the notch were still being left blank. In the end, the trick I found was to create a new Launch storyboard - that seemed to fool the system into re-considering all the layouts.&lt;/p&gt;</description>
</item>
    
    <item>
<title>Man Reader</title>
<link>https://troz.net/manreader/</link>
<pubDate>Fri, 11 May 2018 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/manreader/</guid>
<description>&lt;p&gt;Man Reader is a utility app for reading macOS&amp;rsquo;s man pages. Man Reader allows
quick, convenient and easy access to the man pages on your system, useful for
programmers, system administrators and tweakers.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://troz.net/images/MR_Start.png&#34;&gt;&lt;img src=&#34;https://troz.net/images/MR_Start_small.png&#34; alt=&#34;MR&#34; title=&#34;Man Reader&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://itunes.apple.com/app/man-reader/id522583774?mt=12&#34;&gt;Buy Man Reader from the Mac App Store&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Man pages are available for the Unix commands used mostly in Terminal or when
shell scripting. These man pages are normally displayed in Terminal using the
&amp;ldquo;man&amp;rdquo; command e.g. &amp;ldquo;man man&amp;rdquo; gives you the man page for the man command.&lt;/p&gt;
&lt;p&gt;However there are problems with this: the man page is displayed to you in your
Terminal window page by page and when you have got to the bottom, you have to
know to press &amp;lsquo;q&amp;rsquo; to get out of the man page display, at which point it
disappears completely. Hope you have a good memory!&lt;/p&gt;
&lt;p&gt;There are various tricks to get around this: opening it in a separate window,
piping it to Preview as a PDF, listing it as a single page etc, but none of
these are really convenient, which is why I wrote Man Reader. Basically, I
reckon that if I want a utility, then there must be other people who would want
the same thing.&lt;/p&gt;
&lt;p&gt;Man Reader assembles a list of the commands with available man pages on your
system - this will vary according to what developer tools you have installed.
These commands are listed for you and you can click on any one to display the
man page for that command.&lt;/p&gt;
&lt;h2 id=&#34;man-reader-features&#34;&gt;Man Reader Features:&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;List of all available man pages on your system.&lt;/li&gt;
&lt;li&gt;Show only a section of the pages.&lt;/li&gt;
&lt;li&gt;Search for a man page by name.&lt;/li&gt;
&lt;li&gt;Display man page in text or HTML (different pages look best in different
formats).&lt;/li&gt;
&lt;li&gt;Step back &amp;amp; forward through recently viewed man pages.&lt;/li&gt;
&lt;li&gt;Live links to &amp;lsquo;See Also&amp;rsquo; entries.&lt;/li&gt;
&lt;li&gt;&amp;lsquo;Sticky notes&amp;rsquo; at the side to jump to sub-sections in a page.&lt;/li&gt;
&lt;li&gt;Choose a font and size for the display.&lt;/li&gt;
&lt;li&gt;Convenient buttons in the toolbar allow quick access to commonly used
utilities.&lt;/li&gt;
&lt;li&gt;Sand-boxed for OS X Lion &amp;amp; later.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h4 id=&#34;man-reader-version-18-changes-23-oct-2016&#34;&gt;Man Reader version 1.8 changes (23 Oct 2016):&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;More complete search for man pages, including in third-party IDEs.&lt;/li&gt;
&lt;li&gt;Fix for glitch when displaying previously selected page on launch.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;man-reader-version-17-changes-10-oct-2016&#34;&gt;Man Reader version 1.7 changes (10 Oct 2016):&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Updated for macOS Sierra.&lt;/li&gt;
&lt;li&gt;List of pages now uses alternating colors even if not using the defaults.&lt;/li&gt;
&lt;li&gt;Minimum supported system version raised to 10.11.&lt;/li&gt;
&lt;li&gt;Minor display glitches fixed.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;man-reader-version-16-changes-13-jul-2016&#34;&gt;Man Reader version 1.6 changes (13 Jul 2016):&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Much improved searching for available man pages, including permissions fix for
some pages.&lt;/li&gt;
&lt;li&gt;Fixed error with new search term being over-written.&lt;/li&gt;
&lt;li&gt;Sand-boxed version now works just as well as the non-sand-boxed so please
switch back to this version.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;man-reader-version-15-changes&#34;&gt;Man Reader version 1.5 changes:&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Much improved searching for available man pages.&lt;/li&gt;
&lt;li&gt;Sand-boxed version now works just as well as the non-sand-boxed.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;man-reader-version-14-changes&#34;&gt;Man Reader version 1.4 changes:&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Fix for plain text view not wrapping correctly for odd-sized fonts.&lt;/li&gt;
&lt;li&gt;Fix for HTML text view over-riding font colors that may be invisible.&lt;/li&gt;
&lt;li&gt;Search for missing entry (e.g. g++) no longer requires Enter or Return.&lt;/li&gt;
&lt;li&gt;Better automatic selection of matching entries while searching.&lt;/li&gt;
&lt;li&gt;Fix for animation warning message appearing in Console.&lt;/li&gt;
&lt;li&gt;Status display shows when man page list is being updated.&lt;/li&gt;
&lt;li&gt;Searching inside a page now allows a minimum of 2 characters (was 3), so flags
e.g. &amp;lsquo;-b&amp;rsquo; do not need to be escaped.&lt;/li&gt;
&lt;li&gt;Fixed path for Network Utility in tool bar (moved in OS X 10.9).&lt;/li&gt;
&lt;li&gt;More information available about the effects of sand-boxing for this app.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;man-reader-version-13-changes&#34;&gt;Man Reader version 1.3 changes:&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Better formatting of plain text to allow for HTML entities.&lt;/li&gt;
&lt;li&gt;Fix for font in some HTML pages getting bigger &amp;amp; bigger.&lt;/li&gt;
&lt;li&gt;Failed search for page will search for a matching man page anyway.&lt;/li&gt;
&lt;li&gt;Editable apps in toolbar (see Preferences &amp;amp; View menu).&lt;/li&gt;
&lt;li&gt;Fixed bug when setting custom colors for marker tabs.&lt;/li&gt;
&lt;li&gt;Changed shortcuts for Find (see Edit menu).&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;man-reader-version-12-changes&#34;&gt;Man Reader version 1.2 changes:&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Customizable colors for text, background, links, found text.&lt;/li&gt;
&lt;li&gt;Searching for text within pages marks all matches.&lt;/li&gt;
&lt;li&gt;Pages will adjust line width to suit window size, even in plain text mode.&lt;/li&gt;
&lt;li&gt;If a search only results in a single page, press Return to display it.&lt;/li&gt;
&lt;li&gt;More man pages should be located on your system.&lt;/li&gt;
&lt;li&gt;Fix for bug where app did not always remember full screen setting.&lt;/li&gt;
&lt;li&gt;Fix for bug where some pages were being added to the history list twice.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;man-reader-version-11-changes&#34;&gt;Man Reader version 1.1 changes:&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Search for text within a man page.&lt;/li&gt;
&lt;li&gt;Bookmark frequently visited pages.&lt;/li&gt;
&lt;li&gt;Search man page list using &amp;ldquo;Starts with&amp;rdquo; or &amp;ldquo;Contains&amp;rdquo;.&lt;/li&gt;
&lt;li&gt;Preferences for the marker tabs: choose a pre-made color set or design your
own.&lt;/li&gt;
&lt;li&gt;Full screen mode now supported.&lt;/li&gt;
&lt;li&gt;Custom toolbar configurations now saved &amp;amp; restored correctly.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;If you have any problems with Man Reader, any suggestions for future versions or
encounter any bugs, please &lt;a href=&#34;mailto:sarah@troz.net?subject=Man%20Reader&#34;&gt;contact me&lt;/a&gt;.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Berio&#39;s Sequenza VII</title>
<link>https://troz.net/berio/</link>
<pubDate>Mon, 23 Apr 2018 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/berio/</guid>
<description>&lt;p&gt;&lt;!-- raw HTML omitted --&gt;Luciano
Berio&lt;!-- raw HTML omitted --&gt; wrote a series of Sequenzas for various instruments with Sequenza VII
being the one for oboe.&lt;br&gt;
&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;p&gt;Preparing this work creates some unique problems for the oboist as Berio did not
adhere to any time signature that could be indicated by a metronome. Instead,
each line consists of
&lt;!-- raw HTML omitted --&gt;13
bars (measures) with each bar&amp;rsquo;s length specified in exact seconds&lt;!-- raw HTML omitted --&gt;.&lt;/p&gt;
&lt;p&gt;When my son (an oboist currently studying in Melbourne, Australia) started
trying to learn this piece, it occurred to him that having an iOS app developer
in the family could be of some assistance. So with instructions from him and
with suggestions from other oboists, I have developed the
&lt;!-- raw HTML omitted --&gt;Berio
Sequenza VII app for iPhone or iPod Touch&lt;!-- raw HTML omitted --&gt;.&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;p&gt;With the default settings it will count the bar lengths, using metronome-like
sounds to mark the starts of bars and lines. The player who needs to practice a
specific bar can easily set the app to start at that bar and even to repeat that
bar length continuously.&lt;/p&gt;
&lt;p&gt;Tapping the &amp;ldquo;i&amp;rdquo; button at the bottom right of the screen takes you to the more
advanced options.&lt;/p&gt;
&lt;p&gt;The &amp;ldquo;Settings&amp;rdquo; section deals primarily with the B4 drone that is supposed to
accompany the performance of this piece. While in an actual performance, the
dynamics of this drone would vary, for this practice app it remains at a
constant volume as specified by you. The volume can be set to a percentage of
the iPhone&amp;rsquo;s current volume setting. If it is still too quiet, plug your iPhone
into a speaker or use some sort of physical amplification. If you prefer to play
with an A other than 440 Hz, that can be adjusted. And finally, the wave form
used to generate this drone sound can be switched between a sine wave or a
triangle wave. Disclaimer: excessive use of this drone may cause loss of
friends!&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;p&gt;The Settings page also includes an option to slow down the times for practice.
At 100% speed, bar 1 on each line will last for 3 seconds. The speed can be
reduced to allow each bar to last longer, for use during the learning process.&lt;/p&gt;
&lt;p&gt;The &amp;ldquo;Bars &amp;amp; Sounds&amp;rdquo; section allows you to customise the various options marking
the start of each new bar. You can specify the number of seconds &amp;amp; the sound
used to count you in after tapping the Start button. You can also select which
of the metronome sounds to use to mark the start of each bar, making the first
bar of each line use a different sound if you prefer. Finally, in case you are
playing so loudly that you are unable to hear the iPhone, you can set the screen
to flash a different color at the start of each new bar.&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;p&gt;Jacqueline Leclair wrote a
&lt;!-- raw HTML omitted --&gt;supplementary
edition&lt;!-- raw HTML omitted --&gt; of this work in 2000 using traditional time signatures in a way that
almost exactly duplicates the original timings. This app is designed for use
with the original score using Berio&amp;rsquo;s real time bar lengths.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Consistent Swift Style</title>
<link>https://troz.net/post/2018/swiftlint/</link>
<pubDate>Sat, 31 Mar 2018 09:35:21 +1000</pubDate>
      
      <guid>https://troz.net/post/2018/swiftlint/</guid>
<description>&lt;ul&gt;
&lt;li&gt;Why is important to style your code?&lt;/li&gt;
&lt;li&gt;How do you decide on a style?&lt;/li&gt;
&lt;li&gt;Is there a way to enforce this style automatically?&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;what-is-style-in-swift&#34;&gt;What is style in Swift?&lt;/h2&gt;
&lt;p&gt;Style applies to writing in any programming language and refers to the way you structure your code.&lt;/p&gt;
&lt;p&gt;For example, how to you arrange braces?&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; theValue &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt; {
    &lt;span style=&#34;color:#75715e&#34;&gt;// do one thing&lt;/span&gt;
} &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {
    &lt;span style=&#34;color:#75715e&#34;&gt;// do the other thing&lt;/span&gt;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;or&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; theValue &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;
{
    &lt;span style=&#34;color:#75715e&#34;&gt;// do one thing&lt;/span&gt;
}
&lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt;
{
    &lt;span style=&#34;color:#75715e&#34;&gt;// do the other thing&lt;/span&gt;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;or anything in between?&lt;/p&gt;
&lt;p&gt;Do you use camelCase or snake_case?&lt;/p&gt;
&lt;p&gt;Do you always start class names with an uppercase letter?&lt;/p&gt;
&lt;p&gt;And of course there is the Great Debate: tabs or spaces? And how many?&lt;/p&gt;
&lt;h2 id=&#34;why-is-important-to-style-your-code&#34;&gt;Why is important to style your code?&lt;/h2&gt;
&lt;p&gt;You only write code once, but you &amp;amp; others will read it many times.&lt;/p&gt;
&lt;p&gt;As I tell students, in six months time some poor sucker is going to have to read this code, and worse still, that poor sucker might be you, so make it readable.&lt;/p&gt;
&lt;p&gt;There is a cognitive load involved in reading code but you can lighten that load by using consistent patterns that your brain can recognise quickly without having to re-analyse them each time.&lt;/p&gt;
&lt;h2 id=&#34;how-do-you-decide-on-a-style&#34;&gt;How do you decide on a style?&lt;/h2&gt;
&lt;p&gt;Do a search online for &lt;a href=&#34;https://encrypted.google.com/search?hl=en&amp;amp;q=Swift%20style%20guide&#34;&gt;Swift style guide&lt;/a&gt; and you will get numerous results, although you do have to dodge the sites dedicated to Taylor Swift&amp;rsquo;s dress sense! I like the &lt;a href=&#34;https://github.com/raywenderlich/swift-style-guide&#34;&gt;Ray Wenderlich guide&lt;/a&gt; although its emphasis is on styles that read well in print and in web pages. The &lt;a href=&#34;https://github.com/linkedin/swift-style-guide&#34;&gt;LinkedIn guide&lt;/a&gt; is also good. &lt;a href=&#34;https://github.com/github/swift-style-guide&#34;&gt;GitHub&lt;/a&gt; also has a style guide but it hasn&amp;rsquo;t been updated recently. However it contains some good general advice.&lt;/p&gt;
&lt;p&gt;But in the end, you have to decide your own style. The important thing then is to be consistent. I don&amp;rsquo;t care whether you use camelCase or snake_case, tabs or spaces, but if you use a mixture your code will be harder to read, so pick a style and stick to it.&lt;/p&gt;
&lt;h2 id=&#34;is-there-a-way-to-enforce-this-style-automatically&#34;&gt;Is there a way to enforce this style automatically?&lt;/h2&gt;
&lt;p&gt;This is where &lt;a href=&#34;https://github.com/realm/SwiftLint&#34;&gt;SwiftLint&lt;/a&gt; comes into the picture. SwiftLint is a tool that can check your code and look for style violations. While it comes with a default set of rules, you can configure these rules to suit your own style.&lt;/p&gt;
&lt;h3 id=&#34;installing-and-running-swiftlint&#34;&gt;Installing and Running SwiftLint&lt;/h3&gt;
&lt;p&gt;To install SwiftLint, I recommend using &lt;a href=&#34;https://brew.sh&#34;&gt;HomeBrew&lt;/a&gt;. Once you have HomeBrew installed, open Terminal and type &lt;code&gt;brew install swiftlint&lt;/code&gt;. You can update it any time using &lt;code&gt;brew upgrade swiftlint&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;You can run SwiftLint directly from the Terminal. &lt;code&gt;cd&lt;/code&gt; to the folder containing your Xcode project and type &lt;code&gt;swiftlint&lt;/code&gt;. For a brand new iOS project, you will probably get a result similar to this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;Linting Swift files in current working directory
Linting &amp;#39;ViewController.swift&amp;#39; (1/2)
Linting &amp;#39;AppDelegate.swift&amp;#39; (2/2)
ViewController.swift:23: warning: Vertical Whitespace Violation: Limit vertical whitespace to a single empty line. Currently 2. (vertical_whitespace)
ViewController.swift:25: warning: Trailing Newline Violation: Files should have a single trailing newline. (trailing_newline)
AppDelegate.swift:16: warning: Vertical Whitespace Violation: Limit vertical whitespace to a single empty line. Currently 2. (vertical_whitespace)
AppDelegate.swift:44: warning: Vertical Whitespace Violation: Limit vertical whitespace to a single empty line. Currently 2. (vertical_whitespace)
AppDelegate.swift:46: warning: Trailing Newline Violation: Files should have a single trailing newline. (trailing_newline)
AppDelegate.swift:17: warning: Line Length Violation: Line should be 120 characters or less: currently 144 characters (line_length)
AppDelegate.swift:23: error: Line Length Violation: Line should be 120 characters or less: currently 285 characters (line_length)
AppDelegate.swift:24: warning: Line Length Violation: Line should be 120 characters or less: currently 159 characters (line_length)
AppDelegate.swift:28: error: Line Length Violation: Line should be 120 characters or less: currently 218 characters (line_length)
AppDelegate.swift:29: warning: Line Length Violation: Line should be 120 characters or less: currently 141 characters (line_length)
AppDelegate.swift:33: warning: Line Length Violation: Line should be 120 characters or less: currently 155 characters (line_length)
AppDelegate.swift:37: warning: Line Length Violation: Line should be 120 characters or less: currently 194 characters (line_length)
AppDelegate.swift:41: warning: Line Length Violation: Line should be 120 characters or less: currently 128 characters (line_length)
Done linting! Found 13 violations, 2 serious in 2 files.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;em&gt;I have removed the full path that will be listed for each file just to make this fit better.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;These reports show the file and line number, whether this is an error or a warning, a description of the error and the name of the SwiftLint rule that caused the warning or error.&lt;/p&gt;
&lt;p&gt;You could now go through and fix each of these but there are 2 solutions to make things easier:
Try entering this in the Terminal window: &lt;code&gt;swiftlint autocorrect&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;Correcting Swift files in current working directory
Correcting &amp;#39;ViewController.swift&amp;#39; (1/2)
Correcting &amp;#39;AppDelegate.swift&amp;#39; (2/2)
ViewController.swift:22:1 Corrected Vertical Whitespace
ViewController.swift:23 Corrected Trailing Newline
AppDelegate.swift:15:1 Corrected Vertical Whitespace
AppDelegate.swift:43:1 Corrected Vertical Whitespace
AppDelegate.swift:43 Corrected Trailing Newline
Done correcting 2 files!
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;And now if you run &lt;code&gt;swiftlint&lt;/code&gt; again you will only get &lt;code&gt;Done linting! Found 8 violations, 2 serious in 2 files.&lt;/code&gt; and all the remaining issues are for &lt;code&gt;Line Length Violation&lt;/code&gt; This shows that autocorrect cannot fix everything and while it is good on spacing, it has trouble with more complex issues. But it is still worth doing as it can do a lot of the tedious fixes that creep into Xcode projects.&lt;/p&gt;
&lt;h3 id=&#34;incorporating-swiftlint-into-xcode&#34;&gt;Incorporating SwiftLint into Xcode&lt;/h3&gt;
&lt;p&gt;The next thing to do to make your life easier is to add SwiftLint to your Xcode project so that it can run automatically whenever you do a build.&lt;/p&gt;
&lt;p&gt;Open your project in Xcode and select the project itself at the top of the Navigator on the left. Select the target for the main app and click the Build Phases tab along the top. Click the + button at the top left of the existing build phases and choose &amp;lsquo;New Run Script Phase&amp;rsquo;. Expand the newly added phase and paste in the following script:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; which swiftlint &amp;gt;/dev/null; &lt;span style=&#34;color:#66d9ef&#34;&gt;then&lt;/span&gt;
  swiftlint autocorrect
  swiftlint
&lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt;
  echo &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;warning: SwiftLint not installed, download from https://github.com/realm/SwiftLint&amp;#34;&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;fi&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Your Xcode window should look something like this:&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://troz.net/images/SwiftLineRunScript.png&#34;&gt;&lt;img src=&#34;https://troz.net/images/SwiftLineRunScript.png&#34; alt=&#34;SwiftLint Run Script phase&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;If you think this looks like it is running SwiftLint twice, you are correct. The first time through it corrects what it can and the second pass reports all remaining issues. This is still faster than manually correcting the easy stuff. So now you will see any violations in the Xcode issue navigator when you do a build and you can click the entry to go directly to the code.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/IssuesNavigator.png&#34; alt=&#34;SwiftLint errors &amp; warnings in Xcode issues navigator&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;configuring-swiftlint&#34;&gt;Configuring SwiftLint&lt;/h3&gt;
&lt;p&gt;Now you are all set to SwiftLint all your code, but how do you decide what styles SwiftLint should enforce? Go back to Terminal, make the Terminal window as wide as possible and run &lt;code&gt;swiftlint rules&lt;/code&gt; which will return a table like this (click to see full-sized image):&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://troz.net/images/swiftlint_rules.png&#34;&gt;&lt;img src=&#34;https://troz.net/images/swiftlint_rules.png&#34; alt=&#34;SwiftLint Rules&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;For details on what each rule does, check out the entries in &lt;a href=&#34;https://github.com/realm/SwiftLint/blob/master/Rules.md&#34;&gt;Rules.md&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;As an example, look at the rules for line_length:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;+------------------------------------------+--------+-------------+------------------------+-------------+---------------------+
| identifier                               | opt-in | correctable | enabled in your config | kind        | configuration       |
+------------------------------------------+--------+-------------+------------------------+-------------+---------------------+
| line_length                              | no     | no          | yes                    | metrics     | warning: 120, er... |
+------------------------------------------+--------+-------------+------------------------+-------------+---------------------+
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;And by making my Terminal window full width, I can see the configuration column contains &lt;code&gt;warning: 120, error: 200, ignores urls: false, ignores function declarations: false, ignores comments: false&lt;/code&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The rule name (identifier) is line_length - this is what appears in the issue navigator or Terminal.&lt;/li&gt;
&lt;li&gt;It is not an opt-in rule, meaning that it is enabled by default.&lt;/li&gt;
&lt;li&gt;It is not correctable by autocorrect.&lt;/li&gt;
&lt;li&gt;It is enabled in this configuration.&lt;/li&gt;
&lt;li&gt;And then comes the configuration:
&lt;ul&gt;
&lt;li&gt;a line of more than 120 characters will generate a warning&lt;/li&gt;
&lt;li&gt;a line with more than 200 characters will generate an error and stop the build&lt;/li&gt;
&lt;li&gt;this rule will not ignore URLs, function declarations or comments&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;To set your own configurations, you need to create a &lt;code&gt;.swiftlint.yml&lt;/code&gt; file in the same folder as your Xcode project. The leading period makes the file invisible, so you will need to create and edit it using Terminal.&lt;/p&gt;
&lt;p&gt;In the Terminal, &lt;code&gt;cd&lt;/code&gt; to the folder containing your Xcode project file and run &lt;code&gt;touch .swiftlint.yml&lt;/code&gt; to create the invisible file. You can edit the file in Terminal using &lt;code&gt;nano&lt;/code&gt;, &lt;code&gt;vim&lt;/code&gt; or whatever you prefer, but you can also open it in any text editor. I prefer to use Atom so I open the file by running this command: &lt;code&gt;atom .swiftlint.yml&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The SwiftLint ReadMe has a section about &lt;a href=&#34;https://github.com/realm/SwiftLint#configuration&#34;&gt;configuration&lt;/a&gt; which shows the format and the various general headings you can use, as well as how to configure an individual rule.&lt;/p&gt;
&lt;p&gt;Here is my .swiftlint.yml file:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-yml&#34; data-lang=&#34;yml&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;disabled_rules&lt;/span&gt;: &lt;span style=&#34;color:#75715e&#34;&gt;# rule identifiers to exclude from running&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;included&lt;/span&gt;: &lt;span style=&#34;color:#75715e&#34;&gt;# paths to include during linting. `--path` is ignored if present. takes precendence over `excluded`.&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;excluded&lt;/span&gt;: &lt;span style=&#34;color:#75715e&#34;&gt;# paths to ignore during linting. overridden by `included`.&lt;/span&gt;
  - &lt;span style=&#34;color:#ae81ff&#34;&gt;Carthage&lt;/span&gt;
  - &lt;span style=&#34;color:#ae81ff&#34;&gt;Pods&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;opt_in_rules&lt;/span&gt;:
  - &lt;span style=&#34;color:#ae81ff&#34;&gt;closure_end_indentation&lt;/span&gt;
  - &lt;span style=&#34;color:#ae81ff&#34;&gt;closure_spacing&lt;/span&gt;
  - &lt;span style=&#34;color:#ae81ff&#34;&gt;contains_over_first_not_nil&lt;/span&gt;
  - &lt;span style=&#34;color:#ae81ff&#34;&gt;empty_count&lt;/span&gt;
  - &lt;span style=&#34;color:#ae81ff&#34;&gt;explicit_init&lt;/span&gt;
  - &lt;span style=&#34;color:#ae81ff&#34;&gt;fatal_error_message&lt;/span&gt;
  - &lt;span style=&#34;color:#ae81ff&#34;&gt;force_unwrapping&lt;/span&gt;
  - &lt;span style=&#34;color:#ae81ff&#34;&gt;literal_expression_end_indentation&lt;/span&gt;
  - &lt;span style=&#34;color:#ae81ff&#34;&gt;multiline_arguments&lt;/span&gt;
  - &lt;span style=&#34;color:#ae81ff&#34;&gt;multiline_parameters&lt;/span&gt;
  - &lt;span style=&#34;color:#ae81ff&#34;&gt;operator_usage_whitespace&lt;/span&gt;
  - &lt;span style=&#34;color:#ae81ff&#34;&gt;overridden_super_call&lt;/span&gt;
  - &lt;span style=&#34;color:#ae81ff&#34;&gt;private_outlet&lt;/span&gt;
  - &lt;span style=&#34;color:#ae81ff&#34;&gt;prohibited_super_call&lt;/span&gt;
  - &lt;span style=&#34;color:#ae81ff&#34;&gt;trailing_closure&lt;/span&gt;
  - &lt;span style=&#34;color:#ae81ff&#34;&gt;unneeded_parentheses_in_closure_argument&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;function_body_length&lt;/span&gt;:
  - &lt;span style=&#34;color:#ae81ff&#34;&gt;60&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;# warning&lt;/span&gt;
  - &lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;# error&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;line_length&lt;/span&gt;:
  - &lt;span style=&#34;color:#ae81ff&#34;&gt;150&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;# warning&lt;/span&gt;
  - &lt;span style=&#34;color:#ae81ff&#34;&gt;200&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;# error&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;cyclomatic_complexity&lt;/span&gt;:
  &lt;span style=&#34;color:#f92672&#34;&gt;ignores_case_statements&lt;/span&gt;: &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;No rules are disabled by default.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;included&lt;/code&gt; is blank which means it checks every folder&amp;hellip;&lt;/li&gt;
&lt;li&gt;&amp;hellip; except for the ones listed in the &lt;code&gt;excluded&lt;/code&gt; section.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;opt-in-rules&lt;/code&gt;: I went through the list of rules with &lt;code&gt;opt-in&lt;/code&gt; equal to &lt;code&gt;yes&lt;/code&gt; and enabled all I thought useful.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;function_body_length&lt;/code&gt; - the default warning length is 40 but I allow myself 60 as that fits on my screen so I can always see the entire function without scrolling.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;line_length&lt;/code&gt; - with a bigger screen, I lengthen both the warning and error lengths.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;cyclomatic_complexity&lt;/code&gt; checks for functions that are getting so complex that the compiler might run into trouble. I have this on with the default warning &amp;amp; error limits, but I set it to ignore &lt;code&gt;case&lt;/code&gt; statements as they can often trigger this without really being too complex.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Now that my .swiftlint.yml file is edited, doing a build uses those settings and for a new iOS project, I am now down to 2 errors and 3 warnings, all due to long lines in AppDelegate.swift.&lt;/p&gt;
&lt;p&gt;The other main way to configure SwiftLint is by disabling specific rules in my code.&lt;/p&gt;
&lt;p&gt;As an example, I have an &lt;code&gt;enum&lt;/code&gt; for direction:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;enum&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Direction&lt;/span&gt; {
  &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; up, down, &lt;span style=&#34;color:#66d9ef&#34;&gt;left&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;right&lt;/span&gt;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;When I build this, SwiftLint gives a warning:
&lt;code&gt;Identifier Name Violation: Enum element name should be between 3 and 40 characters long: &#39;up&#39; (identifier_name)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;This tells me that &lt;code&gt;up&lt;/code&gt; is too short a word to use as an identifier according to the &lt;code&gt;identifier_name&lt;/code&gt; rule. In this case, &lt;code&gt;up&lt;/code&gt; is the obvious identifier to use, so I want SwiftLint to let it pass. But I don&amp;rsquo;t want to check my configuration file, because I want it to catch other short identifier names.&lt;/p&gt;
&lt;p&gt;The solution is to add this comment to my code, before the &lt;code&gt;case&lt;/code&gt; line:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;// swiftlint:disable next identifier_name&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;This tells SwiftLint to ignore the next &lt;code&gt;identifier_name&lt;/code&gt; warning or error it sees and now my code builds without error.&lt;/p&gt;
&lt;p&gt;Rules can also be disabled or enabled by file. Check out the &lt;a href=&#34;https://github.com/realm/SwiftLint#disable-rules-in-code&#34;&gt;Disable rules in code&lt;/a&gt; section of the SwiftLint ReadMe for more details.&lt;/p&gt;
&lt;h2 id=&#34;what-are-the-benefits&#34;&gt;What are the benefits?&lt;/h2&gt;
&lt;p&gt;For me, SwiftLint enforces a number of good habits:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Files are kept relatively short.&lt;/li&gt;
&lt;li&gt;Functions are always small enough to fit on a single screen.&lt;/li&gt;
&lt;li&gt;Variable names &amp;amp; function names cannot be too short and non-descriptive.&lt;/li&gt;
&lt;li&gt;Braces, indentation and white-space are always consistent.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;And sometimes the warnings make me think of a better way to do things.&lt;/p&gt;</description>
</item>
    
    <item>
<title>Icon Builder 5</title>
<link>https://troz.net/post/2018/icon-builder-5/</link>
<pubDate>Sun, 18 Feb 2018 10:19:18 +1000</pubDate>
      
      <guid>https://troz.net/post/2018/icon-builder-5/</guid>
<description>&lt;p&gt;&lt;a href=&#34;https://troz.net/icon-builder/&#34;&gt;Icon Builder 5.0&lt;/a&gt; is now available from the &lt;a href=&#34;http://itunes.apple.com/app/icon-builder/id552293482&#34;&gt;Mac App Store&lt;/a&gt;. This is a complete re-write for better compatibility with Apple&amp;rsquo;s latest icon requirements. Read on to see what I have fixed and how&amp;hellip;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;problems&#34;&gt;Problems&lt;/h2&gt;
&lt;p&gt;When I came to create a new iOS app recently, I found out that Icon Builder had fallen behind Apple&amp;rsquo;s requirements in three ways:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;The 1024 x 1024 marketing icon is now supposed to be inside the app&amp;rsquo;s icon set.&lt;/li&gt;
&lt;li&gt;Icon files must have their color profile set to sRGB (P3 is also valid for iOS apps).&lt;/li&gt;
&lt;li&gt;iOS icon files must have no transparent pixels and the alpha channel must be removed from the files.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;When I set to work fixing these problems I soon ran into issues with the existing version of Icon Builder which was created 6 years ago.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;It was written in Objective-C which I am increasingly finding difficult and un-safe to write.&lt;/li&gt;
&lt;li&gt;The app was written when I was very much a beginner in Mac apps and this is obvious from the code&amp;hellip;&lt;/li&gt;
&lt;li&gt;There was a lot of legacy code left over from previous changes and extensions.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;So I decided that the most interesting thing to do would be to start almost from scratch and re-write the app in Swift using better techniques.&lt;/p&gt;
&lt;h2 id=&#34;the-re-write&#34;&gt;The Re-write&lt;/h2&gt;
&lt;p&gt;Now instead of the Massive View Controller, I have a larger set of small files, each with their own responsibility. Enums and structs dictate the various requirements for the different devices or app types. Other structs deal with creating the images, the folder management and writing out the files. An NSImage extension handles the resizing and reformatting of the images. This is now an app that I would not be ashamed to show anyone, except perhaps for the need to add more unit tests.&lt;/p&gt;
&lt;h2 id=&#34;adding-a-color-profile&#34;&gt;Adding a color profile&lt;/h2&gt;
&lt;p&gt;But then we get to the new features needed. Adding the 1024x1024 icon to the app icon set was easy, especially after the re-factoring. But what about the color profile?&lt;/p&gt;
&lt;p&gt;This was not as easy as I expected - there is no built in command to apply a profile but here is the solution that I finally found:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;extension&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NSImage&lt;/span&gt; {

  &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;convertImageTo_sRGB&lt;/span&gt;() &lt;span style=&#34;color:#66d9ef&#34;&gt;throws&lt;/span&gt; -&amp;gt; Data {
      &lt;span style=&#34;color:#66d9ef&#34;&gt;guard&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; colorSpace = CGColorSpace(name: CGColorSpace.sRGB),
          &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; cgi = &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.cgImage(forProposedRect: &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;,
                                 context: &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;,
                                 hints: &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;) &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {
                                  &lt;span style=&#34;color:#66d9ef&#34;&gt;throw&lt;/span&gt; ImageError.cantMakeCgImage
      }

      &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; ci = CIImage(cgImage: cgi)

      &lt;span style=&#34;color:#66d9ef&#34;&gt;guard&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; pngData = CIContext().pngRepresentation(of: ci,
                                                        format: kCIFormatRGBA8,
                                                        colorSpace: colorSpace) &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {
          &lt;span style=&#34;color:#66d9ef&#34;&gt;throw&lt;/span&gt; ImageError.cantConvertToPng
      }
      &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; pngData
  }

}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;This takes the NSImage and converts it to a CGImage, first checking that the appropriate color space exists.&lt;/li&gt;
&lt;li&gt;Then it uses the Core Graphics CGImage to create a Core Image CIImage.&lt;/li&gt;
&lt;li&gt;There is a new API in macOS 10.13 to extract the png data from a CIImage while assigning a color profile.&lt;/li&gt;
&lt;li&gt;This Data can then be written directly to a file and there you have a PNG with an attached color profile.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;transparency&#34;&gt;Transparency&lt;/h2&gt;
&lt;p&gt;Now problems 1 &amp;amp; 2 have been solved. Problem 3 was the most difficult. It turned out to be a two-part problem because an image file can have no transparent pixels but still have an alpha channel in the file data.&lt;/p&gt;
&lt;p&gt;At first, I thought maybe I could just circumvent the whole problem by converting the images to JPEGs which have no transparency or alpha channel. Using the code above, I just changed it to getting the &lt;code&gt;jpegRepresentation&lt;/code&gt; instead and saving with a .jpg file extension.&lt;/p&gt;
&lt;p&gt;While this solved the alpha channel problem, the transparent parts of the icon just went black which was a not a good look.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/Transparent-Jpeg.png&#34; alt=&#34;Transparent image converted to JPEG&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;For anyone horrified at my use of force-unwrapping, I never do this in a production app but in a playground, it makes the code shorter and it doesn&amp;rsquo;t really matter if I get a crash there.&lt;/em&gt;&lt;/p&gt;
&lt;h3 id=&#34;converting-transparent-pixels-to-white&#34;&gt;Converting transparent pixels to white&lt;/h3&gt;
&lt;p&gt;So the first step must be to set the transparent parts of the image to another color. Searching for solutions online, most of the ones I came up with were very slow (processing each pixel) or so complicated that I didn&amp;rsquo;t understand them, and I hate just copy-pasting code that I don&amp;rsquo;t understand at all.&lt;/p&gt;
&lt;p&gt;But eventually I found something that I morphed into this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;extension&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NSImage&lt;/span&gt; {

    &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;makeAlphaWhite&lt;/span&gt;() -&amp;gt; NSImage {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;guard&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; imageData = &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.tiffRepresentation,
            &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; imageRep = NSBitmapImageRep(data: imageData),
            &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; jpegData = imageRep.representation(using: .jpeg, properties: [
                NSBitmapImageRep.PropertyKey.compressionFactor: NSNumber(value: &lt;span style=&#34;color:#ae81ff&#34;&gt;1.0&lt;/span&gt;)
                ]),
            &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; jpegImage = NSImage(data: jpegData) &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {
                &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; image
        }
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; jpegImage
    }

}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;It used basically the same trick of converting the image into a JPEG but doing it this way via &lt;code&gt;NSBitmapImageRep&lt;/code&gt; turned the transparent pixels white instead of black. And as you can see, this gave a much better looking image:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/MakeAlphaWhite.png&#34; alt=&#34;Transparent portions converted to white&#34;&gt;&lt;/p&gt;
&lt;p&gt;Now I was able to continue with my plans to have JPEGs rule the world! This worked really well in my early tests but then I came to try a Stickers app and the icons didn’t work. I couldn&amp;rsquo;t even drag them in manually! Back to the Apple docs and I see that icons must be PNGs.&lt;/p&gt;
&lt;p&gt;When I changed the transparent pixels to white, added the color space and then saved the PNG data, I got an image that looked correct but the file still contained an alpha channel. So I had to come up with a method that re-wrote the PNG data in such a way that it never contained any alpha data at all.&lt;/p&gt;
&lt;h3 id=&#34;removing-the-alpha-channel&#34;&gt;Removing the alpha channel&lt;/h3&gt;
&lt;p&gt;Graphics experts are probably groaning aloud by now, but I did eventually arrive at a solution, however hacky:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;extension&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NSImage&lt;/span&gt; {

    &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;convertImageTo_sRGB_noAlpha&lt;/span&gt;() &lt;span style=&#34;color:#66d9ef&#34;&gt;throws&lt;/span&gt; -&amp;gt; Data {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;guard&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; colorSpace = CGColorSpace(name: CGColorSpace.sRGB),
            &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; cgi = &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.cgImage(forProposedRect: &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;,
                                   context: &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;,
                                   hints: &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;) &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {
                                    &lt;span style=&#34;color:#66d9ef&#34;&gt;throw&lt;/span&gt; ImageError.cantMakeCgImage
        }

        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; ci = CIImage(cgImage: cgi)
        &lt;span style=&#34;color:#66d9ef&#34;&gt;guard&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; jpgData = CIContext().jpegRepresentation(of: ci,
                                                           colorSpace: colorSpace) &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {
            &lt;span style=&#34;color:#66d9ef&#34;&gt;throw&lt;/span&gt; ImageError.cantConvertToJpg
        }
        &lt;span style=&#34;color:#66d9ef&#34;&gt;guard&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; jpegImage = NSImage(data: jpgData) &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {
            &lt;span style=&#34;color:#66d9ef&#34;&gt;throw&lt;/span&gt; ImageError.cantConvertToJpgImage
        }
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; pngData = &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt; jpegImage.convertImageTo_sRGB()
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; pngData
    }

}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;Take the image &lt;strong&gt;after&lt;/strong&gt; changing the transparent pixels to white.&lt;/li&gt;
&lt;li&gt;Convert it to JPEG data with the required color space.&lt;/li&gt;
&lt;li&gt;Convert the JPEG data back to an image - this will contain &lt;strong&gt;NO&lt;/strong&gt; alpha data.&lt;/li&gt;
&lt;li&gt;Use the original routine to convert this JPEG into PNG data with the correct color space.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Running this in the playground looks like this:
&lt;img src=&#34;https://troz.net/images/TransparentPng.png&#34; alt=&#34;Creating non-transparent PNG in playground&#34;&gt;&lt;/p&gt;
&lt;p&gt;And as you can see from the file info, it results in a file with the correctly assigned color profile and no alpha channel:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/FileInfo.png&#34; alt=&#34;Final result file info&#34;&gt;&lt;/p&gt;
&lt;p&gt;The double shuffle sounds time-consuming and in-efficient but it really doesn&amp;rsquo;t take long. In my tests, by far the longest part of creating an icon set is opening the file dialog.&lt;/p&gt;
&lt;h2 id=&#34;future-plans&#34;&gt;Future plans&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Add more unit tests.&lt;/li&gt;
&lt;li&gt;Work out how to replace the transparent pixels with a selected color.&lt;/li&gt;
&lt;li&gt;Offer better cropping and image positioning options.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;references&#34;&gt;References&lt;/h2&gt;
&lt;p&gt;For resizing and cropping images, I use &lt;a href=&#34;https://mattgemmell.com/imagecrop-source-code/&#34;&gt;Matt Gemmell&amp;rsquo;s NSImage+MGCropExtensions&lt;/a&gt; and for further reading, I recommend Apple&amp;rsquo;s Human Interface Guidelines concerning app icons for &lt;a href=&#34;https://developer.apple.com/ios/human-interface-guidelines/icons-and-images/app-icon/&#34;&gt;iOS&lt;/a&gt; and &lt;a href=&#34;https://developer.apple.com/macos/human-interface-guidelines/icons-and-images/app-icon/&#34;&gt;macOS&lt;/a&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Note: here is Australia we use the spelling &lt;strong&gt;colour&lt;/strong&gt; but for consistency with the code samples, I have used &lt;strong&gt;color&lt;/strong&gt; throughout the text.&lt;/p&gt;
&lt;/blockquote&gt;</description>
</item>
    
    <item>
<title>NCSS 2018</title>
<link>https://troz.net/ncss2018/</link>
<pubDate>Fri, 05 Jan 2018 11:33:35 +1000</pubDate>
      
      <guid>https://troz.net/ncss2018/</guid>
<description>&lt;p&gt;I gave a Masterclass on Swift at the NCSS Summer School 2018 in the University of Sydney on 9th January 2018. This post contains useful links for use in relation to the material covered during my class.&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;online-sandboxes&#34;&gt;Online Sandboxes&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://eval.weheartswift.com/eval/playground/swift-sandbox&#34;&gt;We ❤️ Swift Sandbox&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://swiftlang.ng.bluemix.net/#/repl&#34;&gt;IBM Swift Sandbox&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id=&#34;resources&#34;&gt;Resources&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://gist.github.com/trozware/bc582b9a49feb7bbd3adce8ea049c9d3&#34;&gt;Gist of Code Samples&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/trozware/ncss2018/blob/master/Presentation.pdf&#34;&gt;Slides from Presentation&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id=&#34;contact-details&#34;&gt;Contact Details&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Email: &lt;a href=&#34;mailto:sarah@troz.net?subject=NCSS%202018&#34;&gt;sarah@troz.net&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Twitter: &lt;a href=&#34;https://twitter.com/trozware&#34;&gt;@trozware&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id=&#34;useful-links&#34;&gt;Useful Links&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://itunes.apple.com/au/book/swift-programming-language/id881256329?mt=11&#34;&gt;The Swift Programming Language&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://swift.org&#34;&gt;Swift.org&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://www.raywenderlich.com/132258/top-5-ios-swift-newsletters&#34;&gt;Newsletters&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://www.raywenderlich.com/category/swift&#34;&gt;Tutorials&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;</description>
</item>
    
    <item>
<title>Apps</title>
<link>https://troz.net/apps/</link>
<pubDate>Fri, 22 Dec 2017 17:05:58 +1000</pubDate>
      
      <guid>https://troz.net/apps/</guid>
<description></description>
</item>
    
    <item>
<title>Mark Time</title>
<link>https://troz.net/post/2017/marktime/</link>
<pubDate>Tue, 12 Dec 2017 09:14:07 +1000</pubDate>
      
      <guid>https://troz.net/post/2017/marktime/</guid>
<description>&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;&lt;a href=&#34;https://itunes.apple.com/us/app/mark-time/id1305580742?mt=8&#34;&gt;Mark Time&lt;/a&gt; is an application for Celestial Navigation that solves the
problem of how to take an accurate time reading to go with each sextant
sighting. Here is how it was developed&amp;hellip;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;A day in the life of a software developer - &amp;ldquo;it would be great if there was an
app that did&amp;hellip;&amp;rdquo;&lt;/p&gt;
&lt;p&gt;One of the family is learning celestial navigation and was struggling with the
problem that you either need a partner or more than 2 hands. The key factor is
that you need to record the exact time at the moment when you take your
sighting. And this time has to be in UTC to make your subsequent calculations
work.&lt;/p&gt;
&lt;p&gt;Since this is a very simple app, I decided it would be fun to describe the
development process from first specifications to release in the App Store.&lt;/p&gt;
&lt;h3 id=&#34;the-basic-specs&#34;&gt;The Basic Specs&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;tap anywhere on the screen to record the time&lt;/li&gt;
&lt;li&gt;convert the time to Universal Time (UT)&lt;/li&gt;
&lt;li&gt;display that time in a specific format: DD:HH:MM:SS&lt;/li&gt;
&lt;li&gt;store the last 5 tap times&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A &lt;code&gt;UITapGestureRecognizer&lt;/code&gt; over the entire view solved the first requirement.
The native &lt;code&gt;Date&lt;/code&gt; object handles time zone conversions perfectly, and then it
was a matter of configuring a &lt;code&gt;DateFormatter&lt;/code&gt; with a custom format string to
provide the required date display.&lt;/p&gt;
&lt;p&gt;The last 5 times are stored in &lt;code&gt;UserDefaults&lt;/code&gt; and displayed in reverse order so
the most recent is always at the top.&lt;/p&gt;
&lt;h3 id=&#34;ui-considerations&#34;&gt;UI considerations&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;colour scheme must work in bright sunlight&lt;/li&gt;
&lt;li&gt;text should use dynamic sizing so it works if people adjust the text size on
their iPhones&lt;/li&gt;
&lt;li&gt;the UI elements must be out of the way of the new iPhone X system gestures.&lt;/li&gt;
&lt;li&gt;while it will most likely be used on iPhones, allow for iPads as well&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I had done extensive tests of colour schemes when developing my golf scoring app
&lt;a href=&#34;https://troz.net/19th-hole/&#34;&gt;19th Hole&lt;/a&gt;, so I already had the answer to the colours question: dark grey
background with white text.&lt;/p&gt;
&lt;p&gt;Allowing for dynamic type should have been easy - choose a font style e.g. body,
headline, title 1 and set it to adjust automatically. But with a display that is
mainly numeric, the display looked terrible because the numbers in the default
San Francisco are non-proportional. So I switched to Helvetica Neue and watched
for dynamic font size changes manually.&lt;/p&gt;
&lt;p&gt;The iPhone X should be fine since I used the new safe area layout guides.&lt;/p&gt;
&lt;p&gt;For iPad, I didn&amp;rsquo;t make a lot of UI changes since I don&amp;rsquo;t expect it to be used
much, but the display is bigger and probably easier to read.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/MarkTime1.png&#34; alt=&#34;Mark Time&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;refinements&#34;&gt;Refinements&lt;/h3&gt;
&lt;p&gt;As always, once the first few iterations have been through the testing process,
there were a few things that needed changing and then feature creep set in&amp;hellip;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;change the date format to be more readable&lt;/li&gt;
&lt;li&gt;change the basic tap gesture so that it triggers on tap down, not tap up&lt;/li&gt;
&lt;li&gt;add a button to clear all the stored data&lt;/li&gt;
&lt;li&gt;display the current time in UTC and in the same format&lt;/li&gt;
&lt;li&gt;cheat mode - record latitude and longitude for each time so the calculations
can be checked&lt;/li&gt;
&lt;li&gt;change the format for showing the latitude and longitude&lt;/li&gt;
&lt;li&gt;sound &amp;amp; haptics to provide feedback&lt;/li&gt;
&lt;li&gt;settings&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The date format was DD:HH:MM:SS so for 12th December at 1:01:46 pm, this would
show 12:13:01:46 which we decided was a bit confusing. One tended to assume the
first section was actually the hours. Under the new scheme, that same date
displays as 12d 13h 01m 46.654s. The extra precision on the seconds was to show
that the time really was changing if you tapped multiple times quickly.&lt;/p&gt;
&lt;p&gt;To make the time record immediately, I removed the &lt;code&gt;UITapGestureRecognizer&lt;/code&gt; and
placed &lt;code&gt;UIButtons&lt;/code&gt; covering all the relevant active areas. They respond on Touch
Down for a much faster reaction.&lt;/p&gt;
&lt;p&gt;Usually, I make a separate View Controller for preferences. This time, because
the app needed access to the standard Settings app for Location services, I
decided to add the app&amp;rsquo;s preferences to the app&amp;rsquo;s page in the Settings app. This
worked really well, and made the app itself smaller and simpler.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/MarkTime3.png&#34; alt=&#34;Mark Time&#34;&gt;&lt;/p&gt;
&lt;p&gt;In cheat mode, the location is recorded at every tap and then the info button
beside each time shows the details. This needed to handle the permissions
required for accessing the user&amp;rsquo;s location. The latitude and longitude are shown
in decimal format and at first, I also showed them in DMS (degrees, minutes,
seconds) format. I found out that for navigation calculations, they prefer to
see degrees and decimal minutes, no seconds. And rather oddly, this is displayed
something like this: 153° 22&#39;.84 E&lt;/p&gt;
&lt;p&gt;Sounds and haptics were added, configurable through Settings. The sound was a
nice loud double-beep designed to be clearly audible to tell you when you had
recorded a time.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/MarkTime2.png&#34; alt=&#34;Mark Time&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;release&#34;&gt;Release&lt;/h3&gt;
&lt;p&gt;After numerous rounds of TestFlight, I was ready to release. The app was
submitted to iTunes Connect and ready for review on Dec 9, 2017 at 7:36 PM. It
moved into review on Dec 11, 2017 at 8:07 AM and was ready for sale on Dec 11,
2017 at 10:19 AM. So less than 39 hours from start to finish of the review
process for a new app - things have certainly changed!&lt;/p&gt;
&lt;p&gt;The app is free - you can get it from the &lt;a href=&#34;https://itunes.apple.com/us/app/mark-time/id1305580742?mt=8&#34;&gt;iTunes App Store&lt;/a&gt;.&lt;/p&gt;</description>
</item>
    
    <item>
<title>Moving to Hugo</title>
<link>https://troz.net/post/2017/moving-to-hugo/</link>
<pubDate>Wed, 29 Nov 2017 17:42:57 +1000</pubDate>
      
      <guid>https://troz.net/post/2017/moving-to-hugo/</guid>
<description>&lt;p&gt;Yesterday, I came to update my blog: I had a new post in draft form and I wanted
to update the Swift code to version 4. However installing High Sierra had
removed &lt;a href=&#34;https://jekyllrb.com&#34; title=&#34;Jekyll&#34;&gt;Jekyll&lt;/a&gt; which is the site generator that I had been using. I
re-installed Jekyll but found that it had been updated from version 2 to version
3.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;jekyll-problems&#34;&gt;Jekyll Problems&lt;/h2&gt;
&lt;p&gt;Then my problems started: missing dependencies due to the basic Jekyll install
no longer including certain features, and then syntax errors due to changes in
the way things are done, particularly to do with pagination.&lt;/p&gt;
&lt;p&gt;I tried to fix this myself, then thought that maybe the theme I was using had
already solved these issues so I tried re-installing that. It wanted to add
about 25 more gems and then failed to install - sigh - spend some time rolling
that back&amp;hellip;&lt;/p&gt;
&lt;p&gt;At this point I decided that if Jekyll was going to cause me a lot of trouble,
it might be worth looking at an alternative.&lt;/p&gt;
&lt;p&gt;My main criteria were the ability to import my Jekyll site and the ability to
host on &lt;a href=&#34;https://pages.github.com/&#34; title=&#34;GitHub Pages&#34;&gt;GitHub Pages&lt;/a&gt;. After checking out the options, I decided to have a
look at &lt;a href=&#34;https://gohugo.io&#34; title=&#34;Hugo&#34;&gt;Hugo&lt;/a&gt;.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;moving-to-hugo&#34;&gt;Moving to Hugo&lt;/h2&gt;
&lt;p&gt;One of the most lauded features of Hugo is speed. I had found with Jekyll that
when I saved an edited page, it took about 5 seconds before the edits could be
reloaded into the browser. Hugo is supposedly fast and does auto reloads.&lt;/p&gt;
&lt;p&gt;Following the &lt;a href=&#34;https://gohugo.io/getting-started/quick-start/&#34; title=&#34;Hugo Quick Start&#34;&gt;Quick Start&lt;/a&gt; guide, I installed Hugo. Importing my Jekyll site
worked easily and so fast I wasn&amp;rsquo;t sure anything had happened, transferring my
posts to &lt;code&gt;contents/posts&lt;/code&gt; and my other files (status pages, images etc.) to
&lt;code&gt;static&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Then the main exercise appeared to be choosing a theme which would provide not
only the visuals but the capabilities of the site.&lt;/p&gt;
&lt;p&gt;So I drew up a list of demands for any theme I chose:&lt;/p&gt;
&lt;h3 id=&#34;must-have-features&#34;&gt;Must Have Features&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Responsive&lt;/li&gt;
&lt;li&gt;Blog style:
&lt;ul&gt;
&lt;li&gt;front page with recent posts&lt;/li&gt;
&lt;li&gt;tags&lt;/li&gt;
&lt;li&gt;archive page&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Written using Markdown&lt;/li&gt;
&lt;li&gt;Static pages for apps listing, about, contact etc.&lt;/li&gt;
&lt;li&gt;Syntax highlighting&lt;/li&gt;
&lt;li&gt;Social links&lt;/li&gt;
&lt;li&gt;Google Analytics&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;would-be-nice-features&#34;&gt;Would Be Nice Features&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Disqus commenting&lt;/li&gt;
&lt;li&gt;Twitter cards&lt;/li&gt;
&lt;li&gt;JSON Feed&lt;/li&gt;
&lt;li&gt;Searching within the site&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The Hugo themes page &lt;a href=&#34;https://themes.gohugo.io&#34;&gt;https://themes.gohugo.io&lt;/a&gt; has themes listed by capabilities,
but no way that I could see to combine a selection of capabilities.&lt;/p&gt;
&lt;p&gt;Some of the features like Google Analytics or Disqus comments, I could probably
add myself using templates from theme that did include them, if the template I
chose did not.&lt;/p&gt;
&lt;p&gt;Conveniently, nearly all these seem to come with an exampleSite folder that
contains the configuration info.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;configuring-a-theme&#34;&gt;Configuring a Theme&lt;/h2&gt;
&lt;p&gt;After testing out several alternatives, I decided to go with &lt;a href=&#34;https://github.com/olOwOlo/hugo-theme-even&#34; title=&#34;Even&#34;&gt;Even&lt;/a&gt; - at
least to start with. I installed the theme and copied the contents of the
example &lt;code&gt;config.toml&lt;/code&gt; to my own &lt;code&gt;config.toml&lt;/code&gt; file and started configuring.&lt;/p&gt;
&lt;p&gt;I wasn&amp;rsquo;t happy with some of the fonts, but soon worked out how to change the CSS
in the theme and then re-build it to apply the changes. And I changed the theme
colour from the default red to &amp;ldquo;Cobalt Blue&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;Most of the other changes were done using the &lt;code&gt;config.toml&lt;/code&gt; file. I was able to
set up menus, configure the social media links I wanted to show, set date
formats, set the number of items to show per page and so on.&lt;/p&gt;
&lt;p&gt;I had a couple of more static pages that I wanted to show, so I added their
Markdown files to the content folder.&lt;/p&gt;
&lt;p&gt;One nice feature which I had missed in Jekyll (or at least the way I had it set
up) was the ability to separate blog posts from more static web pages. Each of
my apps has an information/support page that does not accept comments and
doesn&amp;rsquo;t need to be listed in the Archives. By moving these Markdown files from
&lt;code&gt;contents/posts&lt;/code&gt; to &lt;code&gt;contents/pages&lt;/code&gt;, I was able to achieve this.&lt;/p&gt;
&lt;p&gt;Adding Google Analytics and Disqus commenting was as easy as entering my IDs in
the relevant places in the &lt;code&gt;config.toml&lt;/code&gt; file.&lt;/p&gt;
&lt;p&gt;I had to do some editing of my imported posts from Jekyll - mainly getting rid
of references to &lt;code&gt;{{ site.url }}&lt;/code&gt; so that images and internal links would work.
And sometimes I just needed to re-save a file to make Hugo re-evaluate it (there
is probably a command to force a complete re-build if I looked for it.)&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;working-out-the-structure&#34;&gt;Working out the Structure&lt;/h2&gt;
&lt;p&gt;One thing that I was puzzled by was what templates the various pages are
generated from.&lt;/p&gt;
&lt;p&gt;The main page is easy enough as the theme folder has a layouts folder with an
&lt;code&gt;index.html&lt;/code&gt; file containing the templating. When a post is displayed, that
looks like it comes from &lt;code&gt;layouts/posts/single.html&lt;/code&gt; while
&lt;code&gt;layouts/posts/summary.html&lt;/code&gt; contains the templating for each entry in the index
page.&lt;/p&gt;
&lt;p&gt;But clicking on the Archives link in the me takes me to &lt;a href=&#34;https://troz.net/post/&#34;&gt;https://troz.net/post/&lt;/a&gt;
and there is no &lt;code&gt;post.html&lt;/code&gt; file in layouts. There is a &lt;code&gt;post&lt;/code&gt; folder, but it
contains the &lt;code&gt;single.html&lt;/code&gt; &amp;amp; &lt;code&gt;summary.html&lt;/code&gt; files described already.&lt;/p&gt;
&lt;p&gt;Delving ever deeper, &lt;code&gt;layouts/_default/section.html&lt;/code&gt; appears to contains the
Archives page template. But how does that relate to the &lt;a href=&#34;https://troz.net/post/&#34;&gt;https://troz.net/post/&lt;/a&gt;
link? And the Tags template is in &lt;code&gt;layouts/_default/terms.html&lt;/code&gt; but appears in
&lt;a href=&#34;https://troz.net/tags/&#34;&gt;https://troz.net/tags/&lt;/a&gt;. Checking the Hugo documentation for creating a theme, I
find the information I need. Hugo has a selection of file paths that it checks
for such templates, and these file paths match some of those. So now I know
where to go to customise further.&lt;/p&gt;
&lt;p&gt;One feature that I really like about the Even theme is the ability to have a
table of contents displayed beside each blog post if your page is wide enough.
It takes the headers in the post and uses them to make the table. I may need to
add or edit the headers in some posts, but I really like this feature.&lt;/p&gt;
&lt;p&gt;And if you want a laugh, test out the 404 page - here is a &lt;a href=&#34;https://troz.net/bad-link/&#34; title=&#34;404&#34;&gt;bad link&lt;/a&gt; - which
generates a random text emoji each time!&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;publishing&#34;&gt;Publishing&lt;/h2&gt;
&lt;p&gt;I wanted to use my existing GitHub Pages setup, so I replaced the site files in
my local repository with the new Hugo site files. I generated the static site
files using &lt;code&gt;hugo&lt;/code&gt; in Terminal, then pushed the pages to GitHub. All I had to do
then was change the settings so that GitHub Pages knew my site was coming from
the &lt;code&gt;docs&lt;/code&gt; folder and I was live with the new site.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;final-thoughts&#34;&gt;Final Thoughts&lt;/h2&gt;
&lt;p&gt;So how am I going with my check list?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Responsive - ALMOST, not Hugo&amp;rsquo;s fault&lt;/li&gt;
&lt;li&gt;Blog style - YES&lt;/li&gt;
&lt;li&gt;Written using Markdown - YES&lt;/li&gt;
&lt;li&gt;Static pages for apps listing, about, contact etc. - YES&lt;/li&gt;
&lt;li&gt;Syntax highlighting - YES&lt;/li&gt;
&lt;li&gt;Social links - YES&lt;/li&gt;
&lt;li&gt;Google Analytics - YES&lt;/li&gt;
&lt;li&gt;Disqus commenting - YES&lt;/li&gt;
&lt;li&gt;Twitter cards - NO&lt;/li&gt;
&lt;li&gt;JSON Feed - NO&lt;/li&gt;
&lt;li&gt;Searching within the site - NO&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The Hugo generated pages are all responsive and look great on my iPhone, but my
old static page for listing my apps does not look good, so I need to re-design
that.&lt;/p&gt;
&lt;p&gt;Twitter cards - I have found some articles on how to set that up, so it is
possible, but I haven&amp;rsquo;t done it yet.&lt;/p&gt;
&lt;p&gt;JSON Feed is not working. There are themes that apparently have this, but I
haven&amp;rsquo;t yet worked out how to implement it - hopefully later.&lt;/p&gt;
&lt;p&gt;In-site search - this was something I was able to get in my old WordPress site,
but not in Jekyll. There are Hugo themes listed that support search, but they
seem to just give a link to Google or DuckDuckGo. Maybe this can be edited to
restrict it to the site, but I dislike using such searches, so I will not add a
search unless it works internally. One theme I found uses &lt;a href=&#34;https://www.algolia.com&#34; title=&#34;Algolia&#34;&gt;Algolia&lt;/a&gt; to search
the site, so I will investigate that.&lt;/p&gt;
&lt;p&gt;Overall, I am impressed. The transition was relatively easy, especially
considering that I didn&amp;rsquo;t take the time to learn anything about Hugo first, but
just blundered in and tried to work it out on the fly.&lt;/p&gt;
&lt;p&gt;The speed of generating pages and the live reload while developing make Hugo a
pleasure to work with. Now all I have to do is write some interesting posts&amp;hellip;&lt;/p&gt;
&lt;p&gt;And I want to tidy up the URLs, headers and tags for the older pages as well as
investigating Twitter cards, search &amp;amp; JSON Feed.&lt;/p&gt;</description>
</item>
    
    <item>
<title>Contact</title>
<link>https://troz.net/contact/</link>
<pubDate>Sun, 26 Nov 2017 11:22:18 +1000</pubDate>
      
      <guid>https://troz.net/contact/</guid>
<description></description>
</item>
    
    <item>
<title>JSON Parsing in Swift 4</title>
<link>https://troz.net/post/2017/json-parsing-in-swift-4/</link>
<pubDate>Sun, 18 Jun 2017 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2017/json-parsing-in-swift-4/</guid>
<description>&lt;p&gt;&lt;strong&gt;Updated:&lt;/strong&gt; 3rd September 2017.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Checked syntax using Xcode 9.0 beta 6.&lt;/li&gt;
&lt;li&gt;Added section on &lt;a href=&#34;#nulls&#34;&gt;allowing for nulls&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;Since &lt;strong&gt;JSON&lt;/strong&gt; has become the de facto standard for data transfers around the
internet, there has always been a lot of interest in Swift libraries to parse
JSON into Swift classes or structs. Searching for &amp;ldquo;swift json library&amp;rdquo; on
&lt;a href=&#34;https://github.com/search?q=swift+json+library&#34;&gt;GitHub&lt;/a&gt; discovers &lt;!-- raw HTML omitted --&gt;77&lt;!-- raw HTML omitted --&gt; 86 repositories. So why are there so many? And
what has Swift 4 done to &lt;em&gt;sherlock&lt;/em&gt; them all?&lt;/p&gt;
&lt;p&gt;The problem has always been converting loosely typed JSON to strictly typed
Swift which involves a lot of type casting, checking, optionals etc. Swift has
always provided access to the Objective-C methods for converting JSON to and
from NSData, NSDictionary and NSArray. (These are now called Data, Dictionary
and Array, but those labels are so universal, that I sometimes feel a more
specific nomenclature would be useful. Have you tried doing a search for
&amp;lsquo;Data&amp;rsquo;?)&lt;/p&gt;
&lt;p&gt;For sample data, I am using &lt;a href=&#34;https://jsonplaceholder.typicode.com/users&#34;&gt;https://jsonplaceholder.typicode.com/users&lt;/a&gt; which
returns 10 user objects in this format:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;{
  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;id&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,
  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Leanne Graham&amp;#34;&lt;/span&gt;,
  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;username&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Bret&amp;#34;&lt;/span&gt;,
  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;email&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Sincere@april.biz&amp;#34;&lt;/span&gt;,
  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;address&amp;#34;&lt;/span&gt;: {
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;street&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Kulas Light&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;suite&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Apt. 556&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;city&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Gwenborough&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;zipcode&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;92998-3874&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;geo&amp;#34;&lt;/span&gt;: {
      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;lat&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;-37.3159&amp;#34;&lt;/span&gt;,
      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;lng&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;81.1496&amp;#34;&lt;/span&gt;
    }
  },
  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;phone&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;1-770-736-8031 x56442&amp;#34;&lt;/span&gt;,
  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;website&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;hildegard.org&amp;#34;&lt;/span&gt;,
  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;company&amp;#34;&lt;/span&gt;: {
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Romaguera-Crona&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;catchPhrase&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Multi-layered client-server neural-net&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;bs&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;harness real-time e-markets&amp;#34;&lt;/span&gt;
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The goal will be to convert this to an instance of this matching Swift struct:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;User&lt;/span&gt; {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; id: Int
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; name: String
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; username: String
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; email: String
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; phone: String
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; website: String
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; address: Address
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; company: Company

    &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Address&lt;/span&gt; {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; street: String
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; suite: String
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; city: String
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; zipcode: String
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; geo: Coordinates

        &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Coordinates&lt;/span&gt; {
            &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; lat: Double
            &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; lng: Double
        }
    }

    &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Company&lt;/span&gt; {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; name: String
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; catchPhrase: String
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; bs: String
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The first thing to note is that the Swift struct (and its embedded structs) use
multiple different types: Int, String, Double, Address, Coordinates, Company.
The JSON data only has strings and numbers and even then, some of the numbers
are really strings - look at the lat &amp;amp; lng entries. So converting from JSON to a
struct and back again has always been problematic, but let&amp;rsquo;s give it a go using
built-in Swift 3 processing with no external libraries.&lt;/p&gt;
&lt;h2 id=&#34;decoding-in-swift-3&#34;&gt;Decoding in Swift 3&lt;/h2&gt;
&lt;p&gt;You can insert this into a playground or &lt;a href=&#34;https://github.com/trozware/json&#34;&gt;download my playground&lt;/a&gt; and check
out the Swift 3 JSON page:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Foundation&lt;/span&gt;

&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; sampleDataAddress = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://jsonplaceholder.typicode.com/users&amp;#34;&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; url = URL(string: sampleDataAddress)&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; jsonData = &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt;! Data(contentsOf: url)

&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;User&lt;/span&gt; {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; id: Int
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; name: String
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; username: String
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; email: String
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; phone: String
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; website: String
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; address: Address
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; company: Company

    &lt;span style=&#34;color:#66d9ef&#34;&gt;init&lt;/span&gt;?(dict: [String: Any]) {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;guard&lt;/span&gt;
            &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; id = dict[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;id&amp;#34;&lt;/span&gt;] &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt;? Int,
            &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; name = dict[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;] &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt;? String,
            &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; username = dict[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;username&amp;#34;&lt;/span&gt;] &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt;? String,
            &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; email = dict[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;email&amp;#34;&lt;/span&gt;] &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt;? String,
            &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; phone = dict[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;phone&amp;#34;&lt;/span&gt;] &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt;? String,
            &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; website = dict[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;website&amp;#34;&lt;/span&gt;] &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt;? String,
            &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; addressDict = dict[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;address&amp;#34;&lt;/span&gt;] &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt;? [String: Any],
            &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; address = Address(dict: addressDict),
            &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; companyDict = dict[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;company&amp;#34;&lt;/span&gt;] &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt;? [String: Any],
            &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; company = Company(dict: companyDict)
            &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {
                &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;
        }

        &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.id = id
        &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.name = name
        &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.username = username
        &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.email = email
        &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.phone = phone
        &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.website = website
        &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.address = address
        &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.company = company
    }

    &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Address&lt;/span&gt; {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; street: String
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; suite: String
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; city: String
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; zipcode: String
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; geo: Coordinates

        &lt;span style=&#34;color:#66d9ef&#34;&gt;init&lt;/span&gt;?(dict: [String: Any]) {
            &lt;span style=&#34;color:#66d9ef&#34;&gt;guard&lt;/span&gt;
                &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; street = dict[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;street&amp;#34;&lt;/span&gt;] &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt;? String,
                &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; suite = dict[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;suite&amp;#34;&lt;/span&gt;] &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt;? String,
                &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; city = dict[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;city&amp;#34;&lt;/span&gt;] &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt;? String,
                &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; zipcode = dict[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;zipcode&amp;#34;&lt;/span&gt;] &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt;? String,
                &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; geoDict = dict[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;geo&amp;#34;&lt;/span&gt;] &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt;? [String: Any],
                &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; geo = Coordinates(dict: geoDict) &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {
                    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;
            }

            &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.street = street
            &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.suite = suite
            &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.city = city
            &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.zipcode = zipcode
            &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.geo = geo
        }

        &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Coordinates&lt;/span&gt; {
            &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; lat: Double
            &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; lng: Double

            &lt;span style=&#34;color:#66d9ef&#34;&gt;init&lt;/span&gt;?(dict: [String: Any]) {
                &lt;span style=&#34;color:#66d9ef&#34;&gt;guard&lt;/span&gt;
                    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; latString = dict[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;lat&amp;#34;&lt;/span&gt;] &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt;? String,
                    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; lat = Double(latString),
                    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; lngString = dict[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;lng&amp;#34;&lt;/span&gt;] &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt;? String,
                    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; lng = Double(lngString) &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {
                        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;
                }
                &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.lat = lat
                &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.lng = lng
            }
        }
    }

    &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Company&lt;/span&gt; {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; name: String
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; catchPhrase: String
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; bs: String

        &lt;span style=&#34;color:#66d9ef&#34;&gt;init&lt;/span&gt;?(dict: [String: Any]) {
            &lt;span style=&#34;color:#66d9ef&#34;&gt;guard&lt;/span&gt;
                &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; name = dict[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;] &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt;? String,
                &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; catchPhrase = dict[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;catchPhrase&amp;#34;&lt;/span&gt;] &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt;? String,
                &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; bs = dict[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;bs&amp;#34;&lt;/span&gt;] &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt;? String &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {
                    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;
            }

            &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.name = name
            &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.catchPhrase = catchPhrase
            &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.bs = bs
        }
    }
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; json = &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt;? JSONSerialization.jsonObject(with: jsonData, options: []) {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; jsonArray = json &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt;? [[String: Any]] {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; users = jsonArray.flatMap {
            User(dict: $0)
        }
        users.count
        dump(users.first)
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;I don&amp;rsquo;t actually expect you to go through all this code in detail, but I
included it here to make it obvious how verbose this method is.&lt;/p&gt;
&lt;p&gt;The first 3 lines get the data, and I have force-unwrapped the URL and the Data
which I would not do in a production app but which is OK while testing in a
playground. Then there is a declaration of the Users struct with all its sub
structs. Each one has a failable init that tries to parse the JSON dictionary
and returns nil if the data doesn&amp;rsquo;t match, by way of a lengthy set of guard
statements. The basic layout of each struct is the same but it is very verbose.
And as an extra step, the lat and lng properties need to be converted from
Strings to Doubles.&lt;/p&gt;
&lt;p&gt;I have to confess that it took quite come time to get this right &amp;hellip; lots of
guard statements to check that the data can be converted to the required types
which meant that any typos produced an empty array. The sub-structs have to be
extracted from the JSON as Dictionaries and then initialised by themselves.&lt;/p&gt;
&lt;h2 id=&#34;decoding-in-swift-4&#34;&gt;Decoding in Swift 4&lt;/h2&gt;
&lt;p&gt;So this works, and I get an array of Users objects. But it isn&amp;rsquo;t pretty and it
takes a lot of code to do the processing. So now I am going to move on to doing
this in Swift 4. I am using Xcode 9.0 beta 6 (9M214v) so if you have a later
version, you may need to adapt to any changes.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;User&lt;/span&gt;: Codable {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; id: Int
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; name: String
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; username: String
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; email: String
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; phone: String
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; website: String
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; address: Address
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; company: Company

    &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Address&lt;/span&gt;: Codable {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; street: String
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; suite: String
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; city: String
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; zipcode: String
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; geo: Coordinates

        &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Coordinates&lt;/span&gt;: Codable {
            &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; lat: String
            &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; lng: String
        }
    }

    &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Company&lt;/span&gt;: Codable {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; name: String
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; catchPhrase: String
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; bs: String
    }
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; jsonDecoder = JSONDecoder()
&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; users = &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt;? jsonDecoder.decode(Array&amp;lt;User&amp;gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;,
                                    from: jsonData)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Ignoring the complexities of converting latitude and longitude to Doubles, I get
vastly simpler code. I declare all the structs as conforming to the &lt;code&gt;Codable&lt;/code&gt;
protocol and then I can remove all the init methods and just let &lt;code&gt;JSONDecoder&lt;/code&gt;
do its magic. I just have to tell it what data type to expect - in this case an
Array of Users. I don&amp;rsquo;t have to worry about the initial conversion of the JSON
data to a Dictionary or looping through the elements using flatMap.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;In the playground, I used a do&amp;hellip;catch structure to check the result of the
decode function, but I have used try? here to keep the code short.&lt;/em&gt;&lt;/p&gt;
&lt;h2 id=&#34;changing-data-types&#34;&gt;Changing data types&lt;/h2&gt;
&lt;p&gt;The lat &amp;amp; lng coordinates are stored in the JSON as Strings, but need to be
converted to Doubles for the Swift struct.&lt;/p&gt;
&lt;p&gt;This requires a custom init method for the Coordinates struct to do the
conversion from String to Double.&lt;/p&gt;
&lt;p&gt;So here is the complete code for Swift 4 - again, if you don&amp;rsquo;t want to create
your own playground, you can &lt;a href=&#34;https://github.com/trozware/json&#34;&gt;use mine&lt;/a&gt;, this time looking at the Swift 4
JSON page:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Foundation&lt;/span&gt;

&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; sampleDataAddress = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://jsonplaceholder.typicode.com/users&amp;#34;&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; url = URL(string: sampleDataAddress)&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; jsonData = &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt;! Data(contentsOf: url)

&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;User&lt;/span&gt;: Codable {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; id: Int
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; name: String
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; username: String
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; email: String
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; phone: String
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; website: String
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; address: Address
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; company: Company

    &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Address&lt;/span&gt;: Codable {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; street: String
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; suite: String
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; city: String
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; zipcode: String
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; geo: Coordinates

        &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Coordinates&lt;/span&gt;: Codable {
            &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; lat: Double
            &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; lng: Double

            &lt;span style=&#34;color:#66d9ef&#34;&gt;init&lt;/span&gt;(from decoder: Decoder) &lt;span style=&#34;color:#66d9ef&#34;&gt;throws&lt;/span&gt; {
                &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; values = &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt; decoder.container(keyedBy: CodingKeys.&lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;)
                &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; latString = &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt; values.decode(String.&lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;, forKey: .lat)
                &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; lngString = &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt; values.decode(String.&lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;, forKey: .lng)
                lat = Double(latString) ?? &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
                lng = Double(lngString) ?? &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
            }
        }
    }

    &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Company&lt;/span&gt;: Codable {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; name: String
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; catchPhrase: String
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; bs: String
    }
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; jsonDecoder = JSONDecoder()
&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; users = &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt;? jsonDecoder.decode(Array&amp;lt;User&amp;gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;, from: jsonData)

users?.count
dump(users?.first)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;For comparative purposes, I counted the lines of code in each, removing the
common boiler plate of the top of each and the two lines for displaying the
results in the playground. I also removed the blank lines which I always use a
lot in my code for readability but which are not relevant when comparing code
efficiency:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Version&lt;/th&gt;
&lt;th style=&#34;text-align:right&#34;&gt;Lines&lt;/th&gt;
&lt;th style=&#34;text-align:right&#34;&gt;Lines if lat &amp;amp; lng are Strings&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Swift 3&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;95&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;93&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Swift 4&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;35&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;28&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;encoding&#34;&gt;Encoding&lt;/h2&gt;
&lt;p&gt;Encoding back to JSON is very similar. In the Swift 3 version, I would have
written a method for each struct that created a Dictionary and then used
JSONSerialization to convert the Dictionary back to JSON. This is very verbose
and tedious to write so I am not going to bother to demonstrate it here.&lt;/p&gt;
&lt;p&gt;But in Swift 4, this is even easier than decoding. Add this code to the end of
your Swift 4 JSON playground or playground page:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; users = users {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; jsonEncoder = JSONEncoder()
    jsonEncoder.outputFormatting = .prettyPrinted

    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; backToJson = &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt;? jsonEncoder.encode(users) {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; jsonString = String(data: backToJson, encoding: .utf8) {
            print(jsonString)
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The &lt;code&gt;JSONEncoder&lt;/code&gt; returns Data and I have converted that to a String for
checking. I set JSONEncoder&amp;rsquo;s outputFormatting property to .prettyPrinted get a
more readable String.&lt;/p&gt;
&lt;p&gt;Notice how the encoded data is not quite the same as I received because the lat
&amp;amp; lng properties are now Doubles. In a production app, if I needed to be able to
convert back to JSON, I probably would have left them as Strings so as to enable
data transfer in both directions. I would add computed properties to the struct
to convert these Strings to Doubles as I needed them.&lt;/p&gt;
&lt;h2 id=&#34;advanced-decoding&#34;&gt;Advanced Decoding&lt;/h2&gt;
&lt;p&gt;Now that we have the basics, I want to look at three more features: changing
property names, date handling and allowing for nulls.&lt;/p&gt;
&lt;h2 id=&#34;changing-property-names&#34;&gt;Changing Property Names&lt;/h2&gt;
&lt;p&gt;In these examples I used exactly the same names for the properties as were used
in the JSON. In the Swift 3 version, it would have been easy to change the
property names, since the data for each property was being extracted manually.
In Swift 4, if you want the decoder to change names, you have to tell it what
you want.&lt;/p&gt;
&lt;p&gt;Make a new playground or playground page and replace the contents with this - or
go to the Swift 4 Extras page on &lt;a href=&#34;https://github.com/trozware/json&#34;&gt;my playground&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Foundation&lt;/span&gt;

&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; jsonString = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;{
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;name1&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;: &amp;#34;&lt;/span&gt;Jane&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;,
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;name2&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;: &amp;#34;&lt;/span&gt;Smith&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;}
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; jsonData = jsonString.data(using: .utf8)&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt;

&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Person&lt;/span&gt;: Codable {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; firstName: String
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; lastName: String
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; jsonDecoder = JSONDecoder()
&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; person = &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt;? jsonDecoder.decode(Person.&lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;, from: jsonData)
dump(person)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This uses the new multi-line literals in Swift 4 to assemble the JSON string
which is amazingly useful as it allows quotes to be embedded in the string
without having to escape them. As you can see, the JSON property names are not
very helpful, so I want to change them in my Person struct. At the moment,
&lt;code&gt;person&lt;/code&gt; is nil because I have not given the decoder any clues to help it
translate the names. To do that, I have to add a CodingKeys enum to the Person
struct and it tells the decoder what names in the JSON match up to what
properties in the struct.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Person&lt;/span&gt;: Codable {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; firstName: String
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; lastName: String

    &lt;span style=&#34;color:#66d9ef&#34;&gt;enum&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CodingKeys&lt;/span&gt;: String, CodingKey {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; firstName = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;name1&amp;#34;&lt;/span&gt;
        &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; lastName = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;name2&amp;#34;&lt;/span&gt;
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;And that&amp;rsquo;s all I have to do. Now the JSON is correctly converted to a Person. As
an exercise, use JSONEncoder to get back to JSON from the Person. You will see
that the JSON correctly names the elements using &amp;ldquo;name1&amp;rdquo; and &amp;ldquo;name2&amp;rdquo;.&lt;/p&gt;
&lt;h2 id=&#34;date-handling&#34;&gt;Date Handling&lt;/h2&gt;
&lt;p&gt;Next let&amp;rsquo;s look at dates - add this code to the playground:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; jsonString2 = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;{
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;name&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;: &amp;#34;&lt;/span&gt;My New Project&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;,
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;created&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;: &amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2017&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;06&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;18&lt;/span&gt;T06:&lt;span style=&#34;color:#ae81ff&#34;&gt;28&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;25&lt;/span&gt;Z&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;}
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; jsonData2 = jsonString2.data(using: .utf8)&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt;

&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Project&lt;/span&gt;: Codable {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; name: String
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; created: Date
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; jsonDecoder2 = JSONDecoder()
&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; project = &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt;? jsonDecoder2.decode(Project.&lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;, from: jsonData2)

dump(project)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;When this runs, &lt;code&gt;project&lt;/code&gt; is nil because the decoder has no idea how to get from
the String &amp;ldquo;2017-06-18T06:28:25Z&amp;rdquo; to a Date object. Add this line after creating
&lt;code&gt;jsonDecoder2&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;jsonDecoder2.dateDecodingStrategy = .iso8601
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Now the date can be converted and an instance of the Project struct will be
created.&lt;/p&gt;
&lt;p&gt;And to get back to the JSON, converting the Date back to ISO8601 format:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; jsonEncoder = JSONEncoder()
jsonEncoder.dateEncodingStrategy = .iso8601

&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; backToJson = &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt;? jsonEncoder.encode(project) {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; jsonString = String(data: backToJson, encoding: .utf8) {
        print(jsonString)
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h2 id=&#34;allowing-for-nulls&#34;&gt;Allowing For Nulls&lt;/h2&gt;
&lt;p&gt;JSON data will often include &lt;strong&gt;null&lt;/strong&gt; where there is no value for a particular
property name. When using JSONDecoder or JSONEncoder, this can be allowed for by
using Optionals. If you are not clear about Optionals, have a look at my
previous article: &lt;a href=&#34;https://troz.net/post/2016-02-12-learning-swift-optionals/&#34;&gt;Learning Swift - Optionals&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The crucial step is to declare the properties of the Swift object as optionals
if you think they could get a null value.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Role&lt;/span&gt;: Codable {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; firstName: String
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; lastName: String
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; nickName: String?
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; jsonStringWithNulls = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;[
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;    {
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;        &amp;#34;&lt;/span&gt;firstName&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;: &amp;#34;&lt;/span&gt;Sally&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;,
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;        &amp;#34;&lt;/span&gt;lastName&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;: &amp;#34;&lt;/span&gt;Sparrow&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;,
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;        &amp;#34;&lt;/span&gt;nickName&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;: null
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;    },
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;    {
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;        &amp;#34;&lt;/span&gt;firstName&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;: &amp;#34;&lt;/span&gt;Doctor&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;,
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;        &amp;#34;&lt;/span&gt;lastName&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;: &amp;#34;&lt;/span&gt;Who&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;,
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;        &amp;#34;&lt;/span&gt;nickName&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;: &amp;#34;&lt;/span&gt;The Doctor&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;    }
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;]
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; jsonDataWithNulls = jsonStringWithNulls.data(using: .utf8)&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt;

&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; jsonDecoder3 = JSONDecoder()
&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; roles = &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt;? jsonDecoder3.decode(Array&amp;lt;Role&amp;gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;, from: jsonDataWithNulls)
dump(roles)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;In this example (which you can find in the Swift 4 Extras page on &lt;a href=&#34;https://github.com/trozware/json&#34;&gt;my
playground&lt;/a&gt;), I have declared a struct called Role with 3 String properties.
The 3rd String - nickName - is an Optional so it may be a String or it may be
nil.&lt;/p&gt;
&lt;p&gt;The JSON contains 2 elements - one has a nickName value and the other has it as
null. Because the matching property in the Swift struct is an optional, this
works as expected and the nickName property for Sally Sparrow is decoded as nil.
If you remove the question mark to make nickName non-optional, the decoding will
fail.&lt;/p&gt;
&lt;p&gt;Going back to JSON from a Swift object with optionals works much the same except
that it does not specifically mark items as null, it just leaves them out.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; jsonEncoder2 = JSONEncoder()
jsonEncoder2.outputFormatting = .prettyPrinted

&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; backToJsonWithNulls = &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt;? jsonEncoder2.encode(roles) {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; jsonString = String(data: backToJsonWithNulls, encoding: .utf8) {
        print(jsonString)
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;property-lists&#34;&gt;Property Lists&lt;/h2&gt;
&lt;p&gt;As well as JSONDecoder and JSONEncoder, Swift 4 has introduced
PropertyListDecoder and PropertyListEncoder, so let&amp;rsquo;s take a quick look at that.&lt;/p&gt;
&lt;p&gt;Add this to the bottom of the last playground as it uses the Project struct and
data:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; plistEncoder = PropertyListEncoder()
plistEncoder.outputFormat = .xml
&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; plist = &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt;? plistEncoder.encode(project) {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; plistString = String(data: plist, encoding: .utf8) {
        print(plistString)
    }

    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; plistDecoder = PropertyListDecoder()
    &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; project2 = &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt;? plistDecoder.decode(Project.&lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;, from: plist)

    dump(project2)
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;I don&amp;rsquo;t see this is being quite as useful as the JSON Encoding &amp;amp; Decoding, but I
mention it here for completeness.&lt;/p&gt;
&lt;h2 id=&#34;codable&#34;&gt;Codable&lt;/h2&gt;
&lt;p&gt;In all the Swift 4 examples above, I set the structs to conform to &lt;code&gt;Codable&lt;/code&gt;.
Reading Apple&amp;rsquo;s docs, I see that &lt;code&gt;Codable&lt;/code&gt; is actually a typealias referring to
2 separate protocols:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-Swift&#34; data-lang=&#34;Swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;typealias&lt;/span&gt; Codable = Decodable &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt; Encodable
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;If you only need to convert data one way, it will be more efficient to set your
struct or class as confirming to only one of these protocols. For example, if
you download JSON data from an API but never need to send it back, just conform
to Decodable to transform the JSON data into your data structure.&lt;/p&gt;
&lt;p&gt;Much more information can be found in the &lt;a href=&#34;https://developer.apple.com/documentation/swift/encoding_decoding_and_serialization&#34;&gt;Apple documentation&lt;/a&gt;.&lt;/p&gt;</description>
</item>
    
    <item>
<title>Posting from my new iPad</title>
<link>https://troz.net/post/2017/posting-from-my-new-ipad/</link>
<pubDate>Sat, 17 Jun 2017 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2017/posting-from-my-new-ipad/</guid>
<description>&lt;p&gt;Last week I got a 10.5” iPad Pro. I have had an iPad ever since the original
release, but I have to confess to mainly using it for content consumption rather
than creation. Since I am usually close to a Mac anyway, there didn’t seem a lot
of point. But now that iOS 11 is really addressing the issue of making the iPad
a &amp;ldquo;pro&amp;rdquo; device, I decided to give it a try.&lt;/p&gt;
&lt;p&gt;So here I am, sitting in an armchair with my iPad on my lap, writing this post
and working out the details as I go. Any typos are due to the cat trying to
compete with the iPad for space on my lap!&lt;/p&gt;
&lt;h2 id=&#34;ipad&#34;&gt;iPad&lt;/h2&gt;
&lt;p&gt;As already mentioned, I have a new iPad Pro. I also have an Apple Pencil which I
use for taking notes. I do not have a keyboard, so I am using the on-screen
keyboard right now.&lt;/p&gt;
&lt;p&gt;I don’t usually install beta versions of operating systems, but iOS 11 is a huge
part of making the iPad more professional, so I have installed it. As you would
expect, there are a few issues (apps quitting, layout issues especially when
rotating) but so far I am loving it.&lt;/p&gt;
&lt;h2 id=&#34;writing&#34;&gt;Writing&lt;/h2&gt;
&lt;p&gt;My site is published on &lt;a href=&#34;https://pages.github.com/&#34;&gt;GitHub Pages&lt;/a&gt; using &lt;a href=&#34;http://jekyllrb.com/&#34;&gt;Jekyll&lt;/a&gt; with all the posts
and pages written in Markdown. One key feature is that every post or page
requires a chunk of &amp;ldquo;front matter&amp;rdquo; that must be formatted correctly for the
Jekyll parser to interpret it and create the static content. After a bit of
research, it looked like &lt;a href=&#34;http://omz-software.com/editorial/&#34;&gt;Editorial&lt;/a&gt; was going to be the best option for an
editor app. I moved my site files to Dropbox, linked my Dropbox account to
Editorial and I was ready to start writing.&lt;/p&gt;
&lt;p&gt;I didn’t want to create the front matter manually for each post. On my Mac I
have a text expander snippet that handles that but copying from &lt;a href=&#34;http://mattgemmell.com/using-the-ipad-for-blogging-with-jekyll/&#34;&gt;Matt Gemell’s
post&lt;/a&gt; on the topic, I created an Editorial workflow to create a new post. As
a side-note, Matt has a series of posts on using an iPad which I have found very
useful and inspirational.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/Workflow.jpeg&#34; alt=&#34;Editorial workflow&#34;&gt;&lt;/p&gt;
&lt;p&gt;Text entry and editing is a task that I have always felt was too difficult in
iOS, particularly when it came to selecting text and moving the cursor. However
there are now several improvements. As with iOS 10, a two-fingered press on the
keyboard transforms it into a trackpad for moving the cursor. If you already
have text selected, this moves the selection handles. The new iOS 11 keyboard
has a really nice feature for entering non-alphabetic characters. The keys now
show a small grey character above the main character. Drag down on the key to
move the small character into the main key and type it. For example, drag down
on the h key to type (.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/keyboard-drag.png&#34; alt=&#34;Keyboard drag&#34;&gt;&lt;/p&gt;
&lt;p&gt;Editorial has its own editing helpers. There is an additional toolbar above the
keyboard with a tab key as well as frequently used Markdown modifiers. And
swiping across this toolbar moves the cursor. This is a much slower move than
when using the keyboard as a trackpad so might be better for more precise
movements.&lt;/p&gt;
&lt;h3 id=&#34;adding-links&#34;&gt;Adding Links:&lt;/h3&gt;
&lt;p&gt;I have referenced a few sites now, so I guess it is time to work out how to link
to them. I always use Markdown’s referenced link method, with the links
collected at the foot of the document, so that is what I plan to do here. To set
text as a link, I selected it and used the Editorial toolbar to type an opening
square bracket which surrounded the selection in square brackets. Then I moved
the cursor to after the closing bracket and typed another opening square
bracket. This auto-closed and I was able to type a number which will be the
reference.&lt;/p&gt;
&lt;p&gt;Next step is to find the relevant URLs - drag &amp;amp; drop with multi-tasking to the
rescue! Swipe up from the bottom of the screen to see the new Dock. This also
makes the keyboard disappear. Hold down on the Safari icon until you grab it,
then drag it up into the Editorial window. Now it is open as an overlay.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/safari-overlay.png&#34; alt=&#34;Safari as overlay&#34;&gt;&lt;/p&gt;
&lt;p&gt;At this point, I have several options:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Swiping from the left or right of the overlay window lets me position it to
the right or left of the screen, still as an overlay.&lt;/li&gt;
&lt;li&gt;Dragging from the bar at the top of the overlap allows me to convert to split
screen mode, and I can then drag the divider to adjust the ratios.&lt;/li&gt;
&lt;li&gt;Swiping all the way to the right disappears the overlay, but swiping back from
the right edge returns it. Since I want to copy and paste some links, this
looks like the best option right now.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This swiping conflicts slightly with Editorial&amp;rsquo;s swiping from the side to see a
preview. Swipe from off the edge for the overlap and from well inside the edge
for preview.&lt;/p&gt;
&lt;p&gt;And here my plans come crashing down. I can drag from Safari&amp;rsquo;s address bar into
the Editorial document, but the drop doesn’t take. I guess I need an update to
Editorial for this to work. But I can still use the old style copy and paste to
get the links.&lt;/p&gt;
&lt;h3 id=&#34;images&#34;&gt;Images&lt;/h3&gt;
&lt;p&gt;So now I have my links, but I want to insert a few images. I used iOS 11’s new
screen shot abilities. Press the usual home button &amp;amp; power button combination to
take a screen shot and it appears as a small picture in the bottom left of the
screen. Tap it to start editing: markup, crop etc. Then I used the sharing
button to save the picture to Dropbox, putting it inside the images folder in my
web site folder.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/screenshot.jpeg&#34; alt=&#34;Editing a screenshot&#34;&gt;&lt;/p&gt;
&lt;p&gt;I want to insert an image link but I have just worked out that I saved this
Markdown file in the root folder instead of the _posts folder. I can’t see a way
to move it from inside Editorial, so I will swap to the Dropbox app to move the
file - be right back&amp;hellip; (I see now how I could have done this in Editorial.)&lt;/p&gt;
&lt;p&gt;Ok, this file is in the right place and the images are in the right folder, so
how to add an image link? Checking back at previous posts, I see that the format
I use for inserting an image is: &lt;code&gt;![Alt text][#]&lt;/code&gt; and the reference at the foot
of the page is like&lt;code&gt;[#]: /images/image_name.jpg&lt;/code&gt; but I don’t want to have to
remember that every time, so I think it is time for some snippets. Tapping the
lightning icon on the Editorial keyboard lets me edit and create snippets, so I
have made one for the image link and one for the image reference. Time to scroll
back up the page and try them out.&lt;/p&gt;
&lt;p&gt;I opened the Dropbox app in an overlay so that I could find the file names for
the images I just saved, then I created the links. The images don’t appear in
the preview but that is expected because Jekyll has not parsed the addresses.
Looking at the information about the images in Dropbox, I see that they are far
too big. I need a way to resize them. The screen shot editor doesn’t have a way
to resize apart from cropping, at least not in this beta.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://workflow.is/&#34;&gt;Workflow&lt;/a&gt; is another Pro level app that I have never really used, but it
seems that it might do the job. I tried a few workflows to edit the size of an
image from a Dropbox file and save it back, but they although they appeared to
complete, the image file remained the same size. So then I went to the Workflow
Gallery and found a workflow called Quick Resize Screenshot. When editing a
screen shot, I can use the sharing button to run the workflow and then I can
save the smaller images to Dropbox for use in the page. For the large images
that I have already saved, I will resize them on my Mac before publishing.&lt;/p&gt;
&lt;h2 id=&#34;publishing&#34;&gt;Publishing&lt;/h2&gt;
&lt;p&gt;This brings me to the final step - publishing the changes to GitHub Pages.
Jekyll is a system that creates static web pages from the Markdown and other
files. on my Mac, I run the &lt;code&gt;jekyll build&lt;/code&gt; command in Terminal and the pages are
created or re-generated as required. Then I use &lt;code&gt;git&lt;/code&gt; to commit my changes and
push them to GitHub which serves them.&lt;/p&gt;
&lt;p&gt;There appear to be Editorial workflows written in Python that use the GitHub
APIs to upload files, but this wouldn’t work well for me. Because of the
structure of my site, many different pages need to be re-generated when I
publish a new post, so I will keep the publishing phase on my Mac. However there
is no need to make it any more difficult than necessary, so I have written a
shell script to do the work.&lt;/p&gt;
&lt;p&gt;The script takes an optional commit message parameter, builds the site, commits
changes and pushes then to GitHub. I have only tested this when no files had
changed, so this post will be the first real test. Shell scripting is outside my
comfort zone, so we will have to see how that works.&lt;/p&gt;
&lt;h2 id=&#34;summary&#34;&gt;Summary&lt;/h2&gt;
&lt;p&gt;So now I have a workflow on my iPad that uses Editorial, Dropbox and Workflow.
This allows me to do 100% of the writing task. Then I have a single shell script
on my Mac that does the publishing part. I can edit and create posts anywhere. I
can easily use split screen or screen overlays to add links. iOS 11 makes
creating and annotating screen shots very easy.&lt;/p&gt;
&lt;p&gt;I am hoping for an update to Editorial that will allow it to accept drag &amp;amp; drop.
The ability to resize screen shots before saving them would also be really
useful.&lt;/p&gt;
&lt;p&gt;Sometimes my posts are more code-based and need access to Xcode and in those
cases, I will stick to my Mac, especially considering Xcode’s new ability to
connect directly to GitHub which will make it great for publishing Swift
playgrounds. But for more narrative-style posts like this one, I will use my
iPad and see how I can improve my workflow and expand my tool set.&lt;/p&gt;
&lt;p&gt;It feels good to be using the iPad as a content creation device at last.&lt;/p&gt;
&lt;h2 id=&#34;extra-notes-from-a-mac&#34;&gt;Extra Notes from a Mac:&lt;/h2&gt;
&lt;p&gt;Since this was my first time writing a blog post using an iPad and this
workflow, I decided that I should test the results before publishing, so I
switched back to the Mac and in Terminal, ran &lt;code&gt;jekyll serve&lt;/code&gt; so that I could see
the results. There were a few issues mainly to do with the formatting of the
front matter. The three dashes at the top &amp;amp; bottom of the front matter had
become munged into an emdash plus a dash, so that didn’t work. Jekyll is also
fussy about the spaces in the tag &amp;amp; summary lines and it doesn&amp;rsquo;t handle
non-alphanumerics in the summary text.&lt;/p&gt;
&lt;p&gt;I also used the Mac to shrink some of the images that I had saved before working
out how to reduce the size of screen shots.&lt;/p&gt;
&lt;p&gt;So I need to check the structure of the front matter workflow before next time,
but this post is ready to go with only minor editing on the Mac side. Now to
test my shell script&amp;hellip;&lt;/p&gt;
</description>
</item>
    
    <item>
<title>JSON Feed for TrozWare</title>
<link>https://troz.net/post/2017/json-feed-for-trozware/</link>
<pubDate>Sat, 20 May 2017 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2017/json-feed-for-trozware/</guid>
<description>&lt;p&gt;&lt;a href=&#34;https://jsonfeed.org/2017/05/17/announcing_json_feed&#34;&gt;jsonfeed.org&lt;/a&gt; has announced a new format for web site feeds, designed as an
alternative to RSS. TrozWare has had an XML RSS feed for years, but I don&amp;rsquo;t
think anyone ever uses it (I certainly don&amp;rsquo;t), so today I have replaced it with
a JSON feed, which you can access through the
&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt; button at the top of every page.&lt;/p&gt;
&lt;p&gt;I am sure many JSON Feed viewers will appear soon, but the only one I know about
so far is at &lt;a href=&#34;http://json-feed-viewer.herokuapp.com&#34;&gt;http://json-feed-viewer.herokuapp.com&lt;/a&gt;. As soon as this update
to my site goes live, I will apply to have TrozWare added to the list of sites
on this page. Meanwhile, you can paste in the URL: &lt;code&gt;https://troz.net/feed.json&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;This site is constructed using Jekyll, so I am very grateful to Niclas Darville
for his very easy to follow &lt;a href=&#34;https://ndarville.com/blog/2017/05/19/json-feed-for-jekyll/&#34;&gt;guide&lt;/a&gt;. However it is still well worth reading
through the &lt;a href=&#34;https://jsonfeed.org/version/1&#34;&gt;official specs&lt;/a&gt; to see what else you want to add, or if you want
to remove anything. I had to tweak a few settings to make it work for my
configuration, and I added some more objects, but Niclas got me off to a flying
start.&lt;/p&gt;
&lt;p&gt;Two things to watch out for:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Make sure your feed is producing valid JSON (I had an extra comma that was
breaking it&amp;hellip;).&lt;/li&gt;
&lt;li&gt;As third-party apps &amp;amp; sites may be displaying your content, you need to make
sure that you are not using relative URLs for images and internal links. I
was using relative image URLs like &lt;code&gt;/images/WorkHelp1.png&lt;/code&gt; but that showed a
broken link in the feed viewer, so I have changed all such links to
&lt;code&gt;/images/WorkHelp1.png&lt;/code&gt;. Hopefully that will work correctly on my local test
server as well as when published. &lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;https://jsonfeed.org/graphics/icon.png&#34; alt=&#34;JSON Feed icon&#34;&gt;&lt;/p&gt;
&lt;p&gt;JSON Feed offers a nice icon which I would have liked to use, but I could not
work out a way to make it play nicely with the existing icons on my pages which
all use &lt;a href=&#34;http://fontawesome.io&#34;&gt;Font Awesome&lt;/a&gt; icons. So I ended up just using the existing Feed
icon. Hopefully Font Awesome will soon add a JSON Feed icon to their already
impressive list.&lt;/p&gt;
&lt;p&gt;If anyone still wants to use the &lt;a href=&#34;https://troz.net/index.xml&#34;&gt;RSS feed&lt;/a&gt;, it is no longer linked to the
buttons at the top of the pages, but you can access it manually.&lt;/p&gt;</description>
</item>
    
    <item>
<title>Blackmail Marketing</title>
<link>https://troz.net/post/2017/blackmail-marketing/</link>
<pubDate>Wed, 08 Mar 2017 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2017/blackmail-marketing/</guid>
<description>&lt;p&gt;I use my iPad to play games as a form of relaxation. Nearly all the games I play
are puzzle apps with levels that can be played in a few minutes. Nearly all of
them are free to install. So how do they make money?&lt;/p&gt;
&lt;p&gt;Now I would be the last person you should consult about marketing but it has
always seemed to me that the best way to market your product is to convince
people that it offers something they want so that they are prepared to pay for
it.&lt;/p&gt;
&lt;p&gt;This is not the currently favored approach for mobile apps - at least certainly
not for games. No, the theory at the moment is to cause so much frustration and
annoyance that people give you money to make it stop. Blackmail marketing.&lt;/p&gt;
&lt;p&gt;A frequently used method is showing ads, sometimes just banner ads but more
often full screen video ads that run for up to 30 seconds. If you interrupt the
ad, you don&amp;rsquo;t get the reward.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Every goal reached triggers an ad.&lt;/li&gt;
&lt;li&gt;Quitting and resuming the app triggers an ad.&lt;/li&gt;
&lt;li&gt;Wanting to play another level triggers an ad.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The theory is that you get so annoyed with this that you pay money to disable
the ads.&lt;/p&gt;
&lt;p&gt;The other common tactic is the delay. A tower defence game needs you to build a
tower? OK, that will take 12 hours real time and you can&amp;rsquo;t proceed until it&amp;rsquo;s
finished. Or you can spend 12 gems which are sold as an in-app purchase. Maybe
you can only play 3 levels and then you need to recharge: again, pay up or wait.
You keep dying on that level? You&amp;rsquo;re out of lives. Pay up or wait until
tomorrow. These delays are completely artificial. They have nothing to do with
game play but are solely designed to infuriate you enough to get you to pay.&lt;/p&gt;
&lt;p&gt;So when, and perhaps more importantly why, did mobile app marketing become so
negative? What happened to making your customers happy? Do unhappy customers
spend more?&lt;/p&gt;
&lt;p&gt;Financially, it appears that irritating your users is a successful strategy.
Nearly all the top grossing games in the App Store are &amp;ldquo;free to play&amp;rdquo; in that
the initial download costs nothing. But these big studios are raking in enormous
sums of money, so many people are persuaded to spend significant money by these
infuriating schemes.&lt;/p&gt;
&lt;p&gt;A large part of this must be due to the various App Stores driving prices to the
bottom. Gone are the days when the price of a mobile app was other than risible.
So app developers have four choices:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Do it as a hobby or learning exercise.&lt;/li&gt;
&lt;li&gt;Distribute apps as a form of self–promotion for other work.&lt;/li&gt;
&lt;li&gt;Work for someone who pays you a real wage to develop apps.&lt;/li&gt;
&lt;li&gt;Join the blackmailers.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;So how does this relate to indy developers like me? I care about my users and
want them to be happy.&lt;/p&gt;
&lt;p&gt;I have tried several different approaches to app distribution:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Totally free gets by far the most downloads but is economically ridiculous
unless the app adds value to your business in some other way.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;A tip jar gets you nothing.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;In-app purchases (in my limited experience) make less than selling the app
up-front for a small price.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Banner ads with no method of forcing people to watch them generate almost no
revenue.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;So that leaves me with where I am today - selling apps for a few dollars and
nothing more. Happily, I have found that Mac users are more prepared to pay a
few dollars for an app, so I have shut down many of my iOS apps and am
concentrating on the Mac app market.&lt;/p&gt;
&lt;p&gt;Am I letting my principles stand in the way of mobile app profits? Should I just
join the gang and start blackmailing my customers? If so, what form should this
take?&lt;/p&gt;
&lt;p&gt;At the moment, I am considering banner ads on the screen with an in-app purchase
to disable them entirely. I read a suggestion for a less invasive method of
doing this by creating your own ads for your other apps. This might be what I
end up doing.&lt;/p&gt;
&lt;p&gt;I would welcome any suggestions, advice or comments. Please join the discussion
below or contact me using one of the links at the top of the page.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>NCSS 2017</title>
<link>https://troz.net/ncss2017/</link>
<pubDate>Fri, 06 Jan 2017 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/ncss2017/</guid>
<description>&lt;p&gt;I gave a Masterclass on Swift at the NCSS Summer School 2017 in Sydney on 8th
January 2017. This post contains useful links for use during and after my class.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://swiftlang.ng.bluemix.net/#/repl&#34;&gt;IBM Swift Sandbox&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;sandbox-code-samples&#34;&gt;Sandbox Code Samples&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;http://swiftlang.ng.bluemix.net/#/repl/58670662da20a814737c3562&#34;&gt;Strings&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;http://swiftlang.ng.bluemix.net/#/repl/5868463fb5619f13e0a940af&#34;&gt;Optionals&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;http://swiftlang.ng.bluemix.net/#/repl/5868954cb5619f13e0a940bd&#34;&gt;Functions&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;http://swiftlang.ng.bluemix.net/#/repl/5866f31fda20a814737c353b&#34;&gt;Closures&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;http://swiftlang.ng.bluemix.net/#/repl/5866f48bda20a814737c353c&#34;&gt;Objects&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;http://swiftlang.ng.bluemix.net/#/repl/5866ed80da20a814737c3538&#34;&gt;Protocols&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;http://swiftlang.ng.bluemix.net/#/repl/5866fc4dda20a814737c3557&#34;&gt;Generics&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;contact-details&#34;&gt;Contact Details:&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Email: &lt;a href=&#34;mailto:sarah@troz.net?subject=NCSS%202017&#34;&gt;sarah@troz.net&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Twitter: &lt;a href=&#34;https://twitter.com/trozware&#34;&gt;@trozware&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Slides:
&lt;a href=&#34;https://www.dropbox.com/s/09r19my3d6jk5jt/NCSS%202017%20Swift%20MC.pdf?dl=0&#34;&gt;NCSS 2017 Swift MC.pdf&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;useful-links&#34;&gt;Useful Links:&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://itunes.apple.com/au/book/swift-programming-language/id881256329?mt=11&#34;&gt;The Swift Programming Language&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://swift.org&#34;&gt;Swift.org&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://www.raywenderlich.com/132258/top-5-ios-swift-newsletters&#34;&gt;Newsletters&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://www.raywenderlich.com&#34;&gt;Tutorials&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;</description>
</item>
    
    <item>
<title>Looking for beta testers</title>
<link>https://troz.net/post/2016/looking-for-beta-testers/</link>
<pubDate>Thu, 17 Nov 2016 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2016/looking-for-beta-testers/</guid>
<description>&lt;p&gt;I am looking for beta testers for my latest Mac app: &lt;strong&gt;&lt;a href=&#34;https://troz.net/work/&#34;&gt;Work&lt;/a&gt;&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Work&lt;/strong&gt; is a project organizer app for developers, designers, students or any
professional who works with multiple projects involving files &amp;amp; folders, web
pages, email addresses and lists of tasks. Click the link above for more
information and help for getting started.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Work&lt;/strong&gt; requires macOS 10.12 or OS X 10.11.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;If you would like to test this app, please &lt;a href=&#34;mailto:work@troz.net?subject=Work%20beta%20test&#34;&gt;contact me&lt;/a&gt;, giving details of
your Mac and operating system. The easiest way to do this is to select &lt;strong&gt;About
This Mac&lt;/strong&gt; in the Apple menu and send me a screen shot of the window that
appears.&lt;/p&gt;
&lt;p&gt;All beta testers will receive a free license to Work when it is released. If you
report a legitimate bug or provide valuable feed-back, you will also receive a
free license to your choice of one of my &lt;a href=&#34;https://troz.net/apps/&#34;&gt;other apps&lt;/a&gt;.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Another Man Reader Update...</title>
<link>https://troz.net/post/2016/another-man-reader-update/</link>
<pubDate>Sat, 05 Nov 2016 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2016/another-man-reader-update/</guid>
<description>&lt;p&gt;A quick update to &lt;a href=&#34;https://troz.net/manreader/&#34;&gt;Man Reader&lt;/a&gt; to version 1.8 is now available through the
&lt;a href=&#34;http://itunes.apple.com/app/man-reader/id522583774?mt=12&#34;&gt;Mac App Store&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The main reason for this version was that Man Reader was not previously
detecting man pages installed by third-party IDEs in the Applications folder.
There was also an issue with Man Reader failing to display the text of the
previously selected man page on app launch.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;More complete search for man pages, including in third-party IDEs.&lt;/li&gt;
&lt;li&gt;Fix for glitch when displaying previously selected page on launch.&lt;/li&gt;
&lt;/ul&gt;
</description>
</item>
    
    <item>
<title>Man Reader Update</title>
<link>https://troz.net/post/2016/man-reader-update/</link>
<pubDate>Wed, 12 Oct 2016 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2016/man-reader-update/</guid>
<description>&lt;p&gt;&lt;a href=&#34;https://troz.net/manreader/&#34;&gt;Man Reader&lt;/a&gt; has just been updated to version 1.7 and is available through
the &lt;a href=&#34;http://itunes.apple.com/app/man-reader/id522583774?mt=12&#34;&gt;Mac App Store&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The main reason for this update was to make the app work well with macOS Sierra,
as I found that version 1.6 was sometimes crashing on launch. While doing this,
the update was rejected by the App Store reviewers because it crashed on OS X
10.10. Since I no longer have a Mac running 10.10, I decided to set the minimum
supported system version to OS X 10.11. If you need support for older versions,
you should still be able to download version 1.6 which will work back to 10.7.&lt;/p&gt;
&lt;p&gt;I also took the opportunity to fix some graphical issues, dealing with different
color schemes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The man page list now shows alternating colors even when not using the default
scheme.&lt;/li&gt;
&lt;li&gt;When scrolling the man pages past the top or the bottom with a non-white
background, you should no longer see white blocks top &amp;amp; bottom.&lt;/li&gt;
&lt;/ul&gt;
</description>
</item>
    
    <item>
<title>Podcasting</title>
<link>https://troz.net/post/2016/podcasting/</link>
<pubDate>Tue, 11 Oct 2016 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2016/podcasting/</guid>
<description>&lt;p&gt;I have recently started what I hope will be a weekly podcast with my friend and
colleague, &lt;a href=&#34;https://twitter.com/jerrydaniels&#34;&gt;Jerry Daniels&lt;/a&gt;. Each podcast will be about 30 minutes in length.&lt;/p&gt;
&lt;p&gt;We will discuss Macs, iPhones, iPads, macOS, iOS, programming and anything
tech-related that we find interesting. I hope you will find it entertaining and
informative, so please join us.&lt;/p&gt;
&lt;p&gt;We are using &lt;a href=&#34;https://zcast.co/zcasts&#34;&gt;ZCast&lt;/a&gt; which has an iPhone app that makes it super easy to get
together and record our chats. It doesn&amp;rsquo;t allow any post-processing, but really
lowers the barrier to entry into the world of podcasting.&lt;/p&gt;
&lt;p&gt;If you get the &lt;a href=&#34;https://itunes.apple.com/app/zcast-podcast-from-your-phone!/id1041586670&#34;&gt;ZCast app for iPhone&lt;/a&gt;, go to the ZCasters tab and search for
&amp;ldquo;Trozware&amp;rdquo; or &amp;ldquo;Jerry Daniels&amp;rdquo; to find all our podcasts. Or use these links to
listen in your browser.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://zcast.co/j/ZyB8yK4z86&#34;&gt;The new macOS&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://zcast.co/j/ewQe6x6E4d&#34;&gt;Hands-on with iPhone 7&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://zcast.co/j/A9zvLAAEa3&#34;&gt;Hands on iOS 10&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Since the first one was recorded using my name instead of my &lt;a href=&#34;https://twitter.com/trozware&#34;&gt;@trozware&lt;/a&gt;
Twitter account, I will embed it here as it will not show up if you search for
&amp;ldquo;Trozware&amp;rdquo;.&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
</description>
</item>
    
    <item>
<title>Dice Pass Updated</title>
<link>https://troz.net/post/2016/dice-pass-updated/</link>
<pubDate>Sat, 17 Sep 2016 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2016/dice-pass-updated/</guid>
<description>&lt;p&gt;&lt;a href=&#34;https://troz.net/dicepass/&#34;&gt;Dice Pass 1.1&lt;/a&gt; is now available from the &lt;a href=&#34;https://itunes.apple.com/app/dice-pass/id997688302&#34;&gt;Mac App Store&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&#34;what-does-dice-pass-do&#34;&gt;What does Dice Pass do?&lt;/h2&gt;
&lt;p&gt;Dice Pass is a utility to app to generate random passphrases based on the
&lt;a href=&#34;http://world.std.com/~reinhold/diceware.html&#34;&gt;Diceware&lt;/a&gt; system. Diceware uses a table of pre-defined words, each assigned
a 5 digit code number containing the digits 1 to 6. The official way to generate
a phrase is to roll 5 dice for each word you want in your passphrase and then
consult the words table to find the matching word.&lt;/p&gt;
&lt;p&gt;The resulting phrase uses real words or common abbreviations so it is easier to
remember than a random collection of characters. At the same time, the random
selection of words makes the generated passphrase much more secure as it avoids
the human tendency to pick words with personal meaning.&lt;/p&gt;
&lt;p&gt;Dice Pass allows you to select the number of words in your passphrase,
re-generate the entire passphrase any time, re-roll a single word in your
passphrase or set the dice rolls manually for maximum security and randomness.&lt;/p&gt;
&lt;h2 id=&#34;whats-new-in-version-11&#34;&gt;What&amp;rsquo;s New in Version 1.1:&lt;/h2&gt;
&lt;p&gt;You can now select from three word lists in the Word Lists menu:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;original Diceware list&lt;/li&gt;
&lt;li&gt;Beale list (fewer Americanisms and obscure words)&lt;/li&gt;
&lt;li&gt;Diceware 8k list (a list of words that is a whole power of two in length)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;You can also import your own word list if you prefer.&lt;/p&gt;
&lt;p&gt;Dice Pass 1.1 is compatible with macOS Sierra.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>How much work does Icon Builder save you?</title>
<link>https://troz.net/post/2016/how-much-work-does-icon-builder-save-you/</link>
<pubDate>Sat, 17 Sep 2016 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2016/how-much-work-does-icon-builder-save-you/</guid>
<description>&lt;p&gt;&lt;a href=&#34;https://troz.net/icon-builder/&#34;&gt;Icon Builder&lt;/a&gt; is a Mac app that takes a single image file and creates all
the different image sizes that you need to make a set of icons for your app:
Mac, iPhone, iPad, iOS Universal or Apple Watch.&lt;/p&gt;
&lt;p&gt;Version 4, released 16 September 2016 is available through the &lt;a href=&#34;https://itunes.apple.com/app/icon-builder/id552293482&#34;&gt;Mac App
Store&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&#34;whats-new-in-version-4&#34;&gt;What&amp;rsquo;s New in Version 4:&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Added support for iMessage apps and Sticker Pack apps.&lt;/li&gt;
&lt;li&gt;Added support for creating Mac .icns files.&lt;/li&gt;
&lt;li&gt;Better removal of alpha channel for Apple Watch icons.&lt;/li&gt;
&lt;li&gt;Clearer usage instructions in ReadMe files.&lt;/li&gt;
&lt;li&gt;iTunes Artwork folders will no longer be over-written with the latest image
files.&lt;/li&gt;
&lt;li&gt;Supports macOS Sierra and Xcode 8&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/IconBuilder.png&#34; alt=&#34;Icon Builder&#34;&gt;&lt;/p&gt;
&lt;p&gt;While working on version 4 and accommodating all these new icon sets (and
wishing I had the time to re-write the app in Swift&amp;hellip;), I counted up all the
icon files that Icon Builder makes for each app type:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;App Type&lt;/th&gt;
&lt;th style=&#34;text-align:right&#34;&gt;Number of Icons&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Mac&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;10&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;iPhone&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;8&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;iPhone supporting pre iOS 7&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;11&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;iPad&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;9&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;iPad supporting pre iOS 7&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;13&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;iOS Universal&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;14&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;iOS Universal supporting pre iOS 7&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;20&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Apple Watch (also requires iOS app icons)&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;8&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Sticker Pack app&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;11&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;iMessages app&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;14&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;iMessages app Messages extension&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;9&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;So as you can see, Icon Builder is doing a lot of work for you. It also names
all the icon files using the expected format, stores them in an concept folder,
creates the JSON file that identifies them all to Xcode and optionally installs
them in your Xcode project automatically. That’s a lot of value for dragging in
an icon and clicking a button!&lt;/p&gt;
&lt;p&gt;So next time your designer sends you the twentieth tweaked icon for the day,
don&amp;rsquo;t get mad. Just drop it into Icon Builder and sit back while it does all the
work. (No need to tell the designer that&amp;hellip;)&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Retiring old apps</title>
<link>https://troz.net/post/2016/retiring-old-apps/</link>
<pubDate>Thu, 15 Sep 2016 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2016/retiring-old-apps/</guid>
<description>&lt;p&gt;With the release of iOS 10 and the need to update iOS apps to suit, I have
decided it is time to retire some of my lesser-performing apps as it is not
worth the effort required to maintain them.&lt;/p&gt;
&lt;p&gt;At the moment, the following iOS apps are no longer available:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A Knight&amp;rsquo;s Move&lt;/li&gt;
&lt;li&gt;Dice Pass&lt;/li&gt;
&lt;li&gt;Pic-a-POD&lt;/li&gt;
&lt;li&gt;Quick Score - Tennis&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;For the first three listed there, the Mac versions are still available:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://itunes.apple.com/app/a-knights-move/id533321133&#34;&gt;A Knight&amp;rsquo;s Move for Mac&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://itunes.apple.com/app/dice-pass/id997688302&#34;&gt;Dice Pass for Mac&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://itunes.apple.com/app/pic-a-pod/id477909802&#34;&gt;Pic-a-POD for Mac&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If you bought any of these apps and would like a promo code for the Mac version,
send me a screen shot of the app running on your iPhone or iPad and I will send
you a code.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Man Reader updated to 1.6</title>
<link>https://troz.net/post/2016/man-reader-updated-to-1.6/</link>
<pubDate>Sat, 16 Jul 2016 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2016/man-reader-updated-to-1.6/</guid>
<description>&lt;p&gt;Man Reader has been updated to version 1.6 with the permissions needed for
finding all available man pages and a fix for search terms being over-written
after a background update.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://troz.net/manreader/&#34;&gt;Man Reader 1.6&lt;/a&gt; is now available through the &lt;a href=&#34;http://itunes.apple.com/app/man-reader/id522583774?mt=12&#34;&gt;Mac App Store&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id=&#34;change-log&#34;&gt;Change Log:&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Permissions fix when searching for available man pages.&lt;/li&gt;
&lt;li&gt;Fixed error with new search term being over-written.&lt;/li&gt;
&lt;li&gt;Sand-boxed version now works just as well as the non-sand-boxed so please
switch back to this version.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This version fixes a problem with sand-boxing permissions potentially not
allowing access to all the installed man pages on your system. This should now
be fixed but if you discover any man pages that are available through Terminal
but not through Man Read, please &lt;a href=&#34;mailto:sarah@troz.net?subject=Man%20Reader%20not%20detecting%20some%20man%20pages&#34;&gt;email me the details&lt;/a&gt; and help me make Man
Reader better.&lt;/p&gt;
&lt;p&gt;There was also an issue with a previous search being restored after a background
update, even if a new search term had been entered. This has been fixed.&lt;/p&gt;
&lt;p&gt;If you previously had downloaded the Man Reader (no SB) version of the app from
this site, please revert to the App Store version which you would have needed to
have bought in order to use the downloaded app. If you bought the app from
Paddle, &lt;a href=&#34;mailto:sarah@troz.net?subject=Man%20Reader%20transfer%20to%20App%20Store&#34;&gt;contact me&lt;/a&gt; and I will transfer you to the App Store version.
Neither of these other versions will be supported or updated any more.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Dice Pass Mac Update</title>
<link>https://troz.net/post/2016/dice-pass-mac-update/</link>
<pubDate>Sun, 03 Jul 2016 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2016/dice-pass-mac-update/</guid>
<description>&lt;p&gt;I recently got an email from someone who had purchased &lt;a href=&#34;https://troz.net/dicepass/&#34;&gt;Dice Pass&lt;/a&gt; for Mac
from the &lt;a href=&#34;https://itunes.apple.com/app/dice-pass/id997688302&#34;&gt;Mac App Store&lt;/a&gt; but had been unable to get it to run. This person
was using OS X 10.9.3.&lt;/p&gt;
&lt;p&gt;I checked the App Store specifications and it showed that 10.9 was the minimum
system requirement, so it should have worked. But going back to my Xcode
project, I found that it was set to a minimum of OS X 10.10.&lt;/p&gt;
&lt;p&gt;I tried to re-compile for OS X 10.9 but this failed as the app uses several
features that are not available prior to 10.10.&lt;/p&gt;
&lt;p&gt;The minimum system version as displayed in the App Store is supposedly deduced
automatically by the App Store servers from the app&amp;rsquo;s binary. Somehow this was
incorrect in the App Store, so some people may have bought that app and found
that it did not work despite them having what was listed as a compatible system.&lt;/p&gt;
&lt;p&gt;If you bought Dice Pass for OS X 10.9 and are unable to run it, I have two
possible solutions for you:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Upgrade your operating system to at least 10.10.&lt;/li&gt;
&lt;li&gt;Ask Apple for a refund since it was their error that caused you to buy an app
that you cannot run.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;I have updated the app in the App Store changing nothing but the version number
and it is now showing the correct minimum system requirement. My apologies if
you have been inconvenienced by this error.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Learning Swift - Sets</title>
<link>https://troz.net/post/2016/learning-swift-sets/</link>
<pubDate>Sat, 28 May 2016 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2016/learning-swift-sets/</guid>
<description>&lt;p&gt;Sets are the forgotten collection type in many languages, including Swift. I
think most developers use Arrays without really considering the advantages of
using a Set but they have some amazingly useful features that should make them a
part of any progammer&amp;rsquo;s toolkit.&lt;/p&gt;
&lt;p&gt;If you want to follow along with a playground, you can download it &lt;a href=&#34;https://github.com/trozware/sets&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&#34;what-is-a-set&#34;&gt;What is a Set?&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;A Set is an un-ordered collection of unique items.&lt;/strong&gt; That&amp;rsquo;s it - nothing more
than that. So it is very similar to an Array, but it is not indexed like an
Array and it cannot contain more than one of each entry.&lt;/p&gt;
&lt;h2 id=&#34;creating-a-set&#34;&gt;Creating a Set&lt;/h2&gt;
&lt;p&gt;Creating a Set is as easy as creating an Array:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; myArray = [&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;dog&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;cat&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;hamster&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;dog&amp;#34;&lt;/span&gt;]
&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; mySet: Set = [&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;dog&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;cat&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;hamster&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;dog&amp;#34;&lt;/span&gt;]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;If you are running these commands in a playground, notice that the differences
between the 2 results:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;dog&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;cat&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;hamster&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;dog&amp;#34;&lt;/span&gt;]    &lt;span style=&#34;color:#75715e&#34;&gt;// myArray&lt;/span&gt;
{&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;hamster&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;cat&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;dog&amp;#34;&lt;/span&gt;}           &lt;span style=&#34;color:#75715e&#34;&gt;// mySet&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;The Array is shown wrapped in square brackets, the Set is shown wrapped in
curly braces. This is just a visual clue and doesn&amp;rsquo;t really mean anything.
You cannot initialize a set using curly braces.&lt;/li&gt;
&lt;li&gt;All the supplied elements of the Array are listed, but the Set has removed
the duplicate &amp;ldquo;dog&amp;rdquo; element. This did not cause an error or warning, it just
happened quietly.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;When initializing a Set, you must add &lt;code&gt;: Set&lt;/code&gt; to distinguish it from an array
initialization. In the example above, I did not specify the data type of the
elements in the Set as the Swift compiler was able to infer this from the
contents. But if initializing an empty array, the data type must be specified.
To check how to do this, I option-clicked on &lt;code&gt;mySet&lt;/code&gt; to see what the Swift
compiler thought it was.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/set_types.png&#34; alt=&#34;Sets&#34;&gt;&lt;/p&gt;
&lt;p&gt;So mySet is actually &lt;code&gt;Set&amp;lt;String&amp;gt;&lt;/code&gt;. This means that to create an empty Set, you
need to use something like this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; emptySetOfStrings: Set&amp;lt;String&amp;gt; = [] &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt;
emptySetOfInts: Set&amp;lt;Int&amp;gt; = []
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;adding-and-removing-elements&#34;&gt;Adding and removing elements&lt;/h2&gt;
&lt;p&gt;If you have been using an Array to store unique values, then you have probably
written code like this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt;myArray.contains(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;cat&amp;#34;&lt;/span&gt;) {
  myArray.append(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;cat&amp;#34;&lt;/span&gt;)
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;With Sets, you don&amp;rsquo;t have to care. Just use &lt;code&gt;insert()&lt;/code&gt; and let the Set work out
whether to add the item or not.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;mySet.insert(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;goldfish&amp;#34;&lt;/span&gt;)
&lt;span style=&#34;color:#75715e&#34;&gt;// goldfish added: {&amp;#34;hamster&amp;#34;, &amp;#34;cat&amp;#34;, &amp;#34;dog&amp;#34;, &amp;#34;goldfish&amp;#34;}&lt;/span&gt;
mySet.insert(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;dog&amp;#34;&lt;/span&gt;)
&lt;span style=&#34;color:#75715e&#34;&gt;// dog already there: {&amp;#34;hamster&amp;#34;, &amp;#34;cat&amp;#34;, &amp;#34;dog&amp;#34;, &amp;#34;goldfish&amp;#34;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Removing elements is also easier than in Arrays. For an Array, you first have to
find the index of the element and remove it by index:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// myArray.remove(&amp;#34;hamster&amp;#34;) // will not compile&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; index = myArray.index(of: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;hamster&amp;#34;&lt;/span&gt;) {
  myArray.remove(at: index)
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;But in a Set, you can remove any element easily and trying to remove an element
that doesn&amp;rsquo;t exist will fail without an error.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;mySet.remove(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;hamster&amp;#34;&lt;/span&gt;)   &lt;span style=&#34;color:#75715e&#34;&gt;// returns &amp;#34;hamster&amp;#34;&lt;/span&gt;
mySet.remove(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;canary&amp;#34;&lt;/span&gt;)    &lt;span style=&#34;color:#75715e&#34;&gt;// returns nil&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;converting-between-sets-and-arrays&#34;&gt;Converting between Sets and Arrays&lt;/h2&gt;
&lt;p&gt;Sometimes you need to be able to switch between the two. My most recent example
was when I wanted to store data from a Set in a plist. Sets are not property
list types but Arrays are, so I converted the Set to an Array before storing it
in the plist. When reading the data in from the plist, I converted it back to a
Set.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; myArrayAsSet = Set(myArray)
&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; mySetAsArray = Array(mySet)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;One useful side-effect of these easy conversions is the ability to &amp;lsquo;unique&amp;rsquo; an
Array in a single line. This may be inefficient for large arrays, but works very
well for small ones. Just be careful if the order of the elements is important
as you cannot guarantee the order of elements in a Set.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; myArrayUniqued = Array(Set(myArray))
&lt;span style=&#34;color:#75715e&#34;&gt;// [&amp;#34;cat&amp;#34;, &amp;#34;dog&amp;#34;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;iterating-over-elements-in-a-set&#34;&gt;Iterating over elements in a Set&lt;/h2&gt;
&lt;p&gt;As with an Array, you can use a &lt;code&gt;for element in set&lt;/code&gt; structure, or you can use
&lt;code&gt;enumerated()&lt;/code&gt;. But you cannot subscript a Set.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; animal &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt; mySet {
  print(animal)
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; (index, animal) &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt; mySet.enumerated() {
  print(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;\(&lt;/span&gt;index&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt; = &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;\(&lt;/span&gt;animal&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;)
}

&lt;span style=&#34;color:#75715e&#34;&gt;// will not compile&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;// for index in 0 ..&amp;lt; mySet.count {&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;//   print(&amp;#34;\(index) = \(mySet[index])&amp;#34;)&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;// }&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;where-sets-get-really-interesting&#34;&gt;Where Sets get really interesting&lt;/h2&gt;
&lt;p&gt;Remember in school when you learnt about Venn diagrams with pretty interlocking
circles? Sets can do the same things, although you will have to do your own
pretty drawings :-)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; set1: Set = [&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;dog&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;cat&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;pig&amp;#34;&lt;/span&gt;]
&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; set2: Set = [&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;cow&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;horse&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;pig&amp;#34;&lt;/span&gt;]

&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; intersect = set1.intersection(set2)
&lt;span style=&#34;color:#75715e&#34;&gt;// {&amp;#34;pig&amp;#34;}&lt;/span&gt;

&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; subtract = set1.subtracting(set2)
&lt;span style=&#34;color:#75715e&#34;&gt;// {&amp;#34;cat&amp;#34;, &amp;#34;dog&amp;#34;}&lt;/span&gt;

&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; union = set1.union(set2)
&lt;span style=&#34;color:#75715e&#34;&gt;// {&amp;#34;pig&amp;#34;, &amp;#34;cat&amp;#34;, &amp;#34;dog&amp;#34;, &amp;#34;cow&amp;#34; &amp;#34;horse&amp;#34;}&lt;/span&gt;

&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; xor = set1.symmetricDifference(set2)
&lt;span style=&#34;color:#75715e&#34;&gt;// {&amp;#34;cat&amp;#34;, &amp;#34;dog&amp;#34;, &amp;#34;cow&amp;#34;, &amp;#34;horse&amp;#34;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;In the code example above, we have two Sets of animals, with one animal in
common.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;intersection()&lt;/code&gt; lists the elements in common.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;subtracting()&lt;/code&gt; lists the elements in one Set after removing all elements that
are in the other.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;union()&lt;/code&gt; joins all the elements without duplicates.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;symmetricDifference()&lt;/code&gt; lists the elements that are in one or other of the
Sets but not in both. (Swift 3 renamed this function from &lt;code&gt;exclusiveOr()&lt;/code&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Here is my best attempt at a pretty drawing to show how these go together:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/sets_1.png&#34; alt=&#34;Sets&#34;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;The next fun trick is working out sub-sets, super-sets and disjoint sets.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; set1: Set = [&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;dog&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;cat&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;pig&amp;#34;&lt;/span&gt;]
&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; set2: Set = [&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;cow&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;horse&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;pig&amp;#34;&lt;/span&gt;]

&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; smallSet: Set = [&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;pig&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;cow&amp;#34;&lt;/span&gt;]

smallSet.isSubset(of: set1)   &lt;span style=&#34;color:#75715e&#34;&gt;// false&lt;/span&gt;
smallSet.isSubset(of: set2)   &lt;span style=&#34;color:#75715e&#34;&gt;// true&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;smallSet&lt;/code&gt; is &lt;strong&gt;not&lt;/strong&gt; a subset of &lt;code&gt;set1&lt;/code&gt; because it contains an element that is
not in &lt;code&gt;set1&lt;/code&gt;. &lt;code&gt;smallSet&lt;/code&gt; &lt;strong&gt;is&lt;/strong&gt; a subset of &lt;code&gt;set2&lt;/code&gt; because every element in
&lt;code&gt;smallSet&lt;/code&gt; is also in &lt;code&gt;set2&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/sets_2.png&#34; alt=&#34;Sets&#34;&gt;&lt;/p&gt;
&lt;p&gt;If you want to get technical, a Set should not be considered a subset of an
identical Set. The default &lt;code&gt;isSubset(of:)&lt;/code&gt; allows this, but you can use
&lt;code&gt;isStrictSubset(of:)&lt;/code&gt; if you prefer.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;set1.isSubset(of: set1)         &lt;span style=&#34;color:#75715e&#34;&gt;// true&lt;/span&gt;
set1.isStrictSubset(of: set1)   &lt;span style=&#34;color:#75715e&#34;&gt;// false&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Superset works just the same but in reverse so the diagram above explains it
too:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; set1: Set = [&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;dog&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;cat&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;pig&amp;#34;&lt;/span&gt;]
&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; set2: Set = [&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;cow&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;horse&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;pig&amp;#34;&lt;/span&gt;]

&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; smallSet: Set = [&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;pig&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;cow&amp;#34;&lt;/span&gt;]

set1.isSuperset(of: smallSet)       &lt;span style=&#34;color:#75715e&#34;&gt;// false&lt;/span&gt;
set2.isSuperset(of: smallSet)       &lt;span style=&#34;color:#75715e&#34;&gt;// true&lt;/span&gt;

set1.isSuperset(of: set1)           &lt;span style=&#34;color:#75715e&#34;&gt;// true&lt;/span&gt;
set1.isStrictSuperset(of: set1)     &lt;span style=&#34;color:#75715e&#34;&gt;// false&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;set1&lt;/code&gt; is &lt;strong&gt;not&lt;/strong&gt; a superset of &lt;code&gt;smallSet&lt;/code&gt; because it does not contain every
element in &lt;code&gt;smallSet&lt;/code&gt;. &lt;code&gt;set2&lt;/code&gt; &lt;strong&gt;is&lt;/strong&gt; a superset of &lt;code&gt;smallSet&lt;/code&gt; because every
element in &lt;code&gt;smallSet&lt;/code&gt; is also in &lt;code&gt;set2&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;isSuperset(of:)&lt;/code&gt; and &lt;code&gt;isStrictSuperset(of:)&lt;/code&gt; functions allow or reject
identical sets.&lt;/p&gt;
&lt;p&gt;The final comparison tool that might be useful is &lt;code&gt;isDisjoint(with:)&lt;/code&gt; which
returns true only if the two Sets have no elements in common i.e. if there is no
overlap in the circles.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; set1: Set = [&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;dog&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;cat&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;pig&amp;#34;&lt;/span&gt;]
&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; set2: Set = [&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;cow&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;horse&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;pig&amp;#34;&lt;/span&gt;]

&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; otherSet: Set = [&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;duck&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;chicken&amp;#34;&lt;/span&gt;]

set1.isDisjoint(with: set2)       &lt;span style=&#34;color:#75715e&#34;&gt;// false&lt;/span&gt;
set1.isDisjoint(with: otherSet)   &lt;span style=&#34;color:#75715e&#34;&gt;// true&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&amp;ldquo;pig&amp;rdquo; occurs in both &lt;code&gt;set1&lt;/code&gt; and &lt;code&gt;set2&lt;/code&gt; so they are &lt;strong&gt;not&lt;/strong&gt; disjoint. &lt;code&gt;otherSet&lt;/code&gt;
and &lt;code&gt;set1&lt;/code&gt; have no matching entries so they &lt;strong&gt;are&lt;/strong&gt; disjoint.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;when-should-you-use-a-set&#34;&gt;When should you use a Set?&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;If you want the elements to be unique.&lt;/li&gt;
&lt;li&gt;If you want easy methods of comparing the contents of different collections.&lt;/li&gt;
&lt;li&gt;If you want to be able to remove elements easily.&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;when-should-you-not-use-a-set&#34;&gt;When should you not use a Set?&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;If you need the collection to be able to hold multiples of an element.&lt;/li&gt;
&lt;li&gt;If the order of the collection is important.&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;p&gt;For more details on Sets, check out &lt;a href=&#34;http://swiftdoc.org/v2.2/type/Set/&#34;&gt;SwiftDoc.org&lt;/a&gt;.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>19th Hole Golf Scorer 3.1</title>
<link>https://troz.net/post/2016/19th-hole-golf-scorer-3.1/</link>
<pubDate>Sat, 07 May 2016 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2016/19th-hole-golf-scorer-3.1/</guid>
<description>&lt;p&gt;One of the problems with using 19th Hole on the Apple Watch is making the app
show every time you raise your wrist. My solution to this was to go into
Settings (either on my iPhone through the Watch app, or directly on the watch)
and change it to &amp;ldquo;Resume Last Activity&amp;rdquo; on wrist raise. This worked fine but as
I usually prefer the watch face to show on wrist raise, I had to keep setting
and re-setting this which was a pain.&lt;/p&gt;
&lt;p&gt;But last week I noticed the fine print when changing this setting. In this
screen shot from the Watch app on my iPhone, you can see that &amp;ldquo;session-based
apps&amp;rdquo; and &amp;ldquo;some third-party workout apps&amp;rdquo; will over-ride the &amp;ldquo;Show Watch Face&amp;rdquo;
setting.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/WakeScreen.jpg&#34; alt=&#34;Wrist raise settings&#34;&gt;&lt;/p&gt;
&lt;p&gt;I started to research this and found that if an app starts a &amp;ldquo;workout session&amp;rdquo;,
then it will become the active app until the session is ended or some other app
starts a session. So I got to work and added a workout session to the 19th
Hole&amp;rsquo;s Apple Watch app.&lt;/p&gt;
&lt;p&gt;When you start scoring a round on the Apple Watch, you will see this dialog
asking if you would like to start a workout:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/Watch-workout.png&#34; alt=&#34;Start workout dialog&#34;&gt;&lt;/p&gt;
&lt;p&gt;The workout will be stopped automatically when you have scored the last hole.
You can also use a force-press on the scoring screen to turn the workout off or
on at any time.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/Watch_end_workout.png&#34; alt=&#34;Stop workout&#34;&gt;&lt;/p&gt;
&lt;p&gt;This should make the app much more usable as an Apple Watch app, so happy
golfing :-)&lt;/p&gt;
</description>
</item>
    
    <item>
<title>My Year With Apple Watch</title>
<link>https://troz.net/post/2016/my-year-with-apple-watch/</link>
<pubDate>Thu, 28 Apr 2016 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2016/my-year-with-apple-watch/</guid>
<description>&lt;p&gt;As the Apple Watch hits its first birthday, there seems to be in increasing
number of bloggers complaining about it. One (which I refuse to link to) titled
&amp;ldquo;My Year of Hell With the Apple Watch&amp;rdquo;. I think the article has since been
re-published with a slightly less inflammatory title, but really! Did somebody
rivet the watch to his wrist? If it was so awful, why not just stop using it?&lt;/p&gt;
&lt;p&gt;I am a watch nerd and have always loved watches and having one on me. I liked
watches with features and even had a calculator watch at one point although as a
woman with skinny wrists, I found it constantly annoying that watch makers put
all the gadgets into man-sized watches so I was left with the choice of no
features or a watch that looked stupidly large on my wrist.&lt;/p&gt;
&lt;p&gt;A few years ago I stopped wearing a watch. I can&amp;rsquo;t remember now why I did it -
maybe my watch strap broke and it wasn&amp;rsquo;t important enough to get a new one. I
always had my iPhone to give me the time.&lt;/p&gt;
&lt;p&gt;But I ordered three Apple Watches as soon as they were available and myself,
husband and eldest son have been using them ever since.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;here-are-what-i-consider-to-be-the-best-features-of-the-apple-watch&#34;&gt;Here are what I consider to be the best features of the Apple Watch:&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Accuracy&lt;/strong&gt;: It is a fantastically accurate time-piece. Not enough people
give this credit, but we have always been used to clocks and watches that were
inherently inaccurate. Having a device on my wrist that I &lt;strong&gt;know&lt;/strong&gt; to be
perfectly accurate is an amazing thing.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Notifications&lt;/strong&gt;: this takes a bit of work to get right and with every new
app, you need to assess whether to have its notifications appear on your
wrist. But the wonderful thing is knowing that you haven&amp;rsquo;t missed anything and
being able to glance at your wrist when a notification arrives and tell -
unobtrusively - whether this is something that needs immediate attention. And
the ability to respond instantly to messages and emails with just a couple of
taps is amazingly useful.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Customisable watch faces&lt;/strong&gt;: depending on what I am doing, I need quick
access to different pieces of information. When travelling, I can set up a
watch face with multiple time zones. When working, I need a timer. When on
holiday, I prefer one of the more relaxing but less detailed watch faces.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Activity&lt;/strong&gt;: I am not the world&amp;rsquo;s most active person so I find the three
rings to be a really good motivator. In fact I just had to stop typing and run
up &amp;amp; down the stairs to get another notch to the blue ring. The goals are not
out of my reach, so I like trying to fill in the rings every day.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Voice commands&lt;/strong&gt;: being able to send a text message completely by voice when
driving or when my hands are busy is fantastic. Starting a timer, doing unit
conversions and navigating are things I do frequently by voice.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Excellent battery life&lt;/strong&gt;: I started off having the battery life complication
always visible, but it very quickly became apparent that this was unnecessary.
Right now I have been wearing the watch for about 11 hours and the battery is
at 74%. And charging is so fast that if I did run it down, a 30 minute charge
would get me through most of a day.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;The Milanese Loop&lt;/strong&gt;: best watch band ever.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;There are other good features, but I think those are my favourites.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;so-what-dont-i-like&#34;&gt;So what don&amp;rsquo;t I like?&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Third-party apps are still a problem&lt;/strong&gt;. I know. I have published three
myself and sometimes they just doesn&amp;rsquo;t happen. However this appears to vary a
lot. Some people say they can never get apps to run, even Apple&amp;rsquo;s apps. Others
say they work but with a long delay. My watch seems to be better than the
average but it is still an issue.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Sketches don&amp;rsquo;t always get through or can take ages&lt;/strong&gt;. We thought it would be
a lot of fun to send each other little sketches and so it is, despite our
total lack of any artistic skills. But it loses a bit of impact when you have
to send a message 20 minutes later asking if the sketch has arrived.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;The exercise tracking seems to be a bit erratic&lt;/strong&gt;. If my husband and I go
for a walk together, he comes back with 25 minutes of exercise and I only have
7 minutes. Am I not going fast enough? Are my arms not swinging enough? If it
is very hot and my wrist gets sweaty, I seem to get better numbers - is this
because my heart is beating faster or the capillaries closer to the surface
have expanded? Or is the watch picking up a better signal that way? Either
way, I still like the activity circles, but the green ring frustrates me a
bit.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;and-what-would-i-like-to-see-in-watch-2--watchos-3&#34;&gt;And what would I like to see in Watch 2 / watchOS 3?&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Some sort of always-on display of the time.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;A speaker to allow Siri to talk back to me and to play audio.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;FaceTime audio calls.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Better support for third-party apps - perhaps open up some private APIs?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Allow developers to create watch faces or apps that told the time.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Allow developers to say that an app should stay as the frontmost app once
opened.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;will-i-buy-watch-2&#34;&gt;Will I buy Watch 2?&lt;/h2&gt;
&lt;p&gt;At this stage I would say no. We bought the bottom-of-the-line Sport models
because with version 1.0 of anything, you don&amp;rsquo;t want to spend so much that
upgrading is ruled out. However these watches are still going great and a lot of
the improvements I am looking for will be in software not hardware.&lt;/p&gt;
&lt;p&gt;But 14 months ago, I was waiting for Apple to announce the iWatch as we all
thought it would be called, and saying that I didn&amp;rsquo;t think I would get one. The
feature list convinced me and I have been delighted with it. So if Watch 2 comes
up with some killer feature that matters to me, then I might have to
re-consider&amp;hellip;&lt;/p&gt;
</description>
</item>
    
    <item>
<title>How To Confuse TestFlight</title>
<link>https://troz.net/post/2016/how-to-confuse-testflight/</link>
<pubDate>Sun, 24 Apr 2016 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2016/how-to-confuse-testflight/</guid>
<description>&lt;p&gt;I ran into an unusual problem when testing my latest app: &amp;ldquo;&lt;a href=&#34;https://troz.net/what-is-my-speed/&#34;&gt;What Is My
Speed?&lt;/a&gt;&amp;rdquo;. It is now available from the &lt;a href=&#34;https://itunes.apple.com/app/what-is-my-speed/id1091394524&#34;&gt;iTunes App Store&lt;/a&gt;, but getting
there was a struggle.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;#tldr&#34;&gt;TL;DR&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Xcode is terrible at renaming projects, so it is a really good idea to have
worked out your app&amp;rsquo;s name before starting. I would even recommend creating an
app ID in your Apple Developer account and registering the app name in iTunes
Connect. Only once you get to iTunes Connect will the name be checked for
uniqueness. Searching the App Stores is not enough as it does not cover
un-released apps or apps that are not available in your country.&lt;/p&gt;
&lt;p&gt;So I set up my app. I was hoping for &amp;ldquo;What&amp;rsquo;s My Speed?&amp;rdquo; but was happy with &amp;ldquo;What
Is My Speed?&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;Next step was to create the project in Xcode which I did using the app name and
manually entering the bundle identifier that I had registered at Apple
Developer. Xcode accepted the name without any warnings and created the default
targets using that name.&lt;/p&gt;
&lt;p&gt;In the default unit testing file, the module was defined like this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt; @testable &lt;span style=&#34;color:#66d9ef&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;What&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Is_My_Speed&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;which made me think that Xcode was quite happy to have parsed the app name as
required to replace any unwanted characters to suit.&lt;/p&gt;
&lt;p&gt;The app was built, passed all unit tests, profiled, analyzed, tested on real
devices as well as the simulators and uploaded to TestFlight.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;BARRRPPPP!&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/TestFlight_error.png&#34; alt=&#34;This app cannot be installed&#34;&gt;&lt;/p&gt;
&lt;p&gt;What?&lt;/p&gt;
&lt;p&gt;&lt;em&gt;(I forgot to take a screenshot but found a similar one online. Thanks &lt;a href=&#34;https://www.simpletechs.net/apps/easy-fix-for-testflight-problem-after-restoring-from-backup/&#34;&gt;Simple
Techs&lt;/a&gt;)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;I have had experience with TestFlight&amp;rsquo;s oddities in the past, so I incremented
the build number and tried again, thinking that maybe there had been a
processing issue. Same result.&lt;/p&gt;
&lt;p&gt;This started a very frustrating 24 hours as I ran through all the possibilities
I could think of or find suggested on the net. Due to disastrous Australian
internet speeds, especially uploads, each attempt took from 40 - 120 minutes.
About 5 minutes to implement the next idea, 25 minutes upload time, then the
rest waiting for Apple to process the app so I could try again.&lt;/p&gt;
&lt;p&gt;Here is what I tried:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Uploaded a fresh build.&lt;/li&gt;
&lt;li&gt;Removed Bitcode.&lt;/li&gt;
&lt;li&gt;Fixed the code signing identity which was set to iOS Developer for some
reason.&lt;/li&gt;
&lt;li&gt;Manually specified the provisioning profiles for all three components (iPhone
app, WatchKit app, WatchKit Extension).&lt;/li&gt;
&lt;li&gt;Manually selected the code signing identity for the provisioning profiles.&lt;/li&gt;
&lt;li&gt;Uploaded using Application Loader instead of Xcode.&lt;/li&gt;
&lt;li&gt;Removed third-party framework.&lt;/li&gt;
&lt;li&gt;Removed WatchKit app.&lt;/li&gt;
&lt;li&gt;Revoked my distribution profile, re-created it and updated all provisioning
profiles.&lt;/li&gt;
&lt;li&gt;Created a completely blank project with same app name and bundle identifier.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;As you can see from this list, I thought it was a code signing or profile error.
Using &lt;a href=&#34;https://itunes.apple.com/app/apple-configurator-2/id1037126344&#34;&gt;Apple Configurator 2&lt;/a&gt; (the modern version of iPhone Configuration
Utility), I was able to get the logs from my iPhone and entries like the
following seemed to confirm this:&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;&lt;code class=&#34;language-Error&#34; data-lang=&#34;Error&#34;&gt;installd.staging/temp.2LWJ2h/extracted/Payload/What Is My Speed?.app : 0xe8008017 (A signed resource has been added, modified, or deleted.)}```
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;p&gt;But when I got to the stage of a completely blank app still failing, I suddenly
thought of the question mark. With the benefit of my preamble to this post, you
all probably got there long before I did, but I got there in the end.&lt;/p&gt;
&lt;p&gt;The solution was to remove the question mark from the names of the targets in
Xcode. I had to fix up the module names in my unit testing files, but apart from
that, there were no changes. After this I was able to upload the complete app to
TestFlight and install it on my iPhone.&lt;/p&gt;
&lt;p&gt;It is possible that it was the Product Names that were the issue, rather than
the target name as in Build Settings, Product Name is set to be &lt;code&gt;$(TARGET_NAME)&lt;/code&gt;
by default but I didn&amp;rsquo;t test that. Maybe next time&amp;hellip;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;TL;DR&lt;!-- raw HTML omitted --&gt; Do not put any unusual characters in your target names.
Alphanumerics and spaces are OK, but I am not sure about anything else.&lt;/p&gt;</description>
</item>
    
    <item>
<title>What Is My Speed?</title>
<link>https://troz.net/what-is-my-speed/</link>
<pubDate>Sun, 17 Apr 2016 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/what-is-my-speed/</guid>
<description>&lt;!-- raw HTML omitted --&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;&amp;ldquo;What Is My Speed?&amp;rdquo; is available now from the &lt;a href=&#34;https://itunes.apple.com/app/what-is-my-speed/id1091394524&#34;&gt;iTunes App Store&lt;/a&gt; for iPhone
and Apple Watch.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/speed_1.png&#34; alt=&#34;What Is My Speed? - iPhone&#34;&gt;&lt;/p&gt;
&lt;p&gt;If you read my recent blog post on &lt;a href=&#34;https://troz.net/post/2016-04-07-road-trip-apps/&#34;&gt;Road Trip Apps&lt;/a&gt; you will have realised
that I was working on an app to fill a gap that I discovered in our road trip
app arsenal. So here it is: &amp;ldquo;What Is My Speed?&amp;rdquo; for iPhone.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Track your speed on your iPhone while driving, bicycling, running
or walking. See your course and altitude at all times.&lt;/p&gt;
&lt;p&gt;Optionally set a speed limit and get audible warnings on your iPhone when you
exceed it. Reduce the speed limit to zero or extend it over the maximum to turn
off speed limit warnings.&lt;/p&gt;
&lt;p&gt;Designed for easy viewing in all light conditions and with very accessible
swiping to change the speed limit quickly and easily.&lt;/p&gt;
&lt;p&gt;If you want more detailed information, tap the info button to see a complete
list of available data about your current location. &lt;em&gt;Altitude and floor data may
not always be available but will be displayed whenever possible.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/speed_2.png&#34; alt=&#34;What Is My Speed? details - iPhone&#34;&gt;&lt;/p&gt;
&lt;p&gt;Your current iPhone settings are used to set the default units for speed and
altitude, but these are easily changed after tapping the info button.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;To adjust the speed limit, swipe from side to side. The speed limit indicator
will expand for easier viewing and the speed limit will increase or decrease.
Tap again to shrink the speed limit indicator or leave it for a few seconds and
it will shrink automatically.&lt;/p&gt;
&lt;p&gt;Tap the &amp;ldquo;?&amp;rdquo; button on the main screen to be reminded of the available swipes.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/speed_3.png&#34; alt=&#34;What Is My Speed? adjust speed limit - iPhone&#34;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;Location permissions:&lt;/strong&gt; On startup, the app will request permission to access
your location. This is how the speed, course and altitude data is gathered so is
essential for the app to operate. Your location will only ever be tracked when
the app is the current foreground app.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Road Trip Apps</title>
<link>https://troz.net/post/2016/road-trip-apps/</link>
<pubDate>Thu, 07 Apr 2016 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2016/road-trip-apps/</guid>
<description>&lt;p&gt;Over the past few months, we have done two long road trips: one approximately
4,000 km and the other about 1,800 km. These gave us the chance to try out
various apps for navigation and travel information. We live in Queensland,
Australia and some of these comments may be country-specific.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;navigation&#34;&gt;Navigation&lt;/h2&gt;
&lt;p&gt;The basic navigation came down to three apps:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.apple.com/ios/maps/&#34;&gt;Apple Maps&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://itunes.apple.com/app/google-maps-real-time-navigation/id585027354&#34;&gt;Google Maps&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://itunes.apple.com/au/app/metroview-gps-navigation/id370753892&#34;&gt;Metroview&lt;/a&gt; (Australia and New Zealand only)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Each has their strengths and weaknesses:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Apple Maps is by far the most beautiful and easy to read. It integrates
perfectly with Contacts (as you would expect). Turn-by-turn directions were
mostly excellent. The biggest downside is that it does not allow you to
specify a route avoiding tolls.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Google Maps allows you to plot a route avoiding tolls&amp;hellip; if you can find the
setting. Its traffic reporting is by far the best and it would offer suggested
changes of routes during the trip to get around traffic. The interface is
confusing at times. Turn-by-turn directions were good, although I would have
preferred an Australian voice option.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Metroview has all the maps downloaded which saves on data connection costs and
handles bad connectivity areas better. Its best feature is notification of
speed limits and alerts if you go over the limit, although it gets confused
when on over or under-passes. Another very useful feature is the display of
lanes when approaching highway exits, so you could tell which lane to be in.
Apparently the voice guidance is now more natural but we didn&amp;rsquo;t try this. The
display is messy and cluttered compared to the others.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We ended up with the following sequence:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Apple Maps for the bulk of the trip.&lt;/li&gt;
&lt;li&gt;Google Maps &amp;amp; Metroview (on 2 separate iPhones) in the metropolitan areas and
when about to take a highway exit.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Even then it was amusing to see the apps panic when you took a new road and the
apps assumed you had left the road and were heading through the bush! And at one
point there was a large and official sign saying &amp;ldquo;Ignore GPS - do not take this
turn&amp;rdquo; and sure enough, both Apple Maps and Google Maps wanted us to turn down a
little country lane instead of keeping to the highway.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;speed-display&#34;&gt;Speed Display:&lt;/h2&gt;
&lt;p&gt;Apart from the basic navigation apps, we tried a couple of speed display apps.
There are a lot of HUD speed apps out there that project the data on the the
windscreen but they had two problems:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;They only worked when it was dark. As soon as the sun got up, they became
invisible.&lt;/li&gt;
&lt;li&gt;They required you to place your iPhone flat on the dashboard so even if they
had worked during the day, the iPhone would have got far too hot and
shut-down. (We have a mount that holds our iPhones in front of the air vents
to avoid this over-heating problem. Any mount that sticks to the windscreen
itself leaves the iPhone too exposed to the sun.)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;One we stuck with (in non-HUD mode) was &lt;a href=&#34;https://itunes.apple.com/app/speedometer-+-hud-digital/id375318117&#34;&gt;Speedometer + HUD&lt;/a&gt;. This had a clear
display with a few flaws:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;When moving from 99 kph to 100 kph, the display was not re-arranged for 3
digits. Moving from 101 down to 100 fixed it, but as 100 kph is the standard
speed limit, this was a frequent annoyance.&lt;/li&gt;
&lt;li&gt;Adjusting the speed limit was too fiddly and difficult even for the passenger.
It would have been impossible for the driver.&lt;/li&gt;
&lt;li&gt;It only works in landscape mode which does not always suit the car mounts - we
ended up perching the 2nd iPhone on the unused ashtray.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We also tried &lt;a href=&#34;https://itunes.apple.com/app/talking-hud-voice-prompt-speedometer/id873194479&#34;&gt;Talking HUD&lt;/a&gt; but didn&amp;rsquo;t like it. It worked solely in HUD mode,
so was only useful at night or very early morning. It had voice prompts to tell
you when to change gear but in an automatic car, they were just a distraction
and it was not obvious how to turn them off.&lt;/p&gt;
&lt;p&gt;But overall, we found having a speed display app as well as a navigation app to
be the best combination. The audible alerts when you went over speed were very
useful when over-taking or getting up to speed as you could get the information
without having to take your eyes off the road.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;future-app-plans&#34;&gt;Future App Plans:&lt;/h2&gt;
&lt;p&gt;Having determined that a speed display app is really useful, but not finding one
that suited us perfectly, the obvious next step was to design my own. I wanted
it to have the following features:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;clean display, visible in all light conditions&lt;/li&gt;
&lt;li&gt;easily settable speed limit&lt;/li&gt;
&lt;li&gt;audible and visual over-speed warnings&lt;/li&gt;
&lt;li&gt;no HUD mode&lt;/li&gt;
&lt;li&gt;Apple Watch component for when you only had a single iPhone and it was
navigating but you still wanted a speed display&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;So watch this space for further news of my up-coming app&amp;hellip;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;update&#34;&gt;Update&lt;/h2&gt;
&lt;p&gt;&amp;ldquo;&lt;a href=&#34;https://troz.net/what-is-my-speed/&#34;&gt;What Is My Speed?&lt;/a&gt;&amp;rdquo; is available now from the &lt;a href=&#34;https://itunes.apple.com/app/what-is-my-speed/id1091394524&#34;&gt;iTunes App Store&lt;/a&gt; for
iPhone and Apple Watch.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Structs vs Classes</title>
<link>https://troz.net/post/2016/structs-vs-classes/</link>
<pubDate>Wed, 30 Mar 2016 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2016/structs-vs-classes/</guid>
<description>&lt;p&gt;One of the big debates among Swift developers is when to use &lt;code&gt;structs&lt;/code&gt; and when
to use &lt;code&gt;classes&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Classes are the building blocks of object-oriented programming
but structs as provided by Swift are newly powerful. Structs have been around in
C-based languages for a long time, but Swift has made them more powerful and
given them more features so that they are almost indistinguishable from classes.
So what are the differences and which one should you use?&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;where-they-are-the-same&#34;&gt;Where they are the same?&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;both can define initializers&lt;/li&gt;
&lt;li&gt;both can define properties&lt;/li&gt;
&lt;li&gt;both can define methods&lt;/li&gt;
&lt;li&gt;both can conform to protocols&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;where-they-are-different&#34;&gt;Where they are different?&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;classes can inherit from other classes&lt;/li&gt;
&lt;li&gt;structs cannot inherit from other structs&lt;/li&gt;
&lt;li&gt;classes are reference types&lt;/li&gt;
&lt;li&gt;structs are value types&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;The reference type vs value type difference is where things really get
interesting. Have a look at this example of a class with a single property:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PersonClass&lt;/span&gt; {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; name: String

    &lt;span style=&#34;color:#66d9ef&#34;&gt;init&lt;/span&gt;(name: String) {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;self&lt;/span&gt;.name = name
    }
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; personA = PersonClass(name: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Woody&amp;#34;&lt;/span&gt;)
personA.name &lt;span style=&#34;color:#75715e&#34;&gt;// Woody&lt;/span&gt;

&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; personB = personA
personB.name = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Buzz&amp;#34;&lt;/span&gt;
personB.name &lt;span style=&#34;color:#75715e&#34;&gt;// Buzz&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;That looks like standard stuff, but what do you think &lt;code&gt;personA&lt;/code&gt;&amp;rsquo;s name is now?
If you guessed &amp;ldquo;Buzz&amp;rdquo; then you win a prize! &lt;em&gt;(No, not a real prize - pat
yourself on the back.)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;This is because when we created the &lt;code&gt;personB&lt;/code&gt; variable and assigned &lt;code&gt;personA&lt;/code&gt; to
it, we did not assign the &lt;strong&gt;VALUE&lt;/strong&gt; of &lt;code&gt;personA&lt;/code&gt;, we assigned a &lt;strong&gt;REFERENCE&lt;/strong&gt; to
&lt;code&gt;personA&lt;/code&gt; - actually the address in memory of &lt;code&gt;personA&lt;/code&gt; rather than the data
inside.&lt;/p&gt;
&lt;p&gt;So now we have two objects and they are both looking at the same spot in memory
for their data. This means that changing the name of &lt;code&gt;personB&lt;/code&gt; changed the name
of &lt;code&gt;personA&lt;/code&gt; as well.&lt;/p&gt;
&lt;p&gt;Let&amp;rsquo;s try the same thing with a struct:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PersonStruct&lt;/span&gt; {
  &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; name: String
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; personC = PersonStruct(name: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Rex&amp;#34;&lt;/span&gt;)
personC.name &lt;span style=&#34;color:#75715e&#34;&gt;// Rex&lt;/span&gt;

&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; personD = personC
personD.name = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Hamm&amp;#34;&lt;/span&gt;
personD.name &lt;span style=&#34;color:#75715e&#34;&gt;// Hamm&lt;/span&gt;

personC.name &lt;span style=&#34;color:#75715e&#34;&gt;// Rex&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This time, because we are using a struct, when we assign &lt;code&gt;personC&lt;/code&gt; to the new
&lt;code&gt;personD&lt;/code&gt; variable, we are actually making a copy of &lt;code&gt;personC&lt;/code&gt; and setting the
values of &lt;code&gt;personD&lt;/code&gt; to this new copy. So now we can change &lt;code&gt;personD&lt;/code&gt; without
messing with &lt;code&gt;personC&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Note that I did not have a define an &lt;code&gt;init&lt;/code&gt; for the struct because it creates
one automatically. You can still add one yourself if you want to do anything
different, but you do not have to.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;At first glance, you may think that you should now use structs all the time to
avoid these unintended consequences, but it isn&amp;rsquo;t quite as simple as that.
Sometimes a class is still the best thing to use.&lt;/p&gt;
&lt;p&gt;The inheritance capabilities of classes can make your decision simple: if you
need to create a button and want to start by sub-classing UIButton or NSButton,
then your button must be a class, not a struct. This will apply to most user
interface objects.&lt;/p&gt;
&lt;p&gt;Apple really wants us to use structs and in the Swift standard libraries, a very
high percentage of the objects are structs. But structs are especially well
suited to a certain subset of objects.&lt;/p&gt;
&lt;p&gt;The best explanation that I have found of when to use a struct is the &lt;a href=&#34;http://faq.sealedabstract.com/structs_or_classes/#an-alternative-hypothesis&#34;&gt;Jeff Trick&lt;/a&gt;. Reduced down, the rule is:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;If you can overload == to compare two instances of your object, use a struct.
&lt;!-- raw HTML omitted --&gt; If this doesn&amp;rsquo;t make sense, use a class.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;So use structs for your things: Person, Shape, Brick, Cat. &lt;!-- raw HTML omitted --&gt; Use classes for
everything else.&lt;/p&gt;
&lt;p&gt;I would add one caveat: don&amp;rsquo;t fight the compiler. If using a struct is giving
lots of errors and warnings, change to a class.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;A logical consequence of this is that all structs should conform to the
&lt;a href=&#34;http://swiftdoc.org/v2.2/protocol/Equatable/&#34;&gt;Equatable&lt;/a&gt; protocol.&lt;/p&gt;
&lt;p&gt;Extending &lt;code&gt;PersonStruct&lt;/code&gt; to make it conform just requires a single function:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;extension&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PersonStruct&lt;/span&gt;: Equatable {
  &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; == (lhs: PersonStruct, rhs: PersonStruct) -&amp;gt; Bool {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; lhs.name == rhs.name
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Since this struct only has one property, we can say that two instances of this
struct are equal if the names are equal.&lt;/p&gt;
&lt;p&gt;Testing this, we can see:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; personC = PersonStruct(name: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Rex&amp;#34;&lt;/span&gt;)
&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; personD = personC
personD.name = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Hamm&amp;#34;&lt;/span&gt;

personC == personD &lt;span style=&#34;color:#75715e&#34;&gt;// false&lt;/span&gt;

&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; personE = PersonStruct(name: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Rex&amp;#34;&lt;/span&gt;)
personC == personE &lt;span style=&#34;color:#75715e&#34;&gt;// true&lt;/span&gt;
personC &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; personE &lt;span style=&#34;color:#75715e&#34;&gt;// false&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Conveniently, providing an &lt;code&gt;==&lt;/code&gt; function effectively gives us a &lt;code&gt;!=&lt;/code&gt; function
for free as you can see from the last example.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;There is one final point I would like to make about struct and that concerns
mutating functions. Look at what happens if we include a function that changes
the &lt;code&gt;name&lt;/code&gt; property in the struct:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/mutating.png&#34; alt=&#34;Mutating error&#34;&gt;&lt;/p&gt;
&lt;p&gt;Fix-it is very helpfully pointing out that the method needs to be marked as
&lt;code&gt;mutating&lt;/code&gt; for this to work and is showing where this should go. Accepting the
suggestion will get rid of the error and then the name can be changed using this
method.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PersonStruct&lt;/span&gt;: Equatable {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; name: String

    &lt;span style=&#34;color:#66d9ef&#34;&gt;mutating&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;changeName&lt;/span&gt;(to newName: String) {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt;newName.isEmpty {
            name = newName
        }
    }
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; personC = PersonStruct(name: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Woody&amp;#34;&lt;/span&gt;)
personC.name &lt;span style=&#34;color:#75715e&#34;&gt;// Woody&lt;/span&gt;

personC.changeName(to: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Sid&amp;#34;&lt;/span&gt;)
personC.name &lt;span style=&#34;color:#75715e&#34;&gt;// Sid&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;There is no problem about using &lt;code&gt;mutating&lt;/code&gt; and it will not have the unintended
consequences of using classes. Despite the scary name, a mutating function
actually returns a new copy of the struct.&lt;/p&gt;
&lt;p&gt;The problem arises if you have many nested structs and the mutating has to
spread through the list. So don&amp;rsquo;t nest your structs - at least not more than two
deep!&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Learning Swift - Optionals</title>
<link>https://troz.net/post/2016/learning-swift-optionals/</link>
<pubDate>Sat, 12 Mar 2016 14:24:00 +1000</pubDate>
      
      <guid>https://troz.net/post/2016/learning-swift-optionals/</guid>
<description>&lt;p&gt;Today I plan to discuss optionals since they were a feature of Swift that I
found difficult to grasp at first.&lt;/p&gt;
&lt;h2 id=&#34;what-is-an-optional-in-swift&#34;&gt;What is an optional in Swift?&lt;/h2&gt;
&lt;p&gt;An optional is a variable of a specified type that can also be nil.&lt;/p&gt;
&lt;h2 id=&#34;why-does-this-matter&#34;&gt;Why does this matter?&lt;/h2&gt;
&lt;p&gt;In Objective-C, any object type could be nil. If you declared a variable like
this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-objectivec&#34; data-lang=&#34;objectivec&#34;&gt;NSString &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;myString;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;then &lt;code&gt;myString&lt;/code&gt; was set to nil by default.&lt;/p&gt;
&lt;p&gt;But this could cause issues, especially as Objective-C does not complain if you
send a message to nil. This could lead to bugs that were very difficult to track
down.&lt;/p&gt;
&lt;p&gt;The other big use for nil is when returning from a function which has found no
appropriate data to return. The classic example is when looking for the index of
an element in an array. What should be returned if the element is not found in
the array?&lt;/p&gt;
&lt;p&gt;Some languages return -1, Objective-C uses &lt;code&gt;NSNotFound&lt;/code&gt;, but you have to know
what each language is going to do. The more logical answer is nil. However if
your function is expected to return an integer, then it cannot return nil
because nil is not an integer.&lt;/p&gt;
&lt;p&gt;This is where optionals come in: if the function is expected to return an
optional integer, it can return with an integer with the index of the matching
element, or it can return nil if the element was not found. This is much clearer
and less prone to error.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;how-does-swift-handle-optionals&#34;&gt;How does Swift handle optionals?&lt;/h2&gt;
&lt;p&gt;One of the first things that struck me about Swift was how clean the code
looked, without so many non-alphanumeric characters scattered around. Gone were
all the:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; ; [ ]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;But instead, Swift code sprouted:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt; ?
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;What were these?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;The key to understanding optionals is to realise that when you declare an
optional variable of a certain type, you are actually declaring a box that can
hold a variable of that type or can hold nil.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Once you grasp that concept, it all becomes much more obvious.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; optionalInteger: Int?
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The ? indicates that this is an optional variable. It does not have to be
initialised as it is already set to nil which is valid for an optional variable.
Without the ? this would require initialisation as it would not be valid for it
to be nil.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;setting-an-optional&#34;&gt;Setting an optional&lt;/h2&gt;
&lt;p&gt;Setting the value of an optional variable is just the same as any other
variable:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;optionalInteger = &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;
optionalInteger = &lt;span style=&#34;color:#ae81ff&#34;&gt;42&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;getting-an-optional&#34;&gt;Getting an optional&lt;/h2&gt;
&lt;p&gt;The difference arises when you need to get the data out of the optional variable
in order to use it. This process is called un-wrapping and it means to get the
variable value out of the &amp;lsquo;box&amp;rsquo; it is stored it.&lt;/p&gt;
&lt;h3 id=&#34;the-most-obvious-way-is-to-use-&#34;&gt;The most obvious way is to use !&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; newInteger = optionalInteger!
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;DO NOT DO THIS!&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;This is called forced-unwrapping and assumes that the optional variable is not
nil. If the optional is nil, this will crash. In Xcode, when you connect
interface elements from your storyboard to a Swift file, Xcode will use ! like
this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;@IBOutlet&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;weak&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; startButton: UIButton!
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;I have to assume Xcode knows what it is doing and the button will be available
when needed, but you should not use ! - it is un-safe. By using it, you are
vowing to the compiler that when it gets to that point, the optional value will
not be nil. There are much better and safer ways of doing that.&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;use-if-let&#34;&gt;Use &amp;lsquo;if let&amp;rsquo;&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;doubleNumber&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;_&lt;/span&gt; optionalInteger: Int?) -&amp;gt; Int? {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; integerValue = optionalInteger {
        &lt;span style=&#34;color:#75715e&#34;&gt;// integerValue is not an optional&lt;/span&gt;
        &lt;span style=&#34;color:#75715e&#34;&gt;// and is guaranteed to contain an Int&lt;/span&gt;
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; integerValue &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;
    }

    &lt;span style=&#34;color:#75715e&#34;&gt;// no integer found in the optional,&lt;/span&gt;
    &lt;span style=&#34;color:#75715e&#34;&gt;// so return nil to indicate failure&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h3 id=&#34;use-guard&#34;&gt;Use guard&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;doubleNumber&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;_&lt;/span&gt; optionalInteger: Int?) -&amp;gt; Int? {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;guard&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; integerValue = optionalInteger &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {
        &lt;span style=&#34;color:#75715e&#34;&gt;// get out quickly,&lt;/span&gt;
        &lt;span style=&#34;color:#75715e&#34;&gt;// returning nil to indicate failure&lt;/span&gt;
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;
    }

    &lt;span style=&#34;color:#75715e&#34;&gt;// integerValue is not an optional&lt;/span&gt;
    &lt;span style=&#34;color:#75715e&#34;&gt;// and is guaranteed to contain an Int&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; integerValue &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;These two alternatives (&lt;code&gt;if let&lt;/code&gt; &amp;amp; &lt;code&gt;guard&lt;/code&gt;) do the same job but in opposite
ways. In both cases, they perform a conditional un-wrapping that may or may not
give a valid result. &lt;code&gt;if let&lt;/code&gt; checks if it is OK to proceed. &lt;code&gt;guard&lt;/code&gt; checks to
see if it is NOT OK to proceed. Which you use is really a matter of personal
preference and working out what is more logical in each case.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;guard&lt;/code&gt; statement is really good for checking data early in a process and
making a quick exit it something is wrong. The &lt;code&gt;if let&lt;/code&gt; construct encloses your
success code inside a block and can sometimes leave the failure code a long way
from the check which can make it less obvious. The other potential issue with
&lt;code&gt;if let&lt;/code&gt; is the &amp;ldquo;pyramid of doom&amp;rdquo; common in early Swift code as demonstrated in
this rather contrived example:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;isValidAddressBookEntry&lt;/span&gt;(firstName: String?,
                             lastName: String?,
                             emailAddress: String?,
                             phoneNumber: String?) -&amp;gt; Bool {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; validFirstName = firstName {
            &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; validLastName = lastName {
                &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; validEmail = emailAddress {
                    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; validPhone = phoneNumber {
                        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;
                    }
                }
            }
        }
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Thankfully, Swift now allows us to chain both &lt;code&gt;if let&lt;/code&gt; and &lt;code&gt;guard&lt;/code&gt; statements.
Here is the previous example re-factored to use &lt;code&gt;if let&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;isValidAddressBookEntrySwift2&lt;/span&gt;(firstName: String?,
                                   lastName: String?,
                                   emailAddress: String?,
                                   phoneNumber: String?) -&amp;gt; Bool {
      &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; validFirstName = firstName,
          &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; validLastName = lastName,
          &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; validEmail = emailAddress,
          &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; validPhone = phoneNumber {
          &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;
      }
      &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;And here is the same function but using &lt;code&gt;guard&lt;/code&gt; which allows the inputs to be checked immediately and the function exited if the u=inputs are not valid. For a short function like this, the change is not really significant, but if the function does a lot of processing of the input data, checking first and getting out as soon as possible is more efficient.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;isValidAddressBookEntryUsingGuard&lt;/span&gt;(firstName: String?,
                                       lastName: String?,
                                       emailAddress: String?,
                                       phoneNumber: String?) -&amp;gt; Bool {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;guard&lt;/span&gt;
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; validFirstName = firstName,
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; validLastName = lastName,
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; validEmail = emailAddress,
        &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; validPhone = phoneNumber &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {
            &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;
    }

    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h3 id=&#34;use-optional-chaining&#34;&gt;Use optional chaining&lt;/h3&gt;
&lt;p&gt;The final way to deal with optionals safely is to use optional chaining:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SocialMediaAccounts&lt;/span&gt; {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; facebook: Person?
    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; twitter: Person?
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Person&lt;/span&gt; {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; firstName: String?
    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; lastName: String?
    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; handle: String?
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; socialMedia: SocialMediaAccounts?
socialMedia = SocialMediaAccounts()
&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; twitterAccount = Person()

socialMedia?.twitter = twitterAccount
&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; twitterHandle = socialMedia?.twitter?.handle
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;In this example, we have defined a &lt;code&gt;SocialMediaAccounts&lt;/code&gt; struct that holds
optional &lt;code&gt;Person&lt;/code&gt; structs for the various social media outlets. The
&lt;code&gt;socialMedia&lt;/code&gt; variable is defined as an optional and then created. A
&lt;code&gt;twitterAccount&lt;/code&gt; variable of type &lt;code&gt;Person&lt;/code&gt; is also created but contains no data
at the moment.&lt;/p&gt;
&lt;p&gt;When assigning the &lt;code&gt;twitterAccount&lt;/code&gt; to the &lt;code&gt;socialMedia.twitter&lt;/code&gt; property, a ?
is inserted which checks to see that &lt;code&gt;socialMedia&lt;/code&gt; is not nil. If it is nil,
then execution of that line stops at the ? and nothing bad will happen.&lt;/p&gt;
&lt;p&gt;In the same way, when trying to read back the twitter handle, we chained
together 2 optionals with ?&amp;rsquo;s. If either &lt;code&gt;socialMedia&lt;/code&gt; or &lt;code&gt;socialMedia.twitter&lt;/code&gt;
is nil, that line will not complete. Again this is perfectly safe and the app
will not crash.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;All the examples in this article are available in a &lt;a href=&#34;https://github.com/trozware/optionals&#34;&gt;Swift playground&lt;/a&gt; which
has been updated to Swift 4 syntax.&lt;/p&gt;</description>
</item>
    
    <item>
<title>Learning Swift - For-Loops</title>
<link>https://troz.net/post/2016/learning-swift-for-loops/</link>
<pubDate>Sat, 12 Mar 2016 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2016/learning-swift-for-loops/</guid>
<description>&lt;p&gt;Loops are a fundamental building block of any program. Doing repetitive tasks
fast and accurately is what computers are really good at and what we humans get
very bored doing. Swift offers several different ways to perform loops, but
today we are going to concentrate on for-loops.&lt;/p&gt;
&lt;p&gt;The most basic form of loop is the &lt;code&gt;for-in&lt;/code&gt; loop. There are two ways this can be
used: looping over the numbers in a range or looping over the elements in an
array or dictionary.&lt;/p&gt;
&lt;p&gt;Firstly, the range:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; x &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; ..&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt; { printWithSpace(x) }
&lt;span style=&#34;color:#75715e&#34;&gt;// prints: 0 1 2 3 4&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;em&gt;I am using a custom print function that allows me to print the results on a
single line for convenience.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;This &lt;code&gt;for-in&lt;/code&gt; loop uses a half-open range and it is effectively saying:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;start with x at 0
print x with a space
add 1 to x
is x still less than 5?
    yes - go back to the print stage
    no - stop
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;If we wanted to go all the way to 5 instead of stopping before 5, we would use a
closed range by replacing &lt;code&gt;..&amp;lt;&lt;/code&gt; with &lt;code&gt;...&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; x &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; ... &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt; { printWithSpace(x) }
&lt;span style=&#34;color:#75715e&#34;&gt;// prints: 0 1 2 3 4 5&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;p&gt;These methods work fine if we want to loop through a range of numbers one at a
time but what if we want a different increment? There are several ways to vary
the step.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;stride(from:to:by:)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;stride(from:through:by:)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;where&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; x &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt; stride(from: &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, to: &lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;, by: &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;) {
  printWithSpace(x)
}
&lt;span style=&#34;color:#75715e&#34;&gt;// prints: 0 2 4 6 8&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; x &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt; stride(from: &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, through: &lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;, by: &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;) {
  printWithSpace(x)
}
&lt;span style=&#34;color:#75715e&#34;&gt;// prints: 0 2 4 6 8 10&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The 2 variations of &lt;code&gt;stride&lt;/code&gt; are analogous to the 2 ways of expressing the range
in the the &lt;code&gt;for-in&lt;/code&gt; loop.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;stride(from:to:by:)&lt;/code&gt; starts with the number in the &lt;code&gt;from&lt;/code&gt; parameter and each
time through the loop, increments that number by the amount of the &lt;code&gt;by&lt;/code&gt;
parameter. If the incremented number is less than the &lt;code&gt;to&lt;/code&gt; parameter, the loop
continues.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;stride(from:through:by:)&lt;/code&gt; works the same way but continues until the
incremented number is greater than or equal to the &lt;code&gt;through&lt;/code&gt; parameter.&lt;/p&gt;
&lt;p&gt;Using a negative value for &lt;code&gt;by&lt;/code&gt; allows counting backwards:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; x &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt; stride(from: &lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;, through: &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, by: &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;) {
  printWithSpace(x)
}
&lt;span style=&#34;color:#75715e&#34;&gt;// prints: 10 8 6 4 2 0&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Stride can also be used for floating point loops although the result may contain
some unexpected changes in precision e.g 0.7000000000000001 instead of the
expected 0.7&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; startingNumber = &lt;span style=&#34;color:#ae81ff&#34;&gt;0.1&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; x &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt; stride(from: startingNumber, through: &lt;span style=&#34;color:#ae81ff&#34;&gt;1.0&lt;/span&gt;, by: &lt;span style=&#34;color:#ae81ff&#34;&gt;0.2&lt;/span&gt;) {
  printWithSpace(x)
}
&lt;span style=&#34;color:#75715e&#34;&gt;// prints: 0.1 0.3 0.5 0.7000000000000001 0.9&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Note that the result does not contain the &lt;code&gt;through&lt;/code&gt; parameter as the next
iteration would have produced 1.1 which is greater than it. And also
&lt;code&gt;startingNumber&lt;/code&gt; did not have to be a variable as it is never actually changed.&lt;/p&gt;
&lt;p&gt;Using &lt;code&gt;where&lt;/code&gt; makes it possible to step through a loop while conforming to some
conditional:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; x &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; ... &lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;where&lt;/span&gt; x &lt;span style=&#34;color:#f92672&#34;&gt;%&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt; == &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; {
  printWithSpace(x)
}
&lt;span style=&#34;color:#75715e&#34;&gt;// prints: 0 3 6 9&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;p&gt;The other main use for &lt;code&gt;for-in&lt;/code&gt; loops is for iterating through the elements of
an array or dictionary:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; arrayOfInts = [ &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;6&lt;/span&gt; ]
&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; x &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt; arrayOfInts {
  printWithSpace(x &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;)
}
&lt;span style=&#34;color:#75715e&#34;&gt;// prints: 2 4 6 8 10 12&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; myDict = [ &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;one&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;two&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;three&amp;#34;&lt;/span&gt; ]
&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; (key, value) &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt; myDict {
  print(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;\(&lt;/span&gt;key&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt; = &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;\(&lt;/span&gt;value&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;)
}
&lt;span style=&#34;color:#75715e&#34;&gt;// prints:&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;// 2 = two&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;// 3 = three&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;// 1 = one&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;As a dictionary is un-sorted, the order of the items may vary.&lt;/p&gt;
&lt;p&gt;If you want to loop through an array while also monitoring the index of each
element, you can use &lt;code&gt;enumerated()&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; arrayOfNames = [ &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Andy&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Buzz&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Woody&amp;#34;&lt;/span&gt; ]
&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; (index, element) &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt; arrayOfNames.enumerated() {
  print(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;The name at index &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;\(&lt;/span&gt;index&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt; is &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;\(&lt;/span&gt;element&lt;span style=&#34;color:#e6db74&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;)
}
&lt;span style=&#34;color:#75715e&#34;&gt;// prints:&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;// The name at index 0 is Andy&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;// The name at index 1 is Buzz&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;// The name at index 2 is Woody&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;If your array contains optionals, you can use &lt;code&gt;for case let&lt;/code&gt; to test each value:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; arrayWithOptionals: [String?] = [ &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Woody&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Buzz&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Rex&amp;#34;&lt;/span&gt; ]
&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; name? &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt; arrayWithOptionals {
  printWithSpace(name)
}
&lt;span style=&#34;color:#75715e&#34;&gt;// prints: Woody Buzz Rex&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The &lt;code&gt;name&lt;/code&gt; variable is un-wrapped each time through the loop so can be used
safely.&lt;/p&gt;
&lt;p&gt;Any of these loop styles can be combined with &lt;code&gt;where&lt;/code&gt; to perform checks on each
iteration:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; arrayWithOptionals: [String?] = [ &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Woody&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Buzz&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Rex&amp;#34;&lt;/span&gt; ]
&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; name? &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt; arrayWithOptionals &lt;span style=&#34;color:#66d9ef&#34;&gt;where&lt;/span&gt; name.count &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt; {
  printWithSpace(name)
}
&lt;span style=&#34;color:#75715e&#34;&gt;// prints: Buzz Rex&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;p&gt;Some of you may be wondering what happened to the old C-style loops like this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; x = &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;; x &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;; x&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt; { print(x, terminator: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34; &amp;#34;&lt;/span&gt;) }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This does not work in Swift 3+: the &lt;code&gt;++&lt;/code&gt; and &lt;code&gt;--&lt;/code&gt; operators and this style of
loop declaration have been removed from the language. For further details, check
out the relevant proposals at Swift Evolution:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/apple/swift-evolution/blob/master/proposals/0007-remove-c-style-for-loops.md&#34;&gt;Remove C-style for-loops with conditions and incrementers&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/apple/swift-evolution/blob/master/proposals/0004-remove-pre-post-inc-decrement.md&#34;&gt;Remove the ++ and &amp;ndash; operators&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;All the examples in this article are available in a &lt;a href=&#34;https://github.com/trozware/for-loops&#34;&gt;Swift playground&lt;/a&gt; now
updated to Swift 4 syntax.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Learning Swift - Generics</title>
<link>https://troz.net/post/2016/learning-swift-generics/</link>
<pubDate>Mon, 29 Feb 2016 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2016/learning-swift-generics/</guid>
<description>&lt;p&gt;One of the nice things about Swift is how clean your code looks. A lot of the
weird characters that pepper the code of other languages has been eliminated: No
more semi-colons, asterisks etc.&lt;/p&gt;
&lt;p&gt;But then you are reading somebody else&amp;rsquo;s code and you find these angle brackets
all over the place and they don&amp;rsquo;t seem to make sense.&lt;/p&gt;
&lt;p&gt;What does this mean?&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;mid&lt;/span&gt;&amp;lt;T: Comparable&amp;gt;(array: [T]) -&amp;gt; T
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;It looks like it is a function to find the middle element in an array, but what
is &lt;code&gt;&amp;lt;T: Comparable&amp;gt;&lt;/code&gt; or &lt;code&gt;[T]&lt;/code&gt; or even just &lt;code&gt;T&lt;/code&gt;? They are describing Generic data
types.&lt;/p&gt;
&lt;p&gt;Using the dictionary, I find the following definition for &lt;code&gt;generic&lt;/code&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;characteristic of or relating to a class or group of things; not specific.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;And that really provides quite a good definition for Swift&amp;rsquo;s generics too. They
allow you to assign a non-specific data type to a function so that function can
be used for many different data types.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;But enough of the theory: by far the best way to understand generics is to
encounter the problem they are meant to solve and then to solve it.&lt;/p&gt;
&lt;p&gt;The other day I was processing data to feed to a charting library. I ended up
with an array of CGFloats, but there were too many of them, so I wrote a
function to give me the last x elements of an array of CGFloats:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;endOf&lt;/span&gt;(array: [CGFloat], numberOfElementsToInclude: Int) -&amp;gt; [CGFloat] {
  &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; numberOfElementsToInclude &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; array.count { &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; array }

  &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; startingElement = array.count &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; numberOfElementsToInclude
  &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; endOfArray = Array(array[startingElement ..&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt; array.count])
  &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; endOfArray
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; largeArray: [CGFloat] = [&lt;span style=&#34;color:#ae81ff&#34;&gt;1.0&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;2.0&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;3.0&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;4.0&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;5.0&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;6.0&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;7.0&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;8.0&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;9.0&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;10.0&lt;/span&gt;]
&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; smallArray = endOf(array: largeArray, numberOfElementsToInclude: &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;)
&lt;span style=&#34;color:#75715e&#34;&gt;//smallArray now equals [8.0, 9.0, 10.0]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;OK, so &lt;code&gt;largeArray&lt;/code&gt; isn&amp;rsquo;t actually the largest array you have ever seen, but it
works for demo purposes. In my code, I had over 20,000 entries in the large
array and only wanted the last 5,000.&lt;/p&gt;
&lt;p&gt;I was completely happy with that until I found another data source where the
data was an array of Ints. Still perfectly chartable using my charting library,
but I could not get the end of the array using my nice function. First thought
was to replicate the function:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;endOf&lt;/span&gt;(array: [Int], numberOfElementsToInclude: Int) -&amp;gt; [Int] {
  &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; numberOfElementsToInclude &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; array.count { &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; array }

  &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; startingElement = array.count &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; numberOfElementsToInclude
  &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; endOfArray = Array(array[startingElement ..&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt; array.count])
  &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; endOfArray
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; largeArrayInt = [ &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;6&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;7&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;8&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt; ] &lt;span style=&#34;color:#75715e&#34;&gt;// type inferred to be Int&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; smallArrayInt = endOf(array: largeArrayInt, numberOfElementsToInclude: &lt;span style=&#34;color:#ae81ff&#34;&gt;7&lt;/span&gt;)
&lt;span style=&#34;color:#75715e&#34;&gt;// smallArrayInt now equals [4, 5, 6, 7, 8, 9, 10]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;A quick glance will reveal that the declaration line was the only thing that
changed. I didn&amp;rsquo;t have to give the function a new name because the compiler
worked out which of the two functions to use based on the types supplied. So all
I was doing was replacing &lt;code&gt;CGFloat&lt;/code&gt; with &lt;code&gt;Int&lt;/code&gt; in two places (the
&lt;code&gt;numberOfElementsToInclude&lt;/code&gt; parameter remains an &lt;code&gt;Int&lt;/code&gt; in both cases).&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;As soon as you find yourself replicating code and only changing the types of
the data, that is a sign that you need to use generics.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;For my first attempt at creating a generic function, all I did was replace the
word &lt;code&gt;CGFloat&lt;/code&gt; with &lt;code&gt;T&lt;/code&gt; where &lt;code&gt;T&lt;/code&gt; indicates some type that will be specified
when the function is called. The convention is to use single letters for generic
types: &lt;code&gt;T&lt;/code&gt; for Type, &lt;code&gt;A&lt;/code&gt; for AnyObject, &lt;code&gt;Z&lt;/code&gt; because you feel like it. The choice
is up to you.&lt;/p&gt;
&lt;p&gt;That produced this error:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/Generics_error.png&#34; alt=&#34;Generics error&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Use of undeclared type &#39;T&#39;&lt;/code&gt;. Well that seems fair enough&amp;hellip; how is the compiler
supposed to know what a &lt;code&gt;T&lt;/code&gt; is?&lt;/p&gt;
&lt;p&gt;It turns out that this is where the angle brackets come into play. You have to
warn the compiler that this function is going to get a generic type and that the
&lt;code&gt;T&lt;/code&gt; is only a placeholder, not a real type. So this version compiles and works -
notice the &lt;code&gt;&amp;lt;T&amp;gt;&lt;/code&gt; between the function name and the opening bracket:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;endOf&lt;/span&gt;&amp;lt;T&amp;gt;(array: [T], numberOfElementsToInclude: Int) -&amp;gt; [T] {
  &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; numberOfElementsToInclude &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; array.count { &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; array }

  &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; startingElement = array.count &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; numberOfElementsToInclude
  &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; endOfArray = Array(array[startingElement ..&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt; array.count])
  &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; endOfArray
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Now I have no code duplication and if I ever get another data set that uses a
different object type, my function will still work.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Now we know to use generics instead of replicating code that operates in the
same way on different data types.&lt;/p&gt;
&lt;p&gt;And we know how to construct a generic function.&lt;/p&gt;
&lt;p&gt;Using it is identical to using the two functions I had before:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; largeArray: [CGFloat] = [ &lt;span style=&#34;color:#ae81ff&#34;&gt;1.0&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;2.0&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;3.0&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;4.0&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;5.0&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;6.0&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;7.0&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;8.0&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;9.0&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;10.0&lt;/span&gt; ]
&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; smallArray = endOf(array: largeArray, numberOfElementsToInclude: &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;)

&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; largeArrayInt = [ &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;6&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;7&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;8&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt; ] &lt;span style=&#34;color:#75715e&#34;&gt;// type inferred to be Int&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; smallArrayInt = endOf(array: largeArrayInt, numberOfElementsToInclude: &lt;span style=&#34;color:#ae81ff&#34;&gt;7&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;You do not have to specify what &lt;code&gt;T&lt;/code&gt; is when calling the function, that will be
inferred from the supplied data.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Moving on into more advanced use cases, we have two things to consider:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Functions where the generic parameters must conform to a protocol.&lt;/li&gt;
&lt;li&gt;Functions that take generic parameters of different types.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;The example function I started with (not mine but I forget where I got it&amp;hellip; If
it is yours, thanks you very much) used:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;mid&lt;/span&gt; &amp;lt;T: Comparable&amp;gt; (array: [T]) -&amp;gt; T
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Instead of specifying the type as completely generic, it specified that it must
conform to the Comparable protocol. This is because the function body used a
&lt;code&gt;sort()&lt;/code&gt; function so the generic function needed to be sure that the elements in
the array could be compared. This technique can also be used to restrict the
parameter types to sub-classes of a certain class.&lt;/p&gt;
&lt;p&gt;For a function with more than one generic data type, you need to use more than
one placeholder letter:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;genericWithTwoDifferentTypes&lt;/span&gt;&amp;lt;T, U&amp;gt;(param1: T, param2: U) -&amp;gt; Bool {
  &lt;span style=&#34;color:#75715e&#34;&gt;// ...&lt;/span&gt;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;And in exactly the same way, both &lt;code&gt;T&lt;/code&gt; and &lt;code&gt;U&lt;/code&gt; can be set to conform to a
protocol or be members of a certain super-class.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Hopefully this has taken some of the mystery out of generics, but if you have
any questions, please get in touch using the &lt;a href=&#34;https://troz.net/contact/&#34;&gt;Contact page&lt;/a&gt;, comment below or
contact me via Twitter: &lt;a href=&#34;https://twitter.com/trozware&#34;&gt;@trozware&lt;/a&gt;.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Singleton to Protocol</title>
<link>https://troz.net/post/2016/singleton-to-protocol/</link>
<pubDate>Fri, 26 Feb 2016 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2016/singleton-to-protocol/</guid>
<description>&lt;p&gt;I was driving through the town of &lt;a href=&#34;https://en.wikipedia.org/wiki/Singleton,_New_South_Wales&#34;&gt;Singleton&lt;/a&gt; the other day and of course, it
got me thinking about using singletons in my apps. Singletons were a commonly
used pattern in Objective-C programming and appear in many of Apple&amp;rsquo;s own APIs,
but seem to be increasingly frowned upon in the Swift world.&lt;/p&gt;
&lt;h2 id=&#34;so-what-is-a-singleton&#34;&gt;So what is a singleton?&lt;/h2&gt;
&lt;p&gt;A singleton is a class that only expects to have a single instance. Think of it
as a global instance of a class. In some cases this makes perfect sense if there
can only ever be one instance of a particular class or if there is a default
variant that suits most cases e.g.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;UIApplication.shared
UserDefaults.standard
NotificationCenter.&lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt;
FileManager.&lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt;
URLSession.shared
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;If you are using an object with a property name of &amp;ldquo;shared&amp;rdquo;, &amp;ldquo;standard&amp;rdquo; or
&amp;ldquo;default&amp;rdquo; you can be pretty sure it is an singleton.&lt;/p&gt;
&lt;h2 id=&#34;and-whats-the-problem-with-singletons&#34;&gt;And what&amp;rsquo;s the problem with singletons?&lt;/h2&gt;
&lt;p&gt;There are probably many different opinions here but I have two thoughts about
this:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;They are effectively global variables and global variables can make your code
messy and un-predictable.&lt;/li&gt;
&lt;li&gt;If they can be accessed by multiple other objects, possibly at the same time,
then you can get conflicts. These can be handled by clever use of background
queues, but it isn&amp;rsquo;t easy.&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;what-to-use-instead&#34;&gt;What to use instead?&lt;/h2&gt;
&lt;p&gt;As I drove, I mused on a singleton that I had implemented recently. It was a
logging utility that allowed any object in my app (mostly view controllers) to
save a new entry to a log file. The basic structure of the Logger class was
this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Logger&lt;/span&gt; {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; sharedLogger = Logger()

    &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;addToLog&lt;/span&gt;(event: String) {
      &lt;span style=&#34;color:#75715e&#34;&gt;// use private functions to find log file URL&lt;/span&gt;
      &lt;span style=&#34;color:#75715e&#34;&gt;// append event text with time stamp&lt;/span&gt;
    }

}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Any object in my app could use the Logger like this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;Logger.sharedLogger.addToLog(event: newLogEvent)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;When I got to think about how I was using this, I realised that instead of a
Logger &lt;em&gt;object&lt;/em&gt; that everything could use, what I really needed was a Loggable
&lt;em&gt;behaviour&lt;/em&gt; that I could apply &amp;amp; restrict to the few classes that actually
needed to log events. For me, this was the break-through:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Create a behaviour, not an object.&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;As soon as I started thinking about this as a behaviour, a protocol became the
obvious solution, so this is what I created:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;protocol&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Loggable&lt;/span&gt; {
  &lt;span style=&#34;color:#75715e&#34;&gt;// not declaring functions here&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;// as they should NOT be over-written&lt;/span&gt;
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;extension&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Loggable&lt;/span&gt; {

    &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;addToLog&lt;/span&gt;(event: String) {
      &lt;span style=&#34;color:#75715e&#34;&gt;// use private functions to find log file URL&lt;/span&gt;
      &lt;span style=&#34;color:#75715e&#34;&gt;// append event text with time stamp&lt;/span&gt;
    }

}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;We run immediately into one of the peculiarities of Swift protocol extensions
which has been very well explained by &lt;a href=&#34;https://cjwirth.com/tech/swift-protocol-extension-weirdness&#34;&gt;Caesar Wirth&lt;/a&gt;. If I had declared
&lt;code&gt;addToLog(_:)&lt;/code&gt; in the protocol, then any class or struct conforming to this
protocol would have been free to over-write this function and provide its own
version. This is not what I wanted here - I wanted every object to use the same
version. So I left the function declaration out of the protocol definition and
only included it in the protocol extension.&lt;/p&gt;
&lt;p&gt;To use this behaviour, a class or struct just has to be declared as conforming
to the Loggable protocol:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;MyClass&lt;/span&gt;: Loggable {
  &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;doSomething&lt;/span&gt;() {
    addToLog(event: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;I did something!&amp;#34;&lt;/span&gt;)
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;For my app, I knew that I would want all my NSViewControllers to be able to add
log events, so instead of setting them all individually as conforming to the
protocol, I used this shortcut which extends all NSViewControllers to conform to
the protocol.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;extension&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NSViewController&lt;/span&gt;: Loggable {}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;I added this line to the Loggable.swift file where I declared the protocol and
its extension, but outside both of them.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Protocol-oriented programming is a new technique to me, so it really helps when
I can find a practical example of where it solves a problem.&lt;/p&gt;
&lt;p&gt;If you are new to POP, I highly recommend the &lt;a href=&#34;https://developer.apple.com/videos/play/wwdc2015/408/&#34;&gt;Crusty talk&lt;/a&gt; from WWDC 2015.
And this article by &lt;a href=&#34;http://matthijshollemans.com/2015/07/22/mixins-and-traits-in-swift-2/&#34;&gt;Matthijs Hollemans&lt;/a&gt; was invaluable to me in
demonstrating the problems with object inheritance that are solved by protocols.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Three Rules for Writing Better Swift</title>
<link>https://troz.net/post/2016/three-rules-for-writing-better-swift/</link>
<pubDate>Wed, 24 Feb 2016 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2016/three-rules-for-writing-better-swift/</guid>
<description>&lt;ol&gt;
&lt;li&gt;Do not use !.&lt;/li&gt;
&lt;li&gt;Use let, not var.&lt;/li&gt;
&lt;li&gt;Allow the compiler to infer types.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Read on for more details&amp;hellip;&lt;/p&gt;
&lt;h2 id=&#34;1-do-not-use-&#34;&gt;1. Do not use !&lt;/h2&gt;
&lt;p&gt;Swift uses optionals for values that can be nil. To use an optional value, you
need to &amp;ldquo;un-wrap&amp;rdquo; it first, which means getting the actual value out, assuming
that the value exists and the optional is not actually nil.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://troz.net/post/2016-02-12-learning-swift-optionals/&#34;&gt;Optionals&lt;/a&gt; are the subject of a complete post by themselves, but for now, I
will just say this: When you use ! you are &lt;strong&gt;promising&lt;/strong&gt; the compiler that you
will make sure there is a real value in that optional by the time it is needed.&lt;/p&gt;
&lt;p&gt;If this is not the case, your app will crash as shown in this playground:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/Playground2.png&#34; alt=&#34;Playground crash&#34;&gt;&lt;/p&gt;
&lt;p&gt;Instead of using ! you should use optional chaining with ? or check the value
with &lt;code&gt;guard&lt;/code&gt; or &lt;code&gt;if let&lt;/code&gt; before use.&lt;/p&gt;
&lt;p&gt;One trap to beware of is with Xcode&amp;rsquo;s attempts to be helpful and suggest fixes
to problems. If you use an optional where it cannot work, Xcode will warn you
that it is incorrect, but the suggested fix will be to insert !&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/optional_fix.png&#34; alt=&#34;Optional fix&#34;&gt;&lt;/p&gt;
&lt;p&gt;When you see this, do not accept the suggested fix, but use it as a warning to
show that you need to fix the problem properly.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;2-use-let-not-var&#34;&gt;2. Use let, not var&lt;/h2&gt;
&lt;p&gt;Using constants in C-based languages is a pain. I could never remember the
Objective-C syntax for declaring a static constant, so used to fall back to
using &lt;code&gt;#define&lt;/code&gt; for global constants. Inside my objects, all instance properties
were variables, not constants. Inside functions, it was the same.&lt;/p&gt;
&lt;p&gt;It doesn&amp;rsquo;t take much imagination to work out that your apps will perform better
and more securely if values that do not need to change are allocated as
constants instead of variables.&lt;/p&gt;
&lt;p&gt;With Swift, this is easy as you just declare a constant using the &lt;code&gt;let&lt;/code&gt; keyword
and declare variables using &lt;code&gt;var&lt;/code&gt;. The Swift compiler will now warn you if you
have used &lt;code&gt;var&lt;/code&gt; where &lt;code&gt;let&lt;/code&gt; would do, but I prefer to declare everything using
&lt;code&gt;let&lt;/code&gt; and only change to &lt;code&gt;var&lt;/code&gt; when this causes an error as shown in this
playground example:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/Playground3.png&#34; alt=&#34;Playground let error&#34;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;3-allow-the-compiler-to-infer-types&#34;&gt;3. Allow the compiler to infer types&lt;/h2&gt;
&lt;p&gt;With Objective-C and many other languages, you have to tell the compiler exactly
what each variable is going to be: a string, an integer, an object of a certain
type.&lt;/p&gt;
&lt;p&gt;With Swift, the compiler is clever enough to work this out for you, which can
make your code much cleaner looking and easy to read.&lt;/p&gt;
&lt;p&gt;There are a few exceptions to this rule which are shown in the playground below:&lt;/p&gt;
&lt;p&gt;Lines 3 - 6 are allowing the Swift compiler to decide what the type is and it is
choosing valid types: Int, Double, String and UIView.&lt;/p&gt;
&lt;p&gt;Line 8 is a case where we do not want the default type, which would be Double so
we need to tell the compiler that this one really should be a CGFloat.&lt;/p&gt;
&lt;p&gt;Lines 10 &amp;amp; 11 both deal with an array of Ints. In line 10, the values are
supplied so the type of the array can be inferred. In the second case, the array
is initially empty, so the type needs to be specified in the declaration.&lt;/p&gt;
&lt;p&gt;Lines 13 and 14 are the same but with dictionaries instead of arrays.&lt;/p&gt;
&lt;p&gt;In each case, it would have been valid Swift to specify the type but why bother?
The more text you enter , the more change of mistake and it leaves your code
looking cluttered.&lt;/p&gt;
&lt;p&gt;If you ever need to check what type has been assigned to a constant or variable,
Option-click on it in Xcode and you willl get a popup telling you what it is.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/Playground4.png&#34; alt=&#34;Playground types&#34;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;This was going to be five rules, but then I got a bit too verbose so will add
more rules in a separate post.&lt;/p&gt;</description>
</item>
    
    <item>
<title>Configuring Xcode</title>
<link>https://troz.net/post/2016/configuring-xcode/</link>
<pubDate>Wed, 17 Feb 2016 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2016/configuring-xcode/</guid>
<description>&lt;p&gt;While not strictly a part of my Learning Swift series, today I thought I would
discuss some of the ways to configure and use Xcode to be a more productive and
comfortable programmer.&lt;/p&gt;
&lt;h2 id=&#34;1-editor-color-themes-and-fonts&#34;&gt;1. Editor color themes and fonts:&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/XcodeFontPrefs.png&#34; alt=&#34;Editor&#34;&gt;&lt;/p&gt;
&lt;p&gt;Step through the supplied themes and find the best one for you. Then click the
&amp;lsquo;+&amp;rsquo; button at the bottom of the list and duplicate the selected theme. Now you
can tweak it to suit you. Each text category can have its own font and size, but
you can make multiple selections in order to do a bulk change. don&amp;rsquo;t forget to
check out the Console section too - I dislike the default bold text for many of
the console reports, so always change that.&lt;/p&gt;
&lt;p&gt;An editing font should be mono-spaced i.e. every character should take up
exactly the same width on the screen. This makes your code look neater and
neater code is easier to read when you come back to it. I also much prefer a
sans-serif font, but that is a matter of preference.&lt;/p&gt;
&lt;p&gt;Menlo is the font used by Xcode as a default, but there are many other options
either in the default installation of OS X or as free downloads. I change every
now and then just to keep things interesting, but my current selection is &lt;a href=&#34;https://github.com/tonsky/FiraCode&#34;&gt;Fira
Code&lt;/a&gt;. I love the way it merges two character symbols into a single
character for faster comprehension.&lt;/p&gt;
&lt;p&gt;My other favourites are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/adobe-fonts/source-code-pro&#34;&gt;Source Code Pro&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/chrissimpkins/hack&#34;&gt;Hack&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/mozilla/Fira&#34;&gt;Fira&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.fontsquirrel.com/fonts/Inconsolata&#34;&gt;Inconsolata&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Look for a font that makes it easy to distinguish the digit &amp;lsquo;1&amp;rsquo; from a lowercase
&amp;lsquo;l&amp;rsquo; and where the digit &amp;lsquo;0&amp;rsquo; is different to the &amp;lsquo;O&amp;rsquo;.&lt;/p&gt;
&lt;p&gt;To install and use a new font, download the files and then double-click a TTF or
OTF font file to install it in FontBook. Once the font is installed, you may
need to restart Xcode in order to make it available.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;2-add-ons&#34;&gt;2. Add-ons:&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Update:&lt;/strong&gt; Xcode 8 has removed the ability to run any plugins or to use
Alcatraz, so this sectrion is no longer valid. Instead Apple is offering offical
support for Xcode Source Editor Extensions, so they are the way of the future.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;3-documentation&#34;&gt;3. Documentation:&lt;/h2&gt;
&lt;p&gt;Xcode has excellent documentation, but unless you specifically download it, this
will all be accessed online. If you have a bad or non-existent connection, this
can be annoying. Go to Xcode&amp;rsquo;s Preferences -&amp;gt; Downloads and download all the
document sets you are interested in. They are quite large, but having them local
will be a big bonus.&lt;/p&gt;
&lt;p&gt;The other tool I use for documentation is &lt;a href=&#34;https://kapeli.com/dash&#34;&gt;Dash&lt;/a&gt;. It supports many languages
and is not just for use in Xcode. I found the Xcode integration plugin was not
very useful as it conflicted with other useful behaviours. So I set up a global
shortcut in System Preferences to search Dash for the selected text. This is
much faster than Xcode&amp;rsquo;s built-in documentation.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/Dash.png&#34; alt=&#34;Dash&#34;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;4-other-preferences&#34;&gt;4. Other preferences:&lt;/h2&gt;
&lt;p&gt;Go through the preference panes in Xcode&amp;rsquo;s preferences and tweak to suit your
style or your group&amp;rsquo;s preferred style.&lt;/p&gt;
&lt;p&gt;General and Text Editing are important. Text Editing has a second tab for
Indentation which is easy to miss. Indentation styles seem to cause a lot of
heated debate, so make sure you check this out.&lt;/p&gt;
&lt;p&gt;Accounts is vital if you are publishing to the App Stores and also makes it easy
to transfer all your develop information from one computer to another.&lt;/p&gt;
&lt;p&gt;Fonts &amp;amp; Colors and Downloads are discussed above.&lt;/p&gt;
&lt;p&gt;I tend to leave the others set to the defaults.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>How do I start to learn Swift?</title>
<link>https://troz.net/post/2016/how-do-i-start-to-learn-swift/</link>
<pubDate>Tue, 16 Feb 2016 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2016/how-do-i-start-to-learn-swift/</guid>
<description>&lt;p&gt;The first thing to do is to download the latest version of Apple&amp;rsquo;s &lt;a href=&#34;https://itunes.apple.com/book/swift-programming-language/id881256329&#34;&gt;Swift
Programming Language book&lt;/a&gt; from the iBooks Store.&lt;/p&gt;
&lt;p&gt;You can just read this book, especially the first section: &amp;ldquo;A Swift Tour&amp;rdquo;, but
you will get more out of it if you follow along with the playground. There is a
link to download the playground from the book which you can use directly if you
are reading using iBooks on the Mac. If you are not, here is the &lt;a href=&#34;https://developer.apple.com/go/?id=swift-tour&#34;&gt;download
link&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;You will also need to install &lt;a href=&#34;https://itunes.apple.com/app/xcode/id497799835&#34;&gt;Xcode&lt;/a&gt; from the Mac App Store. Xcode is
Apple&amp;rsquo;s IDE and is used for programming Mac, iPhones, iPads, Apple Watches and
Apple TVs.&lt;/p&gt;
&lt;p&gt;Swift introduced the playground to Xcode. A playground is a fantastic way to
learn and experiment. You do not need to create a project, build, run a separate
app, install on a device. Code typed into a playground is run immediately and
you can see the results instantly, line by line.&lt;/p&gt;
&lt;p&gt;Here is an example of a playground showing the code on the left and the result
of each line appearing on the right.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/Playground1.png&#34; alt=&#34;Playground&#34;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Once you have gone through the Swift Tour, Apple&amp;rsquo;s book becomes more of a
reference guide to return to whenever you get stuck. The other way I use it is
to check up on changes made when a new version of Swift is released. As the
language is still rapidly evolving, these can be quite extensive. Once I have
the latest version of the book, I go to the Revision History at the back and
click the links to read about the features that have been added or changed.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Apart from Apple&amp;rsquo;s documentation, there are a lot of great web sites, blogs and
Twitter accounts out there. There are also useful newsletters that give a weekly
summary of exciting developments.&lt;/p&gt;
&lt;p&gt;Here are some of my favourites:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.natashatherobot.com&#34;&gt;Natasha the Robot&lt;/a&gt; - my favourite Swift blogger - sign up for her
newsletter and follow her on Twitter.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.apple.com/swift/blog/&#34;&gt;Apple&amp;rsquo;s Swift Blog&lt;/a&gt; - not many posts, but good for learning about new
features.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://ericasadun.com&#34;&gt;Erica Sadun&lt;/a&gt; - sometimes a bit too technical for me, but often contains
some really useful snippets. Erica has the distinction of being the first
person outside Apple to have had a Swift language proposal accepted as part of
the open source development process.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://andybargh.com&#34;&gt;Andy Bargh&lt;/a&gt; - detailed articles on various aspects of Swift, plus a
weekly newsletter.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.raywenderlich.com&#34;&gt;Ray Wenderlich tutorials&lt;/a&gt; - search for Swift and find heaps of tutorials
covering many different aspects.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://swiftsandbox.io&#34;&gt;Swift Sandbox&lt;/a&gt; - weekly newsletter filled with interesting articles.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://swiftmonthly.com&#34;&gt;SwiftMonthly&lt;/a&gt; - useful newsletter with links to tutorials, videos and
projects.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://swiftdoc.org&#34;&gt;SwiftDoc.org&lt;/a&gt; - the documentation in Xcode is still heavily skewed
towards Objective-C programmers and it can be difficult to find Swift-specific
entries. This site makes it easy.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;And I hope you will keep coming back to this site to see what new Swift-related
articles are available.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Icon Builder 3.2 Released</title>
<link>https://troz.net/post/2016/icon-builder-32-released/</link>
<pubDate>Wed, 10 Feb 2016 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2016/icon-builder-32-released/</guid>
<description>&lt;p&gt;&lt;a href=&#34;http://itunes.apple.com/app/icon-builder/id552293482&#34;&gt;Icon Builder 3.2&lt;/a&gt; is now available from the Mac App Store.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Icons for Apple Watch apps now have their alpha channel removed.&lt;/li&gt;
&lt;li&gt;Tidier folder structure for related files (iTunes Artwork files and Read Me).&lt;/li&gt;
&lt;li&gt;Updated to work with Xcode 7&amp;rsquo;s Assets.xcassets folders.&lt;/li&gt;
&lt;li&gt;Creates iPad Pro icons for Xcode 7.2 or later.&lt;/li&gt;
&lt;li&gt;Fix for Retina Macs creating double-sized images.&lt;/li&gt;
&lt;/ul&gt;
</description>
</item>
    
    <item>
<title>Why is Swift so great?</title>
<link>https://troz.net/post/2016/why-is-swift-so-great/</link>
<pubDate>Wed, 10 Feb 2016 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2016/why-is-swift-so-great/</guid>
<description>&lt;p&gt;Firstly, I can give you the technical answer, as published by Apple:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Swift is a new programming language for iOS, OS X, watchOS, and tvOS apps that
builds on the best of C and Objective-C, without the constraints of C
compatibility. Swift adopts safe programming patterns and adds modern features
to make programming easier, more flexible, and more fun. Swift’s clean slate,
backed by the mature and much-loved Cocoa and Cocoa Touch frameworks, is an
opportunity to reimagine how software development works.&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt; Swift has
been years in the making. Apple laid the foundation for Swift by advancing our
existing compiler, debugger, and framework infrastructure. We simplified
memory management with Automatic Reference Counting (ARC). Our framework
stack, built on the solid base of Foundation and Cocoa, has been modernized
and standardized throughout. Objective-C itself has evolved to support blocks,
collection literals, and modules, enabling framework adoption of modern
language technologies without disruption. Thanks to this groundwork, we can
now introduce a new language for the future of Apple software development.”&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Excerpt From: Apple Inc. “&lt;a href=&#34;https://itunes.apple.com/book/swift-programming-language/id881256329&#34;&gt;The Swift Programming Language (Swift 2.1)&lt;/a&gt;.”&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;now-i-can-give-you-my-opinion&#34;&gt;Now I can give you my opinion:&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Swift makes for code that is easier &amp;amp; faster to write.&lt;/li&gt;
&lt;li&gt;Swift makes for code that is easier &amp;amp; cleaner to read (much more important
than ease of writing).&lt;/li&gt;
&lt;li&gt;Swift code is safer code.&lt;/li&gt;
&lt;li&gt;Swift breaks free from the out-dated conventions of C-based languages.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;When Apple announced Swift at WWDC 2105, I was astounded. That such a major
event could have been kept completely secret was amazing. Then I watched every
video from WWDC 2015 that discussed Swift. Some were beyond me and others I
absorbed. Looking back, I can see that the development of Objective-C over the
past few years was all aimed at getting to this point, especially with the
introduction of ARC and blocks.&lt;/p&gt;
&lt;p&gt;At that time, I was deeply involved in an existing Objective-C project and not
able to do much in Swift. But I went through the introduction at the start of
the &lt;a href=&#34;https://itunes.apple.com/book/swift-programming-language/id881256329&#34;&gt;Swift Programming Language&lt;/a&gt; book in iBooks and was able to get some
ideas about how the language worked.&lt;/p&gt;
&lt;p&gt;Some months later, I was able to spend time on Swift. As a learning exercise, I
converted an existing Objective-C iOS app to Swift. As might be expected, I
really just wrote Objective-C code using Swift syntax. It took a lot more
learning before I was able to write Swift-y code instead of just translated
Objective-C. In future posts of this series, I hope to enable others to cross
that divide faster than I did.&lt;/p&gt;
&lt;p&gt;Now when I go back to an Objective-C app, I feel like I am walking a tight-rope.
When I use an NSArray, NSSet or NSDictionary, I think &amp;ldquo;How can I tell what sort
of objects are in that array?&amp;rdquo;. When I use an object, I think &amp;ldquo;What if that
object is nil?&amp;rdquo;. All of a sudden, code that appeared stable now feels random.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;One of the big things that people have latched onto with Swift is that it allows
functional programming. I plan several detailed posts on functional programming
in this series. But for now I would just recommend that you not worry about the
distinction between procedural &amp;amp; functional programming. Both have their
advocates and their detractors. Both have their advantages and disadvantages.
Just do what ever works for you and we can worry about this later.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Learning Swift - An Introduction</title>
<link>https://troz.net/post/2016/learning-swift-an-introduction/</link>
<pubDate>Tue, 09 Feb 2016 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2016/learning-swift-an-introduction/</guid>
<description>&lt;h2 id=&#34;welcome-to-learning-swift&#34;&gt;Welcome to Learning Swift.&lt;/h2&gt;
&lt;p&gt;This is the first post in what I hope will be an extensive series dealing with
the Swift language. Here are some of the questions I hope to answer:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Should I learn Swift? Why?&lt;/li&gt;
&lt;li&gt;Why is Swift so great?&lt;/li&gt;
&lt;li&gt;How should I start learning Swift?&lt;/li&gt;
&lt;li&gt;I already know Objective-C - how do I convert?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;After that, I am planning a series of posts discussing the major differences of
Swift from the view point of an Objective-C programmer and the aspects of Swift
that I found difficult to grasp. Topics covered will include such things:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;optionals&lt;/li&gt;
&lt;li&gt;closures&lt;/li&gt;
&lt;li&gt;functional programming&lt;/li&gt;
&lt;li&gt;protocols&lt;/li&gt;
&lt;li&gt;generics&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I am coming from a background of Objective-C, so many of my posts will be
dealing with aspects of Swift that are not familiar to Objective-C programmers.
I will not assume any Objective-C programming experience, but some features of
Swift that are new to me, will be familiar to people accustomed to other
languages.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;So let&amp;rsquo;s start by answering the first question:&lt;/p&gt;
&lt;h2 id=&#34;should-i-learn-swift&#34;&gt;Should I learn Swift?&lt;/h2&gt;
&lt;p&gt;If you are writing or planning apps for any Apple platform - YES.&lt;!-- raw HTML omitted --&gt; If not,
wait until Swift is available for the platforms you need to support.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;why&#34;&gt;Why?&lt;/h2&gt;
&lt;h3 id=&#34;if-you-are-already-an-ios-or-mac-developer-yes&#34;&gt;If you are already an iOS or Mac developer: YES&lt;/h3&gt;
&lt;p&gt;This is the new language and Apple is very committed to it. Objective-C is not
going away any time soon, but Swift is where it is going to end up, so why not
make the jump now while the language is still in development? You have to accept
that fact that every release of Xcode is going to break your code, but the
automatic re-factoring works very well. And by moving to Swift now, you get the
chance to influence the direction of a new language. How often does that happen?&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;if-you-are-starting-to-learn-ios-or-mac-development-yes&#34;&gt;If you are starting to learn iOS or Mac development: YES&lt;/h3&gt;
&lt;p&gt;If you have no history with Objective-C, then do not waste your time learning
it. There is still a lot of sample code out there in Objective-C, but increasing
numbers of tutorial sites are using Swift and converting their existing
tutorials to Swift. It will help if you know just enough Objective-C to read it,
but you do not need to know enough to write it.&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;if-you-do-not-program-for-mac-or-ios-not-yet&#34;&gt;If you do NOT program for Mac or iOS: NOT YET&lt;/h3&gt;
&lt;p&gt;Swift went open source in late 2015. This is a big deal and Apple&amp;rsquo;s plans for
Swift are quite clear. They want Swift to be such a main-stream language that it
is used instead of Java for basic computer science courses in universities. This
was never going to happen unless the language was open-source and
cross-platform. It is now open-source and available for &lt;a href=&#34;https://swift.org/download/#latest-development-snapshots&#34;&gt;Linux as well as
Mac/iOS&lt;/a&gt;. While Apple has not yet released any further ports, I think there
are more on the way for Raspberry Pi, Arduino and other embedded systems as well
as server-side Swift libraries like &lt;a href=&#34;http://perfect.org&#34;&gt;Perfect&lt;/a&gt;. I expect that a version for
Windows will not be far behind.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>New Twitter account</title>
<link>https://troz.net/post/2016/new-twitter-account/</link>
<pubDate>Tue, 09 Feb 2016 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2016/new-twitter-account/</guid>
<description>&lt;p&gt;I have started a new Twitter account so that I can provide rapid support to
users of my apps. Please contact me &lt;a href=&#34;https://twitter.com/trozware&#34;&gt;@trozware&lt;/a&gt; if you have any questions,
suggestions, bug reports or would just like to chat.&lt;/p&gt;
&lt;p&gt;I will also be using this account to promote my new &lt;a href=&#34;https://troz.net/post/2016-02-09-learning-swift-an-introduction/&#34;&gt;Learning Swift&lt;/a&gt; series.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Possible issues with Icon Builder &amp; Watch icons</title>
<link>https://troz.net/post/2016/possible-issues-with-iconbuilder/</link>
<pubDate>Sat, 06 Feb 2016 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2016/possible-issues-with-iconbuilder/</guid>
<description>&lt;p&gt;It has come to my attention that there are two possible issues with Icon Builder
3.0.1 when using icons created for an Apple Watch app. Once of them is something
I can fix and the other appears to be a bug in Xcode 7.2&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;Update:&lt;/strong&gt; Version 3.2 of Icon Builder is now available in the &lt;a href=&#34;http://itunes.apple.com/app/icon-builder/id552293482&#34;&gt;Mac App
Store&lt;/a&gt;. This removes the alpha channel from icons for a watch app.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;The first problem is that iTines Connect now requires that the icons for an
Apple Watch app include no alpha channel. This is becoming an increasing trend
with it first having applied to the large icon file you upload directly to
iTunes Connect, then to screen shots. I expect it to extend to iOS app icons
soon, but hopefully Mac app icons can continue to include transparency.&lt;/p&gt;
&lt;p&gt;With Apple Watch icons, you are supposed to create a set of square icons and
watchOS or iTunesConnect applies the rounding mask. Presumably this is more
complicated if the icon contains an alpha channel even if there are no
transparent pixels. If your Watch app icons contain an alpha channel, you will
see errors like this after uploading your app to iTunes Connect:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Invalid Icon - The watch application &amp;lsquo;AppName.app/Watch/AppName WatchKit
App.app&amp;rsquo; contains an icon file &amp;lsquo;AppName.app/Watch/AppName WatchKit
&lt;a href=&#34;mailto:App.app/AppIcon-Watch24x24@2x.png&#34;&gt;App.app/AppIcon-Watch24x24@2x.png&lt;/a&gt;&amp;rsquo; with an alpha channel. Icons should not
have an alpha channel.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;You will probably get this error message for every icon size in the Watch app (8
in total). Until I release a new version of Icon Builder that allows for this
this, I suggest you use this &lt;a href=&#34;https://www.cocoacontrols.com/controls/alpha-channel-remover&#34;&gt;Alpha Channel Remover app&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;In your Xcode project, go to WatchKit App Assets.xcassets, select the AppIcon
set, right-click and choose &amp;ldquo;Show in Finder&amp;rdquo;. A folder will open containing
eight .png files and one .json file. Drag &amp;amp; drop the .png files into the Alpha
Channel Remover window and click the &amp;ldquo;Remove Alpha Channel&amp;rdquo; button. This will
replace all those image files with new versions without alpha channels. To
confirm this, select any of the images and press Command-I to get info. In the
More Info section, you will see &amp;ldquo;Alpha channel: No&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;You can now submit your app again, but that only solves one of the issues.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;The other problem is that you will get a warning about the &lt;a href=&#34;mailto:44x44@2x.png&#34;&gt;44x44@2x.png&lt;/a&gt; icon
file.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Invalid Icon Name - The watch application &amp;lsquo;AppName.app/Watch/AppName WatchKit
App.app&amp;rsquo; contains an invalid icon file name &amp;lsquo;AppName.app/Watch/AppName
WatchKit &lt;a href=&#34;mailto:App.app/AppIcon-Watch44x44@2x.png&#34;&gt;App.app/AppIcon-Watch44x44@2x.png&lt;/a&gt;&amp;rsquo;. Make sure that icon file names
follow the pattern&lt;!-- raw HTML omitted --&gt; &amp;ldquo;&lt;code&gt;*&amp;lt;dimension&amp;gt;@&amp;lt;scale&amp;gt;x.png&lt;/code&gt;&amp;rdquo; and they match the
required dimensions. Please visit &lt;a href=&#34;https://developer.apple.com/watchkit/&#34;&gt;https://developer.apple.com/watchkit/&lt;/a&gt; for
more information.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;As you can see in the error message, the icon name (which is set by Xcode) does
conform to the required pattern, and the image is the correct size. This appears
to be a &lt;a href=&#34;http://www.openradar.me/23801324&#34;&gt;bug in Xcode 7.2&lt;/a&gt; but does not stop you from submitting your app as
it is only a warning and not an error. Presumably this will be fixed in later
version of Xcode. I am running Xcode 7.2.1 and still see this warning.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Man Reader 1.5</title>
<link>https://troz.net/post/2016/man-reader-1.5/</link>
<pubDate>Sun, 31 Jan 2016 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2016/man-reader-1.5/</guid>
<description>&lt;p&gt;Man Reader has been updated to version 1.5 with a major improvement in the way
it looks for available man pages.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://troz.net/manreader/&#34;&gt;Man Reader 1.5&lt;/a&gt; is now available through the &lt;a href=&#34;http://itunes.apple.com/app/man-reader/id522583774?mt=12&#34;&gt;Mac App Store&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id=&#34;change-log&#34;&gt;Change Log:&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Much improved searching for available man pages.&lt;/li&gt;
&lt;li&gt;Sand-boxed version now works just as well as the non-sand-boxed.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The main feature of this version is that it solves the previous problems with
the App Store version and sand-boxing. This was restricting the number of man
pages listed in Man Reader so I had to release a non-sand-boxed version of the
app to allow for full functionality.&lt;/p&gt;
&lt;p&gt;However I discovered that although this gave better results, it was still
missing a lot of man pages. Version 1.5 now queries the man page files in a
completely different way which is listing many more man pages.&lt;/p&gt;
&lt;p&gt;If you previously had downloaded the Man Reader (no SB) version of the app from
this site, please revert to the App Store version which you would have needed to
have bought in order to use the downloaded app. If you bought the app from
Paddle, &lt;a href=&#34;mailto:sarah@troz.net?subject=Man%20Reader%20transfer%20to%20App%20Store&#34;&gt;contact me&lt;/a&gt; and I will transfer you to the App Store version.
Neither of these other versions will be supported or updated any more.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Using 19th Hole on the Apple Watch</title>
<link>https://troz.net/post/2015/using-19th-hole-on-the-apple-watch/</link>
<pubDate>Sat, 12 Dec 2015 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2015/using-19th-hole-on-the-apple-watch/</guid>
<description>&lt;p&gt;19th Hole for iPhone and Apple Watch version 3 is now available through the
&lt;a href=&#34;https://itunes.apple.com/us/app/the-19th-hole/id871686159?mt=8&amp;amp;uo=4&#34;&gt;iTunes App Store&lt;/a&gt;. This version is a complete re-write to accommodate the
changes in iOS 9 and watchOS2.&lt;/p&gt;
&lt;p&gt;The major changes are to do with the way the iPhone and the Watch communicate.
In watchOS1, all the brains of the app had to live in the iPhone, meaning that
every single interaction on the Watch had to be referred back to the iPhone for
processing and the result sent back to the Watch for display. This lead to
communications delays and breakdowns which caused third-party apps to work
sluggishly or not at all. In watchOS2, the brains of the watch part of the app
can now operate inside the watch, greatly reducing the number of communications
needed. As well as that, Apple has now provided us with multiple ways of getting
data to and from the Watch which again improves performance and reliability.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;With the 19th Hole, I made the decision to change the method of inputting
scores. The previous version used a slider with plus and minus buttons to adjust
scores. The problems with this were the small target area of the plus &amp;amp; minus
buttons as well as the fact that a slider with more than about 3 divisions was
not useful as a visual indicator.&lt;/p&gt;
&lt;p&gt;When watchOS2 allowed developers access to the digital crown, I decided to
switch to using that instead. Now you tap the score box of the player you wish
to adjust and use the digital crown to select a number. I think this will be
easier to use while wearing a glove and hope that it is still easy to read out
doors.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;The other suggestion is not to do with watchOS2 but is a general tip for using
apps of this kind. By default, the Apple Watch will always show the watch face
when you raise your wrist. Normally this is the most useful thing, but when
scoring a round of golf, it would be easier if The 19th Hole app stayed at the
front. To make this happen, you need to set to watch to show the last used app
instead of the watch face. This can be set using the Apple Watch app on the
phone or on the watch itself.&lt;/p&gt;
&lt;p&gt;On the phone:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Open the Apple Watch app.&lt;/li&gt;
&lt;li&gt;Select My Watch from the tabs at the bottom.&lt;/li&gt;
&lt;li&gt;Tap &amp;ldquo;General&amp;rdquo; and then scroll down to tap &amp;ldquo;Wake Screen&amp;rdquo;.&lt;/li&gt;
&lt;li&gt;Make sure &amp;ldquo;Resume Last Activity&amp;rdquo; is checked.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;On the watch:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Press the digital crown to see the app icons.&lt;/li&gt;
&lt;li&gt;Find and tap the Settings icon.&lt;/li&gt;
&lt;li&gt;Scroll down and tap &amp;ldquo;General&amp;rdquo;.&lt;/li&gt;
&lt;li&gt;Tap &amp;ldquo;Wake Screen&amp;rdquo; and scroll down to make sure that &amp;ldquo;Previous Activity&amp;rdquo; is
checked in the &amp;ldquo;Resume To&amp;rdquo; section.&lt;/li&gt;
&lt;/ul&gt;
</description>
</item>
    
    <item>
<title>Dice Pass for Mac</title>
<link>https://troz.net/post/2015/dice-pass-for-mac/</link>
<pubDate>Sat, 30 May 2015 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2015/dice-pass-for-mac/</guid>
<description>&lt;p&gt;We live in a world of passwords and passphrases and there is a constant struggle
between having a secure and a memorable password. As a result, many of us re-use
passwords even though we know this is a bad idea.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://xkcd.com/936/&#34;&gt;XKCD&lt;/a&gt; had a wonderful comic that illustrated the theory of using a
passphrase composed of words that are easy to remember but with a combination
that made the passphrase very hard to guess. However even when deciding to use a
passphrase like this, it is not easy for us humans to avoid using words that
have meaning for us, particularly when it is something we really need to
remember.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://world.std.com/~reinhold/diceware.html&#34;&gt;Diceware&lt;/a&gt; was developed to solve this problem. You have a set of 5 dice and
a list of words assigned to each possible dice roll for 11111 to 66666. You roll
the five dice and get the matching word from the list. Repeat this for the
number of words you want to use in your passphrase and you have a random phrase
that is hopefully still memorable.&lt;/p&gt;
&lt;p&gt;But this sounds like a lot of effort and not something you are likely to do when
faced by a password entry field on a web page. So &lt;a href=&#34;https://troz.net/dicepass/&#34;&gt;Dice Pass&lt;/a&gt; was written to
do the work for you quickly and easily.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/DicePass_Mac.png&#34; alt=&#34;Dice Pass for Mac&#34;&gt;&lt;/p&gt;
&lt;p&gt;Select the number of words you want in your passphrase and see the phrase
immediately. Keep clicking the &amp;ldquo;Generate New Phrase&amp;rdquo; button until you get a
phrase you like. If you feel that the computer is not to be trusted when
generating a random number for the dice rolls, use your real dice and click the
dice to change them to the roll you got. If you get a passphrase that is good
except for one or two words, use the Re-Roll button beside those words to get a
new roll for just that word.&lt;/p&gt;
&lt;p&gt;Dice Pass is available from the &lt;a href=&#34;https://itunes.apple.com/app/dice-pass/id997688302?mt=12&amp;amp;uo=4&#34;&gt;Mac App Store&lt;/a&gt; now.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Apple Watch First Impressions</title>
<link>https://troz.net/post/2015/apple-watch-first-impressions/</link>
<pubDate>Wed, 29 Apr 2015 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2015/apple-watch-first-impressions/</guid>
<description>&lt;p&gt;I realise that every one has written one of these posts, but given that everyone
looks for and notices different things, I think it is still valid.&lt;/p&gt;
&lt;p&gt;My first impression was &amp;ldquo;Why does it come in such a large box?&amp;rdquo;. The courier
delivered two boxes - my 38mm Apple Watch Sport and Tim&amp;rsquo;s 42mm Apple Watch
Sport. They both came in long boxes, with the 42mm box significantly longer. And
both boxes were heavy!&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;un-boxing&#34;&gt;Un-boxing:&lt;/h3&gt;
&lt;p&gt;Opening them was a typical Apple experience: pull the tag to open the external
cardboard box, lift out the white internal box. This opens to reveal the watch
with the default strap attached (short for 38mm, long for 42mm). Lift the watch
out and pull the tags to remove the plastic protective coating. (On a side note,
it drives me crazy when people leave this coating on devices, but I can&amp;rsquo;t see
this happening on the watch.) Underneath there is a sleeve containing the other
half watch strap so you can swap from long to short. My family tells me that
this also includes a user guide, but I didn’t read that - typical Apple user&amp;hellip;
Under the sleeve is the power block and charging cable. The charging puck is
larger than I expected and the cable is very long. Having removed all the
components, the packaging is still quite heavy, so I guess Apple just wanted to
make sure that no watches were damaged in transit and that it felt like a
quality product.&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;pairing&#34;&gt;Pairing&lt;/h3&gt;
&lt;p&gt;Pairing my watch to my iPhone was amazingly slick. After selecting my language,
the watch displayed a sort of nebula pattern. On the iPhone, I launched the
Apple Watch app, selected the pairing option and pointed the phone camera at the
watch display. This did the pairing. Then I waited while all the relevant apps
transferred their Apple Watch components to the watch and I was ready to start
using it.&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;the-watch&#34;&gt;The Watch:&lt;/h3&gt;
&lt;p&gt;The watch comes with the modular watch face showing by default. This is a
digital time read-out with various &amp;lsquo;complications&amp;rsquo;. Force-touch the watch face
to change it - this takes a surprisingly strong touch. Then you can swipe
sideways to select a watch style. Once you have a style selected, some of them
offer further customisations: select how much detail is shown, choose what extra
information to display, adjust colors.&lt;/p&gt;
&lt;p&gt;This is a lot of fun and I am still changing mine very frequently. The good
thing is that your customisations are stored, so if you set up the utility watch
face in a particular way, then swap to the modular and configure it, when you go
back to utility, your previous settings are all still there.&lt;/p&gt;
&lt;p&gt;The screen is gorgeous - very crisp and easy to read.&lt;/p&gt;
&lt;p&gt;Twisting your wrist to show the time works well most of the time. There is a
delay that I would estimate at about half a second, presumably to avoid false
positives triggering unnecessary displays. If you are holding your wrist at an
unusual angle e.g. showing the watch to someone, this twist will not always
work, but tapping the screen will display the watch face instantly.&lt;/p&gt;
&lt;p&gt;Tapping on a complication will take you to the relevant parent app e.g. tapping
the current temperature will open the Weather app.&lt;/p&gt;
&lt;p&gt;A minor quibble is that the phases of the moon are displayed from a northern
hemisphere point of view and do not match what we actually see here in
Australia.&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;battery-life&#34;&gt;Battery Life:&lt;/h3&gt;
&lt;p&gt;This is a complete non-issue. On my first day with the watch, the battery was at
70% when I first turned it on. As you can imagine, usage was very intense that
first day and I got to 8%. Since then, the battery level has only got down to 40
-50% over a day and it recharges to 100% within 2 hours. Tim&amp;rsquo;s 42mm model gets
slightly better battery life as expected.&lt;/p&gt;
&lt;p&gt;I started off having the battery indicator as one of the &amp;lsquo;complications&amp;rsquo; on my
watch face, but now I just ignore it.&lt;/p&gt;
&lt;p&gt;And the battery life of my iPhone has improved remarkably due to so many quick
transactions being done through the watch instead.&lt;/p&gt;
&lt;p&gt;I did have a charging problem one night. I woke up and checked the time and
realised that the watch was quite warm to the touch. I checked the battery level
which was actually lower than when I had put it on the charger. I took it off
the charger for a few hours, then put it back and all was well.&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;notifications&#34;&gt;Notifications&lt;/h3&gt;
&lt;p&gt;Here is where you need to be careful. I had turned off most notifications on my
phone before getting the watch, so I have not been inconvenienced, in fact I
have been able to re-enable many notifications as they are no longer so
intrusive.&lt;/p&gt;
&lt;p&gt;At first we thought some notifications were not getting through to the watch,
then we found out that if your iPhone is awake and un-locked, notifications are
not passed on to the watch. So drop the time until sleep on your phone to the
minimum which saves your phone battery and makes sure you receive most
notifications on the watch.&lt;/p&gt;
&lt;p&gt;If you want to stop any apps sending notifications through to the watch, this is
easily set in the iPhone&amp;rsquo;s Apple Watch app.&lt;/p&gt;
&lt;p&gt;I have noticed there is a bit of a delay. I hear an email or message arriving on
my phone and it can be half a minute before it gets to my watch.&lt;/p&gt;
&lt;p&gt;Once you get a notification, you can tap it to go to the parent app, swipe up to
process it in some way depending on the type of notification, or swipe to the
left to see a button that will clear the notification. If you want to get rid of
all your notifications at once, do a force-touch on the notifications screen to
get the option to clear them all.&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;glances&#34;&gt;Glances&lt;/h3&gt;
&lt;p&gt;Glances are designed to be one screen indicators giving you important
information as quickly as possible. From there, you can decide whether to go to
the parent app or not. These are accessed by swiping up from the bottom of the
screen when looking at the watch face.&lt;/p&gt;
&lt;p&gt;I found that the most important thing here was to reduce the number of glances
shown, since they are displayed sequentially. If you have 20 glances installed,
you have to swipe at least 20 times to see them all. So go to the Apple Watch
app on your iPhone and turn off the glances you do not find essential.&lt;/p&gt;
&lt;p&gt;The first glance in the sequence is essential though as it allows you to toggle
airplane mode, do not disturb and silent mode. It also has a button that can
make your iPhone make a sound to help you locate it. Hold this button down to
make the iPhone flash come on as well.&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;activity&#34;&gt;Activity&lt;/h3&gt;
&lt;p&gt;Here I have to confess to my first disappointment. The activity app tracks three
things: Move, Exercise and Stand. When you first start the watch, you tell it
your age, sex, weight and height. It computes a suggested daily move goal for
you which you can adjust at any time. Then it tracks your daily activities and
shows how well you are doing in relation to your goal. For exercise and standing
the goals are 30 minutes exercise and standing for at least one minute in an
hour 12 times though the day.&lt;/p&gt;
&lt;p&gt;The move tracking seems to be fine. I am not sure what metrics it uses, but on
more active days, the numbers go up.&lt;/p&gt;
&lt;p&gt;The exercise one doesn&amp;rsquo;t work for me. We went for a walk and when we returned,
Tim&amp;rsquo;s watch showed 25 minutes exercise and mine showed 1 minute. We had walked
the same distance at the same speed, as confirmed by the pedometer. Subsequent
tests revealed that I don&amp;rsquo;t swing my arms enough when walking to trigger what
ever sensor this is using. I can&amp;rsquo;t quite see why it ignores the pedometer
completely, but hopefully this can be fixed by a software update. For now, I
just ignore this circle.&lt;/p&gt;
&lt;p&gt;Standing is another issue since I use a standing desk, so I stand for many hours
each day. Even when standing, I get my hourly reminders to stand. However I use
this as a trigger to make me to move about for a minute, so I suppose that is
still useful.&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;communications&#34;&gt;Communications&lt;/h3&gt;
&lt;p&gt;The various forms of communication are a real strength of the watch. With Tim &amp;amp;
I both having watches, we can phone, message (audio or text) and use the new
Digital Touch to send sketches, taps or heart beats. While it feels a bit weird
to be talking to your wrist, this works really well and the sound quality is
amazing for such a small device. If you need more privacy, it is very easy to
transfer a phone call back to your phone.&lt;/p&gt;
&lt;p&gt;Oddly, the watch does not appear to offer FaceTime but always uses standard
phone calls.&lt;/p&gt;
&lt;p&gt;Messages are where the watch excels. If you get a message with a question, the
watch can suggest possible answers so you just have to tap a button. Even
without this, there is a set of pre-defined answers which you can edit in the
Apple Watch app on your iPhone. And you can also use dictation or the new
animated emojis. Dictation seems a lot better on the watch than it ever was
before on the phone. And even if dictation is not transcribed perfectly, you can
send the message as an audio recording instead of text.&lt;/p&gt;
&lt;p&gt;When recording, tap the Done button as soon as you have finished speaking. The
inclination is to wait for the text to be processed, but the recording carries
on, so stop the recording and let the text processing finish in its own time.&lt;/p&gt;
&lt;p&gt;The animated emojis work when you send them to other devices as they appear as
GIFs. You can choose from 3 sets: faces, hands and hearts. Once you have swiped
to select a set, use the crown to scroll between the options. You can also swipe
further to get to the standard emojis.&lt;/p&gt;
&lt;p&gt;Digital Touch works between watches only. It is a fun gimmick and I can imagine
us developing a set of key codes or sketches, but neither of us can draw very
well, so the sketches are very rough. The heart beat is amusing, but the tapping
is surprisingly effective as an attention-getter.&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;summary&#34;&gt;Summary&lt;/h3&gt;
&lt;p&gt;I think this is the start of a new way of interacting with our technology in a
way that is both closer to us and less intrusive. I am loving the watch so far
and can&amp;rsquo;t wait to see where it goes from here.&lt;/p&gt;
&lt;hr&gt;
</description>
</item>
    
    <item>
<title>Time In Words 4.0</title>
<link>https://troz.net/post/2015/time-in-words-4.0/</link>
<pubDate>Wed, 15 Apr 2015 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2015/time-in-words-4.0/</guid>
<description>&lt;p&gt;&lt;a href=&#34;https://troz.net/time-in-words/&#34;&gt;Time In Words&lt;/a&gt; for iOS started off as a fun gimmick, emulating the
&lt;a href=&#34;http://www.qlocktwo.com/&#34;&gt;Qlocktwo&lt;/a&gt; type of time display where the relevant words are highlighted in
some way to spell out the time as a sentence. This very quickly evolved into
what I hoped would be more useful app, still showing the original display, but
also providing the current time &amp;amp; date as complete sentences. Then I added time
conversions and discovered the real power and utility of writing out times as
words.&lt;/p&gt;
&lt;p&gt;When it comes to converting times, I doubt there are many people in the world
who haven&amp;rsquo;t had problems.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Is that morning or afternoon for them?&lt;/li&gt;
&lt;li&gt;Are they in tomorrow, today or yesterday?&lt;/li&gt;
&lt;li&gt;What if they are using daylight-savings?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Having the time written out removes all ambiguity. As an example, Time In Words
currently reports very clearly:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;In Los Angeles, it is nine minutes to ten on Tuesday evening (daylight-savings
time).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;When writing &lt;a href=&#34;https://troz.net/time-in-words-for-mac/&#34;&gt;Time In Words for Mac&lt;/a&gt;, I focussed immediately on the time zone
conversion facilities, and provided a menu bar app that can display as many time
zones as you like (although more than will show on a single screen would
probably get annoying).&lt;/p&gt;
&lt;p&gt;So when I decided to do a complete re-write of Time In Words for iOS, the
obvious move was to emulate the Mac version and allow for as many time zones as
the user wants, instead of the current 2 or 4 (iPhone or iPad). So I discarded
the Qlocktwo display and the separate date display which used a similar
mechanic. I kept the display that shows the current date and time, but every
display after that shows the time in a different time zone. The time zones can
be changed and re-ordered, so the ones you need most are the fastest to get to
once the app opens.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;One new feature (again taken from the Mac version), is the ability to calculate
&amp;ldquo;What time will it be&amp;hellip;&amp;rdquo;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/TiW_what_time.png&#34; alt=&#34;What time&#34;&gt;&lt;/p&gt;
&lt;p&gt;You dial in your local date and time to see what time that will be in your
selected zone. And if you want to calculate the other way around, tap the &amp;ldquo;Swap
time zones&amp;rdquo; button.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;The main impetus for a re-write was the Apple Watch. I thought this would be a
perfect app for the watch as it could use the Apple Watch&amp;rsquo;s superb time-keeping
in conjunction with my text generation, to add a significant level of usability
to the Apple Watch as regards time zone conversions.&lt;/p&gt;
&lt;p&gt;Sadly, Apple disagrees…&lt;/p&gt;
&lt;p&gt;I completed the app and submitted it to the App Store for review. The review
process seems to be very fast at the moment and the app moved into review only
one day later. And there it stuck for 3 days. This was very odd. My experience
is that once an app gets into review, it only takes a few hours, if that. For
&lt;a href=&#34;https://troz.net/19th-hole/&#34;&gt;19th Hole&lt;/a&gt; - my other app with an Apple Watch component, the review process
took 30 hours. But 3 days!&lt;/p&gt;
&lt;p&gt;Then I got a phone call from Apple where a very polite person explained to me
that although this was not mentioned in any of the documentation, the marketing
people had decided that no apps were to be allowed on the watch if they told the
time.&lt;/p&gt;
&lt;p&gt;I offered to remove the initial screen telling the local time, so the app would
not actually supply the current time but only the time conversions, but that was
not acceptable either.&lt;/p&gt;
&lt;p&gt;Then I tried appealing the rejection. My hopes were not high, but I didn&amp;rsquo;t see
any harm in asking. I again offered to remove the local time display and
emphasised the accessibility advantages of displaying times in this manner.
Another day, another phone call, another polite Apple person saying no.&lt;/p&gt;
&lt;p&gt;So now I have re-submitted the app for review without the Apple Watch component,
which is a shame. I am hoping that after some months they will review this
policy and allow me to try again, but who knows.&lt;/p&gt;
&lt;p&gt;So you can see what you are missing, here are a couple of screen shots from the
watch app showing my local time, plus one time zone:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/Watch_1.png&#34; alt=&#34;Local time&#34;&gt;
&lt;!-- raw HTML omitted --&gt;&lt;img src=&#34;https://troz.net/images/Watch_2.png&#34; alt=&#34;Converted time&#34;&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;One more minor point. People who actually look at version numbers may wonder why
I have gone from version 2.5 to version 4.0. When I was working on version 2.5,
I considered making it version 3.0 and then changed my mind. However by that
time I had already created a version 3.0 in iTunesConnect, so I was not able to
use 3.0 again this time. This version was such a big change that I wanted it to
be a .0 release, so that meant going to version 4.0&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Apple Watch App - Rejected, then Accepted</title>
<link>https://troz.net/post/2015/apple-watch-rejected-then-accepted/</link>
<pubDate>Sat, 11 Apr 2015 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2015/apple-watch-rejected-then-accepted/</guid>
<description>&lt;p&gt;As described in a &lt;a href=&#34;https://troz.net/post/2015-04-02-my-first-apple-watch-app/&#34;&gt;previous post&lt;/a&gt;, about 9 days ago I submitted my first
Apple Watch app for review. The app was an extension of my golf scoring app:
&lt;a href=&#34;https://troz.net/19th-hole/&#34;&gt;The 19th Hole&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I expected that App Store review times would go up dramatically once Apple had
allowed developers to submit watch apps, but this proved to be incorrect. Three
days after submission, the app was marked as &amp;ldquo;In Review&amp;rdquo;. This seemed to happen
last thing on a Saturday, so there was no further action for two days, at which
point the app was rejected, with the following details (sic):&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;We noticed an issue in your app that contributes to a lower quality user
experience than Apple users expect. Specifically,&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;while using the Apple Watch app with the phone app is in the background mode
(display off), the new data entry on the Watch App does not refresh
accordingly until the phone app is turn back on.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;So it appeared that the communication between the watch and the phone, which
worked perfectly on the simulators, did not work at all on the actual devices.
This is the problem with developing for a device that you do not have.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;After some research, it appears that the problem is with the phone not operating
correctly in background mode. Apple provides for communications from the watch
to the phone. The phone can respond, but only the watch can initiate a
connection. I guess this makes sense since every watch will be paired with a
phone but the reverse will not always be true.&lt;/p&gt;
&lt;p&gt;To talk to the phone, the watch uses this function:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;openParentApplication&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;_&lt;/span&gt; userInfo: [NSObject : AnyObject],
  reply reply: (([NSObject : AnyObject]&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt;, NSError!) -&amp;gt; Void)?) -&amp;gt; Bool
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The phone listens for messages in this event handler:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-swift&#34; data-lang=&#34;swift&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;application&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;_&lt;/span&gt; application: UIApplication,
  handleWatchKitExtensionRequest userInfo: [NSObject : AnyObject]?,
  reply reply: (([NSObject : AnyObject]&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt;) -&amp;gt; Void)&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The name of the WatchKit function is slightly misleading as it does open the
parent application, but only in the background. Then the parent app is supposed
to do whatever tasks are called for in the handleWatchKitExtensionRequest
function, and return any required data using the supplied reply() function.&lt;/p&gt;
&lt;p&gt;So far, so good, and it all worked perfectly in the simulator. But it appears
that although this call wakes the iPhone app, it does not stay awake long enough
to do anything. Many thanks to Brian at &lt;a href=&#34;http://www.fiveminutewatchkit.com/blog/2015/3/11/one-weird-trick-to-fix-openparentapplicationreply&#34;&gt;Five Minute WatchKit&lt;/a&gt; who pointed
out the way to make this work. Firstly, you create a dummy background task
guaranteed to keep the iPhone app awake for 2 seconds. Then you perform your own
work, using another background task. When that is finished, the phone can send
the response and end the real background task. The dummy task will time out by
itself after 2 seconds.&lt;/p&gt;
&lt;p&gt;For my needs, I could probably reduce the 2 seconds considerably, but since this
is a problem I am unable to test, I decided just to go with Brian&amp;rsquo;s suggestion
as it is.&lt;/p&gt;
&lt;p&gt;I re-submitted the app the same day it was rejected, and two days later it was
back in review. The review process took longer than usual, but about 30 hours
later, the app was marked &amp;ldquo;Pending an Apple Release&amp;rdquo;. I assumed this meant that
Apple would release all WatchKit apps on 24th April when the watches shipped,
but the following day the app was reported as &amp;ldquo;Pending Developer Release&amp;rdquo; (I had
set it to release manually). Now I have told iTunesConnect to release the app
and it is &amp;ldquo;Processing for App Store&amp;rdquo;.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;On a related note, the start of pre-ordering for the Apple Watch was scheduled
for a very civilised 5:01 pm here in eastern Australia. I had three watches all
lined up in my Favorites in the Apple Store app, ready for ordering. When the
store became live (at about 5:03 pm), I could not work out how to order all
three in a single operation, so had to place these orders one at a time. I got
the first two ordered for the soonest possible delivery, but by the time I got
to the third (about 3 minutes later), I had missed out and it will ship in 4 to
6 weeks!&lt;/p&gt;
</description>
</item>
    
    <item>
<title>My First Apple Watch App</title>
<link>https://troz.net/post/2015/my-first-apple-watch-app/</link>
<pubDate>Thu, 02 Apr 2015 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2015/my-first-apple-watch-app/</guid>
<description>&lt;p&gt;I have just submitted my first Apple Watch app to the iTunes App Store. This is
a scary thing to do, since I have never seen, touched or used an Apple Watch and
all I had to go on was the Simulator that Apple supplies with Xcode.&lt;/p&gt;
&lt;p&gt;At the moment, Apple has only made a limited set of Apple Watch features
available to developers, and all Apple Watch apps come tethered to an iOS app -
presumably this will mainly be iPhone apps, but I wonder will we be able to
connect Apple Watches to iPads? Anyway, it made sense to extend one of my
existing apps to use the Apple Watch instead of starting from scratch.&lt;/p&gt;
&lt;p&gt;Of my &lt;a href=&#34;https://troz.net/apps-ios/&#34;&gt;iOS apps&lt;/a&gt;, I decided that &lt;a href=&#34;https://troz.net/19th-hole/&#34;&gt;The 19th Hole&lt;/a&gt;, my golf scoring app,
would be well suited to the Apple Watch. The problem with using the iPhone
version to score is that you have to keep pulling your iPhone in and out of your
golf bag, sometimes in the rain, sometimes in bright sunlight. Being able to
enter the scores on your wrist sounds like a big improvement. We know that the
Apple Watch is at least somewhat water-resistant, but we are yet to see how well
it performs in bright sunlight, however I would expect that Apple has put
considerable effort into this.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Once I decided to write an Apple Watch app, the first step was to learn how. I
read all Apple&amp;rsquo;s published documents to get a feel for what was possible and
what user-interface objects would be available. I find online courses very
helpful and by far the best Apple Watch course that I found was &lt;a href=&#34;http://www.raywenderlich.com/video-tutorials#watchkit&#34;&gt;Ray
Wenderlich&amp;rsquo;s WatchKit video tutorial series&lt;/a&gt;. The instructors were very clear
and explained how the layout and sizing of objects works on the Apple Watch, as
well as how to set up and move between views and how to communicate from the
Watch back to the iPhone. The layout section of the course was particularly
valuable as no other course I found even mentioned this, although it is crucial
to the interface design and allowing for the two sizes of watch.&lt;/p&gt;
&lt;p&gt;I had released an update to &lt;a href=&#34;https://troz.net/19th-hole/&#34;&gt;The 19th Hole&lt;/a&gt; recently in preparation for this.
I wanted to have squashed the bugs and updated the interface, so the only
changes needed would be the WatchKit ones.&lt;/p&gt;
&lt;p&gt;The first step in adding a WatchKit app to your existing app is to create a new
target in the Xcode project. Choosing WatchKit actually adds two new targets:
the WatchKit Extension which lives on the iPhone and supplies the code for the
Watch, and the WatchKit App which lives on the Watch and provides the interface.&lt;/p&gt;
&lt;p&gt;I decided to use a paged interface with one page per hole. Each of these pages
has a table, with one row per player. A slider with plus &amp;amp; minus buttons lets
you enter the score for each player and the total score for each player is also
displayed.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/19thHole-Watch2.png&#34; alt=&#34;Data entry&#34;&gt;&lt;/p&gt;
&lt;p&gt;Apart from this data entry view, I have a splash screen which shows you the
current round as set up on the iPhone and a final summary screen showing
everyone&amp;rsquo;s totals.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://troz.net/images/19thHole-Watch1.png&#34; alt=&#34;Splash screen&#34;&gt;
&lt;img src=&#34;https://troz.net/images/19thHole-Watch3.png&#34; alt=&#34;Summary&#34;&gt;&lt;/p&gt;
&lt;p&gt;These images are taken from the Apple Watch simulator running in 42mm mode.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;The biggest programming problem was getting the communications working beween
the two devices. The 19th Hole uses Core Data for all data storage. My first
attempt shared this data between the two apps, allowing both to read and update
the database. This almost worked, but if both apps were open, then changes in
one device did not get across to the other. It seemed that the data was cached
and I was unable to find a way to force either app to update every time.&lt;/p&gt;
&lt;p&gt;My next attempt kept all the data in the iPhone app and had the WatchKit
extension ask for whatever data it needed and send changes to the iPhone app.
This worked much better and I was able to get live updates between the two
devices.&lt;/p&gt;
&lt;p&gt;The other issue is the fact that I have never seen, touched or used an Apple
Watch. This means that I had to guess a lot of things:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;how well will it perform?&lt;/li&gt;
&lt;li&gt;will the icon look OK?&lt;/li&gt;
&lt;li&gt;are the controls large enough to use?&lt;/li&gt;
&lt;li&gt;will the text be large enough to read?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;My main philosophy was to keep the Watch app as simple as possible and use the
standard interface elements, font sizes etc. Hopefully that will work.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;The final step was submitting the app to iTunes Connect for review. It was not
clear to me how to do this, so I logged into iTunes Connect, created a new
version and entered the meta-data. I couldn&amp;rsquo;t see anywhere to say anything about
the Watch. I archived the main iOS app as usual and validated it with the Store.
I had a few things to fix up, but I got the build submitted.&lt;/p&gt;
&lt;p&gt;Back to iTunes Connect and once the uploaded build had been processed, I was
able to select it and click &amp;ldquo;Submit for Review&amp;rdquo;. At this point, the page
reported an error and showed me a new section where I could upload the Apple
Watch icon and screen shots.&lt;/p&gt;
&lt;p&gt;I had been unsure how the icon would look when made round, but it looks OK on
the iTunes Connect page. How it will look on a tiny watch screen remains to be
seen. Anyway, once I had my icon and screen shots uploaded, I was able to
proceed to the next step. But then I got a message saying that the app could not
be processed - no explanation. Thankfully, I had seen some developers on Twitter
reporting this, and somebody said that the solution was to remove the alpha
channel from your screen shots. Sorry for not giving credit here - I forget who
said this, but it worked, so thank you whoever you are.&lt;/p&gt;
&lt;p&gt;So now my app is waiting for review and who knows how long that will take.
According to &lt;a href=&#34;http://appreviewtimes.com&#34;&gt;App Review Times&lt;/a&gt;, the current estimate is 8 days, but the
trend is heading upwards. I would expect that to blow out in the next few weeks
as developers try to get their apps ready for the Apple Watch release date of
April 24th.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>LiveCode stacks</title>
<link>https://troz.net/post/2015/livecode-stacks/</link>
<pubDate>Wed, 18 Mar 2015 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2015/livecode-stacks/</guid>
<description>&lt;p&gt;When I converted my site to Jekyll &amp;amp; GitHub, one of the things I left behind was
a collection of LiveCode (Revolution) stacks. For many years I was active in the
Revolution community before going in other directions and over that time, I
built up a small library of stacks that I released into the public domain.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://livecode.com&#34;&gt;LiveCode&lt;/a&gt; is a cross-platform rapid development environment. There is an
open source community edition available for anyone wishing to get started.&lt;/p&gt;
&lt;p&gt;I had assumed that since I had not been an active LiveCode user for many years,
these stacks would have become worthless. But in the last couple of days, I have
received a couple of queries from people looking for them.&lt;/p&gt;
&lt;p&gt;So I created a new GitHub repository and uploaded them all to here: &lt;!-- raw HTML omitted --&gt;
&lt;a href=&#34;https://github.com/trozware/rev_stacks&#34;&gt;LiveCode stacks&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;None of these stacks have been updated recently, but feel free to use or adapt
as you see fit. They have not been tested using recent versions of LiveCode, so
may not work as expected. As stacks are provided as is. Use at your own risk.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Icon Builder 3.0.1</title>
<link>https://troz.net/post/2015/icon-builder-3.0.1/</link>
<pubDate>Tue, 17 Mar 2015 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2015/icon-builder-3.0.1/</guid>
<description>&lt;p&gt;So why an announcement for such a minor upgrade?&lt;/p&gt;
&lt;p&gt;Version 3.0 got no announcement because it was not the release I wanted.&lt;/p&gt;
&lt;p&gt;Having downloaded the Xcode 6.2 &amp;amp; 6.3 betas, I had worked out what icons were
needed to a WatchKit app. This, combined with several other changes, made me
bump the version number to 3.0.&lt;/p&gt;
&lt;p&gt;Sadly, Apple rejected the update because it referred to pre-release products. So
I pulled all mentions of WatchKit out of the interface and meta data and got 3.0
released.&lt;/p&gt;
&lt;p&gt;After the Apple keynote on March 9th, I re-enabled the WatchKit portions of the
app and re-submitted to the App Store, hoping that with the WatchKit SDK now
part of the official Xcode release, Apple&amp;rsquo;s reviewers would allow it to get
through this time.&lt;/p&gt;
&lt;p&gt;This worked - in fact the app was reviewed and accepted within 6 days - so now
Icon Builder adds WatchKit to its list of supported platforms.&lt;/p&gt;
&lt;p&gt;Actually, Apple may have done me a favour in rejecting the first one as they
changed the specifications for the icons slightly between Xcode 6.2 beta and
Xcode 6.2 release.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://troz.net/icon-builder/&#34;&gt;Icon Builder page&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://itunes.apple.com/us/app/icon-builder/id552293482?mt=12&amp;amp;uo=4&#34;&gt;Mac App Store link&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id=&#34;whats-new-in-version-3&#34;&gt;What’s New in version 3?&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Support for WatchKit app icons (version 3.0.1)&lt;/li&gt;
&lt;li&gt;Simplified interface: removed display of smaller icons.&lt;/li&gt;
&lt;li&gt;Fix for @3x images not being saved when you selected iOS 6 support.&lt;/li&gt;
&lt;li&gt;iTunesArtwork@2x file now saved as a JPG to avoid iTunes Connect errors.&lt;/li&gt;
&lt;li&gt;Removed CarPlay icon - Xcode sometimes gave errors when this was included.&lt;/li&gt;
&lt;/ul&gt;
</description>
</item>
    
    <item>
<title>App Store Preview Videos</title>
<link>https://troz.net/post/2015/app-store-preview-videos/</link>
<pubDate>Mon, 16 Mar 2015 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2015/app-store-preview-videos/</guid>
<description>&lt;p&gt;Apple now allows app developers to add a video preview of their app when
uploading to iTunes Connect. This video is shown to potential purchasers when
they are looking at an app in the iTunes App Store, just like the screen shots.&lt;/p&gt;
&lt;p&gt;I have been working on an update to &lt;a href=&#34;https://troz.net/19th-hole/&#34;&gt;19th Hole&lt;/a&gt; and since it uses a custom
method for data input, I decided that a video would be really useful in this
case.&lt;/p&gt;
&lt;p&gt;The first step was to work out how to record video from my iPhone. In OS X
Yosemite (10.10), this can be done using QuickTime Player. Connect your device
to your Mac using a Lightning cable (I think it has to be a Lightning cable -
the old cables will not work). Open up QuickTime Player and choose &amp;ldquo;New Movie
Recording&amp;rdquo; from the File menu. By default this shows input from the Mac&amp;rsquo;s
FaceTime camera, but just to the right of the red Record button, there is a down
arrow that shows a popup menu. Click this and you can select your iPhone as the
Camera. Since I wanted the sound effects included, I also selected my iPhone as
the Microphone, but if you want to provide a voice-over or sound-track, you
might want to change this.&lt;/p&gt;
&lt;p&gt;That handles the technical side of recording, but I needed a way to show where I
was tapping and pressing on the iPhone screen. After some searching, I found
&lt;a href=&#34;https://github.com/toddreed/Touchpose&#34;&gt;Touchpose&lt;/a&gt; which was exactly what I wanted. Since it requires changing the
main.m file, as well as changes to the app delegate, I created a branch in my
app&amp;rsquo;s git repository so that I could apply these changes temporarily, but save
them for next time. The only alternation I made to the default settings was to
change the color of the cursor indicator to suit the color scheme of my app. And
since this was a temporary change, I set it to show the cursor indicator all the
time, not just when the screen was mirrored. All the details are shown in the
sample project.&lt;/p&gt;
&lt;p&gt;Next step was to actually record a session. After my first attempt (which lasted
about 67 seconds), I checked the Apple specs and found that the video could not
be longer than 30 seconds. So I re-thought what I wanted to include and tried
again. It took a few tries to get what I wanted, but finally I ended up with a
.mov file that was 26 seconds long.&lt;/p&gt;
&lt;p&gt;On to iTunes Connect where I had the new version of the app set up already with
its screen shots. Since I have an iPhone 6, the video was only suited for the
4.7 inch section. So I dragged it into the drop zone and waited. No good - the
video frame rate was too high. It has to be 30 fps or less. QuickTime Player had
made a video that was 50 fps.&lt;/p&gt;
&lt;p&gt;The app I usually turn to for any video conversion needs is &lt;a href=&#34;https://handbrake.fr&#34;&gt;Handbrake&lt;/a&gt;. So I
ran the app through Handbrake, specifying a frame rate of 30. This converted the
video to .mp4 instead of .mov, but it was 30 fps. It wasn&amp;rsquo;t until I tried to
upload it to iTunes Connect that I realised Handbrake had cropped the video from
750 x 1334 to 750 x 1330. After searching through the settings, I found where I
needed to turn on custom clipping and set it to 0 so that the original
dimensions were preserved. But iTunes Connect still didn&amp;rsquo;t like it, although
this time the error message was un-informative.&lt;/p&gt;
&lt;p&gt;Eventually, the brains trust on the other side of the room suggested iMovie. Not
only that, but he found that once the original had been dragged into iMovie, the
share options included an &amp;ldquo;App Preview&amp;rdquo; setting. This gave us a .mov file of the
correct dimensions and the correct frame rate which iTunes Connect accepted.&lt;/p&gt;
&lt;p&gt;iTunes Connect that allowed me to select the poster frame for the video and save
the changes to the app meta data. At that point, it showed a notice saying that
the app preview was being processed which could take up to 24 hours. It appears
that the processing has been finished, as that notice has disappeared.&lt;/p&gt;
&lt;p&gt;For the next stage, I ned to wait until the app gets reviewed and hopefully
approved. Then it will be interesting to see how the video looks in the iTunes
App Store.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;As a reward for reading this post, here is a pre-release of the video, showing
how to enter the score data for a hole of golf using &lt;a href=&#34;https://troz.net/19th-hole/&#34;&gt;19th Hole&lt;/a&gt;:&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
</description>
</item>
    
    <item>
<title>Testing automation</title>
<link>https://troz.net/post/2015/testing-automation/</link>
<pubDate>Thu, 12 Mar 2015 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2015/testing-automation/</guid>
<description>&lt;p&gt;Today I am experimenting with automating post generation.&lt;/p&gt;
&lt;p&gt;Firstly, there is the structure of the post Markdown document, which really
boils down to the file name and the header.&lt;/p&gt;
&lt;p&gt;I have set up a macro in &lt;a href=&#34;http://www.ergonis.com/products/typinator/&#34;&gt;Typinator&lt;/a&gt; so that I just type the title of the
post in a text document. I copy that title to the clipboard and type the
shortcut. The header is then created with the title and the formatted permalink.&lt;/p&gt;
&lt;p&gt;To save the document, I use another Typinator snippet to convert the title
(still in the clipboard) to lower case and to replace the spaces in the title
with dashes.&lt;/p&gt;
&lt;p&gt;For starting the local Jekyll server, I have turned to an &lt;a href=&#34;http://www.alfredapp.com&#34;&gt;Alfred&lt;/a&gt; workflow.
I have two actions in the workflow. One opens Terminal, cd&amp;rsquo;s to my site folder
and runs the command to start the local Jekyll server. The second opens my
default browser to the local Jekyll test address.&lt;/p&gt;
&lt;p&gt;Both these actions happen simultaneously so the browser usually fails until
refreshed. The server is left running in Terminal so I can shut it down when
finished testing.&lt;/p&gt;
&lt;p&gt;After writing the post, the final stage is to publish, so I need to work out the
commands for doing a git commit and push. Then I should be able to automate
those tasks.&lt;/p&gt;
&lt;p&gt;Testing the git commands using Terminal, I have come up with the following
sequence:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;git add .
git commit -a -m &amp;quot;Commit message here&amp;quot;
git push
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The commit message could be the title of the post, so I need a way to construct
the command and then execute it. Typinator is good at text manipulation, so I
constructed another macro that takes the clipboard, uses it as the commit
message and performs the git commands. This gave a good commit message, but the
actual commit failed, so that was no use.&lt;/p&gt;
&lt;p&gt;So then I went back to Alfred and created a workflow there with a series of
Terminal commands to perform the actions above. This only allows a generic
commit message, but it works as expected.&lt;/p&gt;
&lt;p&gt;So there is still room for improvement, but with a set of macros, I can automate
a lot of the standard text entry, which is always good for reducing errors.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;The sequence now is:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Open the text editor and type the title of the post.&lt;/li&gt;
&lt;li&gt;Cut this into the clipboard.&lt;/li&gt;
&lt;li&gt;Run the Typinator macro to fill in the post header.&lt;/li&gt;
&lt;li&gt;Save the post file, using the Typinator macro to construct the file name.&lt;/li&gt;
&lt;li&gt;Write the post, then use an Alfred workflow to test it locally.&lt;/li&gt;
&lt;li&gt;When ready, use an Alfred workflow to publish.&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
</description>
</item>
    
    <item>
<title>Workflow for writing a post</title>
<link>https://troz.net/post/2015/workflow-for-writing-a-post/</link>
<pubDate>Tue, 10 Mar 2015 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2015/workflow-for-writing-a-post/</guid>
<description>&lt;p&gt;So here is where I need to get used to Jekyll and how things are done. I will
end up automating this when I am sure of the process, but for now, I am just
going to work my way through it.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Start up the local Jekyll server:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;I opened Terminal and used &lt;code&gt;cd&lt;/code&gt; to get to the folder containing my site.&lt;/li&gt;
&lt;li&gt;Next I started the Jekyll server locally using &lt;code&gt;jekyll serve&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;This gave me the address of the local server - in my case
&lt;code&gt;http://127.0.0.1:4000/&lt;/code&gt; - so I went there in my browser to see the default
page.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;My goal is to write a new blog post (this one in fact).&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;For advice on creating a new post, I went to the &lt;a href=&#34;http://jekyllrb.com/docs/posts/&#34;&gt;Jekyll docs&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Jekyll needs the file name to be a specific format which includes the date
and title.&lt;/li&gt;
&lt;li&gt;Looking in the &lt;code&gt;_posts&lt;/code&gt; folder of the site folder, I see the previous post
file is titled &lt;code&gt;2015-03-08-new-site-for-trozware.md&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;As it is now 10th March 2015, I am saving this file as:
&lt;code&gt;2015-03-10-workflow-for-writing-a-post.md&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Saving at this point shows a Jekyll error in the Terminal, but the next
stage will fix that.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Front matter:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Jekyll specifies that each file must have a &lt;a href=&#34;http://jekyllrb.com/docs/frontmatter/&#34;&gt;front matter block&lt;/a&gt; in a
certain format.&lt;/li&gt;
&lt;li&gt;The header has certain essential parameters and then more optional ones.&lt;/li&gt;
&lt;li&gt;My site was imported from WordPress, so the older posts contain several
header parameters that may not be necessary any more.&lt;/li&gt;
&lt;li&gt;Look at the screen shot below to see what I have in this post file:&lt;/li&gt;
&lt;li&gt;After saving, I see this entry in my Terminal:&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Regenerating: 1 file(s) changed at 2015-03-10 13:50:40 ...done in 0.421789 seconds.&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Now I can see the title and the start of the post on my first page and when
clicking on it, I can see all the text.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Adding an image:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;This is not really necessary for this post, but I wanted to document it as
part of the workflow.&lt;/li&gt;
&lt;li&gt;I wanted to show the front matter and start of this post, so I took a
screen shot of the top of my editor window.&lt;/li&gt;
&lt;li&gt;Then I renamed the image file and moved it into the &lt;code&gt;images&lt;/code&gt; folder of my
site.&lt;/li&gt;
&lt;li&gt;Now to embed the image using this Markdown: &lt;code&gt;![Post header][2]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;As you can see, I prefer to group all links (images &amp;amp; URLs) at the end of
the document and keep the body of the text as clean as possible.&lt;/li&gt;
&lt;li&gt;&lt;img src=&#34;https://troz.net/images/post_header.png&#34; alt=&#34;Post header&#34;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Proofing:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Now that I have the text of my post, I need to proof-read it from the local
Jekyll server.&lt;/li&gt;
&lt;li&gt;The &lt;code&gt;jekyll serve&lt;/code&gt; command running in Terminal keeps the pages up-to-date
as you edit, but you will need to refresh your page in the browser manually
to check your changes.&lt;/li&gt;
&lt;li&gt;And I have found that if you make a major change to the site e.g. a CSS
file or a config file, then it is best to stop the Jekyll server and start
it again to make it re-build all the files.&lt;/li&gt;
&lt;li&gt;To be completely sure, stop the server and run &lt;code&gt;jekyll build&lt;/code&gt; in Terminal
although this may only do what &lt;code&gt;jekyll serve&lt;/code&gt; does on startup anyway.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Publishing:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Now it is time to publish.&lt;/li&gt;
&lt;li&gt;As I am using GitHub Pages to host, the site files are all part of a single
Git repository.&lt;/li&gt;
&lt;li&gt;And as I understand it, the data &lt;strong&gt;must&lt;/strong&gt; be in the &lt;code&gt;master&lt;/code&gt; branch.&lt;/li&gt;
&lt;li&gt;Opening up the GitHub client, I see that my repository has a bunch of
changes: - the file I am working on - the image I inserted - feed.xml -
index.html files for each page&lt;/li&gt;
&lt;li&gt;This is as expected, since all pages are pre-generated when using Jekyll,
so pages of posts must be re-rendered when a new post is added to the top.&lt;/li&gt;
&lt;li&gt;Note that several of the files appear twice: once from where they are
edited and once from the _site folder which serves them.&lt;/li&gt;
&lt;li&gt;Just two simple steps now, using the GitHub client: 1. Commit 2. Sync&lt;/li&gt;
&lt;li&gt;And that&amp;rsquo;s it. My new post is online and ready for reading.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Summary:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;This was my first post after the one I wrote when setting up, so the first
real post.&lt;/li&gt;
&lt;li&gt;While there appear to be a lot of steps, none of them are difficult.&lt;/li&gt;
&lt;li&gt;But I do have 4 apps running to do it: 1. TextWrangler for editing 1.
Terminal to run the local Jekyll server 1. Safari to check the finished
post 1. GitHub to commit and upload&lt;/li&gt;
&lt;li&gt;Automating this is an obvious next step, so stay tuned&amp;hellip;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
</description>
</item>
    
    <item>
<title>New Site for TrozWare</title>
<link>https://troz.net/post/2015/new-site-for-trozware/</link>
<pubDate>Sun, 08 Mar 2015 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2015/new-site-for-trozware/</guid>
<description>&lt;h2 id=&#34;welcome-to-trozwares-new-site&#34;&gt;Welcome to TrozWare&amp;rsquo;s new site.&lt;/h2&gt;
&lt;p&gt;It appears that I am not alone in deciding to move away from WordPress.
WordPress is great - easy to set up and with lots of cool themes to allow
customisation of your site. But it is slow, especially if (like me) you are
running on a low-cost shared server.&lt;/p&gt;
&lt;p&gt;I had been reading about &lt;a href=&#34;http://jekyllrb.com&#34;&gt;Jekyll&lt;/a&gt;, so I decide to give it a go and also host
my site on &lt;a href=&#34;https://pages.github.com&#34;&gt;GitHub&lt;/a&gt;, taking advantage of their faster servers.&lt;/p&gt;
&lt;p&gt;I followed the advice given by &lt;a href=&#34;http://www.girliemac.com/blog/2013/12/27/wordpress-to-jekyll/&#34;&gt;Girlie Mac&lt;/a&gt; and performed the migration from
my self-hosted WordPress site. I am using the &lt;a href=&#34;http://pixyll.com&#34;&gt;Pixyll&lt;/a&gt; theme by &lt;a href=&#34;http://johnotander.com&#34;&gt;John
Otander&lt;/a&gt; with a few tweaks of my own. The site is much faster to load, and I
am hoping that the easier editing will inspire me to write more posts.&lt;/p&gt;
&lt;p&gt;Of course it wasn&amp;rsquo;t all positive. WordPress did give me some features I liked,
but I think overall the result is better.&lt;/p&gt;
&lt;h3 id=&#34;wordpress&#34;&gt;WordPress&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;WordPress gave me a full LAMP stack, so I could run my own PHP scripts.&lt;/li&gt;
&lt;li&gt;WordPress gave me a search function.&lt;/li&gt;
&lt;li&gt;Commenting was built-in.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;jekyll&#34;&gt;Jekyll&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Jekyll builds the pages out as static HTML, so all pages are pre-generated for
fast loading.&lt;/li&gt;
&lt;li&gt;Writing for Jekyll is pure Markdown so it is easier to write and preview
locally.&lt;/li&gt;
&lt;li&gt;Some of the things I needed a plugin for in WordPress can be done natively in
Jekyll: - tables - syntax-highlighting&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;For comments, I have switched to &lt;a href=&#34;https://disqus.com&#34;&gt;Disqus&lt;/a&gt;, but I am not sure about it yet. I
will evaluate over the next few weeks. In WordPress, I used a plugin to handle
the spam that inevitably arrived. I am hoping that Disqus will protect me from
that, but I have to see how good a job it does and whether the few real comments
are worth it. A better option might be to turn off comments completely and just
have a contact form (which I have added using &lt;a href=&#34;http://formspree.io&#34;&gt;Formspree&lt;/a&gt;). Working in
Markdown is great. I love how I can have a really clean look in my editor and
still end up with well formatted HTML. I use Coda 2 on my Mac as my standard web
editor, so that is what I am writing in now. I will probably experiment with
other Markdown editors as I go. And for any Mac users out there working in
Markdown, I highly recommend &lt;a href=&#34;http://brettterpstra.com/projects/markdown-service-tools/&#34;&gt;Brett Terpstra&amp;rsquo;s Markdown Service Tools&lt;/a&gt;.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Man Reader 1.4 Now Available</title>
<link>https://troz.net/post/2014/man-reader-1-4-now-available/</link>
<pubDate>Thu, 03 Apr 2014 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2014/man-reader-1-4-now-available/</guid>
<description>&lt;p&gt;&lt;a href=&#34;https://troz.net/manreader/&#34;&gt;Man Reader 1.4&lt;/a&gt; is now available through the &lt;a href=&#34;http://itunes.apple.com/app/man-reader/id522583774?mt=12&#34;&gt;Mac App Store&lt;/a&gt;.&lt;/p&gt;
&lt;h4 id=&#34;the-new-features-and-fixes-are&#34;&gt;The new features and fixes are:&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Fix for plain text view not wrapping correctly for odd-sized fonts.&lt;/li&gt;
&lt;li&gt;Fix for HTML text view over-riding font colors that may be invisible.&lt;/li&gt;
&lt;li&gt;Search for missing entry (e.g. g++) no longer requires Enter or Return.&lt;/li&gt;
&lt;li&gt;Better automatic selection of matching entries while searching.&lt;/li&gt;
&lt;li&gt;Fix for animation warning message appearing in Console.&lt;/li&gt;
&lt;li&gt;Status display shows when man page list is being updated.&lt;/li&gt;
&lt;li&gt;Searching inside a page now allows a minimum of 2 characters (was 3), so
flags&lt;br&gt;
e.g. ‘-b’ do not need to be escaped.&lt;/li&gt;
&lt;li&gt;Fixed path for Network Utility in tool bar (moved in OS X 10.9).&lt;/li&gt;
&lt;li&gt;More information available about the effects of sand-boxing for this app.&lt;/li&gt;
&lt;/ul&gt;
</description>
</item>
    
    <item>
<title>Email clients for Mac and iOS</title>
<link>https://troz.net/post/2014/email-clients-for-mac-ios/</link>
<pubDate>Tue, 25 Mar 2014 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2014/email-clients-for-mac-ios/</guid>
<description>&lt;p&gt;Some people are moving away from email, but for me, it remains the best way to
communicate online. I get to keep a record of conversations and the attached
files are with the text so I can always see the context.&lt;/p&gt;
&lt;p&gt;But I think everyone would agree that Apple have dropped the ball with Mail in
OS X Mavericks, and to a lesser extent, in iOS 7.&lt;/p&gt;
&lt;p&gt;So I have been on a campaign lately to find an email client that suits my needs.
I don&amp;rsquo;t feel that I have found the perfect answer yet, but I am getting there.&lt;/p&gt;
&lt;p&gt;The first step was to work out what I really needed in an email client:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;support for IMAP accounts and Gmail accounts&lt;/li&gt;
&lt;li&gt;&lt;!-- raw HTML omitted --&gt;unified inbox - all accounts shown
together&lt;!-- raw HTML omitted --&gt;&lt;/li&gt;
&lt;li&gt;conversation threading&lt;/li&gt;
&lt;li&gt;support for POP accounts (optional)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;On the Mac, I have narrowed it down to two clients that I am swapping between
every few days: &lt;!-- raw HTML omitted --&gt;Unibox&lt;!-- raw HTML omitted --&gt;
and &lt;!-- raw HTML omitted --&gt;Airmail&lt;!-- raw HTML omitted --&gt;.&lt;/p&gt;
&lt;p&gt;Unibox is different in the way it displays your emails. It is much more focussed
on people and conversations, so the side bar shows all the people who you have
sent emails to or received emails from, grouped by date. I really like the
merging of incoming &amp;amp; outgoing emails, but it can be a bit weird if you delete
the latest email from someone who then disappears from sight.&lt;/p&gt;
&lt;p&gt;Emails are grouped by a single person, not by conversation. There is a button on
appropriate emails to toggle conversation view for that particular thread, but
it doesn&amp;rsquo;t stick.&lt;/p&gt;
&lt;p&gt;In order to show a conversation, they truncate emails in the main part of the
window and show a &amp;ldquo;More&amp;rdquo; button at the bottom of the email to expand it. This
was annoying, but in the latest beta, it performs much better, so you are not
continually tapping this to see a long email.&lt;/p&gt;
&lt;p&gt;Airmail has a more conventional display. Threading and the layout of threaded
emails are both very nice. There are multiple view options, which I find can get
a bit messy looking, so I prefer the &amp;ldquo;Minimized View&amp;rdquo; setting. Airmail also does
POP accounts which is a plus.&lt;/p&gt;
&lt;p&gt;The main reason I keep going back to Unibox is the unification. I have grown to
like having sent and received messages all in the same window without having to
go and find them somewhere else.&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;On the iPad, I am currently using
&lt;!-- raw HTML omitted --&gt;Boxer&lt;!-- raw HTML omitted --&gt; and have tried
numerous others. &lt;!-- raw HTML omitted --&gt;Molto&lt;!-- raw HTML omitted --&gt;
was quite good and the interface was fun, but it would only use landscape mode
and like to be able to swap. Boxer is not great in portrait mode, but it does
work.&lt;/p&gt;
&lt;p&gt;So the jury is still out for iPad email clients, but on the Mac, I am leaning
towards Unibox.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Berio Sequenza VII</title>
<link>https://troz.net/post/2013/berio-sequenza-vii/</link>
<pubDate>Thu, 07 Nov 2013 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2013/berio-sequenza-vii/</guid>
<description>&lt;p&gt;So my latest app is way outside my usual sphere but that&amp;rsquo;s what happens when
family decide that what you do might actually be useful!&lt;/p&gt;
&lt;p&gt;My son is an oboist and he is currently learning Berio&amp;rsquo;s Sequenza VII for Oboe.
This is a weird piece without a standard time signature. Instead each line has
13 bars with each bar being allocated a certain time span in actual seconds. As
can easily be imagined, this makes learning and practicing this piece more of a
mathematical exercise than a musical one.&lt;/p&gt;
&lt;p&gt;So I wrote him an app to sound out the end of each bar. Once he and his teacher
used it, a few more features crept in and now I think it will be of great
assistance to any student or teacher trying to work on this piece.&lt;/p&gt;
&lt;p&gt;While I doubt that many oboists frequent this web site, it anyone who does can
pass this on to any oboist, I would be very grateful, and I think the oboist
would be too!&lt;/p&gt;
&lt;p&gt;The app is available through the
&lt;!-- raw HTML omitted --&gt;iTunes
App Store&lt;!-- raw HTML omitted --&gt;.&lt;br&gt;
More details are on &lt;a href=&#34;https://troz.net/berio/&#34; title=&#34;Berio’s Sequenza VII&#34;&gt;this page&lt;/a&gt;.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Icon Builder &amp; iOS 7</title>
<link>https://troz.net/post/2013/icon-builder-ios-7/</link>
<pubDate>Mon, 23 Sep 2013 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2013/icon-builder-ios-7/</guid>
<description>&lt;p&gt;Icon Builder 1.2 was released on 18 September 2013.&lt;br&gt;
It was an update with 2 new functions:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The ability to create images to suit an Xcode 5 assets library&lt;/li&gt;
&lt;li&gt;The ability to create icons with the required sizes for IOS 7 apps.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Knowing that iOS 7 apps can only be built using Xcode 5, I linked the switch for
these 2 abilities in a single check box.&lt;br&gt;
The problem was not really that they were in a single checkbox but that I had labelled
it badly, so it was not obvious that this was what needed to be checked to create
iOS 7 sized icon files.&lt;/p&gt;
&lt;p&gt;After some feedback from early users, it became clear to me that this was not
enough. So 1.2.1 is now waiting for Apple&amp;rsquo;s approval.&lt;br&gt;
The changes in this version are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;More informative labelling of the checkbox.&lt;/li&gt;
&lt;li&gt;The checkbox is checked by default is Xcode 5 is installed&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;While waiting for the new version to be approved, please be aware that iOS 7
icon sizes will only be generated if you select &amp;ldquo;Check Assets (for Xcode 5.x or
later)&amp;rdquo;&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Icon apps updated</title>
<link>https://troz.net/post/2013/icon-apps-updated/</link>
<pubDate>Thu, 19 Sep 2013 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2013/icon-apps-updated/</guid>
<description>&lt;p&gt;&lt;!-- raw HTML omitted --&gt;Icns
Maker&lt;!-- raw HTML omitted --&gt; and
&lt;!-- raw HTML omitted --&gt;Icon
Builder&lt;!-- raw HTML omitted --&gt; have both just been updated to support Xcode 5.&lt;/p&gt;
&lt;p&gt;Icon Builder is a Mac app that takes your images and creates all the required
icon files for use in your iOS apps.&lt;br&gt;
It now supports Xcode 5&amp;rsquo;s image assets folders and if you are using Xcode 5, it will
create the icon sizes required for iOS 7 app.&lt;/p&gt;
&lt;p&gt;Icns Maker is a Mac app that takes your images and creates icons for use in your
Mac apps.&lt;br&gt;
For Xcode 4 or earlier, it creates a .icns file.&lt;br&gt;
For Xcode 5, it creates a folder of images for use in your project&amp;rsquo;s image
assets folder.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Markdown</title>
<link>https://troz.net/post/2013/markdown/</link>
<pubDate>Mon, 01 Apr 2013 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2013/markdown/</guid>
<description>&lt;p&gt;For some time now, I have been aware of the increasing trend towards using
Markdown for text editing and for creating HTML. Markdown has been on my list of
&amp;ldquo;things I should learn some day&amp;rdquo; so I was interested last week to read about a
new iBooks book called &lt;a href=&#34;http://macsparky.com/markdown&#34;&gt;The MacSparky Markdown Field Guide&lt;/a&gt;. This was
sufficient inspiration so I got the book and read through it this weekend.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://static.squarespace.com/static/5008676d84aeae82b8acdd8c/t/5147c7a6e4b0d224b4419401/1363658669971/Markdown%20Cover%20Art%20-%20JPG.jpg?format=500w&#34; alt=&#34;The MacSparky Markdown Field Guide&#34;&gt;&lt;/p&gt;
&lt;p&gt;Actually, to say that I &lt;em&gt;read&lt;/em&gt; through the book is a mis-representation. The
book was written using iBooks Author specially for the iPad and contains screen
casts and interviews as well as text. But by the end of it, I now feel I have a
basic understanding on Markdown and the ways in which I can use it.&lt;/p&gt;
&lt;p&gt;I guess the really big thing about using Markdown is that is creates plain text
files that are human-readable even without being converted to HTML. This makes
them future-proof since they are not tied to a proprietary file format that may
cease to exist at any time.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;using-markdown&#34;&gt;Using Markdown:&lt;/h2&gt;
&lt;p&gt;Since this web site is a self-hosted WordPress site, my next step was to look
for a WordPress plugin that would allow me to use Markdown to create my posts. I
could have used a Markdown editor that had HTML export, but I wanted to try
something that would eliminate the extra step. The first one I decide to try was
&lt;a href=&#34;http://wordpress.org/extend/plugins/markdown-on-save-improved/&#34;&gt;Markdown on Save Improved&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;One of the main reasons for choosing this one was that it stores the posts as
both Markdown and as HTML. This saves time when going back to edit a post,
avoids the constant changes that creep in when converting between formats all
the time, and makes it so that the post will still display correctly even if
Markdown is no longer supported. The only problem I have found so far is that it
doesn&amp;rsquo;t automatically create links &amp;amp; image links using the Markdown format, but
uses standard &lt;code&gt;&amp;lt;a&amp;gt;&lt;/code&gt; and &lt;code&gt;&amp;lt;img&amp;gt;&lt;/code&gt; links instead.&lt;/p&gt;
&lt;p&gt;My next stop, since I always use a Mac, was to get Brett Terpstra&amp;rsquo;s collection
of &lt;a href=&#34;http://brettterpstra.com/projects/markdown-service-tools/&#34;&gt;Services for Markdown&lt;/a&gt;. These add a lot on convenient shortcuts: one of
my favourites is the ability to convert inline links to references links for
increased readability while editing.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;first-impressions&#34;&gt;First Impressions:&lt;/h2&gt;
&lt;p&gt;So having written this first post in Markdown, how do I feel about it? I haven&amp;rsquo;t
really tried anything too weird this time, but there are a few things that were
very easy to do. Particularly in the paragraph where I was talking about links &amp;amp;
images and wanted to include the tags as text without having it interpreted as
HTML. All I had to do was surround the text with back-ticks.&lt;/p&gt;
&lt;p&gt;Links are vastly easier to manage and edit in Markdown. I miss the ability to
specify that links should open in a new tab - I prefer to have that setting for
links that take you outside my web site, but the modern theories on usability
seem to be heading towards deprecation of this feature, so I may just stop using
it.&lt;/p&gt;
&lt;p&gt;With the standard WordPress editor, I always felt that I was fighting it. I had
to swap between the visual &amp;amp; HTML editor tabs and when I swapped tabs, things
would sometimes change without me doing anything. So far, I feel more in control
using Markdown and although I have lost the WYSIWYG visual editor, I no longer
have to wade through the HTML editor to get the effect I want or to remove the
results of a few careless clicks.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;what-next&#34;&gt;What next?&lt;/h2&gt;
&lt;p&gt;Some of the things on my wish list would be solved by a better editor and some
by more powerful syntax.&lt;/p&gt;
&lt;p&gt;Editor:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Adding links &amp;amp; images using Markdown style instead of HTML&lt;/li&gt;
&lt;li&gt;Being able to create lists
&lt;ul&gt;
&lt;li&gt;Markdown makes this very easy but this WP plugin does not support lists as
far as I can tell&lt;/li&gt;
&lt;li&gt;So these lists are in HTML&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Syntax:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Alignment of text &amp;amp; images&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Using a stand-alone Markdown editor would solve the editor questions, but I
wanted to try writing this post completely in WordPress.&lt;br&gt;
And with the alignment, there is nothing to stop me adding CSS to the Markdown.&lt;/p&gt;
&lt;p&gt;Next time, I will test out a different WordPress Markdown editor and see how
that goes. I will also test using a standalone editor and exporting its HTML to
create a post.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>A Knight&#39;s Move 1.3</title>
<link>https://troz.net/post/2013/a-knights-move-1-3/</link>
<pubDate>Wed, 27 Feb 2013 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2013/a-knights-move-1-3/</guid>
<description>&lt;p&gt;&lt;strong&gt;UPDATE:&lt;/strong&gt; September 2016 - A Knight&amp;rsquo;s Move for iOS is no longer available.&lt;!-- raw HTML omitted --&gt;
&lt;a href=&#34;https://troz.net/knightsmove/&#34;&gt;A Knight&amp;rsquo;s Move for Mac&lt;/a&gt; is still supported.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;A Knight&amp;rsquo;s Move has been updated to version 1.3. The Mac version is available
through the
&lt;!-- raw HTML omitted --&gt;Mac
App Store&lt;!-- raw HTML omitted --&gt;.&lt;/p&gt;
&lt;h2 id=&#34;three-new-level-packs&#34;&gt;Three new level packs:&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Eight by Eight&lt;/li&gt;
&lt;li&gt;Bishops Rule&lt;/li&gt;
&lt;li&gt;Castles&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Eight by Eight has every puzzle set in a chessboard sized grid with more
conventional placing of pieces.&lt;br&gt;
Bishops Rule has at least one Bishop in every puzzle.&lt;br&gt;
Castles has a Castle or Rook in every puzzle and is suited to players who would
like more of a challenge.&lt;/p&gt;
&lt;h2 id=&#34;new-feature&#34;&gt;New feature:&lt;/h2&gt;
&lt;p&gt;When your knight has been taken, you have the option to undo the last move so
you can try again without losing the moves you have already made.&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Man Reader (no SB)</title>
<link>https://troz.net/post/2013/man-reader-no-sb/</link>
<pubDate>Wed, 06 Feb 2013 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2013/man-reader-no-sb/</guid>
<description>&lt;p&gt;These instructions are no longer valid. As of version 1.5, the App Store version
of Man Reader has solved the sand-boxing issues and is now as powerful as the
non-sand-boxed version.&lt;/p&gt;
&lt;p&gt;The non-sand-boxed version will no longer be supported or updated, so please
revert to the App Store version.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;If you find that Man Reader is not working well for you due to Apple&amp;rsquo;s
sandboxing restrictions, then you can download a non-sandboxed version here. To
find out more about this, including how to test if you are affected, read the
&lt;a href=&#34;https://troz.net/manreader-sandbox/&#34;&gt;Sand-Boxing Man Reader&lt;/a&gt; page.&lt;/p&gt;
&lt;p&gt;The non-sandboxed version will only work if you have the App Store version of
Man Reader already installed.&lt;/p&gt;
&lt;p&gt;When you run &amp;lsquo;Man Reader (no SB)&amp;rsquo; for the first time, it will check to see if
you have a valid installation of &amp;lsquo;Man Reader&amp;rsquo; that you have purchased from the
App Store.&lt;br&gt;
If you do not, &amp;lsquo;Man Reader (no SB)&amp;rsquo; will offer to take you to the App Store and then
quit.&lt;/p&gt;
&lt;p&gt;If you already own the App Store version of Man Reader and &amp;lsquo;Man Reader (no SB)&amp;rsquo;
has started once, you can delete the App Store version and &amp;lsquo;Man Reader (no SB)&amp;rsquo;
will keep working.&lt;/p&gt;
&lt;p&gt;To install &amp;lsquo;Man Reader (no SB)&amp;rsquo;, click the download link below. This will
download &amp;lsquo;ManReader-noSB.zip&amp;rsquo;. Double-click on this file to un-zip it, and then
move the &amp;lsquo;Man Reader (no SB).app&amp;rsquo; into your Applications folder and use as
normal. Do not delete the App Store version of Man Reader until &amp;lsquo;Man Reader (no
SB)&amp;rsquo; has been run at least once.&lt;/p&gt;
&lt;h2 id=&#34;deldownload-man-reader-no-sbdel2&#34;&gt;&lt;a href=&#34;#&#34;&gt;&lt;!-- raw HTML omitted --&gt;Download Man Reader (no SB)&lt;!-- raw HTML omitted --&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;I found out today (thanks Ron) that under OS X 10.10.3 the security settings no
longer allow the downloaded version of Man Reader (no SB) to run, despite the
fact that I have signed it with my Apple Developer ID. OS X gives a very
un-helpful dialog reporting that the app is damaged. In fact the app is fine,
but being blocked by the security settings. The solution as shown at
&lt;a href=&#34;http://www.tech-recipes.com/rx/45404/mac-downloaded-app-is-damaged-and-cant-be-opened-error-solved/&#34;&gt;TechRecipes&lt;/a&gt; is to change your security system preferences to allow
downloaded apps from anywhere. You only need to do this temporarily as after you
have run the app once you can set this setting back to whatever you had before.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Sand-Boxing Man Reader</title>
<link>https://troz.net/post/2013/sand-boxing-man-reader/</link>
<pubDate>Wed, 06 Feb 2013 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2013/sand-boxing-man-reader/</guid>
<description>&lt;p&gt;These instructions are no longer valid. As of version 1.5, the App Store version
of Man Reader has solved the sand-boxing issues and is now as powerful as the
non-sand-boxed version.&lt;/p&gt;
&lt;p&gt;The non-sand-boxed version will no longer be supported or updated, so please
revert to the App Store version.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;As with all apps in the App Store, &lt;a href=&#34;https://troz.net/manreader/&#34;&gt;Man Reader&lt;/a&gt; is restricted by Apple&amp;rsquo;s
sand-boxing policy. Sand-boxing is a great thing. It isolates apps from each
other and from the system, making it far less likely that a problem app will
cause wide-spread havoc. However for an app like Man Reader, this can lead to a
drop in functionality.&lt;/p&gt;
&lt;p&gt;Due to the permissions limitations of sand-boxing, Man Reader can only search
defined paths on your system drive e.g. /usr/, /opt/&lt;br&gt;
This is where the default man pages are all stored, but if you install other software
(Xcode is a good example), then Man Reader may not be able to list all the available
man pages on your system.&lt;/p&gt;
&lt;p&gt;To tell if Man Reader is missing man pages, copy &amp;amp; paste the following command
into the Terminal app:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;whatis . &amp;gt;&amp;gt; ~/Desktop/whatis.txt
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Man Reader runs this command internally when it starts, but the Terminal app is
not sand-boxed and so can access everything.&lt;br&gt;
Running this command will create a text file on your desktop with a list of all available
man pages on your system. Open it in a text editor that can show the number of lines
in a file. &lt;a href=&#34;http://www.barebones.com/products/textwrangler/&#34;&gt;TextWrangler from Bare Bones Software&lt;/a&gt; is a good free editor that
will do this.&lt;/p&gt;
&lt;p&gt;To check what man pages ManReader can read, go to Finder and select &amp;lsquo;Go to
Folder&amp;hellip;&amp;quot; from the Go menu. Paste in the following path:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;~/Library/Containers/net.troz.Man-Reader/Data/Library/Application Support/Man Reader/
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;You will see two files: open the one called &amp;lsquo;ManReader.raw&amp;rsquo; in your text editor.
This is the result of Man Reader running the whatis command. Compare the number
of lines in the two files. Don&amp;rsquo;t worry about the order of the items in the file
as that may vary, you are only concerned with the total number of lines in each.&lt;/p&gt;
&lt;p&gt;There may be one or two lines more in the whatis.txt file but if there is a big
difference, then you are being sand-boxed&amp;hellip;&lt;br&gt;
As an example, on my system, the whatis.txt file contains 8954 lines and the ManReader.raw
file contains 2320 lines!&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;If you are affected by this or think that you might be, I now have a
solution - actually two possible solutions:&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;If you have already bought Man Reader from the App Store, then you can
&lt;a href=&#34;#&#34;&gt;download a non-sandboxed version&lt;/a&gt;. This will only work if you have the App
Store version of the app installed.&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;If you do not already own a copy of Man Reader, and want to buy it
un-sandboxed, then you can now &lt;a href=&#34;#&#34;&gt;buy it directly&lt;/a&gt;.&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;p&gt;Please &lt;a href=&#34;mailto:sarah@troz.net?subject=Man%20Reader%20and%20Sand-Boxing&#34;&gt;contact me&lt;/a&gt; if you have any issues with this.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Icns Maker &amp; Icon Builder updated</title>
<link>https://troz.net/post/2013/icns-maker-icon-builder-updated/</link>
<pubDate>Sat, 19 Jan 2013 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2013/icns-maker-icon-builder-updated/</guid>
<description>&lt;p&gt;January 18th 2013:&lt;/p&gt;
&lt;p&gt;Both of the icon building apps have now been updated to fix a but that made
incorrect icon sizes when running on a Retina MacBook Pro.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://troz.net/icns-maker/&#34; title=&#34;Icns Maker&#34;&gt; Icns Maker&lt;/a&gt; uses your image to create an icns file for Mac apps.&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://troz.net/icon-builder/&#34; title=&#34;Icon Builder&#34;&gt;Icon Builder&lt;/a&gt; uses your image to create the suite of icon files needed for
iOS apps.&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Icon Makers &amp; Retina Macs</title>
<link>https://troz.net/post/2013/icon-makers-retina-macs/</link>
<pubDate>Mon, 14 Jan 2013 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2013/icon-makers-retina-macs/</guid>
<description>&lt;p&gt;Icns Maker which makes an icns icon file for Mac apps, and Icon Builder which
makes the suite of png files needed for iOS apps, are both compatible with the
Retina MacBook Pro.&lt;/p&gt;
&lt;p&gt;However it was recently brought to my attention (thanks Cameron), that when
running on a Retina MBP, all the icon files were exactly twice as large as they
should be. The Icon.png file which supplies the main app icon for iPhone apps
should be 57 pixels by 57 pixels. Using Icon Builder on a Retina MBP produced an
Icon.png file that was 114 x 114 pixels.&lt;/p&gt;
&lt;p&gt;I have now worked out how to persuade the Retina Mac that when I ask for an
image size, I actually want that size, not the size that OS X thinks would look
better. Updates to these 2 apps will be submitted to the App Store for approval
later today which will solve the problem.&lt;/p&gt;
&lt;p&gt;In the meantime, there is a work-around for Retina MBP users: force the app to
run in low resolution mode.&lt;/p&gt;
&lt;p&gt;In Finder, open your Applications folder and select the app (this works for both
Icns Maker and Icon Builder). Press Command-I or choose Get Info from the File
menu which will open a window like this:&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;p&gt;Check the checkbox labelled &amp;ldquo;Open in Low Resolution&amp;rdquo;. Next time the app is
opened, it will ignore the Retina options and use standard resolution only. This
will create icon files with the correct sizes. However text may look slightly
fuzzy.&lt;/p&gt;
&lt;p&gt;When the updates to these apps become available, make sure you go back and
un-check this setting to return to Retina mode.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>A Knight&#39;s Move updates</title>
<link>https://troz.net/post/2012/a-knights-move-updates/</link>
<pubDate>Mon, 15 Oct 2012 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2012/a-knights-move-updates/</guid>
<description>&lt;p&gt;&lt;strong&gt;UPDATE:&lt;/strong&gt; September 2016 - A Knight&amp;rsquo;s Move for iOS is no longer available.&lt;!-- raw HTML omitted --&gt;
&lt;a href=&#34;https://troz.net/knightsmove/&#34;&gt;A Knight&amp;rsquo;s Move for Mac&lt;/a&gt; is still supported.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;A Knight&amp;rsquo;s Move for iOS has been updated to take advantage of the taller iPhone
5 screen.&lt;/p&gt;
&lt;p&gt;In-app purchasing of packs has been removed from both Mac &amp;amp; iOS versions.&lt;br&gt;
For iOS, the app is now free but supported by iAds (please click through if you would
like to show your support).&lt;br&gt;
Apple does not have an ad system for Mac, so the Mac version is now a paid app
that includes all the puzzle packs.&lt;/p&gt;
&lt;p&gt;The in-app purchasing was an interesting experiment, but the ratio of purchases
to downloads was too low to sustain the development.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>App Store Review Times</title>
<link>https://troz.net/post/2012/app-store-review-times/</link>
<pubDate>Mon, 15 Oct 2012 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2012/app-store-review-times/</guid>
<description>&lt;p&gt;There are been a lots of stories going around about lengthening Mac App Store
review times.
&lt;!-- raw HTML omitted --&gt;Shiny
Developments&lt;!-- raw HTML omitted --&gt; crowd-sourced data certainly backs this up although they have
much more data for iOS apps than for Mac apps.&lt;/p&gt;
&lt;p&gt;Some people, including
&lt;!-- raw HTML omitted --&gt;Lex
Friedman of MacWorld&lt;!-- raw HTML omitted --&gt; and
&lt;!-- raw HTML omitted --&gt;John
Gruber of Daring Fireball&lt;!-- raw HTML omitted --&gt;, are suggesting that the delays are due to the
rush of new apps to support the iPhone 5 and iOS 6. This implies that there is
only one set of review staff and that a large proportion of them have been moved
from Mac to iOS apps.&lt;/p&gt;
&lt;p&gt;I think this is an incorrect analysis. The slowdown started before iOS 6 and
before the iPhone 5. I think it started in June when Apple started to enforce
Mac sandboxing.&lt;/p&gt;
&lt;p&gt;As discussed in a &lt;a href=&#34;https://troz.net/sandboxing-and-the-mac-app-store/&#34;&gt;previous post&lt;/a&gt;, I have had a lot of trouble getting Man
Reader to be sandbox-compatible leading to many rejections. One problem was that
I had implemented sand-boxing before the deadline, but with some temporary
entitlements to allow read-only access to required system files. This
entitlement was approved initially, but after one rejection, an Apple reviewer
told me that they had been approving all requested entitlements before the
deadline, but now were actually reviewing them all.&lt;/p&gt;
&lt;p&gt;To me, this seems like a rather silly thing to have done which has now returned
to haunt them. Instead of allowing developers time to get used to the
restrictions, Apple reviewers allowed developers to think that their apps were
sandbox-complient already. Then Apple was faced with the enormous task of
re-checking all the entitlements that they had previously allowed without
checking. This was unfair to developers and has only created extra work for the
reviewers.&lt;/p&gt;
&lt;p&gt;Here is a table showing the recent review times for my Mac apps:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;App&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;Process&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;Review days&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;Dates&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Time In Words&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;update&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;22&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Sept 22 - Oct 14&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Icns Maker&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;new app&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;24&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Aug 5 - Aug 29&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;A Knight&amp;rsquo;s Move&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;update&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;26&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Sept 6 - Oct 2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Icon Builder&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;new app&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;33&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Aug 22 - Sept 24&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;By comparison, when I submitted an update to A Knight&amp;rsquo;s Move for iOS in October,
it was passed in only 8 days.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Icon makers for Mac &amp; iOS apps</title>
<link>https://troz.net/post/2012/icon-makers-for-mac-ios-apps/</link>
<pubDate>Mon, 15 Oct 2012 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2012/icon-makers-for-mac-ios-apps/</guid>
<description>&lt;p&gt;Announcing two new apps for creating icons for with Mac or iOS projects:&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://troz.net/icns-maker/&#34; title=&#34;Icns Maker&#34;&gt;Icns Maker&lt;/a&gt; helps you convert a single image into a .icns file in two
steps.&lt;br&gt;
&lt;a href=&#34;https://troz.net/icon-builder/&#34; title=&#34;Icon Builder&#34;&gt;Icon Builder&lt;/a&gt; creates all the files needed to set up your icons for any iOS project.&lt;/p&gt;
&lt;h2 id=&#34;creating-icon-files-for-mac-apps&#34;&gt;Creating icon files for Mac apps:&lt;/h2&gt;
&lt;p&gt;In versions of Xcode before 4.4, Apple provided an app called “Icon Composer”.
It allowed you to drag images into a window and export a .icns file for use in
your Mac apps. With Xcode 4.4, Apple has changed the way icons are handled for
Mac apps and “Icon Composer” is no longer supplied.&lt;/p&gt;
&lt;p&gt;The Xcode docs describe the process you need to go through to make a .icns file:
create a suite of image files of the correct size and with the correct file
names, bundle them into a specially named folder and then use Terminal to stitch
them together.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://troz.net/icns-maker/&#34; title=&#34;Icns Maker&#34;&gt;Icns Maker&lt;/a&gt; does all this for you in two easy steps.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Drag in an image file (preferably 1024x1024 but 512x512 will also work).&lt;/li&gt;
&lt;li&gt;Click a button.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;There are more options available for fine-tuning your icons allowing you to
select different images for the various sizes, but this is all that is needed
for basic operation.&lt;/p&gt;
&lt;p&gt;Icns Maker is available from the
&lt;!-- raw HTML omitted --&gt;Mac
App Store&lt;!-- raw HTML omitted --&gt;.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;creating-icon-files-for-ios-apps&#34;&gt;Creating icon files for iOS apps:&lt;/h2&gt;
&lt;p&gt;Icons for iOS apps are not bundled into a single file like a Mac .icns file. You
add various .png images to your project. Depending on the devices supported by
your app, you will need many different sizes of icon file. There are some icons
for iPad only, some for iPhone / iPod Touch only and others required for any
device. Additionally, you will need larger versions of each image to support
Retina displays.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://troz.net/icon-builder/&#34; title=&#34;Icon Builder&#34;&gt;Icon Builder&lt;/a&gt; is a Mac app that does all this for you. As with Icns Maker,
you just drag your image into the app and click a button. You can also select
which devices your icon needs to suit and use different images for the different
sizes if you want finer control.&lt;/p&gt;
&lt;p&gt;When the app creates your icon files, it generates a ReadMe file with the
information needed for installing these files in your project, including
information to copy &amp;amp; paste directly into your Info.plist file.&lt;/p&gt;
&lt;p&gt;Icon Builder is available from the
&lt;!-- raw HTML omitted --&gt;Mac
App Store&lt;!-- raw HTML omitted --&gt;.&lt;br&gt;
Note that although this app builds icon files for iOS app, it runs on a Mac.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;naming&#34;&gt;Naming&lt;/h2&gt;
&lt;p&gt;Originally these apps were named in a consistent manner: Mac Icon Builder and
iOS Icon Builder. However both these names were rejected by Apple - you are not
allowed to use the words &amp;ldquo;Mac&amp;rdquo; or &amp;ldquo;iOS&amp;rdquo; in any app name sold through the Mac App
Store.&lt;/p&gt;
&lt;p&gt;Then I tried Icns Maker and Icon Maker. Icns Maker was approved, but there is
already an app called Icon Maker, so I went with Icon Builder. But by that time
Icns Maker had already been released, so there was no way to make the names more
consistent.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Updating apps for iPhone 5</title>
<link>https://troz.net/post/2012/updating-apps-for-iphone-5/</link>
<pubDate>Mon, 24 Sep 2012 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2012/updating-apps-for-iphone-5/</guid>
<description>&lt;p&gt;I have started work updating my iOS apps to fill the larger screen of an iPhone&lt;/p&gt;
&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;My iPhone 5 is on order - I missed out on the first shipment, but hopefully
it won&amp;rsquo;t be too long. Meanwhile, I will just test in the iPhone Simulator and
hope this is OK.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;But it was a puzzle to me how to get an app to fill the longer screen. I have
the latest Xcode and the latest Simulator which allows you to specify what
screen size iPhone to simulate. So I re-built an app and nothing changed - it
showing black strips top &amp;amp; bottom and left my app at the old size.&lt;/p&gt;
&lt;p&gt;After trying many different things and reading a lot of the new sections of the
Apple developer documentation, I finally found the answer online:&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;Apparently the system uses the presence or absence of this file this to detect
whether your app supports the longer iPhone.&lt;/p&gt;
&lt;p&gt;I read that Xcode is supposed to warn you of the consequences if this file is
missing, but in my case, when I opened my project, Xcode helpfully used the old
launch image in its place. It showed a warning icon that the image was the wrong
size, but nothing else.&lt;/p&gt;
&lt;p&gt;The next problem was how to create this file. I use screen shots, but until the
app worked in the correct format, I wasn&amp;rsquo;t going to be able to get the screen
shot. So I made it a 2 step process: first I duplicated the original launch
image, renamed it and resized it. It looked wrong but this was irrelevant - it
was enough to get the app working in the correct format. Once I had the app
working, I was able to take a screen shot and create the final launch image.&lt;/p&gt;
&lt;p&gt;Once you have the app working in 2 sizes, you have to do more work with the
layout, either using springs &amp;amp; struts or using the modern auto-layout feature. I
find auto-layout confusing, but it is obviously more powerful and the way of the
future, so I am trying to work it out. I found a good tutorial at
&lt;!-- raw HTML omitted --&gt;Ray
Wenderlich&amp;rsquo;s site&lt;!-- raw HTML omitted --&gt;. While directed at iOS 6, it also applies to Mac apps.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>A Knight&#39;s Move for iOS 1.1</title>
<link>https://troz.net/post/2012/a-knights-move-for-ios-1-1/</link>
<pubDate>Thu, 13 Sep 2012 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2012/a-knights-move-for-ios-1-1/</guid>
<description>&lt;p&gt;&lt;strong&gt;UPDATE:&lt;/strong&gt; September 2016 - A Knight&amp;rsquo;s Move for iOS is no longer available.&lt;!-- raw HTML omitted --&gt;
&lt;a href=&#34;https://troz.net/knightsmove/&#34;&gt;A Knight&amp;rsquo;s Move for Mac&lt;/a&gt; is still supported.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;A Knight&amp;rsquo;s Move for iPad &amp;amp; iPhone has just been updated to version 1.1&lt;/p&gt;
&lt;p&gt;There were some minor changes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;New puzzle pack: Majestic.&lt;/li&gt;
&lt;li&gt;iPhone now shows an info button of there is more help available for a
particular puzzle. (This info was already visible in the iPad version.)&lt;/li&gt;
&lt;li&gt;Minor cosmetic fixes.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The big change was that all puzzles packs are now included in the free app,
which is now supported by iAds. The sale of puzzle packs via in-app purchasing
was disappointing, so I have decided to try using iAds instead. Hopefully they
will not feel too intrusive, but if you want to support my apps, please tap on a
few of the ads.&lt;/p&gt;
&lt;p&gt;Note that iAds will not appear in all countries. You may just see a banner
linking you to my other apps on the iPad. On iPhone, you will not see anything
different.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Man Reader 1.1 Released</title>
<link>https://troz.net/post/2012/man-reader-1-1-released/</link>
<pubDate>Tue, 14 Aug 2012 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2012/man-reader-1-1-released/</guid>
<description>&lt;p&gt;The update of &lt;a href=&#34;https://troz.net/manreader/&#34; title=&#34;Man Reader&#34;&gt;Man Reader&lt;/a&gt; to version 1.1 has just become available through
the Mac App Store. This update has a bunch of &lt;a href=&#34;https://troz.net/manreader/#new_features&#34;&gt;new features&lt;/a&gt; - thanks to
everyone who made suggestions.&lt;/p&gt;
&lt;p&gt;As detailed in a &lt;a href=&#34;https://troz.net/sandboxing-and-the-mac-app-store/&#34;&gt;previous post&lt;/a&gt;, there have been major issues getting this
app approved with Apple&amp;rsquo;s new sand-boxing restrictions fully in place. But to
their credit, the Apple reviewers have been unfailing helpful and polite in
answering my questions and keeping me informed.&lt;/p&gt;
&lt;p&gt;I hope everyone finds the new features useful. Please &lt;a href=&#34;mailto:sarah@troz.net?subject=Man%20Reader&#34;&gt;keep the suggestions
coming in&lt;/a&gt; to make this app even better!&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Sandboxing and the Mac App Store</title>
<link>https://troz.net/post/2012/sandboxing-and-the-mac-app-store/</link>
<pubDate>Sat, 28 Jul 2012 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2012/sandboxing-and-the-mac-app-store/</guid>
<description>&lt;p&gt;As of June 2012, all apps submitted to the Mac App Store have to be sandboxed
i.e. they have to be able to run in a limited environment where they cannot
interfere with other apps or other parts of the system. While this is generally
a good thing, there are problems when apps have legitimate reasons for requiring
access to other resources.&lt;/p&gt;
&lt;p&gt;One annoyance for developers is that Apple&amp;rsquo;s apps are mostly not sandboxed. To
check what apps you have installed that are sandboxed, open up Activity Monitor
(in Applications/Utilities). In the View menu, check that Sandbox is checked in
the Columns submenu. Then you can sort by clicking on the Sandbox title and work
out which apps are already sandboxed. Mail, Preview and Text Edit are now
sandboxed and so is the new Reminders app, but as far as I can tell, no other
Apple apps are. This causes two problems: firstly it is not fair to other
developers if Apple is enforcing a standard which only they are allowed to
break. Secondly, if Apple developers had to follow the same rules as everyone
else, then maybe the system would evolve to become more usable for everyone.&lt;/p&gt;
&lt;p&gt;In the Apple developer documentation about sandboxing, there is a section headed
&amp;ldquo;Determine Whether Your App Is Suitable for Sandboxing&amp;rdquo;. Here they list numerous
reasons why any app might not work in the sandbox. But the Mac App Store now
makes sandboxing compulsory, so what to do with apps that are not suitable?&lt;/p&gt;
&lt;p&gt;Some resources can be requested when building the app: access to various folders
(Pictures, Music, Downloads etc), access to Address Book and Calendar data,
printing facilities, networking etc. Beyond the specified list of entitlements
that can be requested, developers can also apply for &amp;ldquo;temporary entitlements&amp;rdquo;
which, if granted, will unlock access to other parts of the operating system.
However these are subject to the whims of app reviewers and will be re-assessed
with every update. Apple has also made it clear that they are intended as a
transition feature and will not be available for ever.&lt;/p&gt;
&lt;p&gt;This has lead to a recent spate of popular apps leaving the App Store.
&lt;!-- raw HTML omitted --&gt;Marco
Arment&lt;!-- raw HTML omitted --&gt; has discussed this problem with an emphasis on the issue of lack of
confidence in buying from the App Store. If you cannot be sure that an app you
buy will remain in the App Store, then you are less likely to buy it there.&lt;/p&gt;
&lt;p&gt;I have run into direct issues with sandboxing already. With
&lt;!-- raw HTML omitted --&gt;Pic-a-POD&lt;!-- raw HTML omitted --&gt;, I used to have
links to the Desktop and Screen Saver panes in System Preferences. These used
AppleScripts which required a temporary entitlement to send an AppleEvent. The
app was rejected because of this, so I had to modify this feature - it now just
takes you to the relevant section of System Prefs, but not directly to either
Desktop or Screen Saver. However Pic-a-POD&amp;rsquo;s help, which runs in Apple&amp;rsquo;s Help
Viewer app, contains exactly the same AppleScripts and so is allowed to access
these preference panes directly. Try working out the logic of that one!&lt;/p&gt;
&lt;p&gt;I have more serious problems with
&lt;!-- raw HTML omitted --&gt;Man Reader&lt;!-- raw HTML omitted --&gt;. Man
Reader displays a list of the man pages on your system. Depending on the tools
you have installed, these pages may be in a variety of locations. The shell
command that detects them first reads a config file and then checks the folders
listed in that config file. All it needs is read-only access. With the first
sandboxed version, I asked for a temporary entitlement to give me read-only
access to the startup disk. This was granted, but I have since been informed
that all requested entitlements were granted before the App Store cut-off date.
This may have been meant to be helpful, but it was not useful to allow access
that would later be removed without any warning.&lt;/p&gt;
&lt;p&gt;The current version of Man Reader waiting for approval asks for read-only access
to the config file directly and then to every folder listed in that config file.
If approved, this should be able to access all the man pages on a system. I have
no idea whether these entitlements will be granted, but if not, then I will have
to remove Man Reader from the App Store. It would be wrong to continue to sell
an app that only functioned in a limited manner, even though the App Store is
far and away my best form of marketing.&lt;/p&gt;
&lt;p&gt;So what do I suggest Apple does? I think they need to allow apps that are not
sand-boxed. However these apps could come with a warning before installation. In
Mountain Lion, the new security feature called Gatekeeper allows you to specify
the level of security you want when installing apps. Currently the options are
to allow apps downloaded from:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Mac App Store&lt;/li&gt;
&lt;li&gt;Mac App Store and identified developers&lt;/li&gt;
&lt;li&gt;Anywhere&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;They could split the first option in two and allow&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Mac App Store sandboxed&lt;/li&gt;
&lt;li&gt;Mac App Store any&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;One further wrinkle is iCloud. Apple is encouraging users and developers towards
iCloud data storage and sharing. But only apps in the App Store are allowed to
use iCloud.&lt;/p&gt;
&lt;p&gt;So it will be interesting to see how this plays out. Obviously Apple is not
going to care if a tiny developer like me leaves the App Store, but if enough
high-profile developers leave, then there will surely be some consideration
given to the problem.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Update to Time In Words screen saver</title>
<link>https://troz.net/post/2012/update-to-time-in-words-screen-saver/</link>
<pubDate>Fri, 27 Jul 2012 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2012/update-to-time-in-words-screen-saver/</guid>
<description>&lt;p&gt;&lt;a href=&#34;https://troz.net/time-in-words-screen-saver-for-mac/&#34; title=&#34;Time In Words Screen Saver for Mac&#34;&gt;Time In Words screen saver&lt;/a&gt; has just been updated to version 1.1 and is now
fully compatible with Mountain Lion. It is free to use and can be
&lt;a href=&#34;https://troz.net/screensaver/TimeInWords-ScreenSaver.zip&#34;&gt;downloaded&lt;/a&gt; here.&lt;/p&gt;
&lt;p&gt;The basic screen saver worked before, but searching for an alternative time zone
would crash System Preferences. That is now fixed.&lt;/p&gt;
&lt;p&gt;The screen saver also shows a thumbnail image when in Mountain Lion and is
code-signed with my developer ID for compatibility with Mountain Lion&amp;rsquo;s
Gatekeeper.&lt;/p&gt;
&lt;p&gt;The current version is compatible with 10.8 and 10.7. It may work in 10.6 but I
cannot be sure. If anyone tries it, please let me know.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>A Knight&#39;s Move Released</title>
<link>https://troz.net/post/2012/a-knights-move-released/</link>
<pubDate>Mon, 09 Jul 2012 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2012/a-knights-move-released/</guid>
<description>&lt;p&gt;&lt;strong&gt;UPDATE:&lt;/strong&gt; September 2016 - A Knight&amp;rsquo;s Move for iOS is no longer available.&lt;!-- raw HTML omitted --&gt;
&lt;a href=&#34;https://troz.net/knightsmove/&#34;&gt;A Knight&amp;rsquo;s Move for Mac&lt;/a&gt; is still supported.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&amp;ldquo;A Knight&amp;rsquo;s Move&amp;rdquo; is a fun, addictive and simple puzzle game based on the
movements of chess pieces. Your goal is to move your white knight across a board
to a target square using the same movements as a knight in chess. Pawns may
block your way, while enemy bishops, castles, knights and the queen may try to
stop you.&lt;/p&gt;
&lt;p&gt;The game is available for iPad, iPhone and iPod Touch from the iTunes Store and
requires iOS 5.0 or later. The Mac version is available from the Mac App Store
and requires OS X 10.7 or later.&lt;/p&gt;
&lt;p&gt;Perfect for when you have a few minutes to relax, like on the train to work,
during your lunch break or during a boring lecture or class (Kids: don&amp;rsquo;t take
advice from randoms, but you can turn the sound FX off. Just sayin&#39;), &amp;ldquo;A
Knight&amp;rsquo;s Move&amp;rdquo; will keep you coming back for &amp;ldquo;Just One More Go&amp;rdquo;!&lt;/p&gt;
&lt;p&gt;Once you have played the tutorial pack, you can move on to the other puzzle
packs. Each pack comes with 25 more puzzles and there are many different packs
allowing you to select easy puzzles, challenging puzzles or variety packs, some
with themes.&lt;/p&gt;
&lt;p&gt;See more about &amp;ldquo;A Knight&amp;rsquo;s Move&amp;rdquo; at the &lt;a href=&#34;https://troz.net/knightsmove/&#34;&gt;Knight&amp;rsquo;s Move web page&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Get the game from the
&lt;!-- raw HTML omitted --&gt;Mac
App Store&lt;!-- raw HTML omitted --&gt;.&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;Tutorial puzzle on iPhone&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://troz.net/images/PeskyPawns.png&#34;&gt;&lt;!-- raw HTML omitted --&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Pesky Pawns - one of the more difficult puzzles on Mac.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Easy access to the Library folder</title>
<link>https://troz.net/post/2012/easy-access-to-the-library-folder/</link>
<pubDate>Wed, 16 May 2012 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2012/easy-access-to-the-library-folder/</guid>
<description>&lt;p&gt;In Mac OS X 10.7 (Lion), Apple decided to make it more difficult to access your
Library folder, presumably to stop people doing stuff that made apps crash. But
as a developer, I need access to my Library folder a lot. I need to check that
preferences are being saved correctly. If I have an app that uses the
Application Support folder, then I need to be able to check it. And for
sand-boxed apps, they keep all their data in the Containers folder inside the
Library.&lt;/p&gt;
&lt;p&gt;You can easily get to the Library folder by holding down the Option key while
choosing the Go menu in Finder. This adds Library to the menu and you can get to
the folder that way. But this is not as convenient as single-click access from a
Finder window, so here is my preferred method.&lt;/p&gt;
&lt;p&gt;Use the Option key and the Finder&amp;rsquo;s Go menu to get the Library folder open in a
Finder window. Switch this window to column view, which will display the Library
folder (slightly greyed out) in the first column. Drag this Library folder to
the side bar of your Finder window. Now it is there all the time, in every
Finder window that is showing the side bar.&lt;/p&gt;
&lt;p&gt;I have read about various Terminal tricks to get the Library to show up, but
every system update seems to turn it off again. This technique doesn&amp;rsquo;t involve
anything except the Finder&amp;rsquo;s side bar preferences and so far (I&amp;rsquo;m now up to
10.7.4), it hasn&amp;rsquo;t needed to be reset after any update.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Man Reader update coming soon</title>
<link>https://troz.net/post/2012/man-reader-update-coming-soon/</link>
<pubDate>Fri, 11 May 2012 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2012/man-reader-update-coming-soon/</guid>
<description>&lt;p&gt;Man Reader launched on the Mac App Store a couple of days ago and yesterday I
got an email from a purchaser who reported that Man Reader was not displaying
the man pages for MacPorts, even though he had the paths set up correctly.&lt;/p&gt;
&lt;p&gt;I installed MacPorts to check this out and ran into the same problem. Running
the command &amp;ldquo;man port&amp;rdquo; in Terminal worked fine, but &amp;ldquo;port&amp;rdquo; did not appear in Man
Reader&amp;rsquo;s list.&lt;/p&gt;
&lt;p&gt;Man Reader uses the &amp;ldquo;apropos&amp;rdquo; command to list all available man pages, so I
tested it next. When I found that it was not listing &amp;ldquo;port&amp;rdquo; either, I thought I
had discovered the problem. OS X offers two commands for searching for man
pages: apropos &amp;amp; whatis. The database files used by these commands are updated
weekly by one of the periodic system commands. I manually ran this update
command using:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;sudo /etc/periodic/weekly/320.whatis
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This did part of the job, as the apropos command when used in Terminal now
contained the MacPorts man pages. However Man Reader still did not show these
man pages.&lt;/p&gt;
&lt;p&gt;Reverting to the Console log, I found that this was a sand-boxing problem. The
Mac OS X sand-box was preventing access to the man.conf file (which tells where
to look for man pages), and the whatis database file containing the new data. I
assume that without access to these files, the default locations for man pages
were still searched, but no non-standard locations were being searched.&lt;/p&gt;
&lt;p&gt;I have just submitted an update to the App Store that still uses sand-boxing but
requests temporary read-only access to the file system to read these files. If
Apple rejects this, then I will release a version without sand-boxing.&lt;/p&gt;
&lt;p&gt;Either way, you can be assured that the matter is being dealt with and the next
update, whether sand-boxed or not, will allow access to all man pages.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Pic-a-POD 2.0.4 for Mac</title>
<link>https://troz.net/post/2012/pic-a-pod-2-0-4-for-mac/</link>
<pubDate>Fri, 11 May 2012 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2012/pic-a-pod-2-0-4-for-mac/</guid>
<description>&lt;p&gt;The latest update for &lt;a href=&#34;http://www.picapod.com/&#34;&gt;Pic-a-POD for Mac&lt;/a&gt; is now available through the
&lt;!-- raw HTML omitted --&gt;Mac
App Store&lt;!-- raw HTML omitted --&gt;.&lt;/p&gt;
&lt;h2 id=&#34;bug-fix&#34;&gt;Bug fix:&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;selecting an iPhoto pic from the Recent Desktops menu now works correctly.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;new-features&#34;&gt;New features:&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Better indication of downloads and when large pics are not yet available&lt;/li&gt;
&lt;li&gt;Direct link to App Store in Help menu - please rate or review.&lt;/li&gt;
&lt;/ul&gt;
</description>
</item>
    
    <item>
<title>Making a Mac Screen Saver</title>
<link>https://troz.net/post/2012/making-a-mac-screen-saver/</link>
<pubDate>Wed, 09 May 2012 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2012/making-a-mac-screen-saver/</guid>
<description>&lt;p&gt;Having just completed the my first screen saver for Mac - the &lt;a href=&#34;https://troz.net/time-in-words-screen-saver-for-mac/&#34; title=&#34;Time In Words Screen Saver for Mac&#34;&gt;Time In Words
Screen Saver&lt;/a&gt;, I thought I would share some of the experiences. I am using OS
X Lion (10.7) and Xcode 4.3.2&lt;/p&gt;
&lt;p&gt;The first thing is to create a new project in Xcode using the Screen Saver
template:&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://troz.net/images/ScreenSaverTemplate.png&#34;&gt;&lt;!-- raw HTML omitted --&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Xcode sets up a project for you with everything you need for a screen saver
module. Start editing the ScreenSaverView.m file. The most important method here
is animateOneFrame.&lt;/p&gt;
&lt;p&gt;This is called every time the animation time interval elapses. This interval is
set in &lt;code&gt;initWithFrame:isPreview:&lt;/code&gt;. I have seen some debate online as to whether
the drawing should be done in the &lt;code&gt;animateOneFrame&lt;/code&gt; method or in the &lt;code&gt;drawRect&lt;/code&gt;
method. I chose to use &lt;code&gt;animateOneFrame&lt;/code&gt; because they are both called when the
screen saver starts which can lead to an unpleasant flicker.&lt;/p&gt;
&lt;p&gt;Now it is up to you to decide what to show in the &lt;code&gt;animateOneFrame&lt;/code&gt; method. For
Time In Words, I assembled the data as a string, created a dictionary of text
attributes, calculated the location where I wanted to show the text and used
&lt;code&gt;drawAtPoint:withAttributes:&lt;/code&gt; to display it.&lt;/p&gt;
&lt;p&gt;There are a couple of important tricks when working out locations: firstly, you
will need to know the bounds of the screen saver area. This will vary depending
on the monitor, screen size or whether the screen saver is appearing in the
preview window in System Preferences. The screen saver view has a method that
does this work for you.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-objectivec&#34; data-lang=&#34;objectivec&#34;&gt;NSRect viewBounds &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [self bounds];
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The next trick is that you are most likely going to need some random numbers.
Again, the screen saver framework supplies these to you in several forms. I used
&lt;code&gt;SSRandomFloatBetween&lt;/code&gt; but there are others. Check the documentation.&lt;/p&gt;
&lt;p&gt;I ran into an oddity in System Preferences that made testing a bit tedious. I
built the screen saver module and double-clicked on it to install into System
Preferences. That worked fine, but when I made some changes and repeated the
process, the original screen saver was still in place. I found that I had to
quit System Preferences each time. Deleting the old version of the screen saver
was not necessary, but quitting the System Prefs app was essential.&lt;/p&gt;
&lt;p&gt;So that gives the basic screen saver module but with no options. Adding options
is not difficult, but as always, there are a few things that are not obvious on
first glance.&lt;/p&gt;
&lt;p&gt;Add a xib file to your project: I used a window template. Then change the
window&amp;rsquo;s class to NSPanel and configure it as shown:&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;p&gt;Set the File&amp;rsquo;s Owner class to the class of your Screen Saver view. In your
ScreenSaverView.h file, declare a property for this new panel. e.g.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-objectivec&#34; data-lang=&#34;objectivec&#34;&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;@property&lt;/span&gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;assign&lt;/span&gt;) &lt;span style=&#34;color:#66d9ef&#34;&gt;IBOutlet&lt;/span&gt; NSPanel &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;optionsPanel;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;@synthesize this in the ScreenSaverView.m file. In the xib file, connect the
panel to this outlet.&lt;/p&gt;
&lt;p&gt;Now go back to ScreenSaverView.m and add the following code:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-objectivec&#34; data-lang=&#34;objectivec&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;BOOL&lt;/span&gt;)hasConfigureSheet { &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; YES; }

&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; (NSWindow &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;)configureSheet { &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt;self.optionsPanel) { [NSBundle
  loadNibNamed:&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;Options&amp;#34;&lt;/span&gt; owner:self]; } &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; self.optionsPanel; }

&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;IBAction&lt;/span&gt;)closeConfig:(&lt;span style=&#34;color:#66d9ef&#34;&gt;id&lt;/span&gt;)sender { [[NSApplication sharedApplication]
  endSheet:self.optionsPanel]; }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The &lt;code&gt;hasConfigureSheet&lt;/code&gt; and &lt;code&gt;configureSheet&lt;/code&gt; stubs are already there for you,
but you can replace them with these versions.&lt;/p&gt;
&lt;p&gt;Go back to the xib file and drag in a button to close the options panel. Connect
it to the &lt;code&gt;closeConfig:&lt;/code&gt; action.&lt;/p&gt;
&lt;p&gt;Save everything, build, install in System Preferences and test. Firstly, the
&amp;ldquo;Options&amp;hellip;&amp;rdquo; button should be enabled. Clicking it should open your panel as a
sheet, and when you click your button, the panel should close.&lt;/p&gt;
&lt;p&gt;If that doesn&amp;rsquo;t work, check the class assignments, the connections, the settings
for the NSPanel and the code in that order.&lt;/p&gt;
&lt;p&gt;Once the panel is opening and closing as required, you need to add the ability
to store and retrieve the settings. Instead of using NSUserDefaults as you would
in a standard Mac app, there is a special class call ScreenSaverDefaults for
screen savers. It needs a unique module name, so I used the bundle identifier.
For my Time In Words screen saver, this is
&amp;ldquo;net.troz.Time-In-Words-Screen-Saver&amp;rdquo;. I defined a constant to hold this as a
string, so I could use it anywhere I needed.&lt;/p&gt;
&lt;p&gt;In the &lt;code&gt;initWithFrame:isPreview:&lt;/code&gt; method, I got a reference to the screen saver
defaults for my screen saver and registered the defaults. I am never very sure
about the need to do this, but it is supposed to be a good practice.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-objectivec&#34; data-lang=&#34;objectivec&#34;&gt;ScreenSaverDefaults &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;defaults &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [ScreenSaverDefaults defaultsForModuleWithName:kModuleName];
[defaults registerDefaults:[NSDictionary dictionaryWithObjectsAndKeys:
  &lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;NO&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;UseAlternativeZone&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;&amp;#34;&lt;/span&gt;,
  &lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;AlternativeZoneName&amp;#34;&lt;/span&gt;, nil]
];
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Using them is exactly the same as using NSUserDefaults:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-objectivec&#34; data-lang=&#34;objectivec&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Reading
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;ScreenSaverDefaults &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;defaults &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [ScreenSaverDefaults defaultsForModuleWithName:kModuleName];
&lt;span style=&#34;color:#66d9ef&#34;&gt;BOOL&lt;/span&gt; useAlternativeZone &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [defaults boolForKey:&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;UseAlternativeZone&amp;#34;&lt;/span&gt;];
NSString &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;alternativeZoneName &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [defaults objectForKey:&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;AlternativeZoneName&amp;#34;&lt;/span&gt;];
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&amp;hellip;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-objectivec&#34; data-lang=&#34;objectivec&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Writing
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;ScreenSaverDefaults &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;defaults &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [ScreenSaverDefaults defaultsForModuleWithName:kModuleName]; [defaults setBool:useAlternative forKey:&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;UseAlternativeZone&amp;#34;&lt;/span&gt;];
[defaults setObject:alternativeZoneName forKey:&lt;span style=&#34;color:#e6db74&#34;&gt;@&amp;#34;AlternativeZoneName&amp;#34;&lt;/span&gt;];
[defaults synchronize];
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;One last thing: if you want to distribute the screen saver, you will want to
create an archive, possibly code-signing with your Apple developer ID to allow
for Mountain Lion&amp;rsquo;s up-coming Gatekeeper security system. I code-signed the
project and built an archive, but when I clicked &amp;ldquo;Distribute&amp;rdquo; in the Organizer,
the only appropriate options was &amp;ldquo;Save Built Products&amp;rdquo;. I selected this option
and ended up with a series of folders inside folders, with the screen saver
module in about the fifth folder down. I don&amp;rsquo;t know why the module gets
distributed like this, but I pulled it out of the folders and it worked fine.&lt;/p&gt;
&lt;p&gt;And that&amp;rsquo;s about it. A lot of this stuff is online or in Apple&amp;rsquo;s documentation,
but there are enough oddities to make it worthwhile gathering together all that
I learnt while making this screen saver.&lt;/p&gt;
&lt;p&gt;Click this icon to download the screen saver:&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://troz.net/screensaver/TimeInWords-ScreenSaver.zip&#34;&gt;&lt;!-- raw HTML omitted --&gt;&lt;/a&gt;&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Support for older operating systems</title>
<link>https://troz.net/post/2012/support-for-older-operating-systems/</link>
<pubDate>Wed, 02 May 2012 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2012/support-for-older-operating-systems/</guid>
<description>&lt;p&gt;Working out what operating systems to support in your software is always a
difficult decision. I only program for Mac &amp;amp; iOS systems for starters. This is
because they are the systems I use and understand. I am not interested in
expending the time &amp;amp; money needed to program and test my software for other
systems.&lt;/p&gt;
&lt;p&gt;Within the Mac &amp;amp; iOS ecosystems, there is still the decision of which versions
to support. Partially, this is based on the usage statistics of each version. I
found a site that segments the current Mac market:
&lt;!-- raw HTML omitted --&gt;Distribution
of Mac OS X versions&lt;!-- raw HTML omitted --&gt;. This tells me that OS 10.6 &amp;amp; OS 10.7 between them have
83% which makes 10.6 a good cut-off point.&lt;/p&gt;
&lt;p&gt;Distribution of iOS versions is harder to discover, but I found a post that did
a good job of analysing the statistics that are available:&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://pxldot.com/post/18754186750/ios-ebb-and-flow&#34;&gt; pxldot (iOS Ebb and Flow)&lt;/a&gt;. According to this post, by March 2012, iOS had
about 75% with the remainder being almost exclusively iOS 4.&lt;/p&gt;
&lt;p&gt;So based on statistics alone, it makes sense to support Mac OS X 10.6 or later
and iOS 4 and later. However this doesn&amp;rsquo;t cover all the relevant issues. Another
important factor is new techniques and APIs introduced in Apple&amp;rsquo;s developer
tools.&lt;/p&gt;
&lt;p&gt;In iOS 4, Apple gave us ARC - Automatic Reference Counting - which basically
removes the tedious job of memory management. This was especially painful in iOS
apps where there is no garbage collection. &lt;a href=&#34;http://longweekendmobile.com/2011/09/07/objc-automatic-reference-counting-in-xcode-explained/&#34;&gt;The Long Weekend Website&lt;/a&gt; has an
excellent summary of ARC - what it is and how to use it. Since this only
excludes iOS 3 or earlier, there is no issue using this for all iOS projects.&lt;/p&gt;
&lt;p&gt;But now Apple has extended ARC to Mac apps as well, but only for apps built to
run under 10.7 or later. Even though Mac apps could use garbage collection to
remove some of the burden of memory management, this had its own inefficiencies
and overheads. So in my case, I have decided that all future apps will require
10.7 to take advantage of ARC. Existing apps will stay as is - requiring 10.6 or
later. With 10.8 not that far away, the usage statistics should follow this
trend.&lt;/p&gt;
&lt;p&gt;Back to iOS, there is another new feature of Xcode that is really too attractive
to ignore and that is story-boarding. This is a graphical way of laying out the
navigation logic for your app and providing segues between different views. Ray
Wenderlich has a good &lt;a href=&#34;http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1&#34;&gt;introduction to storyboards&lt;/a&gt;. So this means that my
future iOS apps will all require 10.5 or later.&lt;/p&gt;
&lt;p&gt;One final factor is testing. You really need to have a device running each
version of any supported operating system. I would rather concentrate on getting
the best result for users of the latest versions that spend my time tweaking for
older systems. With iOS, Apple makes it amazingly easy to update to the latest
version. With Macs it costs money which is always a barrier, but technically,
the App Store is making updates easier to apply.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Time In Words &amp; the new iPad</title>
<link>https://troz.net/post/2012/time-in-words-the-new-ipad/</link>
<pubDate>Tue, 10 Apr 2012 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2012/time-in-words-the-new-ipad/</guid>
<description>&lt;p&gt;The new iPad has a Retina display, meaning that the pixel density is much
greater. For some apps, this is a problem as their graphics are now scaled and
look pixellated. However Time In Words is very simple. It uses standard fonts
and interface widgets with no images or external graphics apart from the icon.
The icon may not look perfect on a new iPad, but the display itself should look
really great.&lt;/p&gt;
&lt;p&gt;I had a report from one user that Time In Words will not work at all on his new
iPad. Unfortunately, the email address supplied did not work, so I was unable to
contact this person directly. If you are reading this, please contact me again.&lt;/p&gt;
&lt;p&gt;The person having the problem did not specify exactly what the problem was, so I
don&amp;rsquo;t know if the app will not start, or if it is not displaying correctly, or
if it is showing the wrong times or what.&lt;/p&gt;
&lt;p&gt;However I suggested two things to try, and I will list them now in case anyone
else is having issues:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Try deleting the app from your iPad and then re-installing from the App
Store.&lt;/li&gt;
&lt;li&gt;Do a complete reboot of your iPad in case it is running low on memory.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Hopefully one or both of these ideas will solve any problems. They are both good
general tricks to try with any problem app.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>iPhone 4 Home Button</title>
<link>https://troz.net/post/2012/iphone-4-home-button/</link>
<pubDate>Wed, 28 Mar 2012 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2012/iphone-4-home-button/</guid>
<description>&lt;p&gt;My iPhone 4 is now 18 months old, and it&amp;rsquo;s Home button is starting to feel the
strain. These buttons have been used much more than originally intended, with
the new multitasking required double-presses, not to mention access to the
camera etc. So basically , it is wearing out.&lt;/p&gt;
&lt;p&gt;The phone is out of warranty and there is no way I am going to pay for an
expensive repair when my current phone contract will expire later this year, and
hopefully the iPhone 5 will be ready for me then. And a cheap repair or DIY is
too risky.&lt;/p&gt;
&lt;p&gt;I saw a post comparing the physical structure of the home buttons on iPhone 4 &amp;amp;
4S. Unfortunately I cannot find the link now, but it showed that the actual
hardware has been made a lot more robust since the iPhone 4 was released, so
this should only be a short term issue.&lt;/p&gt;
&lt;p&gt;I read a article suggesting the use of WD-40 for a mis-behaving Home button.
This is a TERRIBLE idea! Do not spray a penetrating oil into your expensive
electronic device. For starters, it don&amp;rsquo;t believe it is a friction problem - I
think the mechanism is just wearing out.&lt;/p&gt;
&lt;p&gt;Some people recommend recalibrating the Home button as shown in this post from
&lt;a href=&#34;http://www.idownloadblog.com/2011/12/22/recalibrate-home-button-responsive/&#34;&gt;idownloadblog.com&lt;/a&gt;. I am a bit sceptical about this. I tried it, but I can&amp;rsquo;t
see that it did anything. Maybe if your problem is software rather than
hardware, then it will do some good. Anyway, unlike the WD-40 trick, it can&amp;rsquo;t do
any harm.&lt;/p&gt;
&lt;p&gt;Finally, on to the workaround. If your iPhone button is really unreliable, but
you are not ready to repair or upgrade, then you can use the Accessibility tools
to get a software Home button on the screen.&lt;/p&gt;
&lt;p&gt;Go to Settings - General - Accessibility. Scroll down to &amp;ldquo;Physical &amp;amp; Motor&amp;rdquo;.
Turn on AssistiveTouch.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://troz.net/images/HomeButton1.png&#34;&gt;&lt;!-- raw HTML omitted --&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;When you back out of Settings, you will see a white blob somewhere on your
screen. This can be dragged to any location around the edge of the screen, so
you can always move it out of the way in any app.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://troz.net/images/HomeButton2.png&#34;&gt;&lt;!-- raw HTML omitted --&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Tapping on the white blob gives you an overlay view with four options, one of
which is Home. Tapping this is exactly the same as pressing the physical Home
button. So with this and the power button, you can do everything, even if the
Home button stops working completely.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://troz.net/images/HomeButton3.png&#34;&gt;&lt;!-- raw HTML omitted --&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Thanks to Tom at our local Apple Store (Robina, Queensland, Australia) for this
tip.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Time In Words for Mac now available</title>
<link>https://troz.net/post/2012/time-in-words-for-mac-now-available/</link>
<pubDate>Tue, 20 Mar 2012 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2012/time-in-words-for-mac-now-available/</guid>
<description>&lt;p&gt;Time In Words for Mac has just been approved and is now available for free from
the
&lt;!-- raw HTML omitted --&gt;Mac
App Store&lt;!-- raw HTML omitted --&gt;.&lt;/p&gt;
&lt;p&gt;For more details, check out the &lt;a href=&#34;https://troz.net/time-in-words-for-mac/&#34;&gt;Time In Words for Mac&lt;/a&gt; web page.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Interface options for selecting time zones</title>
<link>https://troz.net/post/2012/interface-options-for-selecting-time-zones/</link>
<pubDate>Sat, 25 Feb 2012 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2012/interface-options-for-selecting-time-zones/</guid>
<description>&lt;p&gt;As part of the design for [Time In Words for Mac][1], I had to work out the
interface for selecting time zones. With [Time In Word for iOS][2], I used
picker wheels which are excellent for selecting hierarchical data. On the Mac,
there is no such thing as the iOS picker wheel and so I had to consider what to
use instead.&lt;/p&gt;
&lt;p&gt;When you ask the system (Mac or iOS) for the available time zones, you get a
list of names like this:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Africa/Abidjan&lt;br&gt;
Africa/Accra&lt;br&gt;
&amp;hellip;&lt;br&gt;
America/Cayman&lt;br&gt;
America/Chicago&lt;br&gt;
&amp;hellip;&lt;br&gt;
Europe/Riga&lt;br&gt;
Europe/Rome&lt;br&gt;
etc.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This seems obviously designed for a hierarchical display with the major regions
as a first selection, filtering down to the cities in that region, making
selection a two-step process. With the picker wheel in iOS, that is what I did.
The first wheel selects the region which then populates the second wheel with
the relevant city names. It makes it quick and easy to select a zone.&lt;/p&gt;
&lt;p&gt;I always prefer to use standard user interface objects because people are
familiar with them, they automatically update with the system, and there is much
less chance of the App Store rejecting the app. So I scrolled through the
available Mac options and came to NSBrowser. This is basically what Finder uses
when in column mode.&lt;/p&gt;
&lt;p&gt;I created an NSBrowser object, worked out a way to populate it and tested. It
was incredibly slow! The list of regions appeared when the window opened, and
that was no problem. Then I clicked a region and the first set of city names
appeared instantly. But subsequent selections took about 3 seconds to appear.&lt;/p&gt;
&lt;p&gt;I added some timing tests and my data gathering was taking about 20
milliseconds. The log thought the browser had updated within about 100
milliseconds, so I guess the rest of the time was some redraw issue.&lt;/p&gt;
&lt;p&gt;Apple provides a large number of sample projects so I downloaded one that used
NSBrowser. It seemed fast and responsive, so I duplicated it&amp;rsquo;s different method
of assembling the data and tried again. No luck - it was as slow as before.&lt;/p&gt;
&lt;p&gt;I am sure that if I kept at it, I would eventually work out what was causing the
bottleneck and make NSBrowser work - after all, Finder is responsive enough,
even if not great. But in the end, I decided that the advantages to using this
form of interface didn&amp;rsquo;t justify the time spent, so I went with a simple table
and a search field.&lt;/p&gt;
&lt;p&gt;It is fast to populate, responsive to searches and didn&amp;rsquo;t take long to set up.
So I am happy, although still perplexed about NSBrowser. It is on my to-do list
of things I want to work out one day.&lt;/p&gt;
&lt;p&gt;[1]: /time-in-words-for-mac/ [2]: /time-in-words/&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Scroll bars in Mac OX 10.6 and 10.7</title>
<link>https://troz.net/post/2012/scroll-bars-in-mac-ox-10-6-and-10-7/</link>
<pubDate>Sat, 25 Feb 2012 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2012/scroll-bars-in-mac-ox-10-6-and-10-7/</guid>
<description>&lt;p&gt;With the introduction of OS X 10.7 (Lion), Apple removed the obvious scroll bars
from windows and replaced them with a much more subtle scroll indicator, that
only appears when you are actually scrolling. This was designed to match the iOS
scrolling, as was the swap of scroll direction which makes much more sense if
you use a trackpad.&lt;/p&gt;
&lt;p&gt;With the upcoming &lt;a href=&#34;https://troz.net/time-in-words-for-mac/&#34;&gt;Time In Words for Mac&lt;/a&gt;, I have a Preferences window to
allow selection of time zones to display in the menu. The app will be compatible
with 10.6 or later. Under 10.6, the scrollbars are always visible and this is
what the Preferences display looks like:&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;p&gt;This may change, but the basic layout is there. As you can see, I have a
3-column table listing all the available time zones, with the final column right
justified.&lt;/p&gt;
&lt;p&gt;Under 10.7, this doesn&amp;rsquo;t quite work:&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;p&gt;I had to grab this screen shot quickly after swiping the trackpad, but you can
see the problem. When not scrolling, the scroll indicator is hidden and the
right column is fully visible, but when dragging the scroll indicator appears on
top of the right-justified entries in that column.&lt;/p&gt;
&lt;p&gt;So now I am not quite sure what to do. Here are the options I have considered:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Left or centre-justify the text in the final column.&lt;/li&gt;
&lt;li&gt;Add some spacing at the end of each line so that the scroll indicator appears
in blank space.&lt;/li&gt;
&lt;li&gt;Put up with it.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I will have to experiment with various options and see what I can do.&lt;/p&gt;
</description>
</item>
    
    <item>
<title>Time In Words available in the App Store</title>
<link>https://troz.net/post/2012/time-in-words-available-in-the-app-store/</link>
<pubDate>Thu, 09 Feb 2012 00:00:00 +0000</pubDate>
      
      <guid>https://troz.net/post/2012/time-in-words-available-in-the-app-store/</guid>
<description>&lt;p&gt;Time In Words is now available at the App Store.&lt;/p&gt;
&lt;p&gt;Time In Words is a clock and calendar app that takes you out of the digital era
and back to when saying “quarter to seven” or “five past two” was accurate
enough.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://itunes.apple.com/app/time-in-words/id498403851&#34;&gt;&lt;!-- raw HTML omitted --&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Check out the &lt;a href=&#34;https://troz.net/time-in-words/&#34;&gt;Time In Words web page&lt;/a&gt; for more info and screen shots.&lt;/p&gt;
</description>
</item>
    
  </channel>
</rss>