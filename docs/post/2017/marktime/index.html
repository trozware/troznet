<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>Mark Time :: TrozWare</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="description" content="" />
<meta name="keywords" content="[Swift Apple macOS iOS Apple Watch]" />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://troz.net/post/2017/marktime/" />



<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Source+Code+Pro' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="/assets/style.css">

  <link rel="stylesheet" href="/css/header.css">
<style>
  menu__inner li:last-of-type{
    margin:0 20px
  }
</style>


<link rel="apple-touch-icon-precomposed" sizes="144x144" href="icons/apple-touch-icon-144-precomposed.png">
<link rel="shortcut icon" href="icons/favicon-96x96.png">



    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@trozware" />
    <meta name="twitter:title" content="TrozWare" />
    <meta name="twitter:description" content="macOS, iOS and watchOS Developer" />
    <meta name="twitter:url" content="http://troz.net/" />
    <meta name="twitter:image" content="http://troz.net/icons/apple-touch-icon-152x152.png" />






<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Mark Time :: TrozWare — ">
<meta property="og:description" content="" />
<meta property="og:url" content="https://troz.net/post/2017/marktime/" />
<meta property="og:site_name" content="Mark Time" />
<meta property="og:image" content="https://troz.net/img/default.jpg">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">


<meta property="article:published_time" content="2017-12-12 09:14:07 &#43;1000 AEST" />









</head>
<body class="dark-theme">
<div class="container">
  <header class="header">
  <span class="header__inner">
    <a href="https://troz.net/" style="text-decoration: none;">
  <div class="logo">
    
      <span class="logo__mark">></span>
      <span class="logo__text">TrozWare</span>
      <span class="logo__cursor"></span>
    
  </div>
</a>

    <span class="header__right">
      
        <nav class="menu">
  <ul class="menu__inner">
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/apps/">Apps</a></li>
    
      <li><a href="/post/">Archives</a></li>
    
      <li><a href="/tags/">Tags</a></li>
    
      <li><a href="/contact/">Contact</a></li>
    
  </ul>
</nav>
        <span class="menu-trigger">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M0 0h24v24H0z" fill="none"/>
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
          </svg>        
        </span>
      
      <span class="theme-toggle">
        <svg class="bulb-off" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect width="24" height="24"/>
  <path d="M4 19C4 19.55 4.45 20 5 20H9C9.55 20 10 19.55 10 19V18H4V19ZM7 0C3.14 0 0 3.14 0 7C0 9.38 1.19 11.47 3 12.74V15C3 15.55 3.45 16 4 16H10C10.55 16 11 15.55 11 15V12.74C12.81 11.47 14 9.38 14 7C14 3.14 10.86 0 7 0ZM9.85 11.1L9 11.7V14H5V11.7L4.15 11.1C2.8 10.16 2 8.63 2 7C2 4.24 4.24 2 7 2C9.76 2 12 4.24 12 7C12 8.63 11.2 10.16 9.85 11.1Z" transform="translate(5 2)" fill="black"/>
</svg>

<svg class="bulb-on" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect width="24" height="24"/>
  <path class="bulb-on__base" d="M4 19C4 19.55 4.45 20 5 20H9C9.55 20 10 19.55 10 19V18H4V19Z" transform="translate(5 2)" fill="#a9a9b3" />
  <path class="bulb-on__glass" d="M0 7C0 3.14 3.14 0 7 0C10.86 0 14 3.14 14 7C14 9.38 12.81 11.47 11 12.74V15C11 15.55 10.55 16 10 16H4C3.45 16 3 15.55 3 15V12.74C1.19 11.47 0 9.38 0 7Z" transform="translate(5 2)" fill="#a9a9b3" />
</svg>
  
      </span>
    </span>
  </span>
</header>


  <div class="content">
    
<div class="post">
  <h2 class="post-title"><a href="https://troz.net/post/2017/marktime/">Mark Time</a></h2>
  <div class="post-meta">
    <span class="post-date">
      12 Dec 2017
    </span>
    <span class="more-meta"> 882 words, </span>
    <span class="more-meta"> 5 minute read</span>
  </div>

  

  

  <div class="post-content">
    <style>img {width: 300px; } </style>

<p><a href="https://itunes.apple.com/us/app/mark-time/id1305580742?mt=8">Mark Time</a> is an application for Celestial Navigation that solves the
problem of how to take an accurate time reading to go with each sextant
sighting. Here is how it was developed&hellip;</p>

<hr />

<p>A day in the life of a software developer - &ldquo;it would be great if there was an
app that did&hellip;&rdquo;</p>

<p>One of the family is learning celestial navigation and was struggling with the
problem that you either need a partner or more than 2 hands. The key factor is
that you need to record the exact time at the moment when you take your
sighting. And this time has to be in UTC to make your subsequent calculations
work.</p>

<p>Since this is a very simple app, I decided it would be fun to describe the
development process from first specifications to release in the App Store.</p>

<h3 id="the-basic-specs">The Basic Specs</h3>

<ul>
<li>tap anywhere on the screen to record the time</li>
<li>convert the time to Universal Time (UT)</li>
<li>display that time in a specific format: DD:HH:MM:SS</li>
<li>store the last 5 tap times</li>
</ul>

<p>A <code>UITapGestureRecognizer</code> over the entire view solved the first requirement.
The native <code>Date</code> object handles time zone conversions perfectly, and then it
was a matter of configuring a <code>DateFormatter</code> with a custom format string to
provide the required date display.</p>

<p>The last 5 times are stored in <code>UserDefaults</code> and displayed in reverse order so
the most recent is always at the top.</p>

<h3 id="ui-considerations">UI considerations</h3>

<ul>
<li>colour scheme must work in bright sunlight</li>
<li>text should use dynamic sizing so it works if people adjust the text size on
their iPhones</li>
<li>the UI elements must be out of the way of the new iPhone X system gestures.</li>
<li>while it will most likely be used on iPhones, allow for iPads as well</li>
</ul>

<p>I had done extensive tests of colour schemes when developing my golf scoring app
<a href="/19th-hole/">19th Hole</a>, so I already had the answer to the colours question: dark grey
background with white text.</p>

<p>Allowing for dynamic type should have been easy - choose a font style e.g. body,
headline, title 1 and set it to adjust automatically. But with a display that is
mainly numeric, the display looked terrible because the numbers in the default
San Francisco are non-proportional. So I switched to Helvetica Neue and watched
for dynamic font size changes manually.</p>

<p>The iPhone X should be fine since I used the new safe area layout guides.</p>

<p>For iPad, I didn&rsquo;t make a lot of UI changes since I don&rsquo;t expect it to be used
much, but the display is bigger and probably easier to read.</p>

<p><img src="/images/MarkTime1.png" alt="Mark Time" /></p>

<h3 id="refinements">Refinements</h3>

<p>As always, once the first few iterations have been through the testing process,
there were a few things that needed changing and then feature creep set in&hellip;</p>

<ul>
<li>change the date format to be more readable</li>
<li>change the basic tap gesture so that it triggers on tap down, not tap up</li>
<li>add a button to clear all the stored data</li>
<li>display the current time in UTC and in the same format</li>
<li>cheat mode - record latitude and longitude for each time so the calculations
can be checked</li>
<li>change the format for showing the latitude and longitude</li>
<li>sound &amp; haptics to provide feedback</li>
<li>settings</li>
</ul>

<p>The date format was DD:HH:MM:SS so for 12th December at 1:01:46 pm, this would
show 12:13:01:46 which we decided was a bit confusing. One tended to assume the
first section was actually the hours. Under the new scheme, that same date
displays as 12d 13h 01m 46.654s. The extra precision on the seconds was to show
that the time really was changing if you tapped multiple times quickly.</p>

<p>To make the time record immediately, I removed the <code>UITapGestureRecognizer</code> and
placed <code>UIButtons</code> covering all the relevant active areas. They respond on Touch
Down for a much faster reaction.</p>

<p>Usually, I make a separate View Controller for preferences. This time, because
the app needed access to the standard Settings app for Location services, I
decided to add the app&rsquo;s preferences to the app&rsquo;s page in the Settings app. This
worked really well, and made the app itself smaller and simpler.</p>

<p><img src="/images/MarkTime3.png" alt="Mark Time" /></p>

<p>In cheat mode, the location is recorded at every tap and then the info button
beside each time shows the details. This needed to handle the permissions
required for accessing the user&rsquo;s location. The latitude and longitude are shown
in decimal format and at first, I also showed them in DMS (degrees, minutes,
seconds) format. I found out that for navigation calculations, they prefer to
see degrees and decimal minutes, no seconds. And rather oddly, this is displayed
something like this: 153° 22&rsquo;.84 E</p>

<p>Sounds and haptics were added, configurable through Settings. The sound was a
nice loud double-beep designed to be clearly audible to tell you when you had
recorded a time.</p>

<p><img src="/images/MarkTime2.png" alt="Mark Time" /></p>

<h3 id="release">Release</h3>

<p>After numerous rounds of TestFlight, I was ready to release. The app was
submitted to iTunes Connect and ready for review on Dec 9, 2017 at 7:36 PM. It
moved into review on Dec 11, 2017 at 8:07 AM and was ready for sale on Dec 11,
2017 at 10:19 AM. So less than 39 hours from start to finish of the review
process for a new app - things have certainly changed!</p>

<p>The app is free - you can get it from the <a href="https://itunes.apple.com/us/app/mark-time/id1305580742?mt=8">iTunes App Store</a>.</p>
  </div>
  
  <div class="pagination">
    <div class="pagination__title">
      <span class="pagination__title-h">Read other posts</span>
      <hr />
    </div>
    <div class="pagination__buttons">
      
      <a class="btn next" href="https://troz.net/ncss2018/">← NCSS 2018</a>
      
      
      <a class="btn previous" href="https://troz.net/post/2017/moving-to-hugo/">Moving to Hugo →</a>
      
    </div>
  </div>
  
</div>

  </div>

  
    <link rel="stylesheet" href="/css/footer.css">

<footer class="footer">
  <div class="footer__inner">
    <div class="social_footer">
      <a id="email-Link" class="mailtoui" href="mailto:sarah@troz.net"><img src="/icons/envelope.svg" /></a>
      <a href="https://stackoverflow.com/users/1082632"><img src="/icons/stack-overflow.svg" /></a>
      <a href="https://twitter.com/trozware"><img src="/icons/twitter.svg" /></a>
      <a href="https://github.com/trozware"><img src="/icons/github.svg" /></a>
      <a href="https://troz.net/index.xml"><img src="/icons/rss.svg" /></a>
      <a href="https://troz.net//feed.json"><img src="/icons/json.png" /></a>
    </div>
  </div>

  <div class="footer__inner">
    <div class="copyright">
      
      <span>© 2012 - 2019 Sarah Reichelt</span>
      
      <span><a href="http://gohugo.io">Hugo</a> theme created by <a href="https://twitter.com/panr">panr</a> 2018</span>
    </div>
  </div>
</footer>

<script src="/assets/main.js"></script>
<script src="/assets/prism.js"></script>

 
<script src="https://cdn.jsdelivr.net/npm/mailtoui@latest/dist/mailtoui-min.js"></script>


<script src="https://polyfill.io/v2/polyfill.min.js?features=IntersectionObserver"></script>
<script src="/quicklink.js"></script>

<script>
  window.addEventListener('load', () => {
    quicklink();
  });
</script>

  
</div>

</body>
</html>
