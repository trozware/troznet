<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Consistent Swift Style - TrozWare</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="Sarah Reichelt" /><meta name="description" content="Why is important to style your code? How do you decide on a style? Is there a way to enforce this style?" />

  <meta name="keywords" content="Swift, Apple, macOS, iOS, Apple Watch" />






<meta name="generator" content="Hugo 0.49" />


<link rel="canonical" href="https://troz.net/post/2018/swiftlint/" />

<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" href="/favicon.ico" />
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">




<link href="/dist/even.min.css?v=2.6.6" rel="stylesheet">


<meta property="og:title" content="Consistent Swift Style" />
<meta property="og:description" content="Why is important to style your code? How do you decide on a style? Is there a way to enforce this style?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://troz.net/post/2018/swiftlint/" /><meta property="article:published_time" content="2018-03-31T09:35:21&#43;10:00"/>
<meta property="article:modified_time" content="2018-03-31T09:35:21&#43;10:00"/>

<meta itemprop="name" content="Consistent Swift Style">
<meta itemprop="description" content="Why is important to style your code? How do you decide on a style? Is there a way to enforce this style?">


<meta itemprop="datePublished" content="2018-03-31T09:35:21&#43;10:00" />
<meta itemprop="dateModified" content="2018-03-31T09:35:21&#43;10:00" />
<meta itemprop="wordCount" content="1918">



<meta itemprop="keywords" content="swift,swiftlint,lint,style," />


    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@trozware" />
    <meta name="twitter:title" content="TrozWare" />
    <meta name="twitter:description" content="macOS, iOS and watchOS Developer" />
    <meta name="twitter:url" content="http://troz.net/" />
    <meta name="twitter:image" content="http://troz.net/icons/apple-touch-icon-152x152.png" />




<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">TrozWare</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/apps/">
        <li class="mobile-menu-item">Apps</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/contact/">
        <li class="mobile-menu-item">Contact</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">TrozWare</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/apps/">Apps</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/contact/">Contact</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Consistent Swift Style</h1>

      <div class="post-meta">
        <span class="post-time"> 31 Mar 2018 </span>
        
        <span class="more-meta"> 1918 words </span>
        <span class="more-meta"> 10 minute read </span>
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
      <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#what-is-style-in-swift">What is style in Swift?</a></li>
<li><a href="#why-is-important-to-style-your-code">Why is important to style your code?</a></li>
<li><a href="#how-do-you-decide-on-a-style">How do you decide on a style?</a></li>
<li><a href="#is-there-a-way-to-enforce-this-style-automatically">Is there a way to enforce this style automatically?</a>
<ul>
<li><a href="#installing-and-running-swiftlint">Installing and Running SwiftLint</a></li>
<li><a href="#incorporating-swiftlint-into-xcode">Incorporating SwiftLint into Xcode</a></li>
<li><a href="#configuring-swiftlint">Configuring SwiftLint</a></li>
</ul></li>
<li><a href="#what-are-the-benefits">What are the benefits?</a></li>
</ul></li>
</ul>
</nav>
  </div>
</div>

    
    <div class="post-content">
      <ul>
<li>Why is important to style your code?</li>
<li>How do you decide on a style?</li>
<li>Is there a way to enforce this style automatically?</li>
</ul>

<p></p>

<h2 id="what-is-style-in-swift">What is style in Swift?</h2>

<p>Style applies to writing in any programming language and refers to the way you structure your code.</p>

<p>For example, how to you arrange braces?</p>

<pre><code class="language-swift">if theValue &lt; 10 {
    // do one thing
} else {
    // do the other thing
}
</code></pre>

<p>or</p>

<pre><code class="language-swift">if theValue &lt; 10
{
    // do one thing
}
else
{
    // do the other thing
}
</code></pre>

<p>or anything in between?</p>

<p>Do you use camelCase or snake_case?</p>

<p>Do you always start class names with an uppercase letter?</p>

<p>And of course there is the Great Debate: tabs or spaces? And how many?</p>

<h2 id="why-is-important-to-style-your-code">Why is important to style your code?</h2>

<p>You only write code once, but you &amp; others will read it many times.</p>

<p>As I tell students, in six months time some poor sucker is going to have to read this code, and worse still, that poor sucker might be you, so make it readable.</p>

<p>There is a cognitive load involved in reading code but you can lighten that load by using consistent patterns that your brain can recognise quickly without having to re-analyse them each time.</p>

<h2 id="how-do-you-decide-on-a-style">How do you decide on a style?</h2>

<p>Do a search online for <a href="https://encrypted.google.com/search?hl=en&amp;q=Swift%20style%20guide">Swift style guide</a> and you will get numerous results, although you do have to dodge the sites dedicated to Taylor Swift&rsquo;s dress sense! I like the <a href="https://github.com/raywenderlich/swift-style-guide">Ray Wenderlich guide</a> although its emphasis is on styles that read well in print and in web pages. The <a href="https://github.com/linkedin/swift-style-guide">LinkedIn guide</a> is also good. <a href="https://github.com/github/swift-style-guide">GitHub</a> also has a style guide but it hasn&rsquo;t been updated recently. However it contains some good general advice.</p>

<p>But in the end, you have to decide your own style. The important thing then is to be consistent. I don&rsquo;t care whether you use camelCase or snake_case, tabs or spaces, but if you use a mixture your code will be harder to read, so pick a style and stick to it.</p>

<h2 id="is-there-a-way-to-enforce-this-style-automatically">Is there a way to enforce this style automatically?</h2>

<p>This is where <a href="https://github.com/realm/SwiftLint">SwiftLint</a> comes into the picture. SwiftLint is a tool that can check your code and look for style violations. While it comes with a default set of rules, you can configure these rules to suit your own style.</p>

<h3 id="installing-and-running-swiftlint">Installing and Running SwiftLint</h3>

<p>To install SwiftLint, I recommend using <a href="https://brew.sh">HomeBrew</a>. Once you have HomeBrew installed, open Terminal and type <code>brew install swiftlint</code>. You can update it any time using <code>brew upgrade swiftlint</code>.</p>

<p>You can run SwiftLint directly from the Terminal. <code>cd</code> to the folder containing your Xcode project and type <code>swiftlint</code>. For a brand new iOS project, you will probably get a result similar to this:</p>

<pre><code class="language-text">Linting Swift files in current working directory
Linting 'ViewController.swift' (1/2)
Linting 'AppDelegate.swift' (2/2)
ViewController.swift:23: warning: Vertical Whitespace Violation: Limit vertical whitespace to a single empty line. Currently 2. (vertical_whitespace)
ViewController.swift:25: warning: Trailing Newline Violation: Files should have a single trailing newline. (trailing_newline)
AppDelegate.swift:16: warning: Vertical Whitespace Violation: Limit vertical whitespace to a single empty line. Currently 2. (vertical_whitespace)
AppDelegate.swift:44: warning: Vertical Whitespace Violation: Limit vertical whitespace to a single empty line. Currently 2. (vertical_whitespace)
AppDelegate.swift:46: warning: Trailing Newline Violation: Files should have a single trailing newline. (trailing_newline)
AppDelegate.swift:17: warning: Line Length Violation: Line should be 120 characters or less: currently 144 characters (line_length)
AppDelegate.swift:23: error: Line Length Violation: Line should be 120 characters or less: currently 285 characters (line_length)
AppDelegate.swift:24: warning: Line Length Violation: Line should be 120 characters or less: currently 159 characters (line_length)
AppDelegate.swift:28: error: Line Length Violation: Line should be 120 characters or less: currently 218 characters (line_length)
AppDelegate.swift:29: warning: Line Length Violation: Line should be 120 characters or less: currently 141 characters (line_length)
AppDelegate.swift:33: warning: Line Length Violation: Line should be 120 characters or less: currently 155 characters (line_length)
AppDelegate.swift:37: warning: Line Length Violation: Line should be 120 characters or less: currently 194 characters (line_length)
AppDelegate.swift:41: warning: Line Length Violation: Line should be 120 characters or less: currently 128 characters (line_length)
Done linting! Found 13 violations, 2 serious in 2 files.
</code></pre>

<p><em>I have removed the full path that will be listed for each file just to make this fit better.</em></p>

<p>These reports show the file and line number, whether this is an error or a warning, a description of the error and the name of the SwiftLint rule that caused the warning or error.</p>

<p>You could now go through and fix each of these but there are 2 solutions to make things easier:
Try entering this in the Terminal window: <code>swiftlint autocorrect</code>.</p>

<pre><code class="language-text">Correcting Swift files in current working directory
Correcting 'ViewController.swift' (1/2)
Correcting 'AppDelegate.swift' (2/2)
ViewController.swift:22:1 Corrected Vertical Whitespace
ViewController.swift:23 Corrected Trailing Newline
AppDelegate.swift:15:1 Corrected Vertical Whitespace
AppDelegate.swift:43:1 Corrected Vertical Whitespace
AppDelegate.swift:43 Corrected Trailing Newline
Done correcting 2 files!
</code></pre>

<p>And now if you run <code>swiftlint</code> again you will only get <code>Done linting! Found 8 violations, 2 serious in 2 files.</code> and all the remaining issues are for <code>Line Length Violation</code> This shows that autocorrect cannot fix everything and while it is good on spacing, it has trouble with more complex issues. But it is still worth doing as it can do a lot of the tedious fixes that creep into Xcode projects.</p>

<h3 id="incorporating-swiftlint-into-xcode">Incorporating SwiftLint into Xcode</h3>

<p>The next thing to do to make your life easier is to add SwiftLint to your Xcode project so that it can run automatically whenever you do a build.</p>

<p>Open your project in Xcode and select the project itself at the top of the Navigator on the left. Select the target for the main app and click the Build Phases tab along the top. Click the + button at the top left of the existing build phases and choose &lsquo;New Run Script Phase&rsquo;. Expand the newly added phase and paste in the following script:</p>

<pre><code class="language-bash">if which swiftlint &gt;/dev/null; then
  swiftlint autocorrect
  swiftlint
else
  echo &quot;warning: SwiftLint not installed, download from https://github.com/realm/SwiftLint&quot;
fi
</code></pre>

<p>Your Xcode window should look something like this:</p>

<p><a href="/images/SwiftLineRunScript.png"><img src="/images/SwiftLineRunScript.png" alt="SwiftLint Run Script phase" /></a></p>

<p>If you think this looks like it is running SwiftLint twice, you are correct. The first time through it corrects what it can and the second pass reports all remaining issues. This is still faster than manually correcting the easy stuff. So now you will see any violations in the Xcode issue navigator when you do a build and you can click the entry to go directly to the code.</p>

<p><img src="/images/IssuesNavigator.png" alt="SwiftLint errors &amp; warnings in Xcode issues navigator" /></p>

<h3 id="configuring-swiftlint">Configuring SwiftLint</h3>

<p>Now you are all set to SwiftLint all your code, but how do you decide what styles SwiftLint should enforce? Go back to Terminal, make the Terminal window as wide as possible and run <code>swiftlint rules</code> which will return a table like this (click to see full-sized image):</p>

<p><a href="/images/swiftlint_rules.png"><img src="/images/swiftlint_rules.png" alt="SwiftLint Rules" /></a></p>

<p>For details on what each rule does, check out the entries in <a href="https://github.com/realm/SwiftLint/blob/master/Rules.md">Rules.md</a></p>

<p>As an example, look at the rules for line_length:</p>

<pre><code class="language-text">+------------------------------------------+--------+-------------+------------------------+-------------+---------------------+
| identifier                               | opt-in | correctable | enabled in your config | kind        | configuration       |
+------------------------------------------+--------+-------------+------------------------+-------------+---------------------+
| line_length                              | no     | no          | yes                    | metrics     | warning: 120, er... |
+------------------------------------------+--------+-------------+------------------------+-------------+---------------------+
</code></pre>

<p>And by making my Terminal window full width, I can see the configuration column contains <code>warning: 120, error: 200, ignores urls: false, ignores function declarations: false, ignores comments: false</code>.</p>

<ul>
<li>The rule name (identifier) is line_length - this is what appears in the issue navigator or Terminal.</li>
<li>It is not an opt-in rule, meaning that it is enabled by default.</li>
<li>It is not correctable by autocorrect.</li>
<li>It is enabled in this configuration.</li>
<li>And then comes the configuration:

<ul>
<li>a line of more than 120 characters will generate a warning</li>
<li>a line with more than 200 characters will generate an error and stop the build</li>
<li>this rule will not ignore URLs, function declarations or comments</li>
</ul></li>
</ul>

<p>To set your own configurations, you need to create a <code>.swiftlint.yml</code> file in the same folder as your Xcode project. The leading period makes the file invisible, so you will need to create and edit it using Terminal.</p>

<p>In the Terminal, <code>cd</code> to the folder containing your Xcode project file and run <code>touch .swiftlint.yml</code> to create the invisible file. You can edit the file in Terminal using <code>nano</code>, <code>vim</code> or whatever you prefer, but you can also open it in any text editor. I prefer to use Atom so I open the file by running this command: <code>atom .swiftlint.yml</code>.</p>

<p>The SwiftLint ReadMe has a section about <a href="https://github.com/realm/SwiftLint#configuration">configuration</a> which shows the format and the various general headings you can use, as well as how to configure an individual rule.</p>

<p>Here is my .swiftlint.yml file:</p>

<pre><code class="language-yml">disabled_rules: # rule identifiers to exclude from running
included: # paths to include during linting. `--path` is ignored if present. takes precendence over `excluded`.
excluded: # paths to ignore during linting. overridden by `included`.
  - Carthage
  - Pods
opt_in_rules:
  - closure_end_indentation
  - closure_spacing
  - contains_over_first_not_nil
  - empty_count
  - explicit_init
  - fatal_error_message
  - force_unwrapping
  - literal_expression_end_indentation
  - multiline_arguments
  - multiline_parameters
  - operator_usage_whitespace
  - overridden_super_call
  - private_outlet
  - prohibited_super_call
  - trailing_closure
  - unneeded_parentheses_in_closure_argument
function_body_length:
  - 60 # warning
  - 100 # error
- line_length:
  - 150 # warning
  - 200 # error
cyclomatic_complexity:
  ignores_case_statements: true
</code></pre>

<ul>
<li>No rules are disabled by default.</li>
<li><code>included</code> is blank which means it checks every folder&hellip;</li>
<li>&hellip; except for the ones listed in the <code>excluded</code> section.</li>
<li><code>opt-in-rules</code>: I went through the list of rules with <code>opt-in</code> equal to <code>yes</code> and enabled all I thought useful.</li>
<li><code>function_body_length</code> - the default warning length is 40 but I allow myself 60 as that fits on my screen so I can always see the entire function without scrolling.</li>
<li><code>line_length</code> - with a bigger screen, I lengthen both the warning and error lengths.</li>
<li><code>cyclomatic_complexity</code> checks for functions that are getting so complex that the compiler might run into trouble. I have this on with the default warning &amp; error limits, but I set it to ignore <code>case</code> statements as they can often trigger this without really being too complex.</li>
</ul>

<p>Now that my .swiftlint.yml file is edited, doing a build uses those settings and for a new iOS project, I am now down to 2 errors and 3 warnings, all due to long lines in AppDelegate.swift.</p>

<p>The other main way to configure SwiftLint is by disabling specific rules in my code.</p>

<p>As an example, I have an <code>enum</code> for direction:</p>

<pre><code class="language-swift">enum Direction {
  case up, down, left, right
}
</code></pre>

<p>When I build this, SwiftLint gives a warning:
<code>Identifier Name Violation: Enum element name should be between 3 and 40 characters long: 'up' (identifier_name)</code></p>

<p>This tells me that <code>up</code> is too short a word to use as an identifier according to the <code>identifier_name</code> rule. In this case, <code>up</code> is the obvious identifier to use, so I want SwiftLint to let it pass. But I don&rsquo;t want to check my configuration file, because I want it to catch other short identifier names.</p>

<p>The solution is to add this comment to my code, before the <code>case</code> line:</p>

<p><code>// swiftlint:disable next identifier_name</code></p>

<p>This tells SwiftLint to ignore the next <code>identifier_name</code> warning or error it sees and now my code builds without error.</p>

<p>Rules can also be disabled or enabled by file. Check out the <a href="https://github.com/realm/SwiftLint#disable-rules-in-code">Disable rules in code</a> section of the SwiftLint ReadMe for more details.</p>

<h2 id="what-are-the-benefits">What are the benefits?</h2>

<p>For me, SwiftLint enforces a number of good habits:</p>

<ul>
<li>Files are kept relatively short.</li>
<li>Functions are always small enough to fit on a single screen.</li>
<li>Variable names &amp; function names cannot be too short and non-descriptive.</li>
<li>Braces, indentation and white-space are always consistent.</li>
</ul>

<p>And sometimes the warnings make me think of a better way to do things.</p>
    </div>

    
    
<div class="post-copyright">
  
  <p class="copyright-item">
    <span class="item-title">Last Modified</span>
    <span class="item-content">31 Mar 2018</span>
  </p>
  
  
</div>


    
    

    <footer class="post-footer">
      <div class="post-tags">
          
          <a href="/tags/swift/">swift</a>
          
          <a href="/tags/swiftlint/">swiftlint</a>
          
          <a href="/tags/lint/">lint</a>
          
          <a href="/tags/style/">style</a>
          
        </div>

      
      <nav class="post-nav">
        
          <a class="prev" href="/post/2018/app-updates/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">App Updates</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        
          <a class="next" href="/post/2018/icon-builder-5/">
            <span class="next-text nav-default">Icon Builder 5</span>
            <span class="prev-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        
  

  
      </div>  
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:sarah@troz.net" class="iconfont icon-email" title="email"></a>
      <a href="https://stackoverflow.com/users/1082632" class="iconfont icon-stack-overflow" title="stack-overflow"></a>
      <a href="https://twitter.com/trozware" class="iconfont icon-twitter" title="twitter"></a>
      <a href="https://github.com/trozware" class="iconfont icon-github" title="github"></a>
  <a href="https://troz.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
  <a href="https://troz.net//feed.json" type="application/json" title="JSON">
      <img style="width: 30px; height: 30px; padding: 0 0 16px 10px;" src="https://jsonfeed.org/graphics/icon.png" alt="JSON">
  </a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme -
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  <span class="copyright-year">
    &copy;
    
      2012 -
    2018
    <span class="author">Sarah Reichelt</span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
<script src="/lib/highlight/highlight.pack.js?v=20171001"></script>
<script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
  
<script type="text/javascript" src="/dist/even.min.js?v=2.6.6"></script>




</body>
</html>
