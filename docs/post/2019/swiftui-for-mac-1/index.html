<!DOCTYPE html>
<html lang="en">
  <head>
    
      <title>
        SwiftUI for Mac - Part 1 ::
        TrozWare
      </title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta
  name="description"
  content="So far, nearly all the articles I have seen about SwiftUI show it being used for iOS, more particularly for iPhone. But SwiftUI works on all Apple&amp;rsquo;s platforms, and as I am primarily a Mac developer, I decided to try out a Mac app and see what happened.
"
/>
<meta
  name="keywords"
  content="[Swift Apple macOS iOS Apple Watch]"
/>
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://troz.net/post/2019/swiftui-for-mac-1/" />





<link rel="stylesheet" href="https://troz.net/assets/style.css" />

<link rel="stylesheet" href="https://troz.net/style.css" />


<link
  rel="apple-touch-icon-precomposed"
  sizes="144x144"
  href="https://troz.net/img/apple-touch-icon-144-precomposed.png"
/>
<link rel="shortcut icon" href="https://troz.net/img/favicon.png" />


<link href="https://troz.net/assets/fonts/Inter-Italic.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="https://troz.net/assets/fonts/Inter-Regular.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="https://troz.net/assets/fonts/Inter-Medium.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="https://troz.net/assets/fonts/Inter-MediumItalic.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="https://troz.net/assets/fonts/Inter-Bold.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="https://troz.net/assets/fonts/Inter-BoldItalic.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="SwiftUI for Mac - Part 1"/>
<meta name="twitter:description" content="Explorations in building a Mac app in Swift."/>



<meta property="og:title" content="SwiftUI for Mac - Part 1" />
<meta property="og:description" content="Explorations in building a Mac app in Swift." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://troz.net/post/2019/swiftui-for-mac-1/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2019-12-15T17:28:00+10:00" />
<meta property="article:modified_time" content="2019-12-15T17:28:00+10:00" />







  </head>
  <body class="dark-theme">
    <div class="container">
      <header class="header">
  <span class="header__inner">
    <a
  href="https://troz.net/"
  class="logo"
  style="text-decoration: none;"
>
  
    <span class="logo__mark"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44">
  <path fill="none" d="M15 8l14.729 14.382L15 35.367" />
</svg>
</span>
    <span class="logo__text"
      >TrozWare</span
    >
    <span class="logo__cursor"></span>
  
</a>

    <span class="header__right">
      
        <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/">Home</a></li>
        
      
        
          <li><a href="/apps/">Apps</a></li>
        
      
        
          <li><a href="/post/">Archives</a></li>
        
      
        
          <li><a href="/tags/">Tags</a></li>
        
      
        
          <li><a href="/contact/">Contact</a></li>
        
      
    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/">Home</a></li>
      
    
      
        <li><a href="/apps/">Apps</a></li>
      
    
      
        <li><a href="/post/">Archives</a></li>
      
    
      
        <li><a href="/tags/">Tags</a></li>
      
    
      
        <li><a href="/contact/">Contact</a></li>
      
    
  </ul>
</nav>

        <span class="menu-trigger">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M0 0h24v24H0z" fill="none" />
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" />
          </svg>
        </span>
      
      <span class="theme-toggle">
        <svg
  class="theme-toggler"
  width="24"
  height="24"
  viewBox="0 0 48 48"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"
  />
</svg>

      </span>
    </span>
  </span>
</header>


      <div class="content">
        

<link rel="stylesheet" href="/css/header.css" />

<div class="post">
  <h2 class="post-title">
    <a href="https://troz.net/post/2019/swiftui-for-mac-1/">SwiftUI for Mac - Part 1</a>
  </h2>
  <div class="post-meta">
    <span class="post-date">
      15 Dec 2019
    </span>
    <span class="more-meta">- 1587 words, </span>
    <span class="more-meta"> 8 minute read</span>
  </div>

  
  <span class="post-tags">
     #<a
      href="https://troz.net/tags/swift"
      >swift</a
    >&nbsp;  #<a
      href="https://troz.net/tags/swiftui"
      >swiftui</a
    >&nbsp;  #<a
      href="https://troz.net/tags/mac"
      >mac</a
    >&nbsp; 
  </span>
   

  <div class="post-content"><p>So far, nearly all the articles I have seen about SwiftUI show it being used for iOS, more particularly for iPhone.
But SwiftUI works on all Apple&rsquo;s platforms, and as I am primarily a Mac developer, I decided to try out a Mac app and see what happened.</p>
<style>
  img {
    margin: 10px auto;
  }
</style>

<h2 id="setup">Setup</h2>
<p>I opened up Xcode and created a new project selecting the macOS App template. The project opened at the usual ContentView.swift but there were a few differences in the project structure as well as one in the ContentView struct.</p>
<p><img src="/images/SwiftUI-Mac-project.png" alt="New Mac project"></p>
<p>The first thing to notice is that the default &ldquo;Hello, World!&rdquo; Text view has a frame set:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span>  .frame(maxWidth: .infinity, maxHeight: .infinity)
</span></span></code></pre></div><p>If I removed this frame modifier, the preview display in the Canvas changed so that the view was only the size of the text instead of being a standard window size. I guess an iOS device always knows what size it is, but a Mac window can be any size, so you have to be more explicit to stop SwiftUI shrinking the container view to the minimum size possible.</p>
<p>The next thing is to look at the files that are included in the project. There is no SceneDelegate.swift as you would see in an iOS project. And to my surprise, there was still a Main.storyboard file! And going to the General settings for the app target, I could see that this storyboard was selected as the Main Interface.</p>
<p>Opening it up reveals that this is where the application menu is configured. I had wondered where the menus were configured in Mac SwiftUI apps.</p>
<p><img src="/images/SwiftUI-Mac-Storyboard.png" alt="Main storyboard"></p>
<p>The AppDelegate was the next thing I looked at and here I found some of the code that I would have expected to find in a SceneDelegate. The <code>applicationDidFinishLaunching(_:)</code> method creates an instance of ContentView, creates an NSWindow and uses an NSHostingView to display the ContentView inside the window. At this stage, running the app gives me what I would expect: a fully-fledged Mac app with a window and a menu, both with all the functions you would expect in any standard Mac app.</p>
<h2 id="the-canvas">The Canvas</h2>
<p>I was not expecting the Canvas to be much use when it came to previewing a Mac app. It works so well with an iPhone app because the iPhone is tall and thin and fits neatly into one side of the code window. But a Mac view is likely to be much bigger, so it would have to be scaled down a lot to avoid talking up too much precious space in my Xcode window.</p>
<p>But it works as expected, and even scaled down, you get a good idea of the layout while still getting the live reloading that is part of what makes developing in SwiftUI so much fun.</p>
<p><img src="/images/SwiftUI-Mac-Canvas.png" alt="Canvas"></p>
<p>But here is where I got my first real surprise, with a feature that I had not seen yet in any SwiftUI tutorial or article. Click the Live Preview button and see what happens&hellip;</p>
<p><img src="/images/SwiftUI-Mac-LivePreview.png" alt="Live Preview"></p>
<p>Of course I clicked &ldquo;Bring Forward&rdquo; and there was my app running in a window called &ldquo;Xcode Preview&rdquo;. There was an app in my Dock and when I chose &ldquo;Show in Finder&rdquo;, I found that the app is buried deep in DerivedData. Positioning my windows so I could type in Xcode while watching this preview window, I saw that it instantly updated my view as I typed, just like an iPhone in the Canvas.</p>
<p>If I changed the structure of the view, the app closed and re-opened immediately with the new content. This is amazing and shows that the Xcode &amp; SwiftUI teams really thought about how to use these new features in Mac apps as well as iOS.</p>
<blockquote>
<p>In Xcode 11.3, I found that I was having trouble with the previews. They would not display and above the Canvas, I got the super helpful message &ldquo;Cannot preview in this file &mdash; SwiftUI-Mac.app may have crashed.&rdquo;. It turned out that this was a signing issue. If you go to the app target and look in the Signing and Capabilities section, check that Signing Certificate is not set to &ldquo;Sign to Run Locally&rdquo;. If it is, switch to &ldquo;Development&rdquo; and the previews will start working again.</p>
<p><img src="/images/SwiftUI-Mac-signing.png" alt="Code signing"></p>
</blockquote>
<h2 id="laying-out-the-view">Laying out the View</h2>
<p>Now that I have the project and I know how to preview it, it&rsquo;s time to work out what to display in the app. The next real app I want to work on will use a master-detail layout, so that is what I decided to try here.</p>
<p>Before worrying about the data, I decided to try populating the master view with a static list and using that to navigate to a detail view that was simply a Text view.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">ContentView</span>: View {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> body: some View {
</span></span><span style="display:flex;"><span>        NavigationView {
</span></span><span style="display:flex;"><span>             List {
</span></span><span style="display:flex;"><span>                 ForEach(<span style="color:#ae81ff">1</span> ... <span style="color:#ae81ff">10</span>, id: <span style="color:#960050;background-color:#1e0010">\</span>.<span style="color:#66d9ef">self</span>) { index <span style="color:#66d9ef">in</span>
</span></span><span style="display:flex;"><span>                     NavigationLink(destination: Text(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">\(</span>index<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)) {
</span></span><span style="display:flex;"><span>                         Text(<span style="color:#e6db74">&#34;Link </span><span style="color:#e6db74">\(</span>index<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>                     }
</span></span><span style="display:flex;"><span>                 }
</span></span><span style="display:flex;"><span>             }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>This worked, except that the left column was only about 20 pixels wide. But I was able to use the mouse to drag it wider and there were my List entries. Clicking on one did indeed show the detail I wanted, but it shrunk the window to one line high!</p>
<p>The first thing I did was to apply a <code>listStyle</code> modifier to make it show the semi-transparent Mac sidebar. This fixed the width of the sidebar. But the whole window still shrunk when I selected an item.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span>  .listStyle(SidebarListStyle())
</span></span></code></pre></div><p>I tried applying the frame modifier to the NavigationView and that made the window stay the same size, but the content still shrunk into a tiny section in the middle. It looks like I need to apply that frame modifier to the detail view as well.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span>  .frame(maxWidth: .infinity, maxHeight: .infinity)
</span></span></code></pre></div><p>And as you can see from this gif, I then had a full functional master-detail view with a collapsible and expandable semi-transparent sidebar.</p>
<p><img src="/images/SwiftUI-Mac-master-detail.gif" alt="Master detail view"></p>
<h2 id="adding-data">Adding Data</h2>
<p>After some scouting around for a free API that I could hook into, I came across <a href="https://http.cat">HTTP Cats</a> which is a site that serves up a cat image to match almost every HTTP status code.</p>
<p>This sounded ideal: I can list the codes in the master view on the left and display the image in the detail view on the right.</p>
<p>First I created a JSON file to list all the HTTP status codes so that I could put them into a List view. This was a very simple array with each entry having a code and a title:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;code&#34;</span>: <span style="color:#e6db74">&#34;100&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;Continue&#34;</span>
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;code&#34;</span>: <span style="color:#e6db74">&#34;101&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;Switching Protocols&#34;</span>
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  <span style="color:#960050;background-color:#1e0010">...</span>
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></div><p>I created an HttpStatus struct with these 2 properties and I borrowed <a href="https://www.hackingwithswift.com/example-code/system/how-to-decode-json-from-your-app-bundle-the-easy-way">Paul Hudson&rsquo;s excellent Helper Bundle extension</a> to decode the JSON file. For a first attempt, I used the numeric codes to build the list and showed the title of the selected one in the detail view. But one of the best things about SwiftUI is that it makes it so easy to configure table rows, so it is time to create a new View to do this.</p>
<p>After some experimentation, I had a TableRowView that I liked the look of, but the default sidebar width was too narrow and truncated the status code titles, so I added a frame modifier to the List to set a minimum and maximum width for the sidebar.</p>
<p><img src="/images/SwiftUI-Mac-Master.png" alt="Master view"></p>
<h2 id="outline-list">Outline List</h2>
<p>At this point I decided that it would be more useful to have a outline list with the status codes grouped by their category.</p>
<p>So I re-did the JSON file to show this, added an HttpSection struct and a SectionHeaderView and modified the data loading method and @State variable.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;headerCode&#34;</span>: <span style="color:#e6db74">&#34;1xx&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;headerText&#34;</span>: <span style="color:#e6db74">&#34;Informational&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;statuses&#34;</span>: [
</span></span><span style="display:flex;"><span>      {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;code&#34;</span>: <span style="color:#e6db74">&#34;100&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;Continue&#34;</span>
</span></span><span style="display:flex;"><span>      },
</span></span><span style="display:flex;"><span>      {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;code&#34;</span>: <span style="color:#e6db74">&#34;101&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;Switching Protocols&#34;</span>
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    ]
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;headerCode&#34;</span>: <span style="color:#e6db74">&#34;2xx&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;headerText&#34;</span>: <span style="color:#e6db74">&#34;Success&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;statuses&#34;</span>: [
</span></span><span style="display:flex;"><span>      {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;code&#34;</span>: <span style="color:#e6db74">&#34;200&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;OK&#34;</span>
</span></span><span style="display:flex;"><span>      },
</span></span></code></pre></div><p>This worked really well and I was thrilled to find that the sections automatically had Show/Hide toggles!</p>
<p><img src="/images/SwiftUI-Mac-outline.png" alt="Outline view"></p>
<h2 id="detail-view">Detail View</h2>
<p>Up until now, I had been using a standard Text view as the destination for my navigation. This is a really useful technique as you can build the interface gradually but have it work from the beginning. But now it was time to create a new view for the details.</p>
<p>I set up the view and added a method that would download the correct cat image when the view appeared but there was no image. After some digging, I realised that sand-boxed Mac apps do not allow network access by default. I went to the Signing &amp; Capabilities section of the target settings and turned on &ldquo;Outgoing Connections (Client)&rdquo;. And then I had my cat pictures.</p>
<p><img src="/images/SwiftUI-Mac-detail.png" alt="Detail view"></p>
<p>It really should have a loading image to display while the cat image is being downloaded, but to my disappointment, I found that the SF Symbols are not available to a Mac app! But I added a Text view to say &ldquo;Loading&hellip;&rdquo;.</p>
<p>Now that I have a functioning Mac app with a Master-Detail view, the next thing is to explore some more of the challenges that will need to be solved before I can write a Mac app completely using SwiftUI.</p>
<p>If you want to check out the project at this stage, here is a link to the <a href="https://github.com/trozware/swiftui-mac/tree/8ebeb615db81f9d7b6489a1920ebb08d07131ebb">relevant GitHub commit</a>. Or if you would prefer, here is a link to the <a href="https://github.com/trozware/swiftui-mac">final version</a> of the project.</p>
<hr>
<p>In <a href="/post/2019/swiftui-for-mac-2/">part 2 of this series</a>, I will look into:</p>
<ul>
<li>how to interact with the menus</li>
<li>how to open a secondary window</li>
<li>more user interface controls</li>
<li>how to pass data around between windows</li>
</ul></div>
  
  <div class="pagination">
    <div class="pagination__title">
      <span class="pagination__title-h">Read other posts</span>
      <hr />
    </div>
    <div class="pagination__buttons">
      
      <a class="btn next" href="https://troz.net/post/2019/swiftui-for-mac-2/"
        >← SwiftUI for Mac - Part 2</a
      >
       
      <a class="btn previous" href="https://troz.net/post/2019/swiftui_first-thoughts/"
        >SwiftUI First Thoughts →</a
      >
      
    </div>
  </div>
  
</div>

      </div>

      
        <link rel="stylesheet" href="/css/footer.css" />

<footer class="footer">
  <div class="footer__inner">
    <div class="social_footer">
      <a id="email-Link" class="mailtoui" href="mailto:sarah@troz.net"
        ><img src="/icons/envelope.svg"
      /></a>
      
      <a rel="me" href="https://mastodon.social/@troz"
        ><img src="/icons/mastodon.png"
      /></a>

      <a href="https://linktr.ee/trozware"><img src="/icons/tree.svg" /></a>

      <a href="https://github.com/trozware"><img src="/icons/github.svg" /></a>

      <a href="https://stackoverflow.com/users/1082632"
        ><img src="/icons/stack-overflow.svg"
      /></a>

      <a href="https://troz.net/index.xml"><img src="/icons/rss.svg" /></a>
      <a href="https://troz.net/feed.json"><img src="/icons/json.png" /></a>

      <a href="https://dev.to/trozware">
        <img
          src="/icons/dev-badge.svg"
          alt="TrozWare's DEV Profile"
          style="height: 37px; margin-top: -3px"
          height="40"
          width="40"
        />
      </a>

      <a href="https://ko-fi.com/H2H3BU7SI" target="_blank"
        ><img
          height="36"
          style="border: 0px; height: 36px; width: unset"
          src="https://cdn.ko-fi.com/cdn/kofi1.png?v=3"
          border="0"
          alt="Buy Me a Coffee at ko-fi.com"
      /></a>
    </div>
  </div>

  <div class="footer__inner">
    <div class="copyright">
      
      <span>© 2012 - 2022 Sarah Reichelt</span>
      
      <span
        ><a href="http://gohugo.io">Hugo</a> theme created by
        <a href="https://twitter.com/panr">panr</a> 2018</span
      >
    </div>
  </div>
</footer>

<script src="/assets/main.js"></script>
<script src="/assets/prism.js"></script>


<script src="https://cdn.jsdelivr.net/npm/mailtoui@latest/dist/mailtoui-min.js"></script>


<script src="https://polyfill.io/v2/polyfill.min.js?features=IntersectionObserver"></script>
<script src="/quicklink.js"></script>

<script>
  window.addEventListener('load', () => {
    quicklink()
  })
</script>


      
    </div>

    
  </body>
</html>
