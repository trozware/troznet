<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>Apple Watch App - Rejected, then Accepted :: TrozWare</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="description" content="" />
<meta name="keywords" content="[Swift Apple macOS iOS Apple Watch]" />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://troz.net/post/2015/apple-watch-rejected-then-accepted/" />



<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Source+Code+Pro' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="/assets/style.css">

  <link rel="stylesheet" href="/css/header.css">
<style>
  menu__inner li:last-of-type{
    margin:0 20px
  }
</style>


<link rel="apple-touch-icon-precomposed" sizes="144x144" href="icons/apple-touch-icon-144-precomposed.png">
<link rel="shortcut icon" href="icons/favicon-96x96.png">



    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@trozware" />
    <meta name="twitter:title" content="TrozWare" />
    <meta name="twitter:description" content="macOS, iOS and watchOS Developer" />
    <meta name="twitter:url" content="https://troz.net/" />
    <meta name="twitter:image" content="https://troz.net/icons/apple-touch-icon-152x152.png" />






<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Apple Watch App - Rejected, then Accepted :: TrozWare — ">
<meta property="og:description" content="" />
<meta property="og:url" content="https://troz.net/post/2015/apple-watch-rejected-then-accepted/" />
<meta property="og:site_name" content="Apple Watch App - Rejected, then Accepted" />
<meta property="og:image" content="https://troz.net/img/default.jpg">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">


<meta property="article:published_time" content="2015-04-11 00:00:00 &#43;0000 UTC" />









</head>
<body class="dark-theme">
<div class="container">
  <header class="header">
  <span class="header__inner">
    <a href="https://troz.net/" style="text-decoration: none;">
  <div class="logo">
    
      <span class="logo__mark">></span>
      <span class="logo__text">TrozWare</span>
      <span class="logo__cursor"></span>
    
  </div>
</a>

    <span class="header__right">
      
        <nav class="menu">
  <ul class="menu__inner">
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/apps/">Apps</a></li>
    
      <li><a href="/post/">Archives</a></li>
    
      <li><a href="/tags/">Tags</a></li>
    
      <li><a href="/contact/">Contact</a></li>
    
  </ul>
</nav>
        <span class="menu-trigger">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M0 0h24v24H0z" fill="none"/>
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
          </svg>        
        </span>
      
      <span class="theme-toggle">
        <svg class="bulb-off" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect width="24" height="24"/>
  <path d="M4 19C4 19.55 4.45 20 5 20H9C9.55 20 10 19.55 10 19V18H4V19ZM7 0C3.14 0 0 3.14 0 7C0 9.38 1.19 11.47 3 12.74V15C3 15.55 3.45 16 4 16H10C10.55 16 11 15.55 11 15V12.74C12.81 11.47 14 9.38 14 7C14 3.14 10.86 0 7 0ZM9.85 11.1L9 11.7V14H5V11.7L4.15 11.1C2.8 10.16 2 8.63 2 7C2 4.24 4.24 2 7 2C9.76 2 12 4.24 12 7C12 8.63 11.2 10.16 9.85 11.1Z" transform="translate(5 2)" fill="black"/>
</svg>

<svg class="bulb-on" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect width="24" height="24"/>
  <path class="bulb-on__base" d="M4 19C4 19.55 4.45 20 5 20H9C9.55 20 10 19.55 10 19V18H4V19Z" transform="translate(5 2)" fill="#a9a9b3" />
  <path class="bulb-on__glass" d="M0 7C0 3.14 3.14 0 7 0C10.86 0 14 3.14 14 7C14 9.38 12.81 11.47 11 12.74V15C11 15.55 10.55 16 10 16H4C3.45 16 3 15.55 3 15V12.74C1.19 11.47 0 9.38 0 7Z" transform="translate(5 2)" fill="#a9a9b3" />
</svg>
  
      </span>
    </span>
  </span>
</header>


  <div class="content">
    
<div class="post">
  <h2 class="post-title"><a href="https://troz.net/post/2015/apple-watch-rejected-then-accepted/">Apple Watch App - Rejected, then Accepted</a></h2>
  <div class="post-meta">
    <span class="post-date">
      11 Apr 2015
    </span>
    <span class="more-meta"> 699 words, </span>
    <span class="more-meta"> 4 minute read</span>
  </div>

  
  <span class="post-tags">
    
    #<a href="https://troz.net/tags/apple-watch">apple watch</a>&nbsp;
    
    #<a href="https://troz.net/tags/watch">watch</a>&nbsp;
    
    #<a href="https://troz.net/tags/golf">golf</a>&nbsp;
    
  </span>
  

  

  <div class="post-content">
    <p>As described in a <a href="/post/2015-04-02-my-first-apple-watch-app/">previous post</a>, about 9 days ago I submitted my first
Apple Watch app for review. The app was an extension of my golf scoring app:
<a href="/19th-hole/">The 19th Hole</a>.</p>

<p>I expected that App Store review times would go up dramatically once Apple had
allowed developers to submit watch apps, but this proved to be incorrect. Three
days after submission, the app was marked as &ldquo;In Review&rdquo;. This seemed to happen
last thing on a Saturday, so there was no further action for two days, at which
point the app was rejected, with the following details (sic):</p>

<blockquote>
<p>We noticed an issue in your app that contributes to a lower quality user
experience than Apple users expect. Specifically,</p>

<ul>
<li>while using the Apple Watch app with the phone app is in the background mode
(display off), the new data entry on the Watch App does not refresh
accordingly until the phone app is turn back on.</li>
</ul>
</blockquote>

<p>So it appeared that the communication between the watch and the phone, which
worked perfectly on the simulators, did not work at all on the actual devices.
This is the problem with developing for a device that you do not have.</p>

<hr />

<p>After some research, it appears that the problem is with the phone not operating
correctly in background mode. Apple provides for communications from the watch
to the phone. The phone can respond, but only the watch can initiate a
connection. I guess this makes sense since every watch will be paired with a
phone but the reverse will not always be true.</p>

<p>To talk to the phone, the watch uses this function:</p>

<pre><code class="language-swift">func openParentApplication(_ userInfo: [NSObject : AnyObject],
  reply reply: (([NSObject : AnyObject]!, NSError!) -&gt; Void)?) -&gt; Bool
</code></pre>

<p>The phone listens for messages in this event handler:</p>

<pre><code class="language-swift">func application(_ application: UIApplication,
  handleWatchKitExtensionRequest userInfo: [NSObject : AnyObject]?,
  reply reply: (([NSObject : AnyObject]!) -&gt; Void)!)
</code></pre>

<p>The name of the WatchKit function is slightly misleading as it does open the
parent application, but only in the background. Then the parent app is supposed
to do whatever tasks are called for in the handleWatchKitExtensionRequest
function, and return any required data using the supplied reply() function.</p>

<p>So far, so good, and it all worked perfectly in the simulator. But it appears
that although this call wakes the iPhone app, it does not stay awake long enough
to do anything. Many thanks to Brian at <a href="http://www.fiveminutewatchkit.com/blog/2015/3/11/one-weird-trick-to-fix-openparentapplicationreply">Five Minute WatchKit</a> who pointed
out the way to make this work. Firstly, you create a dummy background task
guaranteed to keep the iPhone app awake for 2 seconds. Then you perform your own
work, using another background task. When that is finished, the phone can send
the response and end the real background task. The dummy task will time out by
itself after 2 seconds.</p>

<p>For my needs, I could probably reduce the 2 seconds considerably, but since this
is a problem I am unable to test, I decided just to go with Brian&rsquo;s suggestion
as it is.</p>

<p>I re-submitted the app the same day it was rejected, and two days later it was
back in review. The review process took longer than usual, but about 30 hours
later, the app was marked &ldquo;Pending an Apple Release&rdquo;. I assumed this meant that
Apple would release all WatchKit apps on 24th April when the watches shipped,
but the following day the app was reported as &ldquo;Pending Developer Release&rdquo; (I had
set it to release manually). Now I have told iTunesConnect to release the app
and it is &ldquo;Processing for App Store&rdquo;.</p>

<hr />

<p>On a related note, the start of pre-ordering for the Apple Watch was scheduled
for a very civilised 5:01 pm here in eastern Australia. I had three watches all
lined up in my Favorites in the Apple Store app, ready for ordering. When the
store became live (at about 5:03 pm), I could not work out how to order all
three in a single operation, so had to place these orders one at a time. I got
the first two ordered for the soonest possible delivery, but by the time I got
to the third (about 3 minutes later), I had missed out and it will ship in 4 to
6 weeks!</p>

  </div>
  
  <div class="pagination">
    <div class="pagination__title">
      <span class="pagination__title-h">Read other posts</span>
      <hr />
    </div>
    <div class="pagination__buttons">
      
      <a class="btn next" href="https://troz.net/post/2015/time-in-words-4.0/">← Time In Words 4.0</a>
      
      
      <a class="btn previous" href="https://troz.net/post/2015/my-first-apple-watch-app/">My First Apple Watch App →</a>
      
    </div>
  </div>
  
</div>

  </div>

  
    <link rel="stylesheet" href="/css/footer.css">

<footer class="footer">
  <div class="footer__inner">
    <div class="social_footer">
      <a id="email-Link" class="mailtoui" href="mailto:sarah@troz.net"><img src="/icons/envelope.svg" /></a>
      <a href="https://stackoverflow.com/users/1082632"><img src="/icons/stack-overflow.svg" /></a>
      <a href="https://twitter.com/trozware"><img src="/icons/twitter.svg" /></a>
      <a href="https://github.com/trozware"><img src="/icons/github.svg" /></a>
      <a href="https://troz.net/index.xml"><img src="/icons/rss.svg" /></a>
      <a href="https://troz.net//feed.json"><img src="/icons/json.png" /></a>
    </div>
  </div>

  <div class="footer__inner">
    <div class="copyright">
      
      <span>© 2012 - 2019 Sarah Reichelt</span>
      
      <span><a href="http://gohugo.io">Hugo</a> theme created by <a href="https://twitter.com/panr">panr</a> 2018</span>
    </div>
  </div>
</footer>

<script src="/assets/main.js"></script>
<script src="/assets/prism.js"></script>

 
<script src="https://cdn.jsdelivr.net/npm/mailtoui@latest/dist/mailtoui-min.js"></script>


<script src="https://polyfill.io/v2/polyfill.min.js?features=IntersectionObserver"></script>
<script src="/quicklink.js"></script>

<script>
  window.addEventListener('load', () => {
    quicklink();
  });
</script>

  
</div>

</body>
</html>
