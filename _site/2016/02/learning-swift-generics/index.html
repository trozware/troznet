<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Learning Swift - Generics &#8211; TrozWare</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="macOS, iOS &amp;amp; watchOS Developer">
    <meta name="author" content="Sarah Reichelt">
    <meta name="keywords" content="">
    <link rel="canonical" href="http://localhost:4000/2016/02/learning-swift-generics/">
    <link rel="alternate" type="application/rss+xml" title="RSS Feed for TrozWare" href="/feed.xml" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/pixyll.css" type="text/css">

    <!-- Fonts -->
    <link href='//fonts.googleapis.com/css?family=Merriweather:900,900italic,300,300italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Lato:900,300' rel='stylesheet' type='text/css'>
    
      <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">
    

    <!-- MathJax -->
    

    <!-- Verifications -->
    

    <!-- Open Graph -->
    <!-- From: https://github.com/mmistakes/hpstr-jekyll-theme/blob/master/_includes/head.html -->
    <meta property="og:locale" content="en_US">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Learning Swift - Generics">
    <meta property="og:description" content="macOS, iOS &amp;amp; watchOS Developer">
    <meta property="og:url" content="http://localhost:4000/2016/02/learning-swift-generics/">
    <meta property="og:site_name" content="TrozWare">

    <!-- Twitter Card -->
    
        <meta name="twitter:card" content="summary" />
        
            <meta name="twitter:site" content="@trozware" />
        
        <meta name="twitter:title" content="Learning Swift - Generics" />
        <meta name="twitter:description" content="macOS, iOS &amp; watchOS Developer" />
        <meta name="twitter:url" content="http://localhost:4000/2016/02/learning-swift-generics/" />
        <meta name="twitter:image" content="http://localhost:4000/icons/apple-touch-icon-152x152.png" />
    

    <!-- Icons -->
    <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" href="/icons/favicon-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/icons/favicon-160x160.png" sizes="160x160">
    <link rel="icon" type="image/png" href="/icons/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/icons/favicon-16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="/icons/favicon-32x32.png" sizes="32x32">

    
    <script type="text/javascript">
       (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
       (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
       m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
       })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
       ga('create', 'UA-5511808-2', 'auto');
       ga('send', 'pageview');
    </script>
    
</head>

<body class="site">

	

  <div class="site-wrap">
    <header class="site-header px2 px-responsive">
  <div class="mt2 wrap">
    <div class="measure">
      <a href="http://localhost:4000" class="site-title">TrozWare</a>
      <nav class="site-nav">
        <a href="/applications/">Apps</a>
<a href="/tags/">Tags</a>
<a href="/archives/">Archives</a>
<a href="/contact/">Contact</a>

      </nav>
      <div class="clearfix"></div>
      
        <div class="social-icons">
  <div class="social-icons-right">
    
    
    
      <a class="fa fa-stack-overflow" href="https://stackoverflow.com/users/1082632"></a>
    
    <a class="fa fa-rss" href="/feed.xml"></a>
    
      <a class="fa fa-twitter" href="https://twitter.com/trozware"></a>
    
    
    
    
    
      <a class="fa fa-envelope" href="mailto:sarah@troz.net"></a>
    
    
    
    
  </div>
  <div class="right">
    
    
    
  </div>
</div>
<div class="clearfix"></div>

      
    </div>
  </div>
</header>


    <div class="post p2 p-responsive wrap" role="main">
      <div class="measure">
        


<div class="post-header mb2">
  <h1>Learning Swift - Generics</h1>
  <span class="post-meta">29 Feb 2016</span><br>
  
  <span class="post-meta small">
  
    5 minute read
  
  </span>
</div>

<article class="post-content">
  <p>One of the nice things about Swift is how clean your code looks. A lot of the weird characters that pepper the code of other languages has been eliminated: No more semi-colons, asterisks etc.</p>

<p>But then you are reading somebody else’s code and you find these angle brackets all over the place and they don’t seem to make sense.</p>

<p>What does this mean?</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">func</span> <span class="n">mid</span><span class="o">&lt;</span><span class="kt">T</span><span class="p">:</span> <span class="kt">Comparable</span><span class="o">&gt;</span><span class="p">(</span><span class="nv">array</span><span class="p">:</span> <span class="p">[</span><span class="kt">T</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kt">T</span></code></pre></figure>

<p>It looks like it is a function to find the middle element in an array, but what is <code class="highlighter-rouge">&lt;T: Comparable&gt;</code> or <code class="highlighter-rouge">[T]</code> or even just <code class="highlighter-rouge">T</code>? They are describing Generic data types.</p>

<p>Using the dictionary, I find the following definition for <code class="highlighter-rouge">generic</code>:</p>

<blockquote>
  <p>characteristic of or relating to a class or group of things; not specific.</p>
</blockquote>

<p>And that really provides quite a good definition for Swift’s generics too. They allow you to assign a non-specific data type to a function so that function can be used for many different data types.</p>

<hr />

<p>But enough of the theory: by far the best way to understand generics is to encounter the problem they are meant to solve and then to solve it.</p>

<p>The other day I was processing data to feed to a charting library. I ended up with an array of CGFloats, but there were too many of them, so I wrote a function to give me the last x elements of an array of CGFloats:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">func</span> <span class="nf">endOf</span><span class="p">(</span><span class="nv">array</span><span class="p">:</span> <span class="p">[</span><span class="kt">CGFloat</span><span class="p">],</span> <span class="nv">numberOfElementsToInclude</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="kt">CGFloat</span><span class="p">]</span> <span class="p">{</span>
    <span class="k">if</span> <span class="n">numberOfElementsToInclude</span> <span class="o">&gt;</span> <span class="n">array</span><span class="o">.</span><span class="n">count</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">array</span>
    <span class="p">}</span>

    <span class="k">let</span> <span class="nv">startingElement</span> <span class="o">=</span> <span class="n">array</span><span class="o">.</span><span class="n">count</span> <span class="o">-</span> <span class="n">numberOfElementsToInclude</span>
    <span class="k">let</span> <span class="nv">endOfArray</span> <span class="o">=</span> <span class="kt">Array</span><span class="p">(</span><span class="n">array</span><span class="p">[</span><span class="n">startingElement</span> <span class="o">..&lt;</span> <span class="n">array</span><span class="o">.</span><span class="n">count</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">endOfArray</span>
<span class="p">}</span>

<span class="k">let</span> <span class="nv">largeArray</span><span class="p">:</span> <span class="p">[</span><span class="kt">CGFloat</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
    <span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">,</span> <span class="mf">7.0</span><span class="p">,</span> <span class="mf">8.0</span><span class="p">,</span> <span class="mf">9.0</span><span class="p">,</span> <span class="mf">10.0</span>
<span class="p">]</span>
<span class="k">let</span> <span class="nv">smallArray</span> <span class="o">=</span> <span class="nf">endOf</span><span class="p">(</span><span class="nv">array</span><span class="p">:</span> <span class="n">largeArray</span><span class="p">,</span> <span class="nv">numberOfElementsToInclude</span><span class="p">:</span> <span class="mi">3</span><span class="p">)</span>
<span class="c1">// smallArray now equals [8.0, 9.0, 10.0]</span></code></pre></figure>

<p>OK, so <code class="highlighter-rouge">largeArray</code> isn’t actually the largest array you have ever seen, but it works for demo purposes. In my code, I had over 20,000 entries in the large array and only wanted the last 5,000.</p>

<p>I was completely happy with that until I found another data source where the data was an array of Ints. Still perfectly chartable using my charting library, but I could not get the end of the array using my nice function. First thought was to replicate the function:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">func</span> <span class="nf">endOf</span><span class="p">(</span><span class="nv">array</span><span class="p">:</span> <span class="p">[</span><span class="kt">Int</span><span class="p">],</span> <span class="nv">numberOfElementsToInclude</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="kt">Int</span><span class="p">]</span> <span class="p">{</span>
    <span class="k">if</span> <span class="n">numberOfElementsToInclude</span> <span class="o">&gt;</span> <span class="n">array</span><span class="o">.</span><span class="n">count</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">array</span>
    <span class="p">}</span>

    <span class="k">let</span> <span class="nv">startingElement</span> <span class="o">=</span> <span class="n">array</span><span class="o">.</span><span class="n">count</span> <span class="o">-</span> <span class="n">numberOfElementsToInclude</span>
    <span class="k">let</span> <span class="nv">endOfArray</span> <span class="o">=</span> <span class="kt">Array</span><span class="p">(</span><span class="n">array</span><span class="p">[</span><span class="n">startingElement</span> <span class="o">..&lt;</span> <span class="n">array</span><span class="o">.</span><span class="n">count</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">endOfArray</span>
<span class="p">}</span>

<span class="k">let</span> <span class="nv">largeArrayInt</span> <span class="o">=</span> <span class="p">[</span> 	<span class="c1">// type inferred to be Int</span>
    <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span>
<span class="p">]</span>
<span class="k">let</span> <span class="nv">smallArrayInt</span> <span class="o">=</span> <span class="nf">endOf</span><span class="p">(</span><span class="nv">array</span><span class="p">:</span> <span class="n">largeArrayInt</span><span class="p">,</span> <span class="nv">numberOfElementsToInclude</span><span class="p">:</span> <span class="mi">7</span><span class="p">)</span>
<span class="c1">// smallArrayInt now equals [4, 5, 6, 7, 8, 9, 10]</span></code></pre></figure>

<p>A quick glance will reveal that the declaration line was the only thing that changed. I didn’t have to give the function a new name because the compiler worked out which of the two functions to use based on the types supplied. So all I was doing was replacing <code class="highlighter-rouge">CGFloat</code> with <code class="highlighter-rouge">Int</code> in two places (the <code class="highlighter-rouge">numberOfElementsToInclude</code> parameter remains an <code class="highlighter-rouge">Int</code> in both cases).</p>

<p><strong>As soon as you find yourself replicating code and only changing the types of the data, that is a sign that you need to use generics.</strong></p>

<p>For my first attempt at creating a generic function, all I did was replace the word <code class="highlighter-rouge">CGFloat</code> with <code class="highlighter-rouge">T</code> where <code class="highlighter-rouge">T</code> indicates some type that will be specified when the function is called. The convention is to use single letters for generic types: <code class="highlighter-rouge">T</code> for Type, <code class="highlighter-rouge">A</code> for AnyObject, <code class="highlighter-rouge">Z</code> because you feel like it. The choice is up to you.</p>

<p>That produced this error:</p>

<p><img src="/images/Generics_error.png" alt="Generics error" /></p>

<p><code class="highlighter-rouge">Use of undeclared type 'T'</code>. Well that seems fair enough… how is the compiler supposed to know what a <code class="highlighter-rouge">T</code> is?</p>

<p>It turns out that this is where the angle brackets come into play. You have to warn the compiler that this function is going to get a generic type and that the <code class="highlighter-rouge">T</code> is only a placeholder, not a real type. So this version compiles and works - notice the <code class="highlighter-rouge">&lt;T&gt;</code> between the function name and the opening bracket:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">func</span> <span class="n">endOf</span><span class="o">&lt;</span><span class="kt">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nv">array</span><span class="p">:</span> <span class="p">[</span><span class="kt">T</span><span class="p">],</span> <span class="nv">numberOfElementsToInclude</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="kt">T</span><span class="p">]</span> <span class="p">{</span>
    <span class="k">if</span> <span class="n">numberOfElementsToInclude</span> <span class="o">&gt;</span> <span class="n">array</span><span class="o">.</span><span class="n">count</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">array</span>
    <span class="p">}</span>

    <span class="k">let</span> <span class="nv">startingElement</span> <span class="o">=</span> <span class="n">array</span><span class="o">.</span><span class="n">count</span> <span class="o">-</span> <span class="n">numberOfElementsToInclude</span>
    <span class="k">let</span> <span class="nv">endOfArray</span> <span class="o">=</span> <span class="kt">Array</span><span class="p">(</span><span class="n">array</span><span class="p">[</span><span class="n">startingElement</span> <span class="o">..&lt;</span> <span class="n">array</span><span class="o">.</span><span class="n">count</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">endOfArray</span>
<span class="p">}</span></code></pre></figure>

<p>Now I have no code duplication and if I ever get another data set that uses a different object type, my function will still work.</p>

<hr />

<p>Now we know to use generics instead of replicating code that operates in the same way on different data types.</p>

<p>And we know how to construct a generic function.</p>

<p>Using it is identical to using the two functions I had before:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">let</span> <span class="nv">largeArray</span><span class="p">:</span> <span class="p">[</span><span class="kt">CGFloat</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
    <span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">,</span> <span class="mf">7.0</span><span class="p">,</span> <span class="mf">8.0</span><span class="p">,</span> <span class="mf">9.0</span><span class="p">,</span> <span class="mf">10.0</span>
<span class="p">]</span>
<span class="k">let</span> <span class="nv">smallArray</span> <span class="o">=</span> <span class="nf">endOf</span><span class="p">(</span><span class="nv">array</span><span class="p">:</span> <span class="n">largeArray</span><span class="p">,</span> <span class="nv">numberOfElementsToInclude</span><span class="p">:</span> <span class="mi">3</span><span class="p">)</span>

<span class="k">let</span> <span class="nv">largeArrayInt</span> <span class="o">=</span> <span class="p">[</span> 	<span class="c1">// type inferred to be Int</span>
    <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span>
<span class="p">]</span>
<span class="k">let</span> <span class="nv">smallArrayInt</span> <span class="o">=</span> <span class="nf">endOf</span><span class="p">(</span><span class="nv">array</span><span class="p">:</span> <span class="n">largeArrayInt</span><span class="p">,</span> <span class="nv">numberOfElementsToInclude</span><span class="p">:</span> <span class="mi">7</span><span class="p">)</span></code></pre></figure>

<p>You do not have to specify what <code class="highlighter-rouge">T</code> is when calling the function, that will be inferred from the supplied data.</p>

<hr />

<p>Moving on into more advanced use cases, we have two things to consider:</p>

<ol>
  <li>Functions where the generic parameters must conform to a protocol.</li>
  <li>Functions that take generic parameters of different types.</li>
</ol>

<p>The example function I started with (not mine but I forget where I got it… If it is yours, thanks you very much) used:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">func</span> <span class="n">mid</span> <span class="o">&lt;</span><span class="kt">T</span><span class="p">:</span> <span class="kt">Comparable</span><span class="o">&gt;</span> <span class="p">(</span><span class="nv">array</span><span class="p">:</span> <span class="p">[</span><span class="kt">T</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kt">T</span></code></pre></figure>

<p>Instead of specifying the type as completely generic, it specified that it must conform to the Comparable protocol.
This is because the function body used a <code class="highlighter-rouge">sort()</code> function so the generic function needed to be sure that the elements in the array could be compared. This technique can also be used to restrict the parameter types to sub-classes of a certain class.</p>

<p>For a function with more than one generic data type, you need to use more than one placeholder letter:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">func</span> <span class="n">genericWithTwoDifferentTypes</span><span class="o">&lt;</span><span class="kt">T</span><span class="p">,</span> <span class="kt">U</span><span class="o">&gt;</span><span class="p">(</span><span class="nv">param1</span><span class="p">:</span> <span class="kt">T</span><span class="p">,</span> <span class="nv">param2</span><span class="p">:</span> <span class="kt">U</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span></code></pre></figure>

<p>And in exactly the same way, both <code class="highlighter-rouge">T</code> and <code class="highlighter-rouge">U</code> can be set to conform to a protocol or be members of a certain super-class.</p>

<hr />

<p>Hopefully this has taken some of the mystery out of generics, but if you have any questions, please get in touch using the <a href="/contact/">Contact page</a>, comment below or contact me via Twitter: <a href="https://twitter.com/trozware">@trozware</a>.</p>


</article>

<br>
<!-- <a href="/tags/">Tags</a>: swift and learning swift -->
Tags: 

    <a href="/tags/#swift">swift</a>&nbsp;&nbsp;

    <a href="/tags/#learning swift">learning swift</a>&nbsp;&nbsp;

<hr>






  <div id="disqus_thread"></div>
  <script type="text/javascript">
    var disqus_shortname  = 'trozware';
    var disqus_identifier = '/2016/02/learning-swift-generics';
    var disqus_title      = 'Learning Swift - Generics';

    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>






      </div>
    </div>
  </div>

  <footer class="center">
  <div class="measure">
    <small>
      Theme crafted with &lt;3 by <a href="http://johnotander.com">John Otander</a> (<a href="https://twitter.com/4lpine">@4lpine</a>).<br>
      &lt;/&gt; available on <a href="https://github.com/johnotander/pixyll">Github</a>.
    </small>
  </div>
</footer>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-5511808-2', 'auto');
ga('send', 'pageview');

</script>


</body>
</html>
